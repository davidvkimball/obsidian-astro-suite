/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/utils/mdx-frontmatter.ts
function isMdxFile(file) {
  return file.extension === "mdx";
}
function parseMdxFrontmatter(content) {
  const frontmatterRegex = /^---\n([\s\S]*?)\n---\n/;
  const match = content.match(frontmatterRegex);
  if (!match) {
    return {
      frontmatter: {},
      body: content
    };
  }
  const frontmatterText = match[1];
  const bodyContent = content.slice(match[0].length);
  try {
    const parsed = (0, import_obsidian5.parseYaml)(frontmatterText);
    const frontmatter = parsed && typeof parsed === "object" ? parsed : {};
    return {
      frontmatter,
      body: bodyContent
    };
  } catch (e) {
    console.error("Error parsing MDX frontmatter:", e);
    return {
      frontmatter: {},
      body: bodyContent
    };
  }
}
async function readMdxFrontmatter(app, file) {
  if (!isMdxFile(file)) {
    return null;
  }
  try {
    const content = await app.vault.read(file);
    const parsed = parseMdxFrontmatter(content);
    return parsed ? parsed.frontmatter : null;
  } catch (e) {
    console.error(`Error reading MDX frontmatter from ${file.path}:`, e);
    return null;
  }
}
async function processMdxFrontMatter(app, file, callback) {
  if (!isMdxFile(file)) {
    throw new Error(`File ${file.path} is not an MDX file`);
  }
  try {
    const content = await app.vault.read(file);
    const parsed = parseMdxFrontmatter(content);
    if (!parsed) {
      throw new Error("Failed to parse existing frontmatter");
    }
    const frontmatter = { ...parsed.frontmatter };
    callback(frontmatter);
    const newFrontmatterText = (0, import_obsidian5.stringifyYaml)(frontmatter).trim();
    const newContent = `---
${newFrontmatterText}
---
${parsed.body}`;
    await app.vault.modify(file, newContent);
  } catch (e) {
    console.error(`Error processing MDX frontmatter for ${file.path}:`, e);
    throw e;
  }
}
var import_obsidian5;
var init_mdx_frontmatter = __esm({
  "src/utils/mdx-frontmatter.ts"() {
    "use strict";
    import_obsidian5 = require("obsidian");
  }
});

// src/utils/frontmatter-helper.ts
async function getFileFrontmatter(app, file) {
  if (isMdxFile(file)) {
    return await readMdxFrontmatter(app, file);
  } else {
    const metadata = app.metadataCache.getFileCache(file);
    return (metadata == null ? void 0 : metadata.frontmatter) || null;
  }
}
async function processFileFrontMatter(app, file, callback) {
  if (isMdxFile(file)) {
    await processMdxFrontMatter(app, file, callback);
  } else {
    await app.fileManager.processFrontMatter(file, callback);
  }
}
var init_frontmatter_helper = __esm({
  "src/utils/frontmatter-helper.ts"() {
    "use strict";
    init_mdx_frontmatter();
  }
});

// src/shared/settings-schema.ts
var settings_schema_exports = {};
__export(settings_schema_exports, {
  getCMSViewOptions: () => getCMSViewOptions,
  readCMSSettings: () => readCMSSettings
});
function readCMSSettings(config, pluginSettings) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u;
  const getConfig = (key) => {
    var _a2;
    return (_a2 = config == null ? void 0 : config.get) == null ? void 0 : _a2.call(config, key);
  };
  return {
    titleProperty: getConfig("titleProperty") || "",
    descriptionProperty: getConfig("descriptionProperty") || "",
    imageProperty: getConfig("imageProperty") || "",
    showTitle: true,
    // Always show title, defaulting to file name if no property set
    showDate: (_a = getConfig("showDate")) != null ? _a : false,
    dateProperty: getConfig("dateProperty") || "",
    dateIncludeTime: (_b = getConfig("dateIncludeTime")) != null ? _b : false,
    showTextPreview: (_c = getConfig("showTextPreview")) != null ? _c : true,
    fallbackToContent: (_d = getConfig("fallbackToContent")) != null ? _d : true,
    truncatePreviewProperty: (_e = getConfig("truncatePreviewProperty")) != null ? _e : false,
    fallbackToEmbeds: (() => {
      const value = getConfig("fallbackToEmbeds");
      if (value === "always" || value === "if-empty" || value === "never") {
        return value;
      }
      return value === false ? "never" : "if-empty";
    })(),
    propertyDisplay1: getConfig("propertyDisplay1") || "",
    propertyDisplay2: getConfig("propertyDisplay2") || "",
    propertyDisplay3: getConfig("propertyDisplay3") || "",
    propertyDisplay4: getConfig("propertyDisplay4") || "",
    propertyDisplay5: getConfig("propertyDisplay5") || "",
    propertyDisplay6: getConfig("propertyDisplay6") || "",
    propertyDisplay7: getConfig("propertyDisplay7") || "",
    propertyDisplay8: getConfig("propertyDisplay8") || "",
    propertyDisplay9: getConfig("propertyDisplay9") || "",
    propertyDisplay10: getConfig("propertyDisplay10") || "",
    propertyDisplay11: getConfig("propertyDisplay11") || "",
    propertyDisplay12: getConfig("propertyDisplay12") || "",
    propertyDisplay13: getConfig("propertyDisplay13") || "",
    propertyDisplay14: getConfig("propertyDisplay14") || "",
    propertyLayout12SideBySide: (_f = getConfig("propertyLayout12SideBySide")) != null ? _f : false,
    propertyLayout34SideBySide: (_g = getConfig("propertyLayout34SideBySide")) != null ? _g : false,
    propertyLayout56SideBySide: (_h = getConfig("propertyLayout56SideBySide")) != null ? _h : false,
    propertyLayout78SideBySide: (_i = getConfig("propertyLayout78SideBySide")) != null ? _i : false,
    propertyLayout910SideBySide: (_j = getConfig("propertyLayout910SideBySide")) != null ? _j : false,
    propertyLayout1112SideBySide: (_k = getConfig("propertyLayout1112SideBySide")) != null ? _k : false,
    propertyLayout1314SideBySide: (_l = getConfig("propertyLayout1314SideBySide")) != null ? _l : false,
    propertyGroup1Position: getConfig("propertyGroup1Position") || "bottom",
    propertyGroup2Position: getConfig("propertyGroup2Position") || "bottom",
    propertyGroup3Position: getConfig("propertyGroup3Position") || "bottom",
    propertyGroup4Position: getConfig("propertyGroup4Position") || "bottom",
    propertyGroup5Position: getConfig("propertyGroup5Position") || "bottom",
    propertyGroup6Position: getConfig("propertyGroup6Position") || "bottom",
    propertyGroup7Position: getConfig("propertyGroup7Position") || "bottom",
    imageFormat: getConfig("imageFormat") || "thumbnail",
    imagePosition: getConfig("imagePosition") || "right",
    propertyLabels: getConfig("propertyLabels") || "hide",
    showDraftStatus: (_m = getConfig("showDraftStatus")) != null ? _m : false,
    draftStatusProperty: getConfig("draftStatusProperty") || "",
    draftStatusReverse: (_n = getConfig("draftStatusReverse")) != null ? _n : false,
    draftStatusUseFilenamePrefix: (_o = getConfig("draftStatusUseFilenamePrefix")) != null ? _o : false,
    showTags: (_p = getConfig("showTags")) != null ? _p : false,
    tagsProperty: getConfig("tagsProperty") || "",
    maxTagsToShow: (_q = getConfig("maxTagsToShow")) != null ? _q : 3,
    customizeNewButton: (_r = getConfig("customizeNewButton")) != null ? _r : false,
    newNoteLocation: getConfig("newNoteLocation") || "",
    hideQuickEditIcon: (_s = getConfig("hideQuickEditIcon")) != null ? _s : false,
    cardSize: (_t = getConfig("cardSize")) != null ? _t : 250,
    imageAspectRatio: (_u = getConfig("imageAspectRatio")) != null ? _u : 0.55
  };
}
function getCMSViewOptions() {
  return [
    // Card size (standalone)
    {
      type: "slider",
      displayName: "Card size",
      key: "cardSize",
      min: 50,
      max: 800,
      step: 10,
      default: 250
    },
    // Title group
    {
      type: "group",
      displayName: "Title",
      items: [
        {
          type: "property",
          displayName: "Title property",
          key: "titleProperty",
          placeholder: "Select property",
          default: ""
        }
      ]
    },
    // Text preview group
    {
      type: "group",
      displayName: "Text preview",
      items: [
        {
          type: "toggle",
          displayName: "Show text preview",
          key: "showTextPreview",
          default: true
        },
        {
          type: "property",
          displayName: "Text preview property",
          key: "descriptionProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Use note content if text preview property unavailable",
          key: "fallbackToContent",
          default: true
        },
        {
          type: "toggle",
          displayName: "Truncate preview property",
          key: "truncatePreviewProperty",
          default: false
        }
      ]
    },
    // Image group
    {
      type: "group",
      displayName: "Image",
      items: [
        {
          type: "dropdown",
          displayName: "Image format",
          key: "imageFormat",
          options: {
            "none": "No image",
            "thumbnail": "Thumbnail",
            "cover": "Cover"
          },
          default: "thumbnail"
        },
        {
          type: "property",
          displayName: "Image property",
          key: "imageProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "dropdown",
          displayName: "Show image embeds",
          key: "fallbackToEmbeds",
          options: {
            "always": "Always",
            "if-empty": "If image property missing or empty",
            "never": "Never"
          },
          default: "if-empty"
        },
        {
          type: "slider",
          displayName: "Image aspect ratio",
          key: "imageAspectRatio",
          min: 0.1,
          max: 2,
          step: 0.05,
          default: 0.55,
          showWhen: {
            key: "imageFormat",
            value: "cover"
          }
        }
      ]
    },
    // Date group
    {
      type: "group",
      displayName: "Date",
      items: [
        {
          type: "toggle",
          displayName: "Show date",
          key: "showDate",
          default: false
        },
        {
          type: "property",
          displayName: "Date property",
          key: "dateProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Include time",
          description: "When enabled, displays both date and time using your system locale settings",
          key: "dateIncludeTime",
          default: false
        }
      ]
    },
    // Draft status group
    {
      type: "group",
      displayName: "Draft status",
      items: [
        {
          type: "toggle",
          displayName: "Show draft status",
          key: "showDraftStatus",
          default: false
        },
        {
          type: "property",
          displayName: "Draft status property",
          key: "draftStatusProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Reverse logic",
          key: "draftStatusReverse",
          default: false
        },
        {
          type: "toggle",
          displayName: "Filename underscore prefix as draft indicator",
          key: "draftStatusUseFilenamePrefix",
          default: false
        }
      ]
    },
    // Tags group
    {
      type: "group",
      displayName: "Tags",
      items: [
        {
          type: "toggle",
          displayName: "Show tags",
          key: "showTags",
          default: false
        },
        {
          type: "property",
          displayName: "Tags property",
          key: "tagsProperty",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "slider",
          displayName: "Maximum tags to show",
          key: "maxTagsToShow",
          min: 1,
          max: 50,
          step: 1,
          default: 3,
          showWhen: {
            key: "showTags",
            value: true
          }
        }
      ]
    },
    // Properties group
    {
      type: "group",
      displayName: "Properties",
      items: [
        {
          type: "dropdown",
          displayName: "Show property labels",
          key: "propertyLabels",
          options: {
            "hide": "Hide",
            "inline": "Inline",
            "above": "On top"
          },
          default: "hide"
        }
      ]
    },
    // Property group 1
    {
      type: "group",
      displayName: "Property group 1",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay1",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay2",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout12SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup1Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 2
    {
      type: "group",
      displayName: "Property group 2",
      items: [
        {
          type: "property",
          displayName: "Third property",
          key: "propertyDisplay3",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Fourth property",
          key: "propertyDisplay4",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout34SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup2Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 3
    {
      type: "group",
      displayName: "Property group 3",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay5",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay6",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout56SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup3Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 4
    {
      type: "group",
      displayName: "Property group 4",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay7",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay8",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout78SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup4Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 5
    {
      type: "group",
      displayName: "Property group 5",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay9",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay10",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout910SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup5Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 6
    {
      type: "group",
      displayName: "Property group 6",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay11",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay12",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout1112SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup6Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Property group 7
    {
      type: "group",
      displayName: "Property group 7",
      items: [
        {
          type: "property",
          displayName: "First property",
          key: "propertyDisplay13",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "property",
          displayName: "Second property",
          key: "propertyDisplay14",
          placeholder: "Select property",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Show side-by-side",
          key: "propertyLayout1314SideBySide",
          default: false
        },
        {
          type: "dropdown",
          displayName: "Position",
          key: "propertyGroup7Position",
          options: {
            "top": "Top",
            "bottom": "Bottom"
          },
          default: "bottom"
        }
      ]
    },
    // Behavior group
    {
      type: "group",
      displayName: "Behavior",
      items: [
        {
          type: "toggle",
          displayName: "Open new notes directly",
          description: "Skip the Bases modal and create notes directly (like the file explorer). When disabled, uses normal Bases behavior with the property popup.",
          key: "customizeNewButton",
          default: false
        },
        {
          type: "text",
          displayName: "Location for new notes",
          description: 'Folder path where new notes will be created. Use / for vault root, or specify a folder path. Works independently of "Open new notes directly".',
          key: "newNoteLocation",
          placeholder: "Simply use / for vault folder",
          default: ""
        },
        {
          type: "toggle",
          displayName: "Hide quick edit icon",
          key: "hideQuickEditIcon",
          default: false
        }
      ]
    }
  ];
}
var init_settings_schema = __esm({
  "src/shared/settings-schema.ts"() {
    "use strict";
  }
});

// src/utils/attachment-detection.ts
async function getAttachmentsInNote(app, file) {
  var _a;
  const attachments = [];
  const content = app.vault.getAbstractFileByPath(file.path);
  if (content instanceof import_obsidian17.TFile) {
    if (file.extension === "md") {
      const metadata = app.metadataCache.getFileCache(content);
      const embeds = (metadata == null ? void 0 : metadata.embeds) || [];
      for (const embed of embeds) {
        const embedFile = app.metadataCache.getFirstLinkpathDest(embed.link, file.path);
        if (embedFile instanceof import_obsidian17.TFile) {
          attachments.push(embedFile);
        }
      }
    }
    const frontmatter = await getFileFrontmatter(app, file);
    if (frontmatter) {
      const imagePropertyNames = ["image", "imageOG", "cover", "thumbnail"];
      const validImageExtensions = ["avif", "bmp", "gif", "jpeg", "jpg", "png", "svg", "webp"];
      for (const propName of imagePropertyNames) {
        const propValue = frontmatter[propName];
        if (!propValue) continue;
        const imagePaths = Array.isArray(propValue) ? propValue : [propValue];
        for (const imagePath of imagePaths) {
          if (typeof imagePath !== "string") continue;
          const cleanPath = imagePath.replace(/^!?\[\[([^\]]+)\]\]$/, "$1").trim();
          if (!cleanPath) continue;
          if (cleanPath.startsWith("http://") || cleanPath.startsWith("https://")) {
            continue;
          }
          let imageFile = app.metadataCache.getFirstLinkpathDest(cleanPath, file.path);
          if (!imageFile && cleanPath.startsWith("./")) {
            const relativePath = cleanPath.substring(2);
            const fullPath = ((_a = file.parent) == null ? void 0 : _a.path) ? `${file.parent.path}/${relativePath}` : relativePath;
            const resolvedFile = app.vault.getAbstractFileByPath(fullPath);
            if (resolvedFile instanceof import_obsidian17.TFile) {
              imageFile = resolvedFile;
            }
          }
          if (!imageFile) {
            const absoluteFile = app.vault.getAbstractFileByPath(cleanPath);
            if (absoluteFile instanceof import_obsidian17.TFile) {
              imageFile = absoluteFile;
            }
          }
          if (imageFile && validImageExtensions.includes(imageFile.extension)) {
            attachments.push(imageFile);
          }
        }
      }
    }
  }
  return attachments;
}
async function getAttachmentsInFolder(app, folder) {
  const attachments = [];
  for (const child of folder.children) {
    if (child instanceof import_obsidian17.TFile && (child.extension === "md" || child.extension === "mdx")) {
      attachments.push(...await getAttachmentsInNote(app, child));
    } else if (child instanceof import_obsidian17.TFolder) {
      attachments.push(...await getAttachmentsInFolder(app, child));
    }
  }
  return attachments;
}
async function isAttachmentUsedInOtherNotes(app, attachment, excludedNote, excludedFolder) {
  const allNotes = app.vault.getMarkdownFiles().filter(
    (file) => file.path !== excludedNote.path
  );
  const attachmentPath = attachment.path;
  const attachmentName = attachment.name;
  const attachmentBasename = attachment.basename;
  for (const note of allNotes) {
    if (excludedFolder && note.path.startsWith(excludedFolder.path + "/")) {
      continue;
    }
    const content = await app.vault.read(note);
    if (content.includes(attachmentPath) || content.includes(attachmentName) || content.includes(attachmentBasename) || content.includes(`![[${attachmentName}]]`) || content.includes(`[[${attachmentName}]]`) || content.includes(`(${attachmentName})`) || content.includes(`(${attachmentPath})`)) {
      return true;
    }
  }
  return false;
}
async function findUniqueAttachments(app, deletedNote, deletedFolder) {
  const attachments = [];
  attachments.push(...await getAttachmentsInNote(app, deletedNote));
  if (deletedFolder) {
    attachments.push(...await getAttachmentsInFolder(app, deletedFolder));
  }
  const uniqueAttachments = Array.from(new Set(attachments.map((a) => a.path))).map((path) => app.vault.getAbstractFileByPath(path)).filter((file) => file instanceof import_obsidian17.TFile);
  const result = [];
  for (const attachment of uniqueAttachments) {
    const isUsedElsewhere = await isAttachmentUsedInOtherNotes(
      app,
      attachment,
      deletedNote,
      deletedFolder
    );
    if (!isUsedElsewhere) {
      result.push(attachment);
    }
  }
  return result;
}
var import_obsidian17;
var init_attachment_detection = __esm({
  "src/utils/attachment-detection.ts"() {
    "use strict";
    import_obsidian17 = require("obsidian");
    init_frontmatter_helper();
  }
});

// src/utils/smart-deletion.ts
var smart_deletion_exports = {};
__export(smart_deletion_exports, {
  executeSmartDeletion: () => executeSmartDeletion,
  isFolderBasedContent: () => isFolderBasedContent,
  prepareDeletionPreview: () => prepareDeletionPreview,
  shouldDeleteParentFolder: () => shouldDeleteParentFolder
});
function isFolderBasedContent(file, config) {
  const configuredFilename = config.deleteParentFolderFilename || "index";
  return file.basename === configuredFilename && file.parent !== null;
}
function shouldDeleteParentFolder(file, config) {
  return config.deleteParentFolder && isFolderBasedContent(file, config);
}
async function prepareDeletionPreview(app, files, config) {
  const filesToDelete = [];
  const foldersToDelete = [];
  const attachmentsToDelete = [];
  for (const filePath of files) {
    const file = app.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian18.TFile)) continue;
    if (shouldDeleteParentFolder(file, config)) {
      const parentFolder = file.parent;
      if (parentFolder && !foldersToDelete.includes(parentFolder)) {
        foldersToDelete.push(parentFolder);
        const folderFiles = parentFolder.children.filter(
          (child) => child instanceof import_obsidian18.TFile
        );
        filesToDelete.push(...folderFiles);
      }
    } else {
      filesToDelete.push(file);
    }
    if (config.deleteUniqueAttachments) {
      const parentFolder = shouldDeleteParentFolder(file, config) ? file.parent || void 0 : void 0;
      const uniqueAttachments2 = await findUniqueAttachments(
        app,
        file,
        parentFolder
      );
      attachmentsToDelete.push(...uniqueAttachments2);
    }
  }
  const uniqueFiles = Array.from(new Set(filesToDelete.map((f) => f.path))).map((path) => app.vault.getAbstractFileByPath(path)).filter((file) => file instanceof import_obsidian18.TFile);
  const uniqueAttachments = Array.from(new Set(attachmentsToDelete.map((a) => a.path))).map((path) => app.vault.getAbstractFileByPath(path)).filter((file) => file instanceof import_obsidian18.TFile);
  return {
    filesToDelete: uniqueFiles,
    foldersToDelete: Array.from(new Set(foldersToDelete)),
    attachmentsToDelete: uniqueAttachments
  };
}
async function executeSmartDeletion(app, preview) {
  let deletedCount = 0;
  let errorCount = 0;
  for (const file of preview.filesToDelete) {
    try {
      await app.fileManager.trashFile(file);
      deletedCount++;
    } catch (error) {
      console.error(`Error deleting file ${file.path}:`, error);
      errorCount++;
    }
  }
  for (const attachment of preview.attachmentsToDelete) {
    try {
      await app.fileManager.trashFile(attachment);
      deletedCount++;
    } catch (error) {
      console.error(`Error deleting attachment ${attachment.path}:`, error);
      errorCount++;
    }
  }
  for (const folder of preview.foldersToDelete) {
    try {
      await app.fileManager.trashFile(folder);
      deletedCount++;
    } catch (error) {
      console.error(`Error deleting folder ${folder.path}:`, error);
      errorCount++;
    }
  }
  if (errorCount > 0) {
    new import_obsidian18.Notice(`Deleted ${deletedCount} items, ${errorCount} errors occurred`);
  } else {
    new import_obsidian18.Notice(`Successfully deleted ${deletedCount} item${deletedCount !== 1 ? "s" : ""}`);
  }
}
var import_obsidian18;
var init_smart_deletion = __esm({
  "src/utils/smart-deletion.ts"() {
    "use strict";
    import_obsidian18 = require("obsidian");
    init_attachment_detection();
  }
});

// src/components/deletion-preview.ts
var deletion_preview_exports = {};
__export(deletion_preview_exports, {
  DeletionPreviewModal: () => DeletionPreviewModal
});
var import_obsidian19, DeletionPreviewModal;
var init_deletion_preview = __esm({
  "src/components/deletion-preview.ts"() {
    "use strict";
    import_obsidian19 = require("obsidian");
    init_smart_deletion();
    DeletionPreviewModal = class extends import_obsidian19.Modal {
      constructor(app, preview, onConfirm) {
        super(app);
        this.preview = preview;
        this.onConfirm = onConfirm;
      }
      onOpen() {
        const { contentEl } = this;
        contentEl.empty();
        new import_obsidian19.Setting(contentEl).setName("Confirm deletion").setHeading();
        contentEl.createEl("p", {
          text: "The following items will be deleted:",
          cls: "bases-cms-deletion-warning"
        });
        if (this.preview.filesToDelete.length > 0) {
          contentEl.createEl("h3", { text: `Files (${this.preview.filesToDelete.length})` });
          const filesList = contentEl.createEl("ul", { cls: "bases-cms-deletion-list" });
          for (const file of this.preview.filesToDelete.slice(0, 20)) {
            const li = filesList.createEl("li");
            li.setText(file.path);
          }
          if (this.preview.filesToDelete.length > 20) {
            filesList.createEl("li", {
              text: `... and ${this.preview.filesToDelete.length - 20} more files`
            });
          }
        }
        if (this.preview.foldersToDelete.length > 0) {
          contentEl.createEl("h3", { text: `Folders (${this.preview.foldersToDelete.length})` });
          const foldersList = contentEl.createEl("ul", { cls: "bases-cms-deletion-list" });
          for (const folder of this.preview.foldersToDelete) {
            const li = foldersList.createEl("li");
            li.setText(folder.path);
          }
        }
        if (this.preview.attachmentsToDelete.length > 0) {
          contentEl.createEl("h3", { text: `Attachments (${this.preview.attachmentsToDelete.length})` });
          const attachmentsList = contentEl.createEl("ul", { cls: "bases-cms-deletion-list" });
          for (const attachment of this.preview.attachmentsToDelete.slice(0, 20)) {
            const li = attachmentsList.createEl("li");
            li.setText(attachment.path);
          }
          if (this.preview.attachmentsToDelete.length > 20) {
            attachmentsList.createEl("li", {
              text: `... and ${this.preview.attachmentsToDelete.length - 20} more attachments`
            });
          }
        }
        contentEl.createEl("p", {
          text: "This action cannot be undone.",
          cls: "bases-cms-deletion-warning"
        });
        const buttonContainer = contentEl.createDiv();
        buttonContainer.addClass("bases-cms-modal-button-container");
        const cancelBtn = buttonContainer.createEl("button");
        cancelBtn.setText("Cancel");
        cancelBtn.addEventListener("click", () => this.close());
        const deleteBtn = buttonContainer.createEl("button");
        deleteBtn.setText("Delete");
        deleteBtn.addClass("mod-cta");
        deleteBtn.addClass("destructive");
        deleteBtn.addEventListener("click", () => {
          void (async () => {
            await executeSmartDeletion(this.app, this.preview);
            this.onConfirm();
            this.close();
          })();
        });
      }
      onClose() {
        const { contentEl } = this;
        contentEl.empty();
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => BasesCMSPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian24 = require("obsidian");

// src/settings.ts
var import_obsidian4 = require("obsidian");

// src/components/command-picker-modal.ts
var import_obsidian = require("obsidian");
var CommandPickerModal = class extends import_obsidian.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    const commandRegistry = this.app.commands;
    const commandMap = /* @__PURE__ */ new Map();
    if (commandRegistry && typeof commandRegistry.listCommands === "function") {
      try {
        const commands = commandRegistry.listCommands();
        for (const command of commands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      } catch (e) {
        console.warn("[Bases CMS] Error getting commands via listCommands():", e);
      }
    }
    try {
      const registry = commandRegistry == null ? void 0 : commandRegistry.commands;
      if (registry && typeof registry === "object") {
        const allCommands = Object.values(registry);
        for (const command of allCommands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      }
    } catch (e) {
      console.warn("[Bases CMS] Error getting commands via registry:", e);
    }
    try {
      const internalRegistry = commandRegistry == null ? void 0 : commandRegistry.commandRegistry;
      if (internalRegistry && typeof internalRegistry === "object") {
        const allCommands = Object.values(internalRegistry);
        for (const command of allCommands) {
          if (command && command.id && command.name && !commandMap.has(command.id)) {
            commandMap.set(command.id, {
              id: command.id,
              name: command.name
            });
          }
        }
      }
    } catch (e) {
      console.warn("[Bases CMS] Error getting commands via internal registry:", e);
    }
    const commandOptions = Array.from(commandMap.values());
    commandOptions.sort((a, b) => a.name.localeCompare(b.name));
    return commandOptions;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
  // Override to show command name only
  renderSuggestion(match, el) {
    const item = match.item;
    el.createDiv({ cls: "suggestion-title", text: item.name });
  }
};

// src/components/icon-picker-modal.ts
var import_obsidian2 = require("obsidian");
var getIconList = () => {
  if (import_obsidian2.requireApiVersion && (0, import_obsidian2.requireApiVersion)("1.7.3") && import_obsidian2.getIconIds) {
    try {
      return (0, import_obsidian2.getIconIds)();
    } catch (e) {
      console.warn("[Bases CMS] Error getting icon IDs from Obsidian:", e);
    }
  }
  return [
    "settings-2",
    "settings",
    "help-circle",
    "info",
    "star",
    "heart",
    "bookmark",
    "home",
    "search",
    "bell",
    "mail",
    "user",
    "users",
    "folder",
    "file",
    "file-text",
    "image",
    "video",
    "music",
    "calendar",
    "clock",
    "edit",
    "pencil",
    "trash",
    "copy",
    "cut",
    "paste",
    "download",
    "upload",
    "save",
    "share",
    "link",
    "external-link",
    "lock",
    "unlock",
    "eye",
    "eye-off",
    "key",
    "shield",
    "check",
    "x",
    "plus",
    "minus",
    "arrow-left",
    "arrow-right",
    "arrow-up",
    "arrow-down",
    "chevron-left",
    "chevron-right",
    "chevron-up",
    "chevron-down",
    "menu",
    "more-horizontal",
    "more-vertical",
    "grid",
    "list",
    "layout",
    "columns",
    "rows",
    "maximize",
    "minimize",
    "zoom-in",
    "zoom-out",
    "refresh-cw",
    "play",
    "pause",
    "stop",
    "sun",
    "moon",
    "cloud",
    "zap",
    "wand-2",
    "wand",
    "wand-sparkles",
    "palette",
    "brush",
    "sliders",
    "power",
    "wifi",
    "bluetooth",
    "monitor",
    "laptop",
    "smartphone",
    "camera",
    "mic",
    "headphones",
    "code",
    "terminal",
    "terminal-square",
    "github",
    "gitlab",
    "git-branch",
    "git-commit",
    "database",
    "server",
    "cloud-download",
    "cloud-upload",
    "tag",
    "tags",
    "flag",
    "pin",
    "map-pin",
    "compass",
    "globe",
    "rocket",
    "car",
    "bike",
    "robot",
    "apple",
    "windows",
    "linux",
    "chrome",
    "firefox",
    "safari",
    "credit-card",
    "wallet",
    "coins",
    "book",
    "book-open",
    "award",
    "trophy",
    "badge",
    "wrench",
    "tool",
    "package",
    "box",
    "archive",
    "send",
    "reply",
    "forward",
    "mail-open",
    "tag-plus",
    "tag-minus",
    "flag-off",
    "pin-off",
    "map-pin-off",
    "navigation",
    "map",
    "earth",
    "plane",
    "ship",
    "anchor",
    "helicopter",
    "drone",
    "android",
    "keyhole",
    "keys",
    "fingerprint",
    "scan",
    "qr-code",
    "barcode",
    "receipt",
    "piggy-bank",
    "banknote",
    "pencil-line",
    "edit-2",
    "edit-3"
  ];
};
var LUCIDE_ICONS = getIconList().map((id) => ({
  id,
  name: id.replace(/^lucide-/, "").replace(/-/g, " ").replace(/(^\w{1})|(\s+\w{1})/g, (letter) => letter.toUpperCase())
})).sort((a, b) => a.name.localeCompare(b.name));
var IconPickerModal = class extends import_obsidian2.FuzzySuggestModal {
  constructor(app, onSelect) {
    super(app);
    this.onSelect = onSelect;
  }
  getItems() {
    return LUCIDE_ICONS;
  }
  getItemText(item) {
    return item.name;
  }
  onChooseItem(item, evt) {
    this.onSelect(item.id);
  }
  // Override to show icon preview
  renderSuggestion(match, el) {
    const item = match.item;
    el.addClass("mod-complex");
    const content = el.createDiv({ cls: "suggestion-content" });
    content.createDiv({ cls: "suggestion-title", text: item.name });
    const aux = el.createDiv({ cls: "suggestion-aux" });
    (0, import_obsidian2.setIcon)(aux.createSpan({ cls: "suggestion-flair" }), item.id);
  }
};

// src/utils/settings-compat.ts
var import_obsidian3 = require("obsidian");
function createSettingsGroup(containerEl, heading) {
  if ((0, import_obsidian3.requireApiVersion)("1.11.0")) {
    const obsidianModule = require("obsidian");
    const SettingGroup = obsidianModule.SettingGroup;
    if (SettingGroup) {
      const group = new SettingGroup(containerEl).setHeading(heading);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  const headingEl = containerEl.createDiv("setting-group-heading");
  headingEl.createEl("h3", { text: heading });
  return {
    addSetting(cb) {
      const setting = new import_obsidian3.Setting(containerEl);
      cb(setting);
    }
  };
}

// src/settings.ts
var BasesCMSSettingTab = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  /**
   * Refresh toolbars in all active CMS views when settings change
   */
  refreshActiveToolbars() {
    const pluginWithMethod = this.plugin;
    if (pluginWithMethod && typeof pluginWithMethod.refreshAllToolbars === "function") {
      pluginWithMethod.refreshAllToolbars();
    }
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian4.Setting(containerEl).setName("Confirm bulk operations").setDesc("Show confirmation dialogs before performing bulk operations.").addToggle((toggle) => toggle.setValue(this.plugin.settings.confirmBulkOperations).onChange((value) => {
      void (async () => {
        this.plugin.settings.confirmBulkOperations = value;
        await this.plugin.saveData(this.plugin.settings);
      })();
    }));
    const toolbarButtonsGroup = createSettingsGroup(containerEl, "Toolbar buttons");
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show select all button").setDesc("Display the select all button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarSelectAll);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarSelectAll = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show clear button").setDesc("Display the clear selection button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarClear);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarClear = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show publish button").setDesc("Display the publish button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarPublish);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarPublish = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show draft button").setDesc("Display the draft button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarDraft);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarDraft = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show tags button").setDesc("Display the tags button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarTags);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarTags = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show set button").setDesc("Display the set property button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarSet);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarSet = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show remove button").setDesc("Display the remove property button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarRemove);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarRemove = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    toolbarButtonsGroup.addSetting((setting) => {
      setting.setName("Show delete button").setDesc("Display the delete button in the CMS toolbar.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showToolbarDelete);
        toggle.onChange(async (value) => {
          this.plugin.settings.showToolbarDelete = value;
          await this.plugin.saveData(this.plugin.settings);
          this.refreshActiveToolbars();
        });
      });
    });
    const deletionsGroup = createSettingsGroup(containerEl, "Deletions");
    deletionsGroup.addSetting((setting) => {
      setting.setName("Delete parent folder for specific file name").setDesc("When enabled, deleting a note will delete its parent folder and all its contents if the note file name matches the specified name.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.deleteParentFolder);
        toggle.onChange(async (value) => {
          this.plugin.settings.deleteParentFolder = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      });
    });
    deletionsGroup.addSetting((setting) => {
      setting.setName("Folder deletion file name").setDesc("File name that triggers parent folder deletion.").addText((text) => {
        text.setPlaceholder("index");
        text.setValue(this.plugin.settings.deleteParentFolderFilename);
        text.onChange(async (value) => {
          this.plugin.settings.deleteParentFolderFilename = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      }).setDisabled(!this.plugin.settings.deleteParentFolder);
    });
    deletionsGroup.addSetting((setting) => {
      setting.setName("Delete associated unique attachments").setDesc("When deleting a note, automatically delete attachments that are only used by that note. Attachments used by other notes will be preserved.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.deleteUniqueAttachments);
        toggle.onChange(async (value) => {
          this.plugin.settings.deleteUniqueAttachments = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      });
    });
    deletionsGroup.addSetting((setting) => {
      setting.setName("Confirm deletions").setDesc("Show confirmation dialog before deleting files.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.confirmDeletions);
        toggle.onChange(async (value) => {
          this.plugin.settings.confirmDeletions = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      });
    });
    const appearanceGroup = createSettingsGroup(containerEl, "Appearance");
    appearanceGroup.addSetting((setting) => {
      setting.setName("Use home icon for CMS view").setDesc("Use the home icon instead of blocks icon for the CMS view in the Bases view selector. Restart Obsidian for this change to take effect.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.useHomeIcon);
        toggle.onChange(async (value) => {
          this.plugin.settings.useHomeIcon = value;
          await this.plugin.saveData(this.plugin.settings);
        });
      });
    });
    appearanceGroup.addSetting((setting) => {
      setting.setName("Force static image for animated GIFs").setDesc("When enabled, animated GIFs will display only the first frame when used as card covers or thumbnails.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.forceStaticGifImages);
        toggle.onChange(async (value) => {
          this.plugin.settings.forceStaticGifImages = value;
          await this.plugin.saveData(this.plugin.settings);
          const pluginWithMethod = this.plugin;
          if (pluginWithMethod.activeViews) {
            pluginWithMethod.activeViews.forEach((view) => {
              if (view.onDataUpdated) {
                view.onDataUpdated();
              }
            });
          }
        });
      });
    });
    const quickEditGroup = createSettingsGroup(containerEl, "Quick edit");
    let quickEditCommandSetting;
    let quickEditIconSetting;
    let quickEditOpenFileSetting;
    quickEditGroup.addSetting((setting) => {
      setting.setName("Enable quick edit").setDesc("Show an icon on card titles that launches a command when clicked.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableQuickEdit).onChange((value) => {
        void (async () => {
          this.plugin.settings.enableQuickEdit = value;
          await this.plugin.saveData(this.plugin.settings);
          const shouldHide = !value;
          const commandEl = quickEditCommandSetting == null ? void 0 : quickEditCommandSetting.settingEl;
          const iconEl = quickEditIconSetting == null ? void 0 : quickEditIconSetting.settingEl;
          const openFileEl = quickEditOpenFileSetting == null ? void 0 : quickEditOpenFileSetting.settingEl;
          if (commandEl) {
            commandEl.toggleClass("bases-cms-setting-hidden", shouldHide);
          }
          if (iconEl) {
            iconEl.toggleClass("bases-cms-setting-hidden", shouldHide);
          }
          if (openFileEl) {
            openFileEl.toggleClass("bases-cms-setting-hidden", shouldHide);
          }
        })();
      }));
    });
    quickEditGroup.addSetting((setting) => {
      quickEditCommandSetting = setting;
      setting.setName("Quick edit command").setDesc("The command to execute when clicking the quick edit icon on a card title.").addButton((button) => {
        var _a;
        const currentCommandName = this.plugin.settings.quickEditCommandName || (this.plugin.settings.quickEditCommand ? "Select command..." : "No command selected");
        button.setButtonText(currentCommandName).onClick(() => {
          const modal = new CommandPickerModal(this.app, (commandId) => {
            void (async () => {
              const commandRegistry = this.app.commands;
              let commandName = "";
              if (commandRegistry) {
                if (typeof commandRegistry.listCommands === "function") {
                  const commands = commandRegistry.listCommands();
                  const command = commands.find((cmd) => cmd.id === commandId);
                  if (command) {
                    commandName = command.name;
                  }
                }
                if (!commandName) {
                  const registry = commandRegistry.commands;
                  if (registry && registry[commandId]) {
                    commandName = registry[commandId].name || "";
                  }
                }
              }
              this.plugin.settings.quickEditCommand = commandId;
              this.plugin.settings.quickEditCommandName = commandName;
              await this.plugin.saveData(this.plugin.settings);
              this.display();
            })();
          });
          modal.open();
        });
        if (this.plugin.settings.quickEditCommand) {
          const clearButton = (_a = button.buttonEl.parentElement) == null ? void 0 : _a.createEl("button", {
            text: "Clear",
            attr: { style: "margin-left: 8px;" }
          });
          clearButton == null ? void 0 : clearButton.addEventListener("click", () => {
            void (async () => {
              this.plugin.settings.quickEditCommand = "";
              this.plugin.settings.quickEditCommandName = "";
              await this.plugin.saveData(this.plugin.settings);
              this.display();
            })();
          });
        }
      });
      setting.settingEl.toggleClass("bases-cms-setting-hidden", !this.plugin.settings.enableQuickEdit);
    });
    quickEditGroup.addSetting((setting) => {
      quickEditIconSetting = setting;
      setting.setName("Quick edit icon").setDesc("Select the icon to display for the quick edit button on card titles.").addButton((button) => {
        const iconName = this.getIconName(this.plugin.settings.quickEditIcon || "pencil-line");
        button.setButtonText(iconName || "Select icon...").onClick(() => {
          const modal = new IconPickerModal(this.app, (iconId) => {
            void (async () => {
              this.plugin.settings.quickEditIcon = iconId;
              await this.plugin.saveData(this.plugin.settings);
              this.display();
            })();
          });
          modal.open();
        });
      });
      setting.settingEl.toggleClass("bases-cms-setting-hidden", !this.plugin.settings.enableQuickEdit);
    });
    quickEditGroup.addSetting((setting) => {
      quickEditOpenFileSetting = setting;
      setting.setName("Attempt to open file and execute quick edit command").setDesc("For commands that don't have special handling, attempt to open the file and execute the command. Some commands may not work properly this way.").addToggle((toggle) => toggle.setValue(this.plugin.settings.quickEditOpenFile).onChange((value) => {
        void (async () => {
          this.plugin.settings.quickEditOpenFile = value;
          await this.plugin.saveData(this.plugin.settings);
        })();
      }));
      setting.settingEl.toggleClass("bases-cms-setting-hidden", !this.plugin.settings.enableQuickEdit);
    });
  }
  getIconName(iconId) {
    if (!iconId) return "";
    return iconId.replace(/^lucide-/, "").split("-").map((word) => word.charAt(0).toUpperCase() + word.slice(1)).join(" ");
  }
};

// src/types.ts
var DEFAULT_SETTINGS = {
  confirmBulkOperations: true,
  deleteParentFolder: false,
  deleteParentFolderFilename: "index",
  deleteUniqueAttachments: false,
  confirmDeletions: true,
  useHomeIcon: false,
  enableQuickEdit: false,
  quickEditCommand: "",
  quickEditCommandName: "",
  quickEditIcon: "pencil-line",
  quickEditOpenFile: false,
  showToolbarSelectAll: true,
  showToolbarClear: true,
  showToolbarDraft: true,
  showToolbarPublish: true,
  showToolbarTags: true,
  showToolbarSet: true,
  showToolbarRemove: true,
  showToolbarDelete: true,
  forceStaticGifImages: false
};

// src/views/cms-view.ts
var import_obsidian23 = require("obsidian");

// src/utils/css-props.ts
function setCssProps(element, props) {
  for (const [key, value] of Object.entries(props)) {
    if (key.startsWith("--")) {
      element.style.setProperty(key, String(value));
    } else {
      const cssKey = key.replace(/([A-Z])/g, "-$1").toLowerCase();
      element.style.setProperty(cssKey, String(value));
    }
  }
}

// src/shared/data-transform.ts
var import_obsidian7 = require("obsidian");

// src/utils/property.ts
var import_obsidian6 = require("obsidian");
init_frontmatter_helper();
async function getFirstBasesPropertyValue(entry, propertyString, app) {
  if (!propertyString || !propertyString.trim()) return null;
  const properties = propertyString.split(",").map((p) => p.trim()).filter((p) => p);
  for (const prop of properties) {
    const value = entry.getValue(prop);
    const valueObj = value;
    const propertyExists = valueObj && ("date" in valueObj && valueObj.date instanceof Date || "data" in valueObj && valueObj.data != null);
    if (propertyExists) {
      return value;
    }
    if (!propertyExists && app) {
      const file = app.vault.getAbstractFileByPath(entry.file.path);
      if (file instanceof import_obsidian6.TFile && file.extension === "mdx") {
        const frontmatter = await getFileFrontmatter(app, file);
        if (frontmatter) {
          const cleanProp = prop.startsWith("note.") ? prop.substring(5) : prop;
          const frontmatterValue = frontmatter[cleanProp];
          if (frontmatterValue != null) {
            return { data: frontmatterValue };
          }
        }
      }
    }
  }
  return null;
}
async function getAllBasesImagePropertyValues(entry, propertyString, app) {
  if (!propertyString || !propertyString.trim()) return [];
  const prop = propertyString.split(",")[0].trim();
  if (!prop) return [];
  const value = entry.getValue(prop);
  let data = null;
  if (value && "data" in value) {
    data = value.data;
  } else if (app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian6.TFile && file.extension === "mdx") {
      const frontmatter = await getFileFrontmatter(app, file);
      if (frontmatter) {
        const cleanProp = prop.startsWith("note.") ? prop.substring(5) : prop;
        data = frontmatter[cleanProp];
      }
    }
  }
  if (data == null) return [];
  const images = [];
  if (Array.isArray(data)) {
    for (const item of data) {
      if (typeof item === "string" || typeof item === "number") {
        const str = String(item);
        if (str && str.trim()) {
          images.push(str);
        }
      }
    }
  } else if (data !== "") {
    if (typeof data === "string" || typeof data === "number") {
      const str = String(data);
      if (str.trim()) {
        images.push(str);
      }
    }
  }
  return images;
}
function getPropertyLabel(propertyName, app, basesConfig, basesController) {
  if (!propertyName || propertyName === "") return "";
  if (basesConfig) {
    const configWithDisplayName = basesConfig;
    if (typeof configWithDisplayName.getDisplayName === "function") {
      try {
        const displayName = configWithDisplayName.getDisplayName(propertyName);
        if (displayName && typeof displayName === "string" && displayName.trim() !== "") {
          return displayName;
        }
      } catch (e) {
      }
    }
  }
  return propertyName;
}

// src/utils/style-settings.ts
function hasBodyClass(className) {
  return document.body.classList.contains(className);
}
function getListSeparator() {
  let value = getComputedStyle(document.body).getPropertyValue(
    "--bases-cms-list-separator"
  );
  if (value.startsWith('"') && value.endsWith('"') || value.startsWith("'") && value.endsWith("'")) {
    value = value.slice(1, -1);
  }
  return value || ", ";
}
function getEmptyValueMarker() {
  let value = getComputedStyle(document.body).getPropertyValue(
    "--bases-cms-empty-value-marker"
  );
  if (value.startsWith('"') && value.endsWith('"') || value.startsWith("'") && value.endsWith("'")) {
    value = value.slice(1, -1);
  }
  return value || "\u2014";
}
function shouldHideMissingProperties() {
  return hasBodyClass("bases-cms-hide-missing-properties");
}
function shouldHideEmptyProperties() {
  const hasClass = hasBodyClass("bases-cms-hide-empty-properties");
  if (hasClass) return true;
  return false;
}
function getTagStyle() {
  if (hasBodyClass("bases-cms-tag-style-minimal")) return "minimal";
  if (hasBodyClass("bases-cms-tag-style-theme")) return "theme";
  return "plain";
}
function showTagHashPrefix() {
  return hasBodyClass("bases-cms-show-tag-hash");
}

// src/shared/data-transform.ts
init_frontmatter_helper();
function removeDuplication(str) {
  if (str.length === 0) return str;
  for (let len = 1; len <= Math.floor(str.length / 2); len++) {
    const prefix = str.substring(0, len);
    const repeatCount = Math.floor(str.length / len);
    if (repeatCount < 2) continue;
    let isCompleteDuplication = true;
    for (let i = 1; i < repeatCount; i++) {
      const segment = str.substring(i * len, (i + 1) * len);
      if (segment !== prefix) {
        isCompleteDuplication = false;
        break;
      }
    }
    const remainder = str.length % len;
    if (remainder > 0) {
      const lastSegment = str.substring(repeatCount * len);
      if (lastSegment !== prefix.substring(0, remainder)) {
        isCompleteDuplication = false;
      }
    }
    if (isCompleteDuplication) {
      return prefix;
    }
  }
  return str;
}
async function basesEntryToCardData(entry, settings, sortMethod, isShuffled, snippet, imageUrl, hasImageAvailable, app, mdxFrontmatterCache) {
  var _a;
  const fileName = entry.file.basename || entry.file.name;
  let titleValue = null;
  if (app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian7.TFile && file.extension === "mdx" && mdxFrontmatterCache) {
      const frontmatter = mdxFrontmatterCache[entry.file.path];
      if (frontmatter) {
        const cleanProp = settings.titleProperty.startsWith("note.") ? settings.titleProperty.substring(5) : settings.titleProperty;
        const frontmatterValue = frontmatter[cleanProp];
        if (frontmatterValue != null) {
          titleValue = { data: frontmatterValue };
        }
      }
    }
  }
  if (!titleValue) {
    titleValue = await getFirstBasesPropertyValue(entry, settings.titleProperty, app);
  }
  const titleData = titleValue == null ? void 0 : titleValue.data;
  let title;
  if (titleData != null && titleData !== "") {
    if (Array.isArray(titleData)) {
      const items = titleData.map((item) => {
        if (item && typeof item === "object" && "data" in item) {
          return String(item.data);
        }
        return String(item);
      }).filter((s) => s.trim().length > 0);
      title = items.length > 0 ? items.join(", ") : fileName;
    } else if (typeof titleData === "string" || typeof titleData === "number") {
      title = String(titleData);
    } else {
      title = fileName;
    }
  } else {
    title = fileName;
  }
  const path = entry.file.path;
  const folderPath = path.split("/").slice(0, -1).join("/");
  let yamlTagsValue = entry.getValue("note.tags");
  let yamlTags = [];
  if (!yamlTagsValue && app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian7.TFile && file.extension === "mdx") {
      let frontmatter = (_a = mdxFrontmatterCache == null ? void 0 : mdxFrontmatterCache[entry.file.path]) != null ? _a : null;
      if (frontmatter === void 0) {
        frontmatter = await getFileFrontmatter(app, file);
      }
      if (frontmatter == null ? void 0 : frontmatter.tags) {
        const tagData = frontmatter.tags;
        const rawTags = Array.isArray(tagData) ? tagData.map((t) => {
          if (t && typeof t === "object" && t !== null) {
            return JSON.stringify(t);
          }
          if (typeof t === "string" || typeof t === "number") {
            return String(t);
          }
          return t ? JSON.stringify(t) : "";
        }) : (() => {
          if (tagData && typeof tagData === "object" && tagData !== null) {
            return [JSON.stringify(tagData)];
          }
          if (typeof tagData === "string" || typeof tagData === "number") {
            return [String(tagData)];
          }
          return tagData ? [JSON.stringify(tagData)] : [""];
        })();
        yamlTags = rawTags.map((tag) => tag.replace(/^#/, ""));
      }
    }
  }
  if (yamlTagsValue && yamlTagsValue.data != null) {
    const tagData = yamlTagsValue.data;
    const rawTags = Array.isArray(tagData) ? tagData.map((t) => {
      if (t && typeof t === "object" && "data" in t) {
        return String(t.data);
      }
      return typeof t === "string" || typeof t === "number" ? String(t) : "";
    }).filter((t) => t) : typeof tagData === "string" || typeof tagData === "number" ? [String(tagData)] : [];
    yamlTags = rawTags.map((tag) => tag.replace(/^#/, ""));
  }
  let allTagsValue = entry.getValue("file.tags");
  let tags = [];
  if (allTagsValue && allTagsValue.data != null) {
    const tagData = allTagsValue.data;
    const rawTags = Array.isArray(tagData) ? tagData.map((t) => {
      if (t && typeof t === "object" && t !== null && "data" in t) {
        const itemData = t.data;
        if (itemData && typeof itemData === "object" && itemData !== null) {
          return JSON.stringify(itemData);
        }
        return String(itemData);
      }
      if (t && typeof t === "object" && t !== null) {
        return JSON.stringify(t);
      }
      return typeof t === "string" || typeof t === "number" ? String(t) : "";
    }).filter((t) => typeof t === "string" && t.length > 0) : (() => {
      if (tagData && typeof tagData === "object" && tagData !== null) {
        return [JSON.stringify(tagData)];
      }
      return typeof tagData === "string" || typeof tagData === "number" ? [String(tagData)] : [];
    })();
    tags = rawTags.map((tag) => tag.replace(/^#/, ""));
  } else if (!allTagsValue && app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian7.TFile && file.extension === "mdx") {
      tags = [...yamlTags];
    }
  }
  const ctime = entry.file.stat.ctime;
  const mtime = entry.file.stat.mtime;
  let displayTags = [];
  if (settings.showTags && settings.tagsProperty) {
    const tagsValue = await getFirstBasesPropertyValue(entry, settings.tagsProperty, app);
    if (tagsValue && tagsValue.data != null) {
      const tagData = tagsValue.data;
      if (Array.isArray(tagData)) {
        displayTags = tagData.map((t) => {
          if (t && typeof t === "object" && "data" in t) {
            return String(t.data);
          }
          return typeof t === "string" || typeof t === "number" ? String(t) : "";
        }).filter((t) => typeof t === "string" && t.length > 0);
      } else if (typeof tagData === "string" || typeof tagData === "number") {
        displayTags = [String(tagData)];
      }
    }
  }
  const cardData = {
    path,
    name: fileName,
    title,
    tags,
    yamlTags,
    ctime,
    mtime,
    folderPath,
    snippet,
    imageUrl,
    hasImageAvailable: hasImageAvailable || false,
    displayTags: displayTags.length > 0 ? displayTags : void 0
  };
  const props = [
    settings.propertyDisplay1,
    settings.propertyDisplay2,
    settings.propertyDisplay3,
    settings.propertyDisplay4,
    settings.propertyDisplay5,
    settings.propertyDisplay6,
    settings.propertyDisplay7,
    settings.propertyDisplay8,
    settings.propertyDisplay9,
    settings.propertyDisplay10,
    settings.propertyDisplay11,
    settings.propertyDisplay12,
    settings.propertyDisplay13,
    settings.propertyDisplay14
  ];
  const seen = /* @__PURE__ */ new Set();
  const effectiveProps = props.map((prop) => {
    if (!prop || prop === "") return "";
    if (seen.has(prop)) return "";
    seen.add(prop);
    return prop;
  });
  cardData.propertyName1 = effectiveProps[0] || void 0;
  cardData.propertyName2 = effectiveProps[1] || void 0;
  cardData.propertyName3 = effectiveProps[2] || void 0;
  cardData.propertyName4 = effectiveProps[3] || void 0;
  cardData.propertyName5 = effectiveProps[4] || void 0;
  cardData.propertyName6 = effectiveProps[5] || void 0;
  cardData.propertyName7 = effectiveProps[6] || void 0;
  cardData.propertyName8 = effectiveProps[7] || void 0;
  cardData.propertyName9 = effectiveProps[8] || void 0;
  cardData.propertyName10 = effectiveProps[9] || void 0;
  cardData.propertyName11 = effectiveProps[10] || void 0;
  cardData.propertyName12 = effectiveProps[11] || void 0;
  cardData.propertyName13 = effectiveProps[12] || void 0;
  cardData.propertyName14 = effectiveProps[13] || void 0;
  cardData.property1 = effectiveProps[0] ? await resolveBasesPropertyAsync(effectiveProps[0], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property2 = effectiveProps[1] ? await resolveBasesPropertyAsync(effectiveProps[1], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property3 = effectiveProps[2] ? await resolveBasesPropertyAsync(effectiveProps[2], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property4 = effectiveProps[3] ? await resolveBasesPropertyAsync(effectiveProps[3], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property5 = effectiveProps[4] ? await resolveBasesPropertyAsync(effectiveProps[4], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property6 = effectiveProps[5] ? await resolveBasesPropertyAsync(effectiveProps[5], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property7 = effectiveProps[6] ? await resolveBasesPropertyAsync(effectiveProps[6], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property8 = effectiveProps[7] ? await resolveBasesPropertyAsync(effectiveProps[7], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property9 = effectiveProps[8] ? await resolveBasesPropertyAsync(effectiveProps[8], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property10 = effectiveProps[9] ? await resolveBasesPropertyAsync(effectiveProps[9], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property11 = effectiveProps[10] ? await resolveBasesPropertyAsync(effectiveProps[10], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property12 = effectiveProps[11] ? await resolveBasesPropertyAsync(effectiveProps[11], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property13 = effectiveProps[12] ? await resolveBasesPropertyAsync(effectiveProps[12], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  cardData.property14 = effectiveProps[13] ? await resolveBasesPropertyAsync(effectiveProps[13], entry, cardData, settings, app, mdxFrontmatterCache) : null;
  return cardData;
}
async function transformBasesEntries(entries, settings, sortMethod, isShuffled, snippets, images, hasImageAvailable, app, mdxFrontmatterCache) {
  return Promise.all(entries.map((entry) => basesEntryToCardData(
    entry,
    settings,
    sortMethod,
    isShuffled,
    snippets[entry.file.path],
    images[entry.file.path],
    hasImageAvailable[entry.file.path],
    app,
    mdxFrontmatterCache
  )));
}
async function resolveBasesPropertyAsync(propertyName, entry, cardData, settings, app, mdxFrontmatterCache) {
  if (!propertyName || propertyName === "") {
    return null;
  }
  if (propertyName === "file.path" || propertyName === "file path") {
    return cardData.folderPath || null;
  }
  if (propertyName === "tags" || propertyName === "note.tags") {
    return cardData.yamlTags.length > 0 ? "tags" : null;
  }
  if (propertyName === "file.tags" || propertyName === "file tags") {
    return cardData.tags.length > 0 ? "tags" : null;
  }
  if (propertyName === "file.ctime" || propertyName === "created time") {
    return new Date(cardData.ctime).toLocaleDateString();
  }
  if (propertyName === "file.mtime" || propertyName === "modified time") {
    return new Date(cardData.mtime).toLocaleDateString();
  }
  let value = null;
  if (app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian7.TFile && file.extension === "mdx" && mdxFrontmatterCache) {
      const frontmatter = mdxFrontmatterCache[entry.file.path];
      if (frontmatter) {
        const cleanProp = propertyName.startsWith("note.") ? propertyName.substring(5) : propertyName;
        const frontmatterValue = frontmatter[cleanProp];
        if (frontmatterValue != null) {
          value = { data: frontmatterValue };
        }
      }
    }
  }
  if (!value) {
    value = await getFirstBasesPropertyValue(entry, propertyName, app);
  }
  if (!value) return null;
  const valueObj = value;
  if (!valueObj) return null;
  if ("date" in valueObj && valueObj.date instanceof Date) {
    return valueObj.date.toLocaleDateString();
  }
  const data = valueObj.data;
  if (data == null) {
    return null;
  }
  if (data === "") {
    return "";
  }
  if (typeof data === "string") {
    const trimmed = data.trim();
    if (trimmed.length === 0) {
      return "";
    }
    return removeDuplication(trimmed);
  }
  if (Array.isArray(data)) {
    if (data.length === 0) {
      return "";
    }
    const uniqueItems = /* @__PURE__ */ new Set();
    const result = [];
    for (const item of data) {
      let str;
      if (item && typeof item === "object" && "data" in item) {
        const itemData = item.data;
        if (itemData && typeof itemData === "object" && !Array.isArray(itemData) && "data" in itemData) {
          str = String(itemData.data);
        } else {
          str = String(itemData);
        }
      } else if (item && typeof item === "object" && item !== null) {
        str = String(item);
      } else {
        str = String(item);
      }
      const trimmed = str.trim();
      if (trimmed && trimmed !== "") {
        const deduplicated = removeDuplication(trimmed);
        if (deduplicated && deduplicated !== "" && !uniqueItems.has(deduplicated)) {
          uniqueItems.add(deduplicated);
          result.push(deduplicated);
        }
      }
    }
    if (result.length > 0) {
      return result.join(getListSeparator());
    }
    return null;
  }
  if (typeof data === "string") {
    let str = data.trim();
    if (str.length === 0) {
      return null;
    }
    return removeDuplication(str);
  }
  if (typeof data === "number" || typeof data === "boolean") {
    return String(data);
  }
  return null;
}

// src/views/cms-view.ts
init_settings_schema();

// src/utils/image.ts
var import_obsidian8 = require("obsidian");
function isExternalUrl(url) {
  return /^https?:\/\//i.test(url);
}
function hasValidImageExtension(path) {
  return /\.(avif|bmp|gif|jpe?g|png|svg|webp)$/i.test(path);
}
function validateImageUrl(url) {
  return new Promise((resolve) => {
    const img = new Image();
    img.onload = () => resolve(true);
    img.onerror = () => resolve(false);
    setTimeout(() => resolve(false), 5e3);
    img.src = url;
  });
}
function stripWikilinkSyntax(path) {
  const wikilinkMatch = path.match(/^!?\[\[([^\]|]+)(?:\|[^\]]*)?\]\]$/);
  return wikilinkMatch ? wikilinkMatch[1].trim() : path;
}
async function processImagePaths(imagePaths) {
  const internalPaths = [];
  const externalUrlCandidates = [];
  for (const imgPath of imagePaths) {
    const cleanPath = stripWikilinkSyntax(imgPath);
    if (cleanPath.length === 0) continue;
    if (isExternalUrl(cleanPath)) {
      externalUrlCandidates.push(cleanPath);
    } else {
      if (hasValidImageExtension(cleanPath)) {
        internalPaths.push(cleanPath);
      }
    }
  }
  const validationPromises = externalUrlCandidates.map(
    (url) => validateImageUrl(url).then((isValid) => isValid ? url : null)
  );
  const validatedUrls = await Promise.all(validationPromises);
  const externalUrls = validatedUrls.filter((url) => url !== null);
  return { internalPaths, externalUrls };
}
function resolveInternalImagePaths(internalPaths, sourcePath, app) {
  const validImageExtensions = ["avif", "bmp", "gif", "jpeg", "jpg", "png", "svg", "webp"];
  const resourcePaths = [];
  for (const propPath of internalPaths) {
    let imageFile = app.metadataCache.getFirstLinkpathDest(propPath, sourcePath);
    if (!imageFile && propPath.startsWith("./")) {
      const sourceFile = app.vault.getAbstractFileByPath(sourcePath);
      if (sourceFile && sourceFile.parent) {
        const relativePath = propPath.substring(2);
        const fullPath = sourceFile.parent.path ? `${sourceFile.parent.path}/${relativePath}` : relativePath;
        const resolvedFile = app.vault.getAbstractFileByPath(fullPath);
        if (resolvedFile instanceof import_obsidian8.TFile) {
          imageFile = resolvedFile;
        }
      }
    }
    if (!imageFile) {
      const absoluteFile = app.vault.getAbstractFileByPath(propPath);
      if (absoluteFile instanceof import_obsidian8.TFile) {
        imageFile = absoluteFile;
      }
    }
    if (imageFile && validImageExtensions.includes(imageFile.extension)) {
      const resourcePath = app.vault.getResourcePath(imageFile);
      resourcePaths.push(resourcePath);
    }
  }
  return resourcePaths;
}
async function extractEmbedImages(file, app) {
  const validImageExtensions = ["avif", "bmp", "gif", "jpeg", "jpg", "png", "svg", "webp"];
  const metadata = app.metadataCache.getFileCache(file);
  const bodyResourcePaths = [];
  const bodyExternalUrlCandidates = /* @__PURE__ */ new Set();
  if (metadata == null ? void 0 : metadata.embeds) {
    for (const embed of metadata.embeds) {
      const embedLink = embed.link;
      if (isExternalUrl(embedLink)) {
        if (hasValidImageExtension(embedLink) || !embedLink.includes(".")) {
          bodyExternalUrlCandidates.add(embedLink);
        }
      } else {
        const targetFile = app.metadataCache.getFirstLinkpathDest(embedLink, file.path);
        if (targetFile && validImageExtensions.includes(targetFile.extension)) {
          const resourcePath = app.vault.getResourcePath(targetFile);
          bodyResourcePaths.push(resourcePath);
        }
      }
    }
  }
  if (file.extension === "md" || file.extension === "mdx") {
    try {
      const content = await app.vault.cachedRead(file);
      const markdownImageRegex = /!\[([^\]]*)\]\((https?:\/\/[^\s)]+)/gi;
      let match;
      while ((match = markdownImageRegex.exec(content)) !== null) {
        const url = match[2].trim();
        const cleanUrl = url.replace(/["')\s]+$/, "");
        if (isExternalUrl(cleanUrl) && (hasValidImageExtension(cleanUrl) || !cleanUrl.includes("."))) {
          bodyExternalUrlCandidates.add(cleanUrl);
        }
      }
      const htmlImgRegex = /<img[^>]+src\s*=\s*["']?(https?:\/\/[^\s"'<>]+)/gi;
      while ((match = htmlImgRegex.exec(content)) !== null) {
        const url = match[1].trim();
        const cleanUrl = url.replace(/["'\s>]+$/, "");
        if (isExternalUrl(cleanUrl) && (hasValidImageExtension(cleanUrl) || !cleanUrl.includes("."))) {
          bodyExternalUrlCandidates.add(cleanUrl);
        }
      }
    } catch (error) {
      console.warn(`Failed to read file content for image extraction: ${file.path}`, error);
    }
  }
  const externalUrlArray = Array.from(bodyExternalUrlCandidates);
  const validationPromises = externalUrlArray.map(
    (url) => validateImageUrl(url).then((isValid) => isValid ? url : null)
  );
  const validatedUrls = await Promise.all(validationPromises);
  const bodyExternalUrls = validatedUrls.filter((url) => url !== null);
  return [...bodyResourcePaths, ...bodyExternalUrls];
}
function isGifUrl(url) {
  return /\.gif(\?|#|$)/i.test(url) || /\.gif$/i.test(url);
}
async function convertGifToStatic(url, forceStatic) {
  if (!forceStatic || !isGifUrl(url)) {
    return url;
  }
  return new Promise((resolve) => {
    const img = new Image();
    img.crossOrigin = "anonymous";
    img.onload = () => {
      try {
        const canvas = document.createElement("canvas");
        canvas.width = img.width;
        canvas.height = img.height;
        const ctx = canvas.getContext("2d");
        if (ctx) {
          ctx.drawImage(img, 0, 0);
          const dataUrl = canvas.toDataURL("image/png");
          resolve(dataUrl);
        } else {
          resolve(url);
        }
      } catch (error) {
        console.warn("Failed to convert GIF to static image:", error);
        resolve(url);
      }
    };
    img.onerror = () => {
      resolve(url);
    };
    setTimeout(() => {
      resolve(url);
    }, 5e3);
    img.src = url;
  });
}

// src/utils/preview.ts
var markdownPatterns = [
  /`([^`]+)`/g,
  /\*\*\*((?:(?!\*\*\*).)+)\*\*\*/g,
  /___((?:(?!___).)+)___/g,
  /\*\*((?:(?!\*\*).)+)\*\*/g,
  /__((?:(?!__).)+)__/g,
  /\*((?:(?!\*).)+)\*/g,
  /_((?:(?!_).)+)_/g,
  /~~((?:(?!~~).)+)~~/g,
  /==((?:(?!==).)+)==/g,
  /\[([^\]]+)\]\([^)]+\)/g,
  /!\[\[[^\]]+\]\]/g,
  /\[\[[^\]|]+\|[^\]]+\]\]/g,
  /\[\[[^\]]+\]\]/g,
  /#[a-zA-Z0-9_\-/]+/g,
  /^[-*+]\s*\[[ xX]\]\s+/gm,
  /^(\d+\.\s*)\[[ xX]\]\s+/gm,
  /^(\d+\)\s*)\[[ xX]\]\s+/gm,
  /^[-*+]\s+/gm,
  /^#{1,6}\s+.+$/gm,
  /^\s*(?:[-_*])\s*(?:[-_*])\s*(?:[-_*])[\s\-_*]*$/gm,
  /^\s*\|.*\|.*$/gm,
  /\^\[[^\]]*?]/g,
  /\[\^[^\]]+]/g,
  /^\s*\[\^[^\]]+]:.*$/gm,
  /<([a-z][a-z0-9]*)\b[^>]*>(.*?)<\/\1>/gi,
  /<[^>]+>/g
];
function protectEscapedChars(text) {
  const map = /* @__PURE__ */ new Map();
  let counter = 0;
  const result = text.replace(/\\(.)/g, (match, char) => {
    const placeholder = `\xA7\xA7ESCAPED${counter}\xA7\xA7`;
    map.set(placeholder, char);
    counter++;
    return placeholder;
  });
  return { text: result, map };
}
function restoreEscapedChars(text, map) {
  let result = text;
  map.forEach((char, placeholder) => {
    result = result.split(placeholder).join(char);
  });
  return result;
}
function removeCodeBlocks(text) {
  let result = text;
  let changed = true;
  while (changed) {
    changed = false;
    const openMatch = result.match(/^([`~]{3,})/m);
    if (!openMatch) break;
    const fenceChar = openMatch[1][0];
    const fenceLength = openMatch[1].length;
    const openIndex = openMatch.index;
    const escapedChar = fenceChar.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
    const closePattern = new RegExp(`^${escapedChar}{${fenceLength}}\\s*$`, "m");
    const afterOpen = result.substring(openIndex + openMatch[1].length);
    const closeMatch = afterOpen.match(closePattern);
    if (closeMatch) {
      const closeIndex = openIndex + openMatch[1].length + closeMatch.index;
      const blockEnd = closeIndex + closeMatch[0].length;
      result = result.substring(0, openIndex) + result.substring(blockEnd);
      changed = true;
    } else {
      const lineEnd = result.indexOf("\n", openIndex);
      if (lineEnd === -1) {
        result = result.substring(0, openIndex);
      } else {
        result = result.substring(0, openIndex) + result.substring(lineEnd + 1);
      }
      changed = true;
    }
  }
  return result;
}
function stripMarkdownSyntax(text) {
  if (!text || text.trim().length === 0) return "";
  text = text.replace(/^>\s*\[![\w-]+\][+-]?.*$/gm, "");
  text = text.replace(/^>\s?/gm, "");
  const { text: protectedText, map: escapedCharsMap } = protectEscapedChars(text);
  let result = removeCodeBlocks(protectedText);
  markdownPatterns.forEach((pattern) => {
    result = result.replace(pattern, (match, ...groups) => {
      if (match.match(/<[a-z][a-z0-9]*\b[^>]*>.*?<\//i)) {
        return groups[1] || "";
      }
      if (groups.length > 0 && groups[0] !== void 0) {
        for (let i = 0; i < groups.length - 2; i++) {
          if (typeof groups[i] === "string") {
            return groups[i];
          }
        }
      }
      return "";
    });
  });
  result = restoreEscapedChars(result, escapedCharsMap);
  return result;
}
function sanitizeForPreview(content, omitFirstLine = false, filename, titleValue) {
  const cleaned = content.replace(/^---[\s\S]*?---/, "").trim();
  let stripped = stripMarkdownSyntax(cleaned);
  const firstLineEnd = stripped.indexOf("\n");
  const firstLine = (firstLineEnd !== -1 ? stripped.substring(0, firstLineEnd) : stripped).trim();
  if (omitFirstLine || filename && firstLine === filename || titleValue && firstLine === titleValue) {
    stripped = firstLineEnd !== -1 ? stripped.substring(firstLineEnd + 1).trim() : "";
  }
  const normalized = stripped.replace(/\^[a-zA-Z0-9-]+/g, "").split(/\s+/).filter((word) => word).join(" ").trim().replace(/\.{2,}/g, (match) => match.replace(/\./g, "\u2024"));
  const wasTruncated = normalized.length > 500;
  let preview = normalized.substring(0, 500);
  if (wasTruncated) {
    preview += "\u2026";
  }
  return preview;
}
async function loadFilePreview(file, app, propertyValue, settings, fileName, titleValue) {
  let result = null;
  if (propertyValue != null) {
    if (Array.isArray(propertyValue)) {
      const items = propertyValue.map((item) => {
        if (item && typeof item === "object" && "data" in item) {
          return String(item.data);
        }
        return String(item);
      }).filter((s) => s.trim().length > 0);
      result = items.length > 0 ? items.join(", ") : null;
    } else if (typeof propertyValue === "string" || typeof propertyValue === "number") {
      const str = String(propertyValue).trim();
      result = str.length > 0 ? str : null;
    }
  }
  if (result) {
    if (settings.truncatePreviewProperty) {
      const wasTruncated = result.length > 500;
      result = result.substring(0, 500);
      if (wasTruncated) {
        result += "\u2026";
      }
    }
    return result;
  }
  if (settings.fallbackToContent) {
    const content = await app.vault.cachedRead(file);
    return sanitizeForPreview(
      content,
      settings.omitFirstLine,
      fileName,
      titleValue
    );
  }
  return "";
}

// src/shared/content-loader.ts
async function loadImageForEntry(path, file, app, imagePropertyValues, fallbackToEmbeds, imageCache, hasImageCache) {
  const hasPropertyValues = imagePropertyValues && Array.isArray(imagePropertyValues) && imagePropertyValues.length > 0;
  const shouldFallback = fallbackToEmbeds === true || fallbackToEmbeds === "always" || fallbackToEmbeds === "if-empty" && !hasPropertyValues;
  if (!shouldFallback && path in imageCache) {
    delete imageCache[path];
    delete hasImageCache[path];
  }
  if (path in imageCache && !hasPropertyValues && shouldFallback) {
    return;
  }
  try {
    const { internalPaths, externalUrls } = await processImagePaths(imagePropertyValues);
    let validImages = [
      ...resolveInternalImagePaths(internalPaths, path, app),
      ...externalUrls
      // External URLs already validated by processImagePaths
    ];
    if (validImages.length === 0 && !hasPropertyValues && shouldFallback) {
      validImages = await extractEmbedImages(file, app);
    }
    if (validImages.length > 0) {
      imageCache[path] = validImages.length > 1 ? validImages : validImages[0];
      hasImageCache[path] = true;
    } else if (hasPropertyValues) {
      delete imageCache[path];
      hasImageCache[path] = true;
    } else if (!shouldFallback) {
      delete imageCache[path];
      delete hasImageCache[path];
    }
  } catch (error) {
    console.error(`Failed to load image for ${path}:`, error);
  }
}
async function loadImagesForEntries(entries, fallbackToEmbeds, app, imageCache, hasImageCache) {
  const entriesToProcess = entries.filter((entry) => {
    const hasPropertyValues = entry.imagePropertyValues && Array.isArray(entry.imagePropertyValues) && entry.imagePropertyValues.length > 0;
    return !(entry.path in imageCache) || hasPropertyValues;
  });
  const BATCH_SIZE = 50;
  for (let i = 0; i < entriesToProcess.length; i += BATCH_SIZE) {
    const batch = entriesToProcess.slice(i, i + BATCH_SIZE);
    await Promise.all(
      batch.map(async (entry) => {
        await loadImageForEntry(
          entry.path,
          entry.file,
          app,
          entry.imagePropertyValues,
          fallbackToEmbeds,
          imageCache,
          hasImageCache
        );
      })
    );
  }
}
async function loadSnippetsForEntries(entries, fallbackToContent, omitFirstLine, app, snippetCache, truncatePreviewProperty) {
  await Promise.all(
    entries.map(async (entry) => {
      if (entry.path in snippetCache) {
        return;
      }
      try {
        if (entry.file.extension === "md" || entry.file.extension === "mdx") {
          snippetCache[entry.path] = await loadFilePreview(
            entry.file,
            app,
            entry.descriptionData,
            {
              fallbackToContent,
              omitFirstLine,
              truncatePreviewProperty
            },
            entry.fileName,
            entry.titleString
          );
        } else {
          snippetCache[entry.path] = "";
        }
      } catch (error) {
        console.error(`Failed to load snippet for ${entry.path}:`, error);
        snippetCache[entry.path] = "";
      }
    })
  );
}

// src/views/shared-renderer.ts
var import_obsidian12 = require("obsidian");

// src/utils/draft-status-badge.ts
var import_obsidian9 = require("obsidian");
init_frontmatter_helper();
async function calculateDraftStatusAsync(entry, settings, app, mdxFrontmatterCache) {
  var _a;
  let booleanValue = null;
  let isDraft = false;
  if (settings.draftStatusUseFilenamePrefix && entry.file && entry.file.name) {
    const fileName = entry.file.name;
    const startsWithUnderscore = fileName.startsWith("_");
    booleanValue = startsWithUnderscore;
    isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
  } else if (settings.draftStatusProperty) {
    const draftValue = entry.getValue(settings.draftStatusProperty);
    if (draftValue && "data" in draftValue && typeof draftValue.data === "boolean") {
      booleanValue = draftValue.data;
      isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
    } else {
      const file = app.vault.getAbstractFileByPath(entry.file.path);
      if (file instanceof import_obsidian9.TFile && file.extension === "mdx") {
        let frontmatter = null;
        if (mdxFrontmatterCache) {
          frontmatter = (_a = mdxFrontmatterCache[entry.file.path]) != null ? _a : null;
        }
        if (frontmatter === void 0) {
          frontmatter = await getFileFrontmatter(app, file);
        }
        if (frontmatter) {
          const cleanProp = settings.draftStatusProperty.startsWith("note.") ? settings.draftStatusProperty.substring(5) : settings.draftStatusProperty;
          const frontmatterValue = frontmatter[cleanProp];
          if (typeof frontmatterValue === "boolean") {
            booleanValue = frontmatterValue;
            isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
          }
        }
      }
    }
  }
  return { booleanValue, isDraft };
}
function calculateDraftStatus(entry, settings) {
  let booleanValue = null;
  let isDraft = false;
  if (settings.draftStatusUseFilenamePrefix && entry.file && entry.file.name) {
    const fileName = entry.file.name;
    const startsWithUnderscore = fileName.startsWith("_");
    booleanValue = startsWithUnderscore;
    isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
  } else if (settings.draftStatusProperty) {
    const draftValue = entry.getValue(settings.draftStatusProperty);
    if (draftValue && "data" in draftValue && typeof draftValue.data === "boolean") {
      booleanValue = draftValue.data;
      isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
    }
  }
  return { booleanValue, isDraft };
}
function renderDraftStatusBadge(container, entry, cardPath, settings, onPropertyToggle, app, mdxFrontmatterCache) {
  if (!settings.showDraftStatus) {
    return;
  }
  const { booleanValue: syncValue, isDraft: syncIsDraft } = calculateDraftStatus(entry, settings);
  if (syncValue !== null) {
    renderBadge(container, syncValue, syncIsDraft, onPropertyToggle, cardPath);
  } else if (app) {
    const file = app.vault.getAbstractFileByPath(entry.file.path);
    if (file instanceof import_obsidian9.TFile && file.extension === "mdx" && mdxFrontmatterCache) {
      const frontmatter = mdxFrontmatterCache[entry.file.path];
      if (frontmatter && settings.draftStatusProperty) {
        const cleanProp = settings.draftStatusProperty.startsWith("note.") ? settings.draftStatusProperty.substring(5) : settings.draftStatusProperty;
        const frontmatterValue = frontmatter[cleanProp];
        if (typeof frontmatterValue === "boolean") {
          const booleanValue = frontmatterValue;
          const isDraft = settings.draftStatusReverse ? !booleanValue : booleanValue;
          renderBadge(container, booleanValue, isDraft, onPropertyToggle, cardPath);
          return;
        }
      }
    }
    void (async () => {
      const { booleanValue, isDraft } = await calculateDraftStatusAsync(entry, settings, app, mdxFrontmatterCache);
      if (booleanValue !== null && container.isConnected) {
        renderBadge(container, booleanValue, isDraft, onPropertyToggle, cardPath);
      }
    })();
  }
}
function renderBadge(container, booleanValue, isDraft, onPropertyToggle, cardPath) {
  if (container.querySelector(".card-status-badge")) {
    return;
  }
  const statusBadge = container.createDiv("card-status-badge");
  if (isDraft) {
    statusBadge.addClass("status-draft");
    statusBadge.appendText("Draft");
  } else {
    statusBadge.addClass("status-published");
    statusBadge.appendText("Published");
  }
  if (onPropertyToggle) {
    statusBadge.addClass("bases-cms-cursor-pointer");
    statusBadge.addEventListener("click", (e) => {
      e.stopPropagation();
      const newValue = !booleanValue;
      void onPropertyToggle(cardPath, "draft", newValue);
    });
  }
}

// src/utils/quick-edit-icon.ts
var import_obsidian10 = require("obsidian");
function showRenameDialog(app, file) {
  const modal = new import_obsidian10.Modal(app);
  modal.titleEl.setText("Rename file");
  const inputContainer = modal.contentEl.createDiv();
  setCssProps(inputContainer, {
    width: "100%"
  });
  const input = new import_obsidian10.TextComponent(inputContainer);
  input.setValue(file.basename);
  setCssProps(input.inputEl, {
    width: "100%",
    boxSizing: "border-box"
  });
  input.inputEl.focus();
  input.inputEl.select();
  const buttonContainer = modal.contentEl.createDiv({ cls: "modal-button-container" });
  const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
  cancelButton.addEventListener("click", () => modal.close());
  const renameButton = buttonContainer.createEl("button", {
    text: "Rename",
    cls: "mod-cta"
  });
  const handleRename = async () => {
    const newName = input.getValue().trim();
    if (!newName || newName === file.basename) {
      modal.close();
      return;
    }
    const pathParts = file.path.split("/");
    pathParts[pathParts.length - 1] = newName + (file.extension ? `.${file.extension}` : "");
    const newPath = pathParts.join("/");
    try {
      await app.fileManager.renameFile(file, newPath);
      modal.close();
    } catch (error) {
      console.error("[Bases CMS] Error renaming file:", error);
      modal.close();
    }
  };
  renameButton.addEventListener("click", () => {
    void handleRename();
  });
  input.inputEl.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      e.preventDefault();
      void handleRename();
    } else if (e.key === "Escape") {
      e.preventDefault();
      modal.close();
    }
  });
  modal.open();
}
function isObsidianRenameCommand(commandId) {
  const lowerId = commandId.toLowerCase();
  return commandId === "file-explorer:rename-file" || commandId === "rename-file" || commandId === "file:rename-file" || lowerId.includes("rename") && lowerId.includes("file") && !lowerId.includes(":");
}
function isProblematicCommand(commandId, commandName) {
  const lowerId = commandId.toLowerCase();
  const lowerName = commandName.toLowerCase();
  const problematicPatterns = [
    "add tag",
    "add-tag",
    "insert-template",
    "insert-template",
    "editor:",
    "markdown:"
  ];
  return problematicPatterns.some(
    (pattern) => lowerId.includes(pattern) || lowerName.includes(pattern)
  );
}
function setupQuickEditIcon(app, plugin, titleEl, cardEl, cardPath, settings) {
  if (!plugin.settings.enableQuickEdit || !plugin.settings.quickEditCommand || plugin.settings.quickEditCommand === "" || settings.hideQuickEditIcon) {
    return;
  }
  const quickEditIcon = titleEl.createSpan("bases-cms-quick-edit-icon");
  quickEditIcon.addClass("bases-cms-cursor-default");
  (0, import_obsidian10.setIcon)(quickEditIcon, plugin.settings.quickEditIcon || "pencil-line");
  titleEl.addEventListener("click", (e) => {
    if (quickEditIcon.contains(e.target)) {
      e.stopPropagation();
      e.stopImmediatePropagation();
    }
  }, true);
  cardEl.addEventListener("click", (e) => {
    void (async () => {
      var _a, _b, _c, _d;
      const target = e.target;
      if (!quickEditIcon.contains(target) && !target.closest(".bases-cms-quick-edit-icon")) {
        return;
      }
      e.stopPropagation();
      e.stopImmediatePropagation();
      e.preventDefault();
      const file = app.vault.getAbstractFileByPath(cardPath);
      if (file instanceof import_obsidian10.TFile) {
        const commandId = plugin.settings.quickEditCommand;
        const commandRegistry = app.commands;
        const command = (_a = commandRegistry == null ? void 0 : commandRegistry.commands) == null ? void 0 : _a[commandId];
        const commandName = (command == null ? void 0 : command.name) || "";
        const lowerCommandName = commandName.toLowerCase();
        if (isObsidianRenameCommand(commandId) || lowerCommandName.includes("rename") && lowerCommandName.includes("file")) {
          showRenameDialog(app, file);
          return;
        }
        if (isProblematicCommand(commandId, commandName)) {
          if (plugin.settings.quickEditOpenFile) {
          } else {
            new import_obsidian10.Notice(`The "${commandName}" command requires the file to be open in an editor. Enable "Attempt to open file and execute quick edit command" in settings to try anyway.`, 5e3);
            return;
          }
        }
        let helperCalled = false;
        try {
          let pluginId = null;
          let baseCommandId = commandId;
          if (commandId.includes(":")) {
            const parts = commandId.split(":");
            pluginId = parts[0];
            baseCommandId = parts.slice(1).join(":");
          } else {
            const appWithCommands = app;
            const commandRegistry2 = appWithCommands.commands;
            const command2 = (_b = commandRegistry2 == null ? void 0 : commandRegistry2.commands) == null ? void 0 : _b[commandId];
            if (command2) {
              const sourcePlugin = command2.plugin || command2.sourcePlugin;
              if (sourcePlugin) {
                pluginId = ((_c = sourcePlugin.manifest) == null ? void 0 : _c.id) || sourcePlugin.pluginId || null;
              }
            }
          }
          if (pluginId) {
            const plugins = app.plugins;
            const sourcePlugin = (_d = plugins == null ? void 0 : plugins.plugins) == null ? void 0 : _d[pluginId];
            if (sourcePlugin) {
              const methodName = baseCommandId.split("-").map(
                (part, index) => index === 0 ? part : part.charAt(0).toUpperCase() + part.slice(1)
              ).join("") + "ByPath";
              if (sourcePlugin && typeof sourcePlugin[methodName] === "function") {
                await sourcePlugin[methodName](cardPath);
                helperCalled = true;
                return;
              }
            }
          }
        } catch (e2) {
        }
        if (!helperCalled) {
          if (!plugin.settings.quickEditOpenFile) {
            new import_obsidian10.Notice(`This command doesn't have special handling. Enable "Attempt to open file and execute quick edit command" in settings to try executing it.`, 5e3);
            return;
          }
          const leaf = app.workspace.getLeaf(false);
          await leaf.openFile(file);
          app.workspace.setActiveLeaf(leaf, { focus: true });
          let attempts = 0;
          const maxAttempts = 30;
          const executeCommand = () => {
            const finalActiveFile = app.workspace.getActiveFile();
            if (finalActiveFile === file) {
              void (async () => {
                var _a2, _b2;
                try {
                  await ((_b2 = (_a2 = app.commands) == null ? void 0 : _a2.executeCommandById) == null ? void 0 : _b2.call(_a2, plugin.settings.quickEditCommand));
                } catch (e2) {
                }
              })();
            }
          };
          const checkEditorReady = () => {
            const view = leaf.view;
            const viewWithEditor = view;
            const activeFile = app.workspace.getActiveFile();
            if (view && "editor" in view && viewWithEditor.editor && activeFile === file) {
              requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                  setTimeout(() => {
                    executeCommand();
                  }, 200);
                });
              });
            } else if (attempts < maxAttempts) {
              attempts++;
              setTimeout(checkEditorReady, 50);
            }
          };
          checkEditorReady();
        }
      }
    })();
  }, true);
  quickEditIcon.addEventListener("mousedown", (e) => {
    e.stopPropagation();
    e.stopImmediatePropagation();
    e.preventDefault();
  }, true);
}

// src/utils/property-renderer.ts
var import_obsidian11 = require("obsidian");
var PropertyRenderer = class {
  constructor(app, getBasesConfig, getBasesController) {
    this.app = app;
    this.getBasesConfig = getBasesConfig;
    this.getBasesController = getBasesController;
  }
  /**
   * Renders property fields for a card
   * @param position - 'top' to render only top-positioned groups, 'bottom' to render only bottom-positioned groups, undefined to render all
   */
  renderProperties(cardEl, card, entry, settings, onPropertyToggle, position) {
    const props = [
      settings.propertyDisplay1,
      settings.propertyDisplay2,
      settings.propertyDisplay3,
      settings.propertyDisplay4,
      settings.propertyDisplay5,
      settings.propertyDisplay6,
      settings.propertyDisplay7,
      settings.propertyDisplay8,
      settings.propertyDisplay9,
      settings.propertyDisplay10,
      settings.propertyDisplay11,
      settings.propertyDisplay12,
      settings.propertyDisplay13,
      settings.propertyDisplay14
    ];
    const seen = /* @__PURE__ */ new Set();
    const effectiveProps = props.map((prop) => {
      if (!prop || prop === "") return "";
      if (seen.has(prop)) return "";
      seen.add(prop);
      return prop;
    });
    const values = effectiveProps.map((prop, index) => {
      if (!prop) return null;
      const cardProperty = `property${index + 1}`;
      const cardValue = card[cardProperty];
      if (cardValue !== void 0 && cardValue !== null) {
        return cardValue;
      }
      try {
        const value = entry.getValue(prop);
        if (!value) return null;
        if ("date" in value && value.date instanceof Date) {
          return value.date.toLocaleDateString();
        }
        if ("data" in value && value.data != null) {
          const data = value.data;
          if (Array.isArray(data)) {
            return data.map((item) => {
              if (item && typeof item === "object" && item !== null && !Array.isArray(item)) {
                return JSON.stringify(item);
              }
              return String(item);
            }).join(", ");
          }
          if (data && typeof data === "object" && data !== null && !Array.isArray(data)) {
            return JSON.stringify(data);
          }
          if (typeof data === "string" || typeof data === "number" || typeof data === "boolean") {
            return String(data);
          }
          return data ? JSON.stringify(data) : "";
        }
      } catch (e) {
      }
      return null;
    });
    const propertyGroups = [
      {
        props: [effectiveProps[0], effectiveProps[1]],
        values: [values[0], values[1]],
        sideBySide: settings.propertyLayout12SideBySide,
        position: settings.propertyGroup1Position
      },
      {
        props: [effectiveProps[2], effectiveProps[3]],
        values: [values[2], values[3]],
        sideBySide: settings.propertyLayout34SideBySide,
        position: settings.propertyGroup2Position
      },
      {
        props: [effectiveProps[4], effectiveProps[5]],
        values: [values[4], values[5]],
        sideBySide: settings.propertyLayout56SideBySide,
        position: settings.propertyGroup3Position
      },
      {
        props: [effectiveProps[6], effectiveProps[7]],
        values: [values[6], values[7]],
        sideBySide: settings.propertyLayout78SideBySide,
        position: settings.propertyGroup4Position
      },
      {
        props: [effectiveProps[8], effectiveProps[9]],
        values: [values[8], values[9]],
        sideBySide: settings.propertyLayout910SideBySide,
        position: settings.propertyGroup5Position
      },
      {
        props: [effectiveProps[10], effectiveProps[11]],
        values: [values[10], values[11]],
        sideBySide: settings.propertyLayout1112SideBySide,
        position: settings.propertyGroup6Position
      },
      {
        props: [effectiveProps[12], effectiveProps[13]],
        values: [values[12], values[13]],
        sideBySide: settings.propertyLayout1314SideBySide,
        position: settings.propertyGroup7Position
      }
    ];
    const topGroups = [];
    const bottomGroups = [];
    propertyGroups.forEach((group, index) => {
      const hasContent = group.props[0] !== "" || group.props[1] !== "";
      if (hasContent) {
        if (group.position === "top") {
          topGroups.push(group);
        } else {
          bottomGroups.push(group);
        }
      }
    });
    const shouldHideProperty = (propName, propValue) => {
      var _a, _b, _c;
      if (!propName || propName === "") return true;
      const isEmptyValue = propValue === null || propValue === "" || typeof propValue === "string" && propValue.trim() === "";
      let propertyExists = false;
      try {
        const filePath = (_a = entry == null ? void 0 : entry.file) == null ? void 0 : _a.path;
        if (filePath && ((_b = this.app) == null ? void 0 : _b.vault) && ((_c = this.app) == null ? void 0 : _c.metadataCache)) {
          const file = this.app.vault.getAbstractFileByPath(filePath);
          if (file instanceof import_obsidian11.TFile) {
            if (file.extension === "mdx") {
              propertyExists = !isEmptyValue;
            } else {
              const metadata = this.app.metadataCache.getFileCache(file);
              if (metadata && metadata.frontmatter) {
                const propertyNames = propName.split(",").map((p) => p.trim()).filter((p) => p);
                for (const prop of propertyNames) {
                  const propKey = prop.replace(/^(note|formula|file)\./, "");
                  if (propKey in metadata.frontmatter) {
                    propertyExists = true;
                    break;
                  }
                }
              }
            }
          }
        }
      } catch (e) {
      }
      if (shouldHideMissingProperties() && !propertyExists) {
        return true;
      }
      if (shouldHideEmptyProperties() && propertyExists && isEmptyValue) {
        return true;
      }
      if (shouldHideEmptyProperties() && isEmptyValue) {
        return true;
      }
      return false;
    };
    if ((position === "top" || position === void 0) && topGroups.length > 0) {
      const topMetaEl = cardEl.createDiv("card-properties properties-top");
      topGroups.forEach((group, groupIndex) => {
        const prop1ShouldRender = group.props[0] && !shouldHideProperty(group.props[0], group.values[0]);
        const prop2ShouldRender = group.props[1] && !shouldHideProperty(group.props[1], group.values[1]);
        if (!prop1ShouldRender && !prop2ShouldRender) {
          return;
        }
        const rowEl = topMetaEl.createDiv(`property-row property-row-group-${groupIndex + 1}`);
        if (group.sideBySide) {
          rowEl.addClass("property-row-side-by-side");
        }
        const field1El = rowEl.createDiv("property-field property-field-1");
        if (prop1ShouldRender) {
          this.renderPropertyContent(field1El, group.props[0], group.values[0], card, entry, settings, onPropertyToggle);
        }
        const field2El = rowEl.createDiv("property-field property-field-2");
        if (prop2ShouldRender) {
          this.renderPropertyContent(field2El, group.props[1], group.values[1], card, entry, settings, onPropertyToggle);
        }
      });
    }
    if ((position === "bottom" || position === void 0) && bottomGroups.length > 0) {
      const bottomMetaEl = cardEl.createDiv("card-properties properties-bottom");
      bottomGroups.forEach((group, groupIndex) => {
        const prop1ShouldRender = group.props[0] && !shouldHideProperty(group.props[0], group.values[0]);
        const prop2ShouldRender = group.props[1] && !shouldHideProperty(group.props[1], group.values[1]);
        if (!prop1ShouldRender && !prop2ShouldRender) {
          return;
        }
        const rowEl = bottomMetaEl.createDiv(`property-row property-row-group-${groupIndex + 1}`);
        if (group.sideBySide) {
          rowEl.addClass("property-row-side-by-side");
        }
        const field1El = rowEl.createDiv("property-field property-field-1");
        if (prop1ShouldRender) {
          this.renderPropertyContent(field1El, group.props[0], group.values[0], card, entry, settings, onPropertyToggle);
        }
        const field2El = rowEl.createDiv("property-field property-field-2");
        if (prop2ShouldRender) {
          this.renderPropertyContent(field2El, group.props[1], group.values[1], card, entry, settings, onPropertyToggle);
        }
      });
    }
  }
  /**
   * Renders individual property content
   */
  renderPropertyContent(container, propertyName, resolvedValue, card, entry, settings, onPropertyToggle) {
    if (propertyName === "") return;
    if (resolvedValue === null && shouldHideMissingProperties()) {
      return;
    }
    if (resolvedValue === "" && shouldHideEmptyProperties()) {
      return;
    }
    if (!resolvedValue && settings.propertyLabels === "hide") {
      return;
    }
    if (settings.propertyLabels === "hide") {
      if ((propertyName === "tags" || propertyName === "note.tags") && card.yamlTags.length === 0) {
        return;
      }
      if ((propertyName === "file.tags" || propertyName === "file tags") && card.tags.length === 0) {
        return;
      }
    }
    const basesConfig = this.getBasesConfig ? this.getBasesConfig() : void 0;
    const basesController = this.getBasesController ? this.getBasesController() : void 0;
    const propertyLabel = getPropertyLabel(propertyName, this.app, basesConfig, basesController);
    const isCustomLabel = propertyLabel.toLowerCase() !== propertyName.toLowerCase();
    if (settings.propertyLabels === "above") {
      const labelEl = container.createDiv("property-label");
      if (isCustomLabel) {
        labelEl.addClass("property-label-custom");
      }
      labelEl.textContent = propertyLabel;
    }
    const metaContent = container.createDiv("property-content");
    if (settings.propertyLabels === "inline") {
      metaContent.addClass("property-content-inline");
    }
    if (settings.propertyLabels === "inline") {
      const labelSpan = metaContent.createSpan("property-label-inline");
      labelSpan.textContent = propertyLabel + ": ";
    }
    if (!resolvedValue) {
      const emptyMarker = metaContent.createSpan("property-empty-marker");
      emptyMarker.textContent = getEmptyValueMarker();
      return;
    }
    const isKnownTimestampProperty = propertyName === "file.mtime" || propertyName === "file.ctime" || propertyName === "modified time" || propertyName === "created time";
    if (isKnownTimestampProperty) {
      const timestampWrapper = metaContent.createSpan();
      timestampWrapper.appendText(resolvedValue);
    } else if ((propertyName === "tags" || propertyName === "note.tags") && card.yamlTags.length > 0) {
      const tagsWrapper = metaContent.createDiv("tags-wrapper");
      const tagStyle = getTagStyle();
      if (tagStyle !== "plain") {
        tagsWrapper.addClass(`tag-style-${tagStyle}`);
      }
      card.yamlTags.forEach((tag) => {
        const tagEl = tagsWrapper.createEl("a", {
          cls: "tag",
          text: showTagHashPrefix() ? `#${tag}` : tag,
          href: "#"
        });
        tagEl.addEventListener("click", (e) => {
          var _a, _b, _c;
          e.preventDefault();
          const searchPlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["global-search"];
          if ((_c = searchPlugin == null ? void 0 : searchPlugin.instance) == null ? void 0 : _c.openGlobalSearch) {
            searchPlugin.instance.openGlobalSearch("tag:" + tag);
          }
        });
      });
    } else if ((propertyName === "file.tags" || propertyName === "file tags") && card.tags.length > 0) {
      const tagsWrapper = metaContent.createDiv("tags-wrapper");
      const tagStyle = getTagStyle();
      if (tagStyle !== "plain") {
        tagsWrapper.addClass(`tag-style-${tagStyle}`);
      }
      card.tags.forEach((tag) => {
        const tagEl = tagsWrapper.createEl("a", {
          cls: "tag",
          text: showTagHashPrefix() ? `#${tag}` : tag,
          href: "#"
        });
        tagEl.addEventListener("click", (e) => {
          var _a, _b, _c;
          e.preventDefault();
          const searchPlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["global-search"];
          if ((_c = searchPlugin == null ? void 0 : searchPlugin.instance) == null ? void 0 : _c.openGlobalSearch) {
            searchPlugin.instance.openGlobalSearch("tag:" + tag);
          }
        });
      });
    } else {
      if (!this.app || !this.app.metadataCache) {
        const textWrapper = metaContent.createDiv("text-wrapper");
        this.renderPropertyValueWithLinks(textWrapper, resolvedValue, card.path, propertyName);
        return;
      }
      let propInfo = void 0;
      try {
        const metadataCache = this.app.metadataCache;
        const getAllPropertyInfos = metadataCache.getAllPropertyInfos;
        if (typeof getAllPropertyInfos === "function") {
          const propertyInfos = getAllPropertyInfos();
          propInfo = propertyInfos[propertyName.toLowerCase()];
        }
      } catch (e) {
      }
      let entryValue = null;
      try {
        if (entry && typeof entry.getValue === "function") {
          entryValue = entry.getValue(propertyName);
        }
      } catch (e) {
      }
      const isCheckbox = (propInfo == null ? void 0 : propInfo.widget) === "checkbox" || entryValue && "data" in entryValue && typeof entryValue.data === "boolean";
      if (isCheckbox && onPropertyToggle) {
        const checkbox = metaContent.createEl("input", { type: "checkbox" });
        checkbox.checked = entryValue && "data" in entryValue ? Boolean(entryValue.data) : false;
        metaContent.createSpan({ text: propertyLabel });
        checkbox.addEventListener("change", (e) => {
          e.stopPropagation();
          const checked = checkbox.checked;
          void (async () => {
            try {
              const cleanProperty = propertyName.startsWith("note.") ? propertyName.substring(5) : propertyName;
              await onPropertyToggle(card.path, cleanProperty, checked);
            } catch (e2) {
              checkbox.checked = !checked;
            }
          })();
        });
        checkbox.addEventListener("click", (e) => {
          e.stopPropagation();
        });
      } else {
        const textWrapper = metaContent.createDiv("text-wrapper");
        this.renderPropertyValueWithLinks(textWrapper, resolvedValue, card.path, propertyName);
      }
    }
    if (!metaContent.textContent || metaContent.textContent.trim().length === 0) {
      metaContent.remove();
    }
  }
  /**
   * Renders property value with clickable links
   * Detects wikilinks [[...]], markdown links [...](...), and URLs
   * For image properties, also makes file paths clickable (like Obsidian does)
   */
  renderPropertyValueWithLinks(container, value, sourcePath, propertyName) {
    if (!value) {
      container.appendText(getEmptyValueMarker());
      return;
    }
    const trimmedValue = value.trim();
    if ((trimmedValue.startsWith("http://") || trimmedValue.startsWith("https://")) && !trimmedValue.includes(" ")) {
      const linkEl = container.createEl("a", {
        cls: "external-link",
        href: trimmedValue
      });
      linkEl.textContent = trimmedValue;
      linkEl.setAttr("target", "_blank");
      linkEl.setAttr("rel", "noopener");
      linkEl.addEventListener("click", (e) => {
        e.stopPropagation();
      });
      return;
    }
    const isImageProperty = propertyName && (propertyName.toLowerCase().includes("image") || propertyName.toLowerCase() === "cover" || propertyName.toLowerCase() === "thumbnail");
    if (isImageProperty && !trimmedValue.includes(" ") && !trimmedValue.startsWith("http://") && !trimmedValue.startsWith("https://") && (trimmedValue.includes("/") || trimmedValue.includes("\\") || trimmedValue.match(/\.(png|jpg|jpeg|gif|svg|webp|mp4|mov|avi)$/i))) {
      const linkEl = container.createEl("a", {
        cls: "internal-link",
        href: trimmedValue
      });
      linkEl.textContent = trimmedValue;
      linkEl.addEventListener("click", (e) => {
        e.stopPropagation();
        e.preventDefault();
        const newLeaf = e.metaKey || e.ctrlKey;
        void this.app.workspace.openLinkText(trimmedValue, sourcePath, newLeaf);
      });
      return;
    }
    const wikilinkRegex = /\[\[([^\]]+)\]\]/g;
    const markdownLinkRegex = /\[([^\]]+)\]\(([^)]+)\)/g;
    const matches = [];
    for (const m of value.matchAll(wikilinkRegex)) {
      if (m.index !== void 0) {
        matches.push({ index: m.index, type: "wikilink", match: m });
      }
    }
    for (const m of value.matchAll(markdownLinkRegex)) {
      if (m.index !== void 0) {
        matches.push({ index: m.index, type: "markdown", match: m });
      }
    }
    matches.sort((a, b) => a.index - b.index);
    let lastIndex = 0;
    for (const { index, type, match } of matches) {
      if (index > lastIndex) {
        container.appendText(value.substring(lastIndex, index));
      }
      if (type === "wikilink") {
        const linkContent = match[1];
        const parts = linkContent.split("|");
        const linkPath = parts[0].trim();
        const displayText = parts.length > 1 ? parts[1].trim() : linkPath;
        const linkEl = container.createEl("a", {
          cls: "internal-link",
          href: linkPath
        });
        linkEl.textContent = displayText;
        linkEl.addEventListener("click", (e) => {
          e.stopPropagation();
          e.preventDefault();
          const newLeaf = e.metaKey || e.ctrlKey;
          void this.app.workspace.openLinkText(linkPath, sourcePath, newLeaf);
        });
      } else if (type === "markdown") {
        const linkText = match[1];
        const linkUrl = match[2];
        if (linkUrl.startsWith("http://") || linkUrl.startsWith("https://")) {
          const linkEl = container.createEl("a", {
            cls: "external-link",
            href: linkUrl
          });
          linkEl.textContent = linkText;
          linkEl.setAttr("target", "_blank");
          linkEl.setAttr("rel", "noopener");
          linkEl.addEventListener("click", (e) => {
            e.stopPropagation();
          });
        } else {
          const linkEl = container.createEl("a", {
            cls: "internal-link",
            href: linkUrl
          });
          linkEl.textContent = linkText;
          linkEl.addEventListener("click", (e) => {
            e.stopPropagation();
            e.preventDefault();
            const newLeaf = e.metaKey || e.ctrlKey;
            void this.app.workspace.openLinkText(linkUrl, sourcePath, newLeaf);
          });
        }
      }
      lastIndex = index + match[0].length;
    }
    if (lastIndex < value.length) {
      container.appendText(value.substring(lastIndex));
    } else if (matches.length === 0) {
      container.appendText(value);
    }
  }
};

// src/views/shared-renderer.ts
init_frontmatter_helper();
var SharedCardRenderer = class {
  constructor(app, plugin, propertyObservers, updateLayoutRef, basesConfig, basesController) {
    this.app = app;
    this.plugin = plugin;
    this.propertyObservers = propertyObservers;
    this.updateLayoutRef = updateLayoutRef;
    this.basesConfig = basesConfig;
    this.basesController = basesController;
    this.propertyRenderer = new PropertyRenderer(
      this.app,
      () => this.basesConfig,
      // Pass a getter function so it always gets the latest config
      () => this.basesController
      // Pass a getter function so it always gets the latest controller
    );
  }
  /**
   * Set MDX frontmatter cache for synchronous access during rendering
   */
  setMdxFrontmatterCache(cache) {
    this.mdxFrontmatterCache = cache;
  }
  /**
   * Renders a complete card with CMS features
   */
  renderCard(container, card, entry, settings, hoverParent, isSelected, onSelect, onPropertyToggle, toolbarActions) {
    const cardEl = container.createDiv("card bases-cms-card");
    setCssProps(cardEl, {
      display: "block",
      position: "relative"
    });
    if (settings.imageFormat === "cover") {
      cardEl.classList.add("image-format-cover");
    } else if (settings.imageFormat === "thumbnail") {
      cardEl.classList.add("image-format-thumbnail");
      cardEl.classList.add(`thumbnail-${settings.imagePosition}`);
    }
    cardEl.setAttribute("data-path", card.path);
    cardEl.setAttribute("data-href", card.path);
    cardEl.addClass("bases-cms-cursor-pointer");
    const checkboxEl = cardEl.createDiv("bases-cms-select-checkbox");
    const checkbox = checkboxEl.createEl("input", { type: "checkbox", cls: "selection-checkbox" });
    checkbox.checked = isSelected;
    checkbox.addEventListener("change", (e) => {
      e.stopPropagation();
      e.stopImmediatePropagation();
      onSelect(card.path, checkbox.checked);
    });
    checkbox.addEventListener("click", (e) => {
      e.stopPropagation();
      e.stopImmediatePropagation();
    });
    if (settings.showDraftStatus && settings.imageFormat !== "cover") {
      renderDraftStatusBadge(cardEl, entry, card.path, settings, onPropertyToggle, this.app, this.mdxFrontmatterCache);
    }
    cardEl.addEventListener("click", (e) => {
      const target = e.target;
      const quickEditIcon = target.closest(".bases-cms-quick-edit-icon");
      if (quickEditIcon) {
        e.stopPropagation();
        e.stopImmediatePropagation();
        e.preventDefault();
        return;
      }
      if (checkboxEl.contains(target) || target.tagName === "INPUT" || target.closest("input") || target.closest(".bases-cms-property") || target.closest(".card-status-badge")) {
        return;
      }
      const newLeaf = e.metaKey || e.ctrlKey;
      void this.app.workspace.openLinkText(card.path, "", newLeaf);
    });
    cardEl.addEventListener("contextmenu", (e) => {
      const target = e.target;
      if (checkboxEl.contains(target) || target.tagName === "INPUT" || target.closest("input") || target.closest(".bases-cms-property") || target.closest(".card-status-badge") || target.closest(".bases-cms-quick-edit-icon")) {
        return;
      }
      const file = this.app.vault.getAbstractFileByPath(card.path);
      if (file && file instanceof import_obsidian12.TFile) {
        e.stopPropagation();
        const menu = new import_obsidian12.Menu();
        const currentlySelected = checkbox.checked;
        if (currentlySelected) {
          menu.addItem((item) => {
            item.setTitle("Unselect");
            item.setIcon("square");
            item.onClick(() => {
              onSelect(card.path, false);
            });
          });
        } else {
          menu.addItem((item) => {
            item.setTitle("Select");
            item.setIcon("copy-check");
            item.onClick(() => {
              onSelect(card.path, true);
            });
          });
        }
        menu.addSeparator();
        this.app.workspace.trigger("file-menu", menu, file, "bases");
        menu.addSeparator();
        menu.addItem((item) => {
          item.setTitle("Delete");
          item.setIcon("trash-2");
          item.onClick(async () => {
            if (toolbarActions) {
              await toolbarActions.handleDelete();
            }
          });
        });
        menu.showAtMouseEvent(e);
        setTimeout(() => {
          const menuEl = document.querySelector(".menu");
          if (!menuEl) return;
          const menuItems = Array.from(menuEl.querySelectorAll(".menu-item"));
          const deleteItem = menuItems.find((item) => {
            var _a;
            const title = (_a = item.textContent) == null ? void 0 : _a.trim();
            return title === "Delete";
          });
          if (deleteItem) {
            deleteItem.addClass("is-danger");
            const icon = deleteItem.querySelector("svg");
            if (icon) {
              setCssProps(icon, {
                color: "var(--text-error)",
                stroke: "var(--text-error)"
              });
            }
            const title = deleteItem.querySelector(".menu-item-title");
            if (title) {
              setCssProps(title, {
                color: "var(--text-error)"
              });
            }
          }
        }, 0);
      }
    });
    const titleEl = cardEl.createDiv("card-title");
    titleEl.appendText(card.title);
    setupQuickEditIcon(this.app, this.plugin, titleEl, cardEl, card.path, settings);
    if (settings.showDate && settings.dateProperty) {
      let dateValue = entry.getValue(settings.dateProperty);
      const hasValidDate = dateValue && ("date" in dateValue && dateValue.date instanceof Date || "data" in dateValue && dateValue.data != null);
      if (!hasValidDate) {
        const file = this.app.vault.getAbstractFileByPath(entry.file.path);
        if (file instanceof import_obsidian12.TFile && file.extension === "mdx") {
          void (async () => {
            const frontmatter = await getFileFrontmatter(this.app, file);
            if (frontmatter) {
              const cleanProp = settings.dateProperty.startsWith("note.") ? settings.dateProperty.substring(5) : settings.dateProperty;
              const frontmatterValue = frontmatter[cleanProp];
              if (frontmatterValue != null) {
                let date = null;
                if (frontmatterValue instanceof Date) {
                  date = frontmatterValue;
                } else if (frontmatterValue && typeof frontmatterValue === "object" && "getTime" in frontmatterValue) {
                  const dateLike = frontmatterValue;
                  try {
                    const timestamp = dateLike.getTime();
                    if (typeof timestamp === "number" && !isNaN(timestamp)) {
                      date = new Date(timestamp);
                    }
                  } catch (e) {
                  }
                }
                if (!date && typeof frontmatterValue === "string") {
                  const dateStr = frontmatterValue.trim();
                  const isoDateStr = dateStr.includes("T") ? dateStr : `${dateStr}T00:00:00`;
                  const parsedDate = new Date(isoDateStr);
                  if (!isNaN(parsedDate.getTime())) {
                    date = parsedDate;
                  } else {
                    const fallbackDate = new Date(dateStr);
                    if (!isNaN(fallbackDate.getTime())) {
                      date = fallbackDate;
                    }
                  }
                }
                if (!date && typeof frontmatterValue === "number") {
                  const parsedDate = new Date(frontmatterValue);
                  if (!isNaN(parsedDate.getTime())) {
                    date = parsedDate;
                  }
                }
                if (date) {
                  requestAnimationFrame(() => {
                    if (cardEl.isConnected) {
                      let dateString;
                      if (settings.dateIncludeTime) {
                        const datePart = date.toLocaleDateString();
                        const timePart = date.toLocaleTimeString(void 0, {
                          hour: "numeric",
                          minute: "2-digit",
                          hour12: true
                        });
                        dateString = `${datePart}, ${timePart}`;
                      } else {
                        dateString = date.toLocaleDateString();
                      }
                      let dateEl = cardEl.querySelector(".card-date");
                      if (!dateEl) {
                        const titleEl2 = cardEl.querySelector(".card-title");
                        if (titleEl2 && titleEl2.parentElement) {
                          dateEl = titleEl2.parentElement.createDiv("card-date");
                          titleEl2.parentElement.insertBefore(dateEl, titleEl2.nextSibling);
                        } else {
                          dateEl = cardEl.createDiv("card-date");
                        }
                      }
                      dateEl.setText(dateString);
                    }
                  });
                }
              }
            }
          })();
        }
      }
      if (hasValidDate && dateValue) {
        const dateObj = dateValue;
        let date = null;
        if (dateObj && "date" in dateObj && dateObj.date instanceof Date) {
          date = dateObj.date;
        } else if (dateObj && "data" in dateObj && dateObj.data) {
          const data = dateObj.data;
          if (data instanceof Date) {
            date = data;
          } else if (typeof data === "string" || typeof data === "number") {
            const parsedDate = new Date(data);
            if (!isNaN(parsedDate.getTime())) {
              date = parsedDate;
            }
          }
        }
        if (date) {
          let dateString;
          if (settings.dateIncludeTime) {
            const datePart = date.toLocaleDateString();
            const timePart = date.toLocaleTimeString(void 0, {
              hour: "numeric",
              minute: "2-digit",
              hour12: true
            });
            dateString = `${datePart}, ${timePart}`;
          } else {
            dateString = date.toLocaleDateString();
          }
          const dateEl = cardEl.createDiv("card-date");
          dateEl.appendText(dateString);
        }
      }
    }
    this.propertyRenderer.renderProperties(cardEl, card, entry, settings, onPropertyToggle, "top");
    if (settings.showTextPreview || settings.showTags && card.displayTags && card.displayTags.length > 0 || settings.imageFormat === "thumbnail" || settings.imageFormat === "cover" || settings.imageFormat !== "none" && (card.imageUrl || card.hasImageAvailable)) {
      const contentContainer = cardEl.createDiv("card-content");
      if (settings.imageFormat === "thumbnail" && card.imageUrl) {
        const rawUrls = Array.isArray(card.imageUrl) ? card.imageUrl : [card.imageUrl];
        const imageUrls = rawUrls.filter((url) => url && typeof url === "string" && url.trim().length > 0);
        if (imageUrls.length > 0) {
          const imageEl = contentContainer.createDiv("card-thumbnail");
          const imageEmbedContainer = imageEl.createDiv("image-embed");
          const originalUrl = imageUrls[0];
          void (async () => {
            const finalUrl = await convertGifToStatic(originalUrl, this.plugin.settings.forceStaticGifImages);
            imageEmbedContainer.style.backgroundImage = `url("${finalUrl}")`;
          })();
          imageEmbedContainer.style.backgroundImage = `url("${originalUrl}")`;
          setCssProps(imageEmbedContainer, {
            backgroundSize: "cover",
            backgroundPosition: "center center",
            backgroundRepeat: "no-repeat"
          });
        }
      }
      if (settings.imageFormat === "thumbnail") {
        const textWrapper = contentContainer.createDiv("card-text-wrapper");
        if (settings.showTextPreview) {
          const textPreviewEl = textWrapper.createDiv("card-text-preview");
          if (card.snippet) {
            textPreviewEl.setText(card.snippet);
          }
          cardEl.__textPreviewEl = textPreviewEl;
          cardEl.__cardPath = card.path;
        }
        if (settings.showTags && card.displayTags && card.displayTags.length > 0) {
          const tagsContainer = textWrapper.createDiv("card-tags");
          const tagStyle = getTagStyle();
          if (tagStyle !== "plain") {
            tagsContainer.addClass(`tag-style-${tagStyle}`);
          }
          const maxTags = settings.maxTagsToShow;
          const tagsToShow = card.displayTags.slice(0, maxTags);
          const remainingCount = card.displayTags.length - maxTags;
          tagsToShow.forEach((tag) => {
            const tagEl = tagsContainer.createSpan("card-tag");
            tagEl.appendText(showTagHashPrefix() ? `#${tag}` : tag);
          });
          if (remainingCount > 0) {
            const moreEl = tagsContainer.createSpan("card-tag-more");
            moreEl.appendText(`+${remainingCount} more`);
          }
        }
      } else {
        if (settings.showTextPreview) {
          const textPreviewEl = contentContainer.createDiv("card-text-preview");
          if (card.snippet) {
            textPreviewEl.setText(card.snippet);
          }
          cardEl.__textPreviewEl = textPreviewEl;
          cardEl.__cardPath = card.path;
        }
        if (settings.showTags && card.displayTags && card.displayTags.length > 0) {
          const tagsContainer = contentContainer.createDiv("card-tags");
          const tagStyle = getTagStyle();
          if (tagStyle !== "plain") {
            tagsContainer.addClass(`tag-style-${tagStyle}`);
          }
          const maxTags = settings.maxTagsToShow;
          const tagsToShow = card.displayTags.slice(0, maxTags);
          const remainingCount = card.displayTags.length - maxTags;
          tagsToShow.forEach((tag) => {
            const tagEl = tagsContainer.createSpan("card-tag");
            tagEl.appendText(showTagHashPrefix() ? `#${tag}` : tag);
          });
          if (remainingCount > 0) {
            const moreEl = tagsContainer.createSpan("card-tag-more");
            moreEl.appendText(`+${remainingCount} more`);
          }
        }
      }
      if (settings.imageFormat === "cover") {
        if (card.imageUrl) {
          const rawUrls = Array.isArray(card.imageUrl) ? card.imageUrl : [card.imageUrl];
          const imageUrls = rawUrls.filter((url) => url && typeof url === "string" && url.trim().length > 0);
          if (imageUrls.length > 0) {
            const imageEl = contentContainer.createDiv("card-cover");
            const imageEmbedContainer = imageEl.createDiv("image-embed");
            const originalUrl = imageUrls[0];
            void (async () => {
              const finalUrl = await convertGifToStatic(originalUrl, this.plugin.settings.forceStaticGifImages);
              imageEmbedContainer.style.backgroundImage = `url("${finalUrl}")`;
            })();
            imageEmbedContainer.style.backgroundImage = `url("${originalUrl}")`;
            setCssProps(imageEmbedContainer, {
              backgroundSize: "cover",
              backgroundPosition: "center center",
              backgroundRepeat: "no-repeat"
            });
            if (settings.showDraftStatus) {
              renderDraftStatusBadge(imageEl, entry, card.path, settings, onPropertyToggle, this.app, this.mdxFrontmatterCache);
            }
            this.propertyRenderer.renderProperties(cardEl, card, entry, settings, onPropertyToggle, "bottom");
            return;
          }
        }
        if (card.hasImageAvailable && !card.imageUrl) {
          const placeholderEl = contentContainer.createDiv("card-cover-placeholder");
          renderDraftStatusBadge(placeholderEl, entry, card.path, settings, onPropertyToggle, this.app, this.mdxFrontmatterCache);
        } else if (!card.imageUrl) {
          const placeholderEl = contentContainer.createDiv("card-cover-placeholder");
          renderDraftStatusBadge(placeholderEl, entry, card.path, settings, onPropertyToggle, this.app, this.mdxFrontmatterCache);
        }
      }
    }
    this.propertyRenderer.renderProperties(cardEl, card, entry, settings, onPropertyToggle, "bottom");
    return;
  }
};

// src/components/bulk-toolbar.ts
var import_obsidian21 = require("obsidian");

// src/utils/bulk-operations.ts
var import_obsidian13 = require("obsidian");

// src/utils/frontmatter.ts
init_frontmatter_helper();
async function addProperties(app, file, props, overwrite) {
  await processFileFrontMatter(app, file, (frontmatter) => {
    for (const [key, value] of props) {
      if (key === "tags" && !Object.prototype.hasOwnProperty.call(frontmatter, "tags") && !Array.isArray(value.data)) {
        frontmatter[key] = [value.data];
        continue;
      }
      if (!frontmatter[key] || overwrite) {
        frontmatter[key] = value.data;
        continue;
      }
      const type1 = value.type;
      const existingValue = frontmatter[key];
      const type2 = Array.isArray(existingValue) ? "list" : typeof existingValue === "number" ? "number" : typeof existingValue === "boolean" ? "checkbox" : "text";
      if (canBeAppended(type1, type2)) {
        if (frontmatter[key] === value.data) continue;
        if (!value.data) continue;
        const arr = mergeIntoArrays(frontmatter[key], value.data);
        frontmatter[key] = arr;
        continue;
      } else {
        frontmatter[key] = value.data;
        continue;
      }
    }
  });
}
async function removeProperties(app, file, props) {
  await processFileFrontMatter(app, file, (frontmatter) => {
    for (const prop of props) {
      frontmatter[prop] = void 0;
    }
  });
}
function canBeAppended(str1, str2) {
  const arr = ["number", "date", "datetime", "checkbox"];
  if (arr.includes(str1) || arr.includes(str2)) return false;
  return true;
}
function mergeIntoArrays(...args) {
  const arrays = args.map((arg) => Array.isArray(arg) ? arg : [arg]);
  const flattened = arrays.flat();
  const unique = [...new Set(flattened)];
  return unique;
}

// src/utils/bulk-operations.ts
init_frontmatter_helper();
var BulkOperations = class {
  constructor(app) {
    this.app = app;
  }
  /**
   * Set draft status for multiple files
   * Respects filename prefix mode and reverse logic settings
   */
  async setDraft(files, draft, settings) {
    await this.batchProcessFiles(files, async (file) => {
      if (settings) {
        if (settings.draftStatusUseFilenamePrefix) {
          const fileName = file.basename;
          const startsWithUnderscore = fileName.startsWith("_");
          const currentPath = file.path;
          const pathParts = currentPath.split("/");
          let targetValue = draft;
          if (settings.draftStatusReverse) {
            targetValue = !draft;
          }
          if (targetValue === true) {
            if (!startsWithUnderscore) {
              const newName = `_${fileName}${file.extension ? `.${file.extension}` : ""}`;
              pathParts[pathParts.length - 1] = newName;
              const newPath = pathParts.join("/");
              await this.app.fileManager.renameFile(file, newPath);
            }
          } else {
            if (startsWithUnderscore) {
              const newName = fileName.substring(1) + (file.extension ? `.${file.extension}` : "");
              pathParts[pathParts.length - 1] = newName;
              const newPath = pathParts.join("/");
              await this.app.fileManager.renameFile(file, newPath);
            }
          }
        } else {
          const cleanConfigProperty = settings.draftStatusProperty && settings.draftStatusProperty.trim() ? settings.draftStatusProperty.startsWith("note.") ? settings.draftStatusProperty.substring(5) : settings.draftStatusProperty : "draft";
          let targetValue = draft;
          if (settings.draftStatusReverse) {
            targetValue = !draft;
          }
          await processFileFrontMatter(this.app, file, (frontmatter) => {
            frontmatter[cleanConfigProperty] = targetValue;
          });
        }
      } else {
        await processFileFrontMatter(this.app, file, (frontmatter) => {
          frontmatter.draft = draft;
        });
      }
    });
    new import_obsidian13.Notice(`Set ${files.length} file${files.length !== 1 ? "s" : ""} to ${draft ? "draft" : "published"}`);
  }
  /**
   * Add tags to multiple files
   */
  async addTags(files, tags) {
    const props = /* @__PURE__ */ new Map();
    props.set("tags", {
      type: "tags",
      data: tags,
      overwrite: false,
      delimiter: ","
    });
    await this.batchProcessFiles(files, async (file) => {
      await addProperties(this.app, file, props, false);
    });
    new import_obsidian13.Notice(`Added tags to ${files.length} file${files.length !== 1 ? "s" : ""}`);
  }
  /**
   * Remove tags from multiple files
   */
  async removeTags(files, tagsToRemove) {
    await this.batchProcessFiles(files, async (file) => {
      const frontmatter = await getFileFrontmatter(this.app, file);
      if (frontmatter == null ? void 0 : frontmatter.tags) {
        const fmTags = frontmatter.tags;
        const currentTags = Array.isArray(fmTags) ? fmTags : [fmTags];
        const updatedTags = currentTags.filter(
          (tag) => !tagsToRemove.includes(tag)
        );
        await processFileFrontMatter(this.app, file, (fm) => {
          if (updatedTags.length > 0) {
            fm.tags = updatedTags;
          } else {
            fm.tags = void 0;
          }
        });
      }
    });
    new import_obsidian13.Notice(`Removed tags from ${files.length} file${files.length !== 1 ? "s" : ""}`);
  }
  /**
   * Set a property value for multiple files
   */
  async setProperty(files, property, value, propertyType = "text") {
    const cleanProperty = property.startsWith("note.") ? property.substring(5) : property;
    const props = /* @__PURE__ */ new Map();
    props.set(cleanProperty, {
      type: propertyType,
      data: value,
      overwrite: true,
      delimiter: ","
    });
    await this.batchProcessFiles(files, async (file) => {
      await addProperties(this.app, file, props, true);
    });
    new import_obsidian13.Notice(`Set ${cleanProperty} on ${files.length} file${files.length !== 1 ? "s" : ""}`);
  }
  /**
   * Remove a property from multiple files
   */
  async removeProperty(files, property) {
    const cleanProperty = property.startsWith("note.") ? property.substring(5) : property;
    await this.batchProcessFiles(files, async (file) => {
      await removeProperties(this.app, file, [cleanProperty]);
    });
    new import_obsidian13.Notice(`Removed ${cleanProperty} from ${files.length} file${files.length !== 1 ? "s" : ""}`);
  }
  /**
   * Batch process files with progress indication
   */
  async batchProcessFiles(files, processor) {
    let processed = 0;
    const total = files.length;
    for (const filePath of files) {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian13.TFile) {
        try {
          await processor(file);
          processed++;
        } catch (error) {
          console.error(`Error processing ${filePath}:`, error);
        }
      }
    }
    if (processed < total) {
      new import_obsidian13.Notice(`Processed ${processed} of ${total} files`);
    }
  }
};

// src/components/manage-tags-modal.ts
var import_obsidian14 = require("obsidian");
init_frontmatter_helper();
var ManageTagsModal = class extends import_obsidian14.Modal {
  constructor(app, files) {
    super(app);
    this.tagsToAdd = "";
    this.tagsToRemove = /* @__PURE__ */ new Set();
    this.files = files;
    this.bulkOps = new BulkOperations(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    new import_obsidian14.Setting(contentEl).setName("Manage tags").setHeading();
    contentEl.createEl("p", { text: `Managing tags for ${this.files.length} file${this.files.length !== 1 ? "s" : ""}` });
    new import_obsidian14.Setting(contentEl).setName("Add tags").setDesc("Enter tags to add (comma-separated).").addText((text) => {
      text.setPlaceholder("tag1, tag2, tag3").onChange((value) => {
        this.tagsToAdd = value;
      });
    });
    contentEl.createEl("h3", { text: "Remove tags" });
    const removeContainer = contentEl.createDiv();
    const allTags = /* @__PURE__ */ new Set();
    for (const filePath of this.files) {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian14.TFile) {
        if (file.extension === "mdx") {
          void (async () => {
            const frontmatter = await getFileFrontmatter(this.app, file);
            if (frontmatter == null ? void 0 : frontmatter.tags) {
              const tags = Array.isArray(frontmatter.tags) ? frontmatter.tags : [frontmatter.tags];
              tags.forEach((tag) => {
                if (!allTags.has(tag)) {
                  allTags.add(tag);
                  if (this.contentEl && this.contentEl.isConnected && removeContainer.isConnected) {
                    this.addTagCheckbox(removeContainer, tag);
                  }
                }
              });
            }
          })();
        } else {
          const metadata = this.app.metadataCache.getFileCache(file);
          const frontmatter = metadata == null ? void 0 : metadata.frontmatter;
          if (frontmatter == null ? void 0 : frontmatter.tags) {
            const tags = Array.isArray(frontmatter.tags) ? frontmatter.tags : [frontmatter.tags];
            tags.forEach((tag) => allTags.add(tag));
          }
        }
      }
    }
    for (const tag of Array.from(allTags).sort()) {
      new import_obsidian14.Setting(removeContainer).setName(tag).addToggle((toggle) => {
        toggle.setValue(this.tagsToRemove.has(tag)).onChange((value) => {
          if (value) {
            this.tagsToRemove.add(tag);
          } else {
            this.tagsToRemove.delete(tag);
          }
        });
      });
    }
    const buttonContainer = contentEl.createDiv();
    buttonContainer.addClass("bases-cms-modal-button-container");
    const cancelBtn = buttonContainer.createEl("button");
    cancelBtn.setText("Cancel");
    cancelBtn.addEventListener("click", () => this.close());
    const applyBtn = buttonContainer.createEl("button");
    applyBtn.setText("Apply");
    applyBtn.addClass("mod-cta");
    applyBtn.addEventListener("click", () => {
      void (async () => {
        await this.applyChanges();
        this.close();
      })();
    });
  }
  addTagCheckbox(container, tag) {
    new import_obsidian14.Setting(container).setName(tag).addToggle((toggle) => {
      toggle.setValue(this.tagsToRemove.has(tag)).onChange((value) => {
        if (value) {
          this.tagsToRemove.add(tag);
        } else {
          this.tagsToRemove.delete(tag);
        }
      });
    });
  }
  async applyChanges() {
    if (this.tagsToAdd.trim()) {
      const tagsToAdd = this.tagsToAdd.split(",").map((t) => t.trim()).filter((t) => t.length > 0);
      if (tagsToAdd.length > 0) {
        await this.bulkOps.addTags(this.files, tagsToAdd);
      }
    }
    if (this.tagsToRemove.size > 0) {
      await this.bulkOps.removeTags(this.files, Array.from(this.tagsToRemove));
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/components/set-property-modal.ts
var import_obsidian15 = require("obsidian");
var SetPropertyModal = class extends import_obsidian15.Modal {
  constructor(app, files) {
    super(app);
    this.propertyName = "";
    this.propertyValue = "";
    this.propertyType = "text";
    this.files = files;
    this.bulkOps = new BulkOperations(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    new import_obsidian15.Setting(contentEl).setName("Set property").setHeading();
    contentEl.createEl("p", { text: `Setting property on ${this.files.length} file${this.files.length !== 1 ? "s" : ""}` });
    new import_obsidian15.Setting(contentEl).setName("Property name").setDesc("Enter the property name to set.").addText((text) => {
      text.setPlaceholder("Enter name").onChange((value) => {
        this.propertyName = value;
      });
    });
    new import_obsidian15.Setting(contentEl).setName("Property type").setDesc("Select the property type.").addDropdown((dropdown) => {
      dropdown.addOption("text", "Text").addOption("number", "Number").addOption("checkbox", "Checkbox").addOption("date", "Date").setValue(this.propertyType).onChange((value) => {
        this.propertyType = value;
      });
    });
    new import_obsidian15.Setting(contentEl).setName("Property value").setDesc("Enter the property value.").addText((text) => {
      text.setPlaceholder("Enter value").onChange((value) => {
        this.propertyValue = value;
      });
    });
    const buttonContainer = contentEl.createDiv();
    buttonContainer.addClass("bases-cms-modal-button-container");
    const cancelBtn = buttonContainer.createEl("button");
    cancelBtn.setText("Cancel");
    cancelBtn.addEventListener("click", () => this.close());
    const applyBtn = buttonContainer.createEl("button");
    applyBtn.setText("Apply");
    applyBtn.addClass("mod-cta");
    applyBtn.addEventListener("click", () => {
      void (async () => {
        if (this.propertyName && this.propertyValue) {
          await this.applyChanges();
          this.close();
        }
      })();
    });
  }
  async applyChanges() {
    let value = this.propertyValue;
    if (this.propertyType === "number") {
      value = Number(this.propertyValue);
    } else if (this.propertyType === "checkbox") {
      value = this.propertyValue.toLowerCase() === "true" || this.propertyValue === "1";
    } else if (this.propertyType === "date") {
      value = this.propertyValue;
    }
    await this.bulkOps.setProperty(this.files, this.propertyName, value, this.propertyType);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/components/remove-property-modal.ts
var import_obsidian16 = require("obsidian");
init_frontmatter_helper();
var RemovePropertyModal = class extends import_obsidian16.Modal {
  constructor(app, files) {
    super(app);
    this.propertiesToRemove = /* @__PURE__ */ new Set();
    this.files = files;
    this.bulkOps = new BulkOperations(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    new import_obsidian16.Setting(contentEl).setName("Remove property").setHeading();
    contentEl.createEl("p", { text: `Removing properties from ${this.files.length} file${this.files.length !== 1 ? "s" : ""}` });
    const propertiesContainer = contentEl.createDiv();
    const allProperties = /* @__PURE__ */ new Set();
    for (const filePath of this.files) {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian16.TFile && file.extension !== "mdx") {
        const metadata = this.app.metadataCache.getFileCache(file);
        const frontmatter = metadata == null ? void 0 : metadata.frontmatter;
        if (frontmatter) {
          for (const key in frontmatter) {
            if (key !== "tags" && key !== "title") {
              allProperties.add(key);
            }
          }
        }
      }
    }
    for (const prop of Array.from(allProperties).sort()) {
      this.addPropertyCheckbox(propertiesContainer, prop);
    }
    void (async () => {
      for (const filePath of this.files) {
        const file = this.app.vault.getAbstractFileByPath(filePath);
        if (file instanceof import_obsidian16.TFile && file.extension === "mdx") {
          const frontmatter = await getFileFrontmatter(this.app, file);
          if (frontmatter) {
            for (const key in frontmatter) {
              if (key !== "tags" && key !== "title") {
                if (!allProperties.has(key)) {
                  allProperties.add(key);
                  if (this.contentEl && this.contentEl.isConnected && propertiesContainer.isConnected) {
                    this.addPropertyCheckbox(propertiesContainer, key);
                  }
                }
              }
            }
          }
        }
      }
    })();
    if (allProperties.size === 0) {
      contentEl.createEl("p", { text: "No properties found in selected files." });
    }
    const buttonContainer = contentEl.createDiv();
    buttonContainer.addClass("bases-cms-modal-button-container");
    const cancelBtn = buttonContainer.createEl("button");
    cancelBtn.setText("Cancel");
    cancelBtn.addEventListener("click", () => this.close());
    const applyBtn = buttonContainer.createEl("button");
    applyBtn.setText("Apply");
    applyBtn.addClass("mod-cta");
    applyBtn.addEventListener("click", () => {
      void (async () => {
        if (this.propertiesToRemove.size > 0) {
          await this.applyChanges();
          this.close();
        }
      })();
    });
  }
  addPropertyCheckbox(container, prop) {
    new import_obsidian16.Setting(container).setName(prop).addToggle((toggle) => {
      toggle.setValue(this.propertiesToRemove.has(prop)).onChange((value) => {
        if (value) {
          this.propertiesToRemove.add(prop);
        } else {
          this.propertiesToRemove.delete(prop);
        }
      });
    });
  }
  async applyChanges() {
    for (const prop of this.propertiesToRemove) {
      await this.bulkOps.removeProperty(this.files, prop);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/toolbar-actions.ts
init_deletion_preview();

// src/components/bulk-operation-confirm.ts
var import_obsidian20 = require("obsidian");
var BulkOperationConfirmModal = class extends import_obsidian20.Modal {
  constructor(app, files, operation, onConfirm) {
    super(app);
    this.files = files;
    this.operation = operation;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const operationName = this.operation === "draft" ? "mark as draft" : "mark as published";
    const headingText = operationName.charAt(0).toUpperCase() + operationName.slice(1);
    new import_obsidian20.Setting(contentEl).setName(`Confirm ${headingText}`).setHeading();
    contentEl.createEl("p", {
      text: `Are you sure you want to ${operationName} ${this.files.length} file${this.files.length !== 1 ? "s" : ""}?`
    });
    if (this.files.length > 0) {
      const filesList = contentEl.createEl("ul", { cls: "bases-cms-deletion-list" });
      for (const filePath of this.files.slice(0, 20)) {
        const li = filesList.createEl("li");
        li.setText(filePath);
      }
      if (this.files.length > 20) {
        filesList.createEl("li", {
          text: `... and ${this.files.length - 20} more file${this.files.length - 20 !== 1 ? "s" : ""}`
        });
      }
    }
    const buttonContainer = contentEl.createDiv();
    buttonContainer.addClass("bases-cms-modal-button-container");
    const cancelBtn = buttonContainer.createEl("button");
    cancelBtn.setText("Cancel");
    cancelBtn.addEventListener("click", () => this.close());
    const confirmBtn = buttonContainer.createEl("button");
    confirmBtn.setText("Confirm");
    confirmBtn.addClass("mod-cta");
    confirmBtn.addEventListener("click", () => {
      this.onConfirm();
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/utils/toolbar-actions.ts
init_smart_deletion();
var ToolbarActions = class {
  constructor(app, plugin, getSelectedFiles, clearSelection, refreshView, showToolbar) {
    this.app = app;
    this.plugin = plugin;
    this.getSelectedFiles = getSelectedFiles;
    this.clearSelection = clearSelection;
    this.refreshView = refreshView;
    this.showToolbar = showToolbar;
    this.bulkOps = new BulkOperations(app);
  }
  async handleSetDraft(settings) {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    if (this.plugin.settings.confirmBulkOperations) {
      const modal = new BulkOperationConfirmModal(
        this.app,
        files,
        "draft",
        () => {
          void (async () => {
            await this.bulkOps.setDraft(files, true, settings);
            this.refreshView();
          })();
        }
      );
      modal.open();
    } else {
      await this.bulkOps.setDraft(files, true, settings);
      this.refreshView();
    }
  }
  async handlePublish(settings) {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    if (this.plugin.settings.confirmBulkOperations) {
      const modal = new BulkOperationConfirmModal(
        this.app,
        files,
        "publish",
        () => {
          void (async () => {
            await this.bulkOps.setDraft(files, false, settings);
            this.refreshView();
          })();
        }
      );
      modal.open();
    } else {
      await this.bulkOps.setDraft(files, false, settings);
      this.refreshView();
    }
  }
  handleManageTags() {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    const modal = new ManageTagsModal(this.app, files);
    modal.onClose = () => {
      this.showToolbar();
      this.refreshView();
    };
    modal.open();
  }
  handleSetProperty() {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    const modal = new SetPropertyModal(this.app, files);
    modal.onClose = () => {
      this.showToolbar();
      this.refreshView();
    };
    modal.open();
  }
  handleRemoveProperty() {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    const modal = new RemovePropertyModal(this.app, files);
    modal.onClose = () => {
      this.showToolbar();
      this.refreshView();
    };
    modal.open();
  }
  async handleDelete() {
    const files = this.getSelectedFiles();
    if (files.length === 0) return;
    if (this.plugin.settings.confirmDeletions) {
      const preview = await prepareDeletionPreview(
        this.app,
        files,
        this.plugin.settings
      );
      const modal = new DeletionPreviewModal(
        this.app,
        preview,
        () => {
          this.clearSelection();
          this.refreshView();
        }
      );
      modal.open();
    } else {
      const preview = await prepareDeletionPreview(
        this.app,
        files,
        this.plugin.settings
      );
      await executeSmartDeletion(this.app, preview);
      this.clearSelection();
      this.refreshView();
    }
  }
};

// src/components/bulk-toolbar.ts
var BulkToolbar = class {
  constructor(app, plugin, container, getSelectedFiles, clearSelection, refreshView, selectAllCallback, settings) {
    this.app = app;
    this.plugin = plugin;
    this.container = container;
    this.getSelectedFiles = getSelectedFiles;
    this.clearSelection = clearSelection;
    this.refreshView = refreshView;
    this.toolbarEl = null;
    this.countEl = null;
    this.resizeObserver = null;
    this.timeoutIds = [];
    this.selectAllCallback = selectAllCallback;
    this.settings = settings;
    this.actions = new ToolbarActions(
      this.app,
      this.plugin,
      this.getSelectedFiles,
      this.clearSelection,
      this.refreshView,
      () => this.show()
    );
    this.createToolbar();
  }
  /**
   * Update settings (called when view settings change)
   */
  updateSettings(settings) {
    this.settings = settings;
  }
  /**
   * Get toolbar actions (for use in context menus)
   */
  getActions() {
    return this.actions;
  }
  createToolbar() {
    this.toolbarEl = document.createElement("div");
    this.toolbarEl.className = "bases-toolbar bases-cms-bulk-toolbar bases-cms-bulk-toolbar-hidden";
    this.toolbarEl.__bulkToolbarInstance = this;
    this.createToolbarContent();
    this.positionToolbar();
    const timeoutId = window.setTimeout(() => this.positionToolbar(), 100);
    this.timeoutIds.push(timeoutId);
  }
  positionToolbar() {
    if (!this.toolbarEl) return;
    let basesHeader = this.container.closest(".bases-header");
    if (!basesHeader) {
      let parent = this.container.parentElement;
      while (parent && !basesHeader) {
        if (parent.classList.contains("bases-header")) {
          basesHeader = parent;
          break;
        }
        parent = parent.parentElement;
      }
    }
    if (!basesHeader) {
      const allHeaders = Array.from(document.querySelectorAll(".bases-header"));
      for (const header of allHeaders) {
        if (header.contains(this.container)) {
          basesHeader = header;
          break;
        }
      }
    }
    const viewContent = this.container.closest(".view-content");
    if (viewContent) {
      if (this.toolbarEl.parentElement !== viewContent) {
        if (this.toolbarEl.parentElement) {
          this.toolbarEl.remove();
        }
        viewContent.insertBefore(this.toolbarEl, this.container);
      } else if (this.toolbarEl.nextSibling !== this.container) {
        if (this.toolbarEl.parentElement) {
          this.toolbarEl.remove();
        }
        viewContent.insertBefore(this.toolbarEl, this.container);
      }
    } else if (basesHeader && basesHeader.parentElement) {
      if (this.toolbarEl.parentElement !== basesHeader.parentElement) {
        if (this.toolbarEl.parentElement) {
          this.toolbarEl.remove();
        }
        basesHeader.parentElement.insertBefore(this.toolbarEl, basesHeader.nextSibling);
      }
    } else {
      const parent = this.container.parentElement;
      if (parent) {
        if (this.toolbarEl.parentElement !== parent || this.toolbarEl.nextSibling !== this.container) {
          if (this.toolbarEl.parentElement) {
            this.toolbarEl.remove();
          }
          parent.insertBefore(this.toolbarEl, this.container);
        }
      }
    }
  }
  createToolbarContent() {
    if (!this.toolbarEl) return;
    const leftContainer = this.toolbarEl.createDiv("bases-cms-bulk-toolbar-left");
    const createBasesButton = (iconName, text, onClick, container, isDestructive = false) => {
      const toolbarItem = container.createDiv("bases-toolbar-item");
      const button = toolbarItem.createDiv("text-icon-button");
      if (isDestructive) {
        button.addClass("destructive");
      }
      button.setAttribute("tabindex", "0");
      const iconEl = button.createSpan("text-button-icon");
      (0, import_obsidian21.setIcon)(iconEl, iconName);
      const textEl = button.createSpan("text-button-label");
      textEl.setText(text);
      button.addEventListener("click", onClick);
      return button;
    };
    if (this.plugin.settings.showToolbarSelectAll) {
      createBasesButton("copy-check", "Select all", () => this.handleSelectAll(), leftContainer);
    }
    if (this.plugin.settings.showToolbarClear) {
      createBasesButton("square-x", "Clear", () => this.clearSelection(), leftContainer);
    }
    const countItem = leftContainer.createDiv("bases-toolbar-item bases-cms-selected-count");
    this.countEl = countItem.createSpan("text-button-label");
    this.countEl.setText("0 selected");
    const rightContainer = this.toolbarEl.createDiv("bases-cms-bulk-toolbar-right");
    if (this.plugin.settings.showToolbarPublish) {
      createBasesButton("book-check", "Publish", () => {
        void this.actions.handlePublish(this.settings);
      }, rightContainer);
    }
    if (this.plugin.settings.showToolbarDraft) {
      createBasesButton("book-dashed", "Draft", () => {
        void this.actions.handleSetDraft(this.settings);
      }, rightContainer);
    }
    if (this.plugin.settings.showToolbarTags) {
      createBasesButton("tags", "Tags", () => this.actions.handleManageTags(), rightContainer);
    }
    if (this.plugin.settings.showToolbarSet) {
      createBasesButton("list-check", "Set", () => this.actions.handleSetProperty(), rightContainer);
    }
    if (this.plugin.settings.showToolbarRemove) {
      createBasesButton("list-x", "Remove", () => this.actions.handleRemoveProperty(), rightContainer);
    }
    if (this.plugin.settings.showToolbarDelete) {
      createBasesButton("trash-2", "Delete", () => {
        void this.actions.handleDelete();
      }, rightContainer, true);
    }
    this.setupResponsiveBehavior();
  }
  setupResponsiveBehavior() {
    if (!this.toolbarEl) return;
    const timeoutId1 = window.setTimeout(() => {
      this.updateCollapsedState();
    }, 100);
    this.timeoutIds.push(timeoutId1);
    if (this.toolbarEl) {
      this.resizeObserver = new ResizeObserver(() => {
        this.updateCollapsedState();
      });
      this.resizeObserver.observe(this.toolbarEl);
    }
    const container = this.container;
    if (container) {
      const containerObserver = new ResizeObserver(() => {
        const timeoutId = window.setTimeout(() => {
          this.updateCollapsedState();
        }, 10);
        this.timeoutIds.push(timeoutId);
      });
      containerObserver.observe(container);
      this.containerObserver = containerObserver;
    }
  }
  updateCollapsedState() {
    if (!this.toolbarEl) return;
    const toolbarWidth = this.toolbarEl.offsetWidth;
    const isCollapsed = toolbarWidth < 680;
    if (isCollapsed) {
      this.toolbarEl.addClass("collapsed");
    } else {
      this.toolbarEl.removeClass("collapsed");
    }
  }
  updateCount(count) {
    if (this.countEl) {
      this.countEl.setText(`${count} selected`);
    }
  }
  handleSelectAll() {
    if (this.selectAllCallback) {
      this.selectAllCallback();
    }
  }
  show() {
    if (!this.toolbarEl) {
      console.warn("[Bases CMS] Toolbar element not found, recreating...");
      this.createToolbar();
    }
    if (this.toolbarEl) {
      this.positionToolbar();
      if (!this.toolbarEl.parentElement) {
        console.warn("[Bases CMS] Toolbar not in DOM, repositioning...");
        this.positionToolbar();
      }
      this.toolbarEl.removeClass("bases-cms-bulk-toolbar-hidden");
      this.toolbarEl.addClass("bases-cms-bulk-toolbar-visible");
      void this.toolbarEl.offsetHeight;
      const timeoutId = window.setTimeout(() => {
        if (this.toolbarEl) {
          this.toolbarEl.removeClass("bases-cms-bulk-toolbar-animating-out");
          this.toolbarEl.addClass("bases-cms-bulk-toolbar-animating-in");
        }
      }, 10);
      this.timeoutIds.push(timeoutId);
    } else {
      console.error("[Bases CMS] Failed to show toolbar - element is null");
    }
  }
  hide() {
    if (this.toolbarEl) {
      this.toolbarEl.removeClass("bases-cms-bulk-toolbar-animating-in");
      this.toolbarEl.addClass("bases-cms-bulk-toolbar-animating-out");
      const timeoutId = window.setTimeout(() => {
        if (this.toolbarEl) {
          this.toolbarEl.removeClass("bases-cms-bulk-toolbar-visible");
          this.toolbarEl.addClass("bases-cms-bulk-toolbar-hidden");
        }
      }, 200);
      this.timeoutIds.push(timeoutId);
    }
  }
  /**
   * Recreate the toolbar with updated settings
   * Preserves visibility state and count
   */
  recreate() {
    const wasVisible = this.toolbarEl && !this.toolbarEl.hasClass("bases-cms-bulk-toolbar-hidden");
    let currentCount = 0;
    if (this.countEl && this.countEl.textContent) {
      const match = this.countEl.textContent.match(/\d+/);
      if (match) {
        currentCount = parseInt(match[0], 10);
      }
    }
    this.destroy();
    this.createToolbar();
    if (wasVisible && this.toolbarEl && currentCount > 0) {
      this.updateCount(currentCount);
      this.show();
    }
  }
  destroy() {
    this.timeoutIds.forEach((id) => window.clearTimeout(id));
    this.timeoutIds = [];
    if (this.resizeObserver) {
      this.resizeObserver.disconnect();
      this.resizeObserver = null;
    }
    const containerObserver = this.containerObserver;
    if (containerObserver) {
      containerObserver.disconnect();
      this.containerObserver = void 0;
    }
    if (this.toolbarEl) {
      this.toolbarEl.remove();
      this.toolbarEl = null;
    }
  }
};

// src/utils/new-note-interceptor.ts
init_settings_schema();
function setupNewNoteInterceptor(app, containerEl, config, pluginSettings, registerCleanup) {
  const interceptNewButton = (e) => {
    const target = e.target;
    const buttonEl = target.closest('.bases-toolbar-new-item-menu, .bases-toolbar-new-item-menu .text-icon-button, [data-action="new-item"], button[aria-label*="new"], button[aria-label*="New"], .bases-toolbar button');
    if (!buttonEl) {
      return;
    }
    if (target.closest(".bases-cms-bulk-toolbar, .bases-cms-container .card")) {
      return;
    }
    const activeLeaf = app.workspace.activeLeaf;
    const activeView = activeLeaf == null ? void 0 : activeLeaf.view;
    const activeViewContainer = activeView == null ? void 0 : activeView.containerEl;
    const isCMSView = (activeView == null ? void 0 : activeView.type) === "bases-cms" || (activeViewContainer == null ? void 0 : activeViewContainer.querySelector(".bases-cms-container")) !== null;
    if (!isCMSView) {
      return;
    }
    const isOurView = activeViewContainer && (activeViewContainer === containerEl || activeViewContainer.contains(containerEl) || containerEl.contains(activeViewContainer));
    if (!isOurView) {
      return;
    }
    const containerWithView = containerEl;
    const viewInstance = containerWithView.__cmsView;
    const viewConfig = (viewInstance == null ? void 0 : viewInstance.config) || containerWithView.__cmsConfig || config;
    const settings = readCMSSettings(viewConfig, pluginSettings);
    const hasCustomLocation = settings.newNoteLocation && settings.newNoteLocation.trim() !== "";
    if (settings.customizeNewButton || hasCustomLocation) {
      e.preventDefault();
      e.stopPropagation();
      e.stopImmediatePropagation();
      void (async () => {
        var _a;
        const locationInput = ((_a = settings.newNoteLocation) == null ? void 0 : _a.trim()) || "";
        if (locationInput === "" && !settings.customizeNewButton) {
          const vaultConfig = app.vault.config;
          const newFileLocation = (vaultConfig == null ? void 0 : vaultConfig.newFileLocation) || "folder";
          const newFileFolderPath = (vaultConfig == null ? void 0 : vaultConfig.newFileFolderPath) || "";
          let filePath = "Untitled.md";
          if (newFileLocation === "folder" && newFileFolderPath) {
            filePath = `${newFileFolderPath}/Untitled.md`;
          } else if (newFileLocation === "current") {
            const activeFile = app.workspace.getActiveFile();
            if (activeFile && activeFile.parent) {
              filePath = `${activeFile.parent.path}/Untitled.md`;
            }
          } else if (newFileLocation === "root") {
            filePath = "Untitled.md";
          }
          const file = await app.vault.create(filePath, "");
          if (settings.customizeNewButton) {
            await app.workspace.openLinkText(file.path, "", false);
          }
          return;
        }
        if (locationInput === "/" || locationInput.replace(/\//g, "") === "") {
          const newFile = await app.vault.create("Untitled.md", "");
          if (settings.customizeNewButton) {
            await app.workspace.openLinkText(newFile.path, "", false);
          }
          return;
        }
        const folderPath = locationInput.replace(/^\/+|\/+$/g, "");
        let folder = app.vault.getAbstractFileByPath(folderPath);
        if (!folder || !("children" in folder)) {
          await app.vault.createFolder(folderPath);
          folder = app.vault.getAbstractFileByPath(folderPath);
        }
        if (folder && "children" in folder) {
          const newFile = await app.vault.create(`${folderPath}/Untitled.md`, "");
          if (settings.customizeNewButton) {
            await app.workspace.openLinkText(newFile.path, "", false);
          }
        }
      })().catch((error) => {
        console.error("[CMS] Error creating new note:", error);
      });
    }
  };
  document.addEventListener("click", interceptNewButton, true);
  const observer = new MutationObserver(() => {
    const buttons2 = document.querySelectorAll('.bases-toolbar-new-item-menu, .bases-toolbar-new-item-menu .text-icon-button, [data-action="new-item"]');
    buttons2.forEach((buttonEl) => {
      const buttonWithFlag = buttonEl;
      if (!buttonWithFlag.__cmsIntercepted) {
        buttonWithFlag.__cmsIntercepted = true;
        buttonEl.addEventListener("click", interceptNewButton, true);
      }
    });
  });
  observer.observe(document.body, { childList: true, subtree: true });
  const buttons = document.querySelectorAll('.bases-toolbar-new-item-menu, .bases-toolbar-new-item-menu .text-icon-button, [data-action="new-item"]');
  buttons.forEach((buttonEl) => {
    const buttonWithFlag = buttonEl;
    if (!buttonWithFlag.__cmsIntercepted) {
      buttonWithFlag.__cmsIntercepted = true;
      buttonEl.addEventListener("click", interceptNewButton, true);
    }
  });
  registerCleanup(() => {
    document.removeEventListener("click", interceptNewButton, true);
    observer.disconnect();
  });
}

// src/utils/property-toggle-handler.ts
var import_obsidian22 = require("obsidian");
init_settings_schema();
init_frontmatter_helper();
var PropertyToggleHandler = class {
  constructor(app, config, pluginSettings, onRefresh) {
    this.app = app;
    this.config = config;
    this.pluginSettings = pluginSettings;
    this.onRefresh = onRefresh;
  }
  async handlePropertyToggle(path, property, value) {
    try {
      const file = this.app.vault.getAbstractFileByPath(path);
      if (!(file instanceof import_obsidian22.TFile)) return;
      const cleanProperty = property.startsWith("note.") ? property.substring(5) : property;
      const settings = readCMSSettings(
        this.config,
        this.pluginSettings
      );
      const isDraftProperty = settings.showDraftStatus && cleanProperty === "draft";
      let shouldRefresh = false;
      if (isDraftProperty) {
        if (settings.draftStatusUseFilenamePrefix) {
          const fileName = file.basename;
          const startsWithUnderscore = fileName.startsWith("_");
          const currentPath = file.path;
          const pathParts = currentPath.split("/");
          if (value === true) {
            if (!startsWithUnderscore) {
              const newName = `_${fileName}${file.extension ? `.${file.extension}` : ""}`;
              pathParts[pathParts.length - 1] = newName;
              const newPath = pathParts.join("/");
              await this.app.fileManager.renameFile(file, newPath);
              shouldRefresh = true;
            }
          } else {
            if (startsWithUnderscore) {
              const newName = fileName.substring(1) + (file.extension ? `.${file.extension}` : "");
              pathParts[pathParts.length - 1] = newName;
              const newPath = pathParts.join("/");
              await this.app.fileManager.renameFile(file, newPath);
              shouldRefresh = true;
            }
          }
        } else {
          const cleanConfigProperty = settings.draftStatusProperty && settings.draftStatusProperty.trim() ? settings.draftStatusProperty.startsWith("note.") ? settings.draftStatusProperty.substring(5) : settings.draftStatusProperty : "draft";
          await processFileFrontMatter(this.app, file, (frontmatter) => {
            frontmatter[cleanConfigProperty] = value;
          });
          shouldRefresh = true;
        }
      } else {
        await processFileFrontMatter(this.app, file, (frontmatter) => {
          frontmatter[cleanProperty] = value;
        });
        shouldRefresh = true;
      }
      if (shouldRefresh) {
        requestAnimationFrame(() => {
          window.setTimeout(() => {
            try {
              this.onRefresh();
            } catch (error) {
              console.error("Error refreshing view after property toggle:", error);
            }
          }, 100);
        });
      }
    } catch (error) {
      console.error("Error toggling property:", error);
    }
  }
};

// src/utils/scroll-layout-manager.ts
init_settings_schema();
var ScrollLayoutManager = class {
  constructor(containerEl, app, config, pluginSettings, onLoadMore, registerCleanup) {
    this.containerEl = containerEl;
    this.app = app;
    this.pluginSettings = pluginSettings;
    this.onLoadMore = onLoadMore;
    this.registerCleanup = registerCleanup;
    this.scrollListener = null;
    this.scrollThrottleTimeout = null;
    this.resizeObserver = null;
    this.windowResizeHandler = null;
    this.isLoading = false;
    this.displayedCount = 50;
    this.totalEntries = 0;
    this.configPollInterval = null;
    this.lastCardSize = null;
    this.lastImageAspectRatio = null;
    var _a;
    this.config = config;
    const isMobile = (_a = this.app.isMobile) != null ? _a : false;
    this.displayedCount = isMobile ? 25 : 50;
  }
  /**
   * Update the config reference (useful when config becomes available after construction)
   */
  updateConfig(config) {
    this.config = config;
  }
  setDisplayedCount(count) {
    this.displayedCount = count;
  }
  getDisplayedCount() {
    return this.displayedCount;
  }
  setIsLoading(loading) {
    this.isLoading = loading;
  }
  setupInfiniteScroll(totalEntries) {
    this.totalEntries = totalEntries;
    if (this.scrollListener) {
      this.containerEl.removeEventListener("scroll", this.scrollListener);
      this.scrollListener = null;
    }
    if (this.displayedCount >= totalEntries) {
      return;
    }
    this.scrollListener = () => {
      var _a;
      if (this.scrollThrottleTimeout !== null) {
        return;
      }
      if (this.isLoading) {
        return;
      }
      const scrollTop = this.containerEl.scrollTop;
      const scrollHeight = this.containerEl.scrollHeight;
      const clientHeight = this.containerEl.clientHeight;
      const distanceFromBottom = scrollHeight - (scrollTop + clientHeight);
      const isMobile = (_a = this.app.isMobile) != null ? _a : false;
      const viewportMultiplier = isMobile ? 1 : 2;
      const threshold = clientHeight * viewportMultiplier;
      if (distanceFromBottom < threshold && this.displayedCount < totalEntries) {
        this.isLoading = true;
        const batchSize = 50;
        this.displayedCount = Math.min(this.displayedCount + batchSize, totalEntries);
        this.onLoadMore();
      }
      this.scrollThrottleTimeout = window.setTimeout(() => {
        this.scrollThrottleTimeout = null;
      }, 100);
    };
    this.containerEl.addEventListener("scroll", this.scrollListener);
    this.registerCleanup(() => {
      if (this.scrollListener) {
        this.containerEl.removeEventListener("scroll", this.scrollListener);
      }
      if (this.scrollThrottleTimeout !== null) {
        window.clearTimeout(this.scrollThrottleTimeout);
      }
    });
  }
  setupResizeObserver() {
    if (this.resizeObserver) {
      return;
    }
    const updateGrid = () => {
      if (!this.config || typeof this.config.get !== "function") {
        return;
      }
      const currentSettings = readCMSSettings(
        this.config,
        this.pluginSettings
      );
      const cardMinWidth = currentSettings.cardSize;
      const imageAspectRatio = currentSettings.imageAspectRatio;
      this.containerEl.style.setProperty("--card-min-width", `${cardMinWidth}px`);
      this.containerEl.style.setProperty("--bases-cms-image-aspect-ratio", String(imageAspectRatio));
      this.lastCardSize = cardMinWidth;
      this.lastImageAspectRatio = imageAspectRatio;
    };
    this.resizeObserver = new ResizeObserver(updateGrid);
    this.resizeObserver.observe(this.containerEl);
    updateGrid();
    this.configPollInterval = window.setInterval(() => {
      if (!this.config || typeof this.config.get !== "function") {
        return;
      }
      const currentSettings = readCMSSettings(
        this.config,
        this.pluginSettings
      );
      const currentCardSize = currentSettings.cardSize;
      const currentImageAspectRatio = currentSettings.imageAspectRatio;
      if (this.lastCardSize !== currentCardSize || this.lastImageAspectRatio !== currentImageAspectRatio) {
        this.containerEl.style.setProperty("--card-min-width", `${currentCardSize}px`);
        this.containerEl.style.setProperty("--bases-cms-image-aspect-ratio", String(currentImageAspectRatio));
        this.lastCardSize = currentCardSize;
        this.lastImageAspectRatio = currentImageAspectRatio;
      }
    }, 100);
    this.registerCleanup(() => {
      if (this.configPollInterval !== null) {
        window.clearInterval(this.configPollInterval);
        this.configPollInterval = null;
      }
    });
  }
  updateGridLayout(settings) {
    this.containerEl.style.setProperty("--card-min-width", `${settings.cardSize}px`);
    this.containerEl.style.setProperty("--bases-cms-image-aspect-ratio", String(settings.imageAspectRatio));
    this.lastCardSize = settings.cardSize;
    this.lastImageAspectRatio = settings.imageAspectRatio;
  }
  cleanup() {
    if (this.resizeObserver) {
      this.resizeObserver.disconnect();
      this.resizeObserver = null;
    }
    if (this.windowResizeHandler) {
      window.removeEventListener("resize", this.windowResizeHandler);
      this.windowResizeHandler = null;
    }
    if (this.scrollListener) {
      this.containerEl.removeEventListener("scroll", this.scrollListener);
      this.scrollListener = null;
    }
    if (this.scrollThrottleTimeout !== null) {
      window.clearTimeout(this.scrollThrottleTimeout);
      this.scrollThrottleTimeout = null;
    }
    if (this.configPollInterval !== null) {
      window.clearInterval(this.configPollInterval);
      this.configPollInterval = null;
    }
  }
};

// src/utils/view-switch-listener.ts
var ViewSwitchListener = class {
  constructor(containerEl, plugin, config, controller, data, selectedFiles, onSelectionCleared, registerCleanup) {
    this.containerEl = containerEl;
    this.plugin = plugin;
    this.config = config;
    this.controller = controller;
    this.data = data;
    this.selectedFiles = selectedFiles;
    this.onSelectionCleared = onSelectionCleared;
    this.registerCleanup = registerCleanup;
    this.mutationObserver = null;
    this.backupInterval = null;
    this.currentBaseIdentifier = null;
  }
  setup(handleSelectionChange) {
    const startObserving = () => {
      if (this.mutationObserver) return;
      this.mutationObserver = new MutationObserver((mutations) => {
        if (this.selectedFiles.size === 0) {
          return;
        }
        for (const mutation of mutations) {
          if (mutation.type === "childList" && mutation.removedNodes.length > 0) {
            let foundSelectedCard = false;
            for (const path of this.selectedFiles) {
              const card = this.containerEl.querySelector(`[data-path="${path}"]`);
              if (card) {
                foundSelectedCard = true;
                break;
              }
            }
            const allCards = this.containerEl.querySelectorAll(".card[data-path]");
            if (!foundSelectedCard || allCards.length === 0) {
              this.selectedFiles.clear();
              this.onSelectionCleared();
              break;
            }
          }
        }
      });
      if (this.containerEl) {
        this.mutationObserver.observe(this.containerEl, {
          childList: true,
          subtree: true
        });
      }
    };
    const stopObserving = () => {
      if (this.mutationObserver) {
        this.mutationObserver.disconnect();
        this.mutationObserver = null;
        if (this.selectedFiles.size > 0) {
          this.selectedFiles.clear();
        }
        this.onSelectionCleared();
      }
    };
    const getBaseIdentifier = () => {
      var _a, _b, _c, _d;
      try {
        if ((_a = this.config) == null ? void 0 : _a.getName) {
          return this.config.getName();
        }
        if ((_b = this.config) == null ? void 0 : _b.name) {
          return String(this.config.name);
        }
        if (this.controller) {
          if ((_c = this.controller) == null ? void 0 : _c.getBaseName) {
            return this.controller.getBaseName();
          }
          if ((_d = this.controller) == null ? void 0 : _d.baseName) {
            return String(this.controller.baseName);
          }
        }
        if (this.data) {
          if (this.data.baseName) {
            return String(this.data.baseName);
          }
        }
      } catch (e) {
      }
      return null;
    };
    const backupCheck = () => {
      if (this.selectedFiles.size === 0) {
        if (this.backupInterval !== null) {
          window.clearInterval(this.backupInterval);
          this.backupInterval = null;
        }
        return;
      }
      const currentBaseId = getBaseIdentifier();
      if (this.currentBaseIdentifier !== null && currentBaseId !== null && this.currentBaseIdentifier !== currentBaseId) {
        this.selectedFiles.clear();
        this.onSelectionCleared();
        stopObserving();
        if (this.backupInterval !== null) {
          window.clearInterval(this.backupInterval);
          this.backupInterval = null;
        }
        return;
      }
      const allCards = this.containerEl.querySelectorAll(".card[data-path]");
      if (allCards.length === 0) {
        this.selectedFiles.clear();
        this.onSelectionCleared();
      }
    };
    const originalHandleSelectionChange = handleSelectionChange.bind(this);
    const wrappedHandleSelectionChange = (path, selected) => {
      originalHandleSelectionChange(path, selected);
      if (this.selectedFiles.size > 0) {
        if (this.currentBaseIdentifier === null) {
          this.currentBaseIdentifier = getBaseIdentifier();
        }
        startObserving();
        if (this.backupInterval === null) {
          this.backupInterval = this.plugin.registerInterval(window.setInterval(backupCheck, 500));
        }
      } else {
        this.currentBaseIdentifier = null;
        stopObserving();
        if (this.backupInterval !== null) {
          window.clearInterval(this.backupInterval);
          this.backupInterval = null;
        }
      }
    };
    this.registerCleanup(() => {
      stopObserving();
      if (this.backupInterval !== null) {
        window.clearInterval(this.backupInterval);
        this.backupInterval = null;
      }
    });
    return wrappedHandleSelectionChange;
  }
  cleanup() {
    if (this.mutationObserver) {
      this.mutationObserver.disconnect();
      this.mutationObserver = null;
    }
    if (this.backupInterval !== null) {
      window.clearInterval(this.backupInterval);
      this.backupInterval = null;
    }
  }
};

// src/views/cms-view.ts
init_frontmatter_helper();
var CMS_VIEW_TYPE = "bases-cms";
var BasesCMSView = class extends import_obsidian23.BasesView {
  constructor(controller, containerEl, plugin) {
    super(controller);
    this.type = CMS_VIEW_TYPE;
    this.selectedFiles = /* @__PURE__ */ new Set();
    this.snippets = {};
    this.images = {};
    this.hasImageAvailable = {};
    this.mdxFrontmatterCache = {};
    this.updateLayoutRef = { current: null };
    this.propertyObservers = [];
    this.bulkToolbar = null;
    this.isRefreshingWithSelection = false;
    this.propertyToggleHandler = null;
    this.viewSwitchListener = null;
    this.settingsPollInterval = null;
    this.lastSettings = null;
    this.containerEl = containerEl;
    this.plugin = plugin;
    this.cardRenderer = new SharedCardRenderer(
      this.app,
      this.plugin,
      this.propertyObservers,
      this.updateLayoutRef,
      void 0,
      // Config not available in constructor
      controller
    );
    this.containerEl.addClass("bases-cms");
    this.containerEl.addClass("bases-cms-container");
    try {
      this.propertyToggleHandler = new PropertyToggleHandler(
        this.app,
        this.config,
        this.plugin.settings,
        () => this.onDataUpdated()
      );
    } catch (e) {
      this.propertyToggleHandler = null;
    }
    try {
      const configToUse = this.config && typeof this.config.get === "function" ? this.config : { get: () => void 0 };
      this.scrollLayoutManager = new ScrollLayoutManager(
        this.containerEl,
        this.app,
        configToUse,
        this.plugin.settings,
        () => this.onDataUpdated(),
        (cleanup) => this.register(cleanup)
      );
    } catch (e) {
      const dummyConfig = { get: () => void 0 };
      this.scrollLayoutManager = new ScrollLayoutManager(
        this.containerEl,
        this.app,
        dummyConfig,
        this.plugin.settings,
        () => this.onDataUpdated(),
        (cleanup) => this.register(cleanup)
      );
    }
    try {
      this.viewSwitchListener = new ViewSwitchListener(
        this.containerEl,
        this.plugin,
        this.config,
        this.controller,
        this.data,
        this.selectedFiles,
        () => this.updateSelectionUI(),
        (cleanup) => this.register(cleanup)
      );
    } catch (e) {
      this.viewSwitchListener = null;
    }
    if (this.viewSwitchListener) {
      const originalHandleSelectionChange = this.handleSelectionChange.bind(this);
      this.handleSelectionChange = this.viewSwitchListener.setup(originalHandleSelectionChange);
    }
  }
  onDataUpdated() {
    void (async () => {
      var _a;
      try {
        if (!this.data) {
          if (this.containerEl.children.length === 0) {
            const loadingEl = this.containerEl.createDiv("bases-cms-loading");
            loadingEl.setText("Loading...");
            setCssProps(loadingEl, {
              padding: "20px",
              textAlign: "center"
            });
          }
          setTimeout(() => {
            if (this.data) {
              this.onDataUpdated();
            }
          }, 100);
          return;
        }
        if (!this.data.groupedData || !this.data.data) {
          setTimeout(() => {
            if (this.data && this.data.groupedData && this.data.data) {
              this.onDataUpdated();
            }
          }, 100);
          return;
        }
        const groupedData = this.data.groupedData;
        const allEntries = this.data.data;
        const settings = readCMSSettings(
          this.config,
          this.plugin.settings
        );
        if (this.config && typeof this.config.get === "function") {
          try {
            this.scrollLayoutManager.updateConfig(this.config);
          } catch (e) {
          }
        }
        this.scrollLayoutManager.updateGridLayout(settings);
        const savedScrollTop = this.containerEl.scrollTop;
        const sortMethod = this.getSortMethod();
        const processedGroups = groupedData.map((group) => ({
          group,
          entries: [...group.entries]
        }));
        const visibleEntries = [];
        let remainingCount = this.scrollLayoutManager.getDisplayedCount();
        for (const processedGroup of processedGroups) {
          if (remainingCount <= 0) break;
          const entriesToTake = Math.min(processedGroup.entries.length, remainingCount);
          visibleEntries.push(...processedGroup.entries.slice(0, entriesToTake));
          remainingCount -= entriesToTake;
        }
        await this.loadContentForEntries(visibleEntries, settings);
        if (this.config && !this.containerEl.__cmsInterceptorSetup) {
          try {
            this.containerEl.__cmsInterceptorSetup = true;
            const containerWithConfig = this.containerEl;
            containerWithConfig.__cmsConfig = this.config;
            containerWithConfig.__cmsView = this;
            setupNewNoteInterceptor(
              this.app,
              this.containerEl,
              this.config,
              this.plugin.settings,
              (cleanup) => this.register(cleanup)
            );
          } catch (e) {
            this.containerEl.__cmsInterceptorSetup = true;
          }
        }
        this.cardRenderer.basesConfig = this.config;
        if (this.cardRenderer && typeof this.cardRenderer.setMdxFrontmatterCache === "function") {
          this.cardRenderer.setMdxFrontmatterCache(this.mdxFrontmatterCache);
        }
        this.containerEl.empty();
        this.mdxFrontmatterCache = {};
        this.propertyObservers.forEach((obs) => obs.disconnect());
        this.propertyObservers = [];
        const feedEl = this.containerEl.createDiv("bases-cms-grid");
        let displayedSoFar = 0;
        let totalCardsRendered = 0;
        for (const processedGroup of processedGroups) {
          if (displayedSoFar >= this.scrollLayoutManager.getDisplayedCount()) break;
          const entriesToDisplay = Math.min(processedGroup.entries.length, this.scrollLayoutManager.getDisplayedCount() - displayedSoFar);
          if (entriesToDisplay === 0) continue;
          const groupEntries = processedGroup.entries.slice(0, entriesToDisplay);
          const groupEl = feedEl.createDiv("bases-cms-group");
          if (processedGroup.group.hasKey()) {
            const headerEl = groupEl.createDiv("bases-cms-group-heading");
            const valueEl = headerEl.createDiv("bases-cms-group-value");
            const keyValue = ((_a = processedGroup.group.key) == null ? void 0 : _a.toString()) || "";
            valueEl.setText(keyValue);
          }
          const cards = await transformBasesEntries(
            groupEntries,
            settings,
            sortMethod,
            false,
            this.snippets,
            this.images,
            this.hasImageAvailable,
            this.app,
            this.mdxFrontmatterCache
          );
          for (let i = 0; i < cards.length; i++) {
            const card = cards[i];
            const entry = groupEntries[i];
            try {
              this.renderCard(groupEl, card, entry, displayedSoFar + i, settings);
              totalCardsRendered++;
            } catch (e) {
            }
          }
          displayedSoFar += entriesToDisplay;
        }
        if (totalCardsRendered === 0 && allEntries.length > 0) {
          throw new Error("No cards were rendered despite having entries. Check card rendering logic.");
        }
        if (savedScrollTop > 0) {
          this.containerEl.scrollTop = savedScrollTop;
        }
        this.scrollLayoutManager.setupInfiniteScroll(allEntries.length);
        this.scrollLayoutManager.setupResizeObserver();
        this.setupSettingsPolling(settings);
        this.updateSelectionUI();
        this.scrollLayoutManager.setIsLoading(false);
      } catch (e) {
        try {
          this.scrollLayoutManager.setIsLoading(false);
        } catch (e2) {
        }
        if (this.containerEl && this.containerEl.isConnected) {
          this.containerEl.empty();
          const errorEl = this.containerEl.createDiv("bases-cms-error");
          errorEl.setText("Error loading view. Check console for details.");
          setCssProps(errorEl, {
            padding: "20px",
            textAlign: "center",
            color: "var(--text-error)",
            margin: "20px"
          });
        }
      }
    })();
  }
  /**
   * Setup polling to detect settings changes and refresh view
   */
  setupSettingsPolling(initialSettings) {
    if (this.settingsPollInterval !== null) {
      return;
    }
    this.lastSettings = {
      descriptionProperty: initialSettings.descriptionProperty,
      showTextPreview: initialSettings.showTextPreview,
      fallbackToContent: initialSettings.fallbackToContent,
      truncatePreviewProperty: initialSettings.truncatePreviewProperty,
      imageProperty: initialSettings.imageProperty,
      imageFormat: initialSettings.imageFormat,
      fallbackToEmbeds: initialSettings.fallbackToEmbeds,
      propertyDisplay1: initialSettings.propertyDisplay1,
      propertyDisplay2: initialSettings.propertyDisplay2,
      propertyDisplay3: initialSettings.propertyDisplay3,
      propertyDisplay4: initialSettings.propertyDisplay4,
      propertyDisplay5: initialSettings.propertyDisplay5,
      propertyDisplay6: initialSettings.propertyDisplay6,
      propertyDisplay7: initialSettings.propertyDisplay7,
      propertyDisplay8: initialSettings.propertyDisplay8,
      propertyDisplay9: initialSettings.propertyDisplay9,
      propertyDisplay10: initialSettings.propertyDisplay10,
      propertyDisplay11: initialSettings.propertyDisplay11,
      propertyDisplay12: initialSettings.propertyDisplay12,
      propertyDisplay13: initialSettings.propertyDisplay13,
      propertyDisplay14: initialSettings.propertyDisplay14
    };
    this.settingsPollInterval = window.setInterval(() => {
      if (!this.config || typeof this.config.get !== "function") {
        return;
      }
      const currentSettings = readCMSSettings(
        this.config,
        this.plugin.settings
      );
      if (!this.lastSettings) {
        return;
      }
      const settingsChanged = this.lastSettings.descriptionProperty !== currentSettings.descriptionProperty || this.lastSettings.showTextPreview !== currentSettings.showTextPreview || this.lastSettings.fallbackToContent !== currentSettings.fallbackToContent || this.lastSettings.truncatePreviewProperty !== currentSettings.truncatePreviewProperty || this.lastSettings.imageProperty !== currentSettings.imageProperty || this.lastSettings.imageFormat !== currentSettings.imageFormat || this.lastSettings.fallbackToEmbeds !== currentSettings.fallbackToEmbeds || this.lastSettings.propertyDisplay1 !== currentSettings.propertyDisplay1 || this.lastSettings.propertyDisplay2 !== currentSettings.propertyDisplay2 || this.lastSettings.propertyDisplay3 !== currentSettings.propertyDisplay3 || this.lastSettings.propertyDisplay4 !== currentSettings.propertyDisplay4 || this.lastSettings.propertyDisplay5 !== currentSettings.propertyDisplay5 || this.lastSettings.propertyDisplay6 !== currentSettings.propertyDisplay6 || this.lastSettings.propertyDisplay7 !== currentSettings.propertyDisplay7 || this.lastSettings.propertyDisplay8 !== currentSettings.propertyDisplay8 || this.lastSettings.propertyDisplay9 !== currentSettings.propertyDisplay9 || this.lastSettings.propertyDisplay10 !== currentSettings.propertyDisplay10 || this.lastSettings.propertyDisplay11 !== currentSettings.propertyDisplay11 || this.lastSettings.propertyDisplay12 !== currentSettings.propertyDisplay12 || this.lastSettings.propertyDisplay13 !== currentSettings.propertyDisplay13 || this.lastSettings.propertyDisplay14 !== currentSettings.propertyDisplay14;
      if (settingsChanged) {
        if (this.lastSettings.descriptionProperty !== currentSettings.descriptionProperty || this.lastSettings.showTextPreview !== currentSettings.showTextPreview || this.lastSettings.fallbackToContent !== currentSettings.fallbackToContent || this.lastSettings.truncatePreviewProperty !== currentSettings.truncatePreviewProperty) {
          this.snippets = {};
        }
        if (this.lastSettings.imageProperty !== currentSettings.imageProperty || this.lastSettings.imageFormat !== currentSettings.imageFormat || this.lastSettings.fallbackToEmbeds !== currentSettings.fallbackToEmbeds) {
          this.images = {};
          this.hasImageAvailable = {};
        }
        this.lastSettings = {
          descriptionProperty: currentSettings.descriptionProperty,
          showTextPreview: currentSettings.showTextPreview,
          fallbackToContent: currentSettings.fallbackToContent,
          truncatePreviewProperty: currentSettings.truncatePreviewProperty,
          imageProperty: currentSettings.imageProperty,
          imageFormat: currentSettings.imageFormat,
          fallbackToEmbeds: currentSettings.fallbackToEmbeds,
          propertyDisplay1: currentSettings.propertyDisplay1,
          propertyDisplay2: currentSettings.propertyDisplay2,
          propertyDisplay3: currentSettings.propertyDisplay3,
          propertyDisplay4: currentSettings.propertyDisplay4,
          propertyDisplay5: currentSettings.propertyDisplay5,
          propertyDisplay6: currentSettings.propertyDisplay6,
          propertyDisplay7: currentSettings.propertyDisplay7,
          propertyDisplay8: currentSettings.propertyDisplay8,
          propertyDisplay9: currentSettings.propertyDisplay9,
          propertyDisplay10: currentSettings.propertyDisplay10,
          propertyDisplay11: currentSettings.propertyDisplay11,
          propertyDisplay12: currentSettings.propertyDisplay12,
          propertyDisplay13: currentSettings.propertyDisplay13,
          propertyDisplay14: currentSettings.propertyDisplay14
        };
        this.onDataUpdated();
      }
    }, 100);
    this.register(() => {
      if (this.settingsPollInterval !== null) {
        window.clearInterval(this.settingsPollInterval);
        this.settingsPollInterval = null;
      }
    });
  }
  /**
   * Preload MDX frontmatter for all visible entries to prevent flashing
   * This ensures all MDX data is available synchronously during card transformation
   */
  async preloadMdxFrontmatter(entries) {
    const mdxEntries = entries.filter((entry) => {
      const file = this.app.vault.getAbstractFileByPath(entry.file.path);
      return file instanceof import_obsidian23.TFile && file.extension === "mdx" && !(entry.file.path in this.mdxFrontmatterCache);
    });
    if (mdxEntries.length === 0) {
      return;
    }
    await Promise.all(
      mdxEntries.map(async (entry) => {
        const file = this.app.vault.getAbstractFileByPath(entry.file.path);
        if (file instanceof import_obsidian23.TFile) {
          try {
            const frontmatter = await getFileFrontmatter(this.app, file);
            this.mdxFrontmatterCache[entry.file.path] = frontmatter;
          } catch (error) {
            console.error(`Bases CMS: Error preloading frontmatter for ${entry.file.path}:`, error);
            this.mdxFrontmatterCache[entry.file.path] = null;
          }
        }
      })
    );
  }
  async loadContentForEntries(entries, settings) {
    if (settings.showTextPreview) {
      const snippetEntriesPromises = entries.filter((entry) => !(entry.file.path in this.snippets)).map(async (entry) => {
        const file = this.app.vault.getAbstractFileByPath(entry.file.path);
        if (!(file instanceof import_obsidian23.TFile)) return null;
        const descValue = await getFirstBasesPropertyValue(entry, settings.descriptionProperty, this.app);
        return {
          path: entry.file.path,
          file,
          descriptionData: descValue == null ? void 0 : descValue.data
        };
      });
      const snippetEntries = (await Promise.all(snippetEntriesPromises)).filter((e) => e !== null);
      if (snippetEntries.length > 0) {
        await loadSnippetsForEntries(
          snippetEntries,
          settings.fallbackToContent,
          false,
          this.app,
          this.snippets,
          settings.truncatePreviewProperty
        );
      }
    }
    if (settings.imageFormat !== "none") {
      const imageEntriesPromises = entries.filter((entry) => !(entry.file.path in this.images)).map(async (entry) => {
        const file = this.app.vault.getAbstractFileByPath(entry.file.path);
        if (!(file instanceof import_obsidian23.TFile)) return null;
        const imagePropertyValues = await getAllBasesImagePropertyValues(entry, settings.imageProperty, this.app);
        return {
          path: entry.file.path,
          file,
          imagePropertyValues
        };
      });
      const imageEntries = (await Promise.all(imageEntriesPromises)).filter((e) => e !== null);
      if (imageEntries.length > 0) {
        await loadImagesForEntries(
          imageEntries,
          settings.fallbackToEmbeds,
          this.app,
          this.images,
          this.hasImageAvailable
        );
      }
    }
  }
  /**
   * Direct delete handler for context menu - deletes a single file without selection
   */
  getDirectDeleteHandler(filePath) {
    return async () => {
      const { prepareDeletionPreview: prepareDeletionPreview2, executeSmartDeletion: executeSmartDeletion2 } = await Promise.resolve().then(() => (init_smart_deletion(), smart_deletion_exports));
      const { DeletionPreviewModal: DeletionPreviewModal2 } = await Promise.resolve().then(() => (init_deletion_preview(), deletion_preview_exports));
      if (this.plugin.settings.confirmDeletions) {
        const preview = await prepareDeletionPreview2(
          this.app,
          [filePath],
          this.plugin.settings
        );
        const modal = new DeletionPreviewModal2(
          this.app,
          preview,
          () => {
            this.onDataUpdated();
          }
        );
        modal.open();
      } else {
        const preview = await prepareDeletionPreview2(
          this.app,
          [filePath],
          this.plugin.settings
        );
        await executeSmartDeletion2(this.app, preview);
        this.onDataUpdated();
      }
    };
  }
  renderCard(container, card, entry, index, settings) {
    const isSelected = this.selectedFiles.has(card.path);
    return this.cardRenderer.renderCard(
      container,
      card,
      entry,
      settings,
      this,
      isSelected,
      (path, selected) => {
        this.handleSelectionChange(path, selected);
      },
      (path, property, value) => {
        void this.handlePropertyToggle(path, property, value);
      },
      { handleDelete: this.getDirectDeleteHandler(card.path) }
    );
  }
  /**
   * Update card image when it becomes available
   * Called asynchronously after images load
   */
  updateCardImage(path, imageUrl) {
    var _a;
    const cardEl = this.containerEl.querySelector(`.card[data-path="${path}"]`);
    if (!cardEl) return;
    const url = Array.isArray(imageUrl) ? imageUrl[0] : imageUrl;
    if (!url) return;
    let imageEmbedContainer = cardEl.querySelector(".image-embed");
    if (!imageEmbedContainer) {
      const placeholder = cardEl.querySelector(".card-cover-placeholder, .card-thumbnail-placeholder");
      const isThumbnail = cardEl.classList.contains("image-format-thumbnail");
      const isCover = cardEl.classList.contains("image-format-cover");
      if (placeholder) {
        const existingBadge = placeholder.querySelector(".card-status-badge");
        const imageClassName = placeholder.classList.contains("card-cover-placeholder") ? "card-cover" : "card-thumbnail";
        const imageEl = (_a = placeholder.parentElement) == null ? void 0 : _a.createDiv(imageClassName);
        if (imageEl) {
          imageEmbedContainer = imageEl.createDiv("image-embed");
          if (existingBadge) {
            imageEl.appendChild(existingBadge);
          }
          placeholder.remove();
        }
      } else if (isThumbnail) {
        const contentContainer = cardEl.querySelector(".card-content");
        if (contentContainer) {
          const textWrapper = contentContainer.querySelector(".card-text-wrapper");
          const imageEl = textWrapper ? contentContainer.insertBefore(contentContainer.createDiv("card-thumbnail"), textWrapper) : contentContainer.createDiv("card-thumbnail");
          imageEmbedContainer = imageEl.createDiv("image-embed");
        }
      } else if (isCover) {
        const contentContainer = cardEl.querySelector(".card-content");
        if (contentContainer) {
          const imageEl = contentContainer.createDiv("card-cover");
          imageEmbedContainer = imageEl.createDiv("image-embed");
        }
      }
    }
    if (imageEmbedContainer) {
      void (async () => {
        const finalUrl = await convertGifToStatic(url, this.plugin.settings.forceStaticGifImages);
        imageEmbedContainer.style.backgroundImage = `url("${finalUrl}")`;
      })();
      imageEmbedContainer.style.backgroundImage = `url("${url}")`;
      setCssProps(imageEmbedContainer, {
        backgroundSize: "cover",
        backgroundPosition: "center center",
        backgroundRepeat: "no-repeat"
      });
    }
  }
  getSortMethod() {
    const sortConfigs = this.config.getSort();
    if (sortConfigs && sortConfigs.length > 0) {
      const firstSort = sortConfigs[0];
      const property = firstSort.property;
      const direction = firstSort.direction.toLowerCase();
      if (property.includes("ctime")) {
        return `ctime-${direction}`;
      }
      if (property.includes("mtime")) {
        return `mtime-${direction}`;
      }
    }
    return "mtime-desc";
  }
  handleSelectionChange(path, selected) {
    if (selected) {
      this.selectedFiles.add(path);
    } else {
      this.selectedFiles.delete(path);
    }
    this.updateSelectionUI();
    if (this.selectedFiles.size === 0) {
      if (this.bulkToolbar) {
        this.bulkToolbar.hide();
        const toolbarEl = this.containerEl.querySelector(".bases-cms-bulk-toolbar");
        if (toolbarEl instanceof HTMLElement) {
          toolbarEl.removeClass("bases-cms-bulk-toolbar-visible");
          toolbarEl.addClass("bases-cms-bulk-toolbar-hidden");
        }
      }
    }
  }
  async handlePropertyToggle(path, property, value) {
    if (this.propertyToggleHandler) {
      await this.propertyToggleHandler.handlePropertyToggle(path, property, value);
    }
  }
  selectAll() {
    const cards = this.containerEl.querySelectorAll(".bases-cms-card");
    cards.forEach((cardEl) => {
      const path = cardEl.getAttribute("data-path");
      if (path) {
        this.selectedFiles.add(path);
      }
    });
    this.updateSelectionUI();
  }
  deselectAll() {
    this.selectedFiles.clear();
    this.updateSelectionUI();
  }
  /**
   * Refresh the toolbar when settings change
   * Called from settings tab when toolbar button visibility settings are updated
   */
  refreshToolbar() {
    if (this.bulkToolbar) {
      const currentCount = this.selectedFiles.size;
      this.bulkToolbar.recreate();
      if (currentCount > 0) {
        this.bulkToolbar.updateCount(currentCount);
      }
    }
  }
  updateSelectionUI() {
    const cards = this.containerEl.querySelectorAll(".card");
    cards.forEach((cardEl) => {
      const path = cardEl.getAttribute("data-path");
      const checkbox = cardEl.querySelector('input[type="checkbox"].selection-checkbox');
      if (path) {
        const isSelected = this.selectedFiles.has(path);
        if (isSelected) {
          cardEl.addClass("selected");
        } else {
          cardEl.removeClass("selected");
        }
        if (checkbox) {
          checkbox.checked = isSelected;
        }
      }
    });
    if (this.selectedFiles.size > 0) {
      const orphanedToolbars = document.querySelectorAll(".bases-cms-bulk-toolbar");
      orphanedToolbars.forEach((toolbar) => {
        const toolbarInstance = toolbar.__bulkToolbarInstance;
        if (!toolbarInstance || toolbarInstance !== this.bulkToolbar) {
          toolbar.remove();
        }
      });
      if (!this.bulkToolbar) {
        const settings = readCMSSettings(
          this.config,
          this.plugin.settings
        );
        this.bulkToolbar = new BulkToolbar(
          this.app,
          this.plugin,
          this.containerEl,
          () => Array.from(this.selectedFiles),
          () => {
            this.selectedFiles.clear();
            this.updateSelectionUI();
          },
          () => {
            const selectedPaths = Array.from(this.selectedFiles);
            this.isRefreshingWithSelection = true;
            if (this.bulkToolbar && selectedPaths.length > 0) {
              this.bulkToolbar.show();
            }
            this.onDataUpdated();
            window.setTimeout(() => {
              selectedPaths.forEach((path) => {
                if (this.app.vault.getAbstractFileByPath(path)) {
                  this.selectedFiles.add(path);
                }
              });
              this.isRefreshingWithSelection = false;
              this.updateSelectionUI();
              if (this.selectedFiles.size > 0 && this.bulkToolbar) {
                this.bulkToolbar.show();
                this.bulkToolbar.updateCount(this.selectedFiles.size);
              }
              window.setTimeout(() => {
                if (this.selectedFiles.size > 0 && this.bulkToolbar) {
                  this.bulkToolbar.show();
                  this.bulkToolbar.updateCount(this.selectedFiles.size);
                }
              }, 100);
            }, 250);
          },
          () => {
            this.selectAll();
          },
          settings
        );
      } else {
        const settings = readCMSSettings(
          this.config,
          this.plugin.settings
        );
        this.bulkToolbar.updateSettings(settings);
      }
      this.bulkToolbar.updateCount(this.selectedFiles.size);
      this.bulkToolbar.show();
    } else {
      if (this.bulkToolbar && !this.isRefreshingWithSelection) {
        this.bulkToolbar.hide();
        const toolbarEl = this.containerEl.querySelector(".bases-cms-bulk-toolbar");
        if (toolbarEl instanceof HTMLElement) {
          toolbarEl.removeClass("bases-cms-bulk-toolbar-visible");
          toolbarEl.addClass("bases-cms-bulk-toolbar-hidden");
        }
      }
    }
  }
  onClose() {
    this.scrollLayoutManager.cleanup();
    if (this.viewSwitchListener) {
      this.viewSwitchListener.cleanup();
    }
    if (this.settingsPollInterval !== null) {
      window.clearInterval(this.settingsPollInterval);
      this.settingsPollInterval = null;
    }
    this.propertyObservers.forEach((obs) => obs.disconnect());
    this.propertyObservers = [];
    if (this.bulkToolbar) {
      this.bulkToolbar.destroy();
    }
    this.selectedFiles.clear();
    const orphanedToolbars = document.querySelectorAll(".bases-cms-bulk-toolbar");
    orphanedToolbars.forEach((toolbar) => toolbar.remove());
    const pluginWithMethod = this.plugin;
    if (pluginWithMethod && typeof pluginWithMethod.removeView === "function") {
      pluginWithMethod.removeView(this);
    }
  }
  /**
   * Override new note creation to use custom location if configured
   */
  async onNew() {
    var _a;
    const settings = readCMSSettings(
      this.config,
      this.plugin.settings
    );
    if (settings.customizeNewButton) {
      try {
        const locationInput = ((_a = settings.newNoteLocation) == null ? void 0 : _a.trim()) || "";
        if (locationInput === "") {
          const vaultConfig = this.app.vault.config;
          const newFileLocation = (vaultConfig == null ? void 0 : vaultConfig.newFileLocation) || "folder";
          const newFileFolderPath = (vaultConfig == null ? void 0 : vaultConfig.newFileFolderPath) || "";
          let filePath = "Untitled.md";
          if (newFileLocation === "folder" && newFileFolderPath) {
            filePath = `${newFileFolderPath}/Untitled.md`;
          } else if (newFileLocation === "current") {
            const activeFile = this.app.workspace.getActiveFile();
            if (activeFile && activeFile.parent) {
              filePath = `${activeFile.parent.path}/Untitled.md`;
            }
          } else if (newFileLocation === "root") {
            filePath = "Untitled.md";
          }
          const file = await this.app.vault.create(filePath, "");
          await this.app.workspace.openLinkText(file.path, "", false);
          return true;
        }
        if (locationInput === "/" || locationInput.replace(/\//g, "") === "") {
          const newFile = await this.app.vault.create("Untitled.md", "");
          await this.app.workspace.openLinkText(newFile.path, "", false);
          return true;
        }
        const folderPath = locationInput.replace(/^\/+|\/+$/g, "");
        let folder = this.app.vault.getAbstractFileByPath(folderPath);
        if (!folder || !("children" in folder)) {
          await this.app.vault.createFolder(folderPath);
          folder = this.app.vault.getAbstractFileByPath(folderPath);
        }
        if (folder && "children" in folder) {
          const newFile = await this.app.vault.create(`${folderPath}/Untitled.md`, "");
          await this.app.workspace.openLinkText(newFile.path, "", false);
          return true;
        }
      } catch (e) {
      }
    }
    return false;
  }
};

// src/utils/view-registration.ts
function registerBasesCMSView(plugin, retries = 5) {
  try {
    const basesPlugin = plugin;
    if (typeof basesPlugin.registerBasesView === "function") {
      basesPlugin.registerBasesView(CMS_VIEW_TYPE, {
        name: "CMS",
        icon: plugin.settings.useHomeIcon ? "lucide-home" : "lucide-blocks",
        factory: (controller, containerEl) => {
          const view = new BasesCMSView(controller, containerEl, plugin);
          const pluginWithViews = plugin;
          if (pluginWithViews.activeViews) {
            pluginWithViews.activeViews.add(view);
          }
          return view;
        },
        options: getCMSViewOptions2()
      });
    } else if (retries > 0) {
      const pluginWithTimeout = plugin;
      const registrationTimeout = pluginWithTimeout.registrationTimeout;
      if (registrationTimeout !== null && registrationTimeout !== void 0) {
        window.clearTimeout(registrationTimeout);
      }
      pluginWithTimeout.registrationTimeout = window.setTimeout(() => {
        pluginWithTimeout.registrationTimeout = null;
        registerBasesCMSView(plugin, retries - 1);
      }, 200);
    } else {
      console.warn("Bases CMS: registerBasesView not available. Is Bases plugin installed?");
    }
  } catch (error) {
    console.error("Bases CMS: Error registering view:", error);
  }
}
function getCMSViewOptions2() {
  const { getCMSViewOptions: getCMSViewOptions3 } = (init_settings_schema(), __toCommonJS(settings_schema_exports));
  return getCMSViewOptions3;
}

// src/main.ts
var BasesCMSPlugin = class extends import_obsidian24.Plugin {
  constructor() {
    super(...arguments);
    this.activeViews = /* @__PURE__ */ new Set();
    this.registrationTimeout = null;
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new BasesCMSSettingTab(this.app, this));
    registerBasesCMSView(this);
  }
  onunload() {
    if (this.registrationTimeout !== null) {
      window.clearTimeout(this.registrationTimeout);
      this.registrationTimeout = null;
    }
    this.activeViews.clear();
  }
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Refresh toolbars in all active CMS views
   */
  refreshAllToolbars() {
    const viewsToRemove = [];
    this.activeViews.forEach((view) => {
      const containerEl = view.containerEl;
      if (!containerEl || !containerEl.parentElement) {
        viewsToRemove.push(view);
      }
    });
    viewsToRemove.forEach((view) => this.activeViews.delete(view));
    this.activeViews.forEach((view) => {
      if (view && typeof view.refreshToolbar === "function") {
        view.refreshToolbar();
      }
    });
  }
  /**
   * Remove a view from tracking when it's closed
   */
  removeView(view) {
    this.activeViews.delete(view);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3V0aWxzL21keC1mcm9udG1hdHRlci50cyIsICJzcmMvdXRpbHMvZnJvbnRtYXR0ZXItaGVscGVyLnRzIiwgInNyYy9zaGFyZWQvc2V0dGluZ3Mtc2NoZW1hLnRzIiwgInNyYy91dGlscy9hdHRhY2htZW50LWRldGVjdGlvbi50cyIsICJzcmMvdXRpbHMvc21hcnQtZGVsZXRpb24udHMiLCAic3JjL2NvbXBvbmVudHMvZGVsZXRpb24tcHJldmlldy50cyIsICJzcmMvbWFpbi50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL2NvbXBvbmVudHMvY29tbWFuZC1waWNrZXItbW9kYWwudHMiLCAic3JjL2NvbXBvbmVudHMvaWNvbi1waWNrZXItbW9kYWwudHMiLCAic3JjL3V0aWxzL3NldHRpbmdzLWNvbXBhdC50cyIsICJzcmMvdHlwZXMudHMiLCAic3JjL3ZpZXdzL2Ntcy12aWV3LnRzIiwgInNyYy91dGlscy9jc3MtcHJvcHMudHMiLCAic3JjL3NoYXJlZC9kYXRhLXRyYW5zZm9ybS50cyIsICJzcmMvdXRpbHMvcHJvcGVydHkudHMiLCAic3JjL3V0aWxzL3N0eWxlLXNldHRpbmdzLnRzIiwgInNyYy91dGlscy9pbWFnZS50cyIsICJzcmMvdXRpbHMvcHJldmlldy50cyIsICJzcmMvc2hhcmVkL2NvbnRlbnQtbG9hZGVyLnRzIiwgInNyYy92aWV3cy9zaGFyZWQtcmVuZGVyZXIudHMiLCAic3JjL3V0aWxzL2RyYWZ0LXN0YXR1cy1iYWRnZS50cyIsICJzcmMvdXRpbHMvcXVpY2stZWRpdC1pY29uLnRzIiwgInNyYy91dGlscy9wcm9wZXJ0eS1yZW5kZXJlci50cyIsICJzcmMvY29tcG9uZW50cy9idWxrLXRvb2xiYXIudHMiLCAic3JjL3V0aWxzL2J1bGstb3BlcmF0aW9ucy50cyIsICJzcmMvdXRpbHMvZnJvbnRtYXR0ZXIudHMiLCAic3JjL2NvbXBvbmVudHMvbWFuYWdlLXRhZ3MtbW9kYWwudHMiLCAic3JjL2NvbXBvbmVudHMvc2V0LXByb3BlcnR5LW1vZGFsLnRzIiwgInNyYy9jb21wb25lbnRzL3JlbW92ZS1wcm9wZXJ0eS1tb2RhbC50cyIsICJzcmMvdXRpbHMvdG9vbGJhci1hY3Rpb25zLnRzIiwgInNyYy9jb21wb25lbnRzL2J1bGstb3BlcmF0aW9uLWNvbmZpcm0udHMiLCAic3JjL3V0aWxzL25ldy1ub3RlLWludGVyY2VwdG9yLnRzIiwgInNyYy91dGlscy9wcm9wZXJ0eS10b2dnbGUtaGFuZGxlci50cyIsICJzcmMvdXRpbHMvc2Nyb2xsLWxheW91dC1tYW5hZ2VyLnRzIiwgInNyYy91dGlscy92aWV3LXN3aXRjaC1saXN0ZW5lci50cyIsICJzcmMvdXRpbHMvdmlldy1yZWdpc3RyYXRpb24udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxyXG4gKiBNRFggRnJvbnRtYXR0ZXIgVXRpbGl0aWVzXHJcbiAqIE1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nIGFuZCBtb2RpZmljYXRpb24gZm9yIE1EWCBmaWxlc1xyXG4gKiBPYnNpZGlhbidzIG1ldGFkYXRhQ2FjaGUgYW5kIHByb2Nlc3NGcm9udE1hdHRlciBvbmx5IHdvcmsgZm9yIC5tZCBmaWxlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIHBhcnNlWWFtbCwgc3RyaW5naWZ5WWFtbCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYW4gTURYIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01keEZpbGUoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24gPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogUGFyc2UgZnJvbnRtYXR0ZXIgZnJvbSByYXcgZmlsZSBjb250ZW50XHJcbiAqIFJldHVybnMgdGhlIGZyb250bWF0dGVyIG9iamVjdCBhbmQgdGhlIGJvZHkgY29udGVudCBzZXBhcmF0ZWx5XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNZHhGcm9udG1hdHRlcihcclxuXHRjb250ZW50OiBzdHJpbmdcclxuKTogeyBmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj47IGJvZHk6IHN0cmluZyB9IHwgbnVsbCB7XHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJSZWdleCA9IC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tXFxuLztcclxuXHRjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goZnJvbnRtYXR0ZXJSZWdleCk7XHJcblxyXG5cdGlmICghbWF0Y2gpIHtcclxuXHRcdC8vIE5vIGZyb250bWF0dGVyIGZvdW5kXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRmcm9udG1hdHRlcjoge30sXHJcblx0XHRcdGJvZHk6IGNvbnRlbnQsXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJUZXh0ID0gbWF0Y2hbMV07XHJcblx0Y29uc3QgYm9keUNvbnRlbnQgPSBjb250ZW50LnNsaWNlKG1hdGNoWzBdLmxlbmd0aCk7XHJcblxyXG5cdHRyeSB7XHJcblx0XHRjb25zdCBwYXJzZWQgPSBwYXJzZVlhbWwoZnJvbnRtYXR0ZXJUZXh0KSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGwgfCB1bmRlZmluZWQ7XHJcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHBhcnNlZCAmJiB0eXBlb2YgcGFyc2VkID09PSAnb2JqZWN0JyA/IHBhcnNlZCA6IHt9O1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0ZnJvbnRtYXR0ZXIsXHJcblx0XHRcdGJvZHk6IGJvZHlDb250ZW50LFxyXG5cdFx0fTtcclxuXHR9IGNhdGNoIChlKSB7XHJcblx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIE1EWCBmcm9udG1hdHRlcjonLCBlKTtcclxuXHRcdC8vIFJldHVybiBlbXB0eSBmcm9udG1hdHRlciBidXQgcHJlc2VydmUgYm9keVxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0ZnJvbnRtYXR0ZXI6IHt9LFxyXG5cdFx0XHRib2R5OiBib2R5Q29udGVudCxcclxuXHRcdH07XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogUmVhZCBhbmQgcGFyc2UgZnJvbnRtYXR0ZXIgZnJvbSBhbiBNRFggZmlsZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRNZHhGcm9udG1hdHRlcihcclxuXHRhcHA6IEFwcCxcclxuXHRmaWxlOiBURmlsZVxyXG4pOiBQcm9taXNlPFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD4ge1xyXG5cdGlmICghaXNNZHhGaWxlKGZpbGUpKSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblxyXG5cdHRyeSB7XHJcblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcblx0XHRjb25zdCBwYXJzZWQgPSBwYXJzZU1keEZyb250bWF0dGVyKGNvbnRlbnQpO1xyXG5cdFx0cmV0dXJuIHBhcnNlZCA/IHBhcnNlZC5mcm9udG1hdHRlciA6IG51bGw7XHJcblx0fSBjYXRjaCAoZSkge1xyXG5cdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgcmVhZGluZyBNRFggZnJvbnRtYXR0ZXIgZnJvbSAke2ZpbGUucGF0aH06YCwgZSk7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXcml0ZSB1cGRhdGVkIGZyb250bWF0dGVyIHRvIGFuIE1EWCBmaWxlXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd3JpdGVNZHhGcm9udG1hdHRlcihcclxuXHRhcHA6IEFwcCxcclxuXHRmaWxlOiBURmlsZSxcclxuXHRmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0aWYgKCFpc01keEZpbGUoZmlsZSkpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihgRmlsZSAke2ZpbGUucGF0aH0gaXMgbm90IGFuIE1EWCBmaWxlYCk7XHJcblx0fVxyXG5cclxuXHR0cnkge1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdFx0Y29uc3QgcGFyc2VkID0gcGFyc2VNZHhGcm9udG1hdHRlcihjb250ZW50KTtcclxuXHJcblx0XHRpZiAoIXBhcnNlZCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBleGlzdGluZyBmcm9udG1hdHRlcicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFN0cmluZ2lmeSB0aGUgdXBkYXRlZCBmcm9udG1hdHRlclxyXG5cdFx0Y29uc3QgbmV3RnJvbnRtYXR0ZXJUZXh0ID0gc3RyaW5naWZ5WWFtbChmcm9udG1hdHRlcikudHJpbSgpO1xyXG5cclxuXHRcdC8vIFJlY29uc3RydWN0IGZpbGUgY29udGVudFxyXG5cdFx0Y29uc3QgbmV3Q29udGVudCA9IGAtLS1cXG4ke25ld0Zyb250bWF0dGVyVGV4dH1cXG4tLS1cXG4ke3BhcnNlZC5ib2R5fWA7XHJcblxyXG5cdFx0Ly8gV3JpdGUgYmFjayB0byBmaWxlXHJcblx0XHRhd2FpdCBhcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQpO1xyXG5cdH0gY2F0Y2ggKGUpIHtcclxuXHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIHdyaXRpbmcgTURYIGZyb250bWF0dGVyIHRvICR7ZmlsZS5wYXRofTpgLCBlKTtcclxuXHRcdHRocm93IGU7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogUHJvY2VzcyBmcm9udG1hdHRlciBmb3IgYW4gTURYIGZpbGUgKHNpbWlsYXIgQVBJIHRvIHByb2Nlc3NGcm9udE1hdHRlcilcclxuICogVGhlIGNhbGxiYWNrIHJlY2VpdmVzIHRoZSBmcm9udG1hdHRlciBvYmplY3QgYW5kIGNhbiBtb2RpZnkgaXRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzTWR4RnJvbnRNYXR0ZXIoXHJcblx0YXBwOiBBcHAsXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0Y2FsbGJhY2s6IChmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pID0+IHZvaWRcclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0aWYgKCFpc01keEZpbGUoZmlsZSkpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihgRmlsZSAke2ZpbGUucGF0aH0gaXMgbm90IGFuIE1EWCBmaWxlYCk7XHJcblx0fVxyXG5cclxuXHR0cnkge1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cdFx0Y29uc3QgcGFyc2VkID0gcGFyc2VNZHhGcm9udG1hdHRlcihjb250ZW50KTtcclxuXHJcblx0XHRpZiAoIXBhcnNlZCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBleGlzdGluZyBmcm9udG1hdHRlcicpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENyZWF0ZSBhIGNvcHkgb2YgdGhlIGZyb250bWF0dGVyIGZvciB0aGUgY2FsbGJhY2sgdG8gbW9kaWZ5XHJcblx0XHRjb25zdCBmcm9udG1hdHRlciA9IHsgLi4ucGFyc2VkLmZyb250bWF0dGVyIH07XHJcblxyXG5cdFx0Ly8gQ2FsbCB0aGUgY2FsbGJhY2sgdG8gbW9kaWZ5IGZyb250bWF0dGVyXHJcblx0XHRjYWxsYmFjayhmcm9udG1hdHRlcik7XHJcblxyXG5cdFx0Ly8gU3RyaW5naWZ5IHRoZSB1cGRhdGVkIGZyb250bWF0dGVyXHJcblx0XHRjb25zdCBuZXdGcm9udG1hdHRlclRleHQgPSBzdHJpbmdpZnlZYW1sKGZyb250bWF0dGVyKS50cmltKCk7XHJcblxyXG5cdFx0Ly8gUmVjb25zdHJ1Y3QgZmlsZSBjb250ZW50XHJcblx0XHRjb25zdCBuZXdDb250ZW50ID0gYC0tLVxcbiR7bmV3RnJvbnRtYXR0ZXJUZXh0fVxcbi0tLVxcbiR7cGFyc2VkLmJvZHl9YDtcclxuXHJcblx0XHQvLyBXcml0ZSBiYWNrIHRvIGZpbGVcclxuXHRcdGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudCk7XHJcblx0fSBjYXRjaCAoZSkge1xyXG5cdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBNRFggZnJvbnRtYXR0ZXIgZm9yICR7ZmlsZS5wYXRofTpgLCBlKTtcclxuXHRcdHRocm93IGU7XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogVW5pZmllZCBGcm9udG1hdHRlciBIZWxwZXJcclxuICogUHJvdmlkZXMgYSB1bmlmaWVkIGludGVyZmFjZSBmb3IgcmVhZGluZyBhbmQgbW9kaWZ5aW5nIGZyb250bWF0dGVyXHJcbiAqIFdvcmtzIGZvciBib3RoIC5tZCBmaWxlcyAodXNpbmcgT2JzaWRpYW4ncyBjYWNoZSkgYW5kIC5tZHggZmlsZXMgKG1hbnVhbCBwYXJzaW5nKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7XHJcblx0aXNNZHhGaWxlLFxyXG5cdHJlYWRNZHhGcm9udG1hdHRlcixcclxuXHRwcm9jZXNzTWR4RnJvbnRNYXR0ZXIsXHJcbn0gZnJvbSAnLi9tZHgtZnJvbnRtYXR0ZXInO1xyXG5cclxuLyoqXHJcbiAqIEdldCBmcm9udG1hdHRlciBmcm9tIGEgZmlsZSAod29ya3MgZm9yIGJvdGggLm1kIGFuZCAubWR4KVxyXG4gKiBGb3IgLm1kIGZpbGVzLCB1c2VzIE9ic2lkaWFuJ3MgbWV0YWRhdGEgY2FjaGUgKGZhc3QpXHJcbiAqIEZvciAubWR4IGZpbGVzLCB1c2VzIG1hbnVhbCBwYXJzaW5nXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmlsZUZyb250bWF0dGVyKFxyXG5cdGFwcDogQXBwLFxyXG5cdGZpbGU6IFRGaWxlXHJcbik6IFByb21pc2U8UmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPiB7XHJcblx0aWYgKGlzTWR4RmlsZShmaWxlKSkge1xyXG5cdFx0Ly8gTURYIGZpbGVzOiB1c2UgbWFudWFsIHBhcnNpbmdcclxuXHRcdHJldHVybiBhd2FpdCByZWFkTWR4RnJvbnRtYXR0ZXIoYXBwLCBmaWxlKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Ly8gLm1kIGZpbGVzOiB1c2UgT2JzaWRpYW4ncyBtZXRhZGF0YSBjYWNoZVxyXG5cdFx0Y29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcblx0XHRyZXR1cm4gbWV0YWRhdGE/LmZyb250bWF0dGVyIHx8IG51bGw7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogUHJvY2VzcyBmcm9udG1hdHRlciBmb3IgYSBmaWxlICh3b3JrcyBmb3IgYm90aCAubWQgYW5kIC5tZHgpXHJcbiAqIFNpbWlsYXIgQVBJIHRvIGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIgYnV0IHdvcmtzIGZvciBNRFggZmlsZXMgdG9vXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0ZpbGVGcm9udE1hdHRlcihcclxuXHRhcHA6IEFwcCxcclxuXHRmaWxlOiBURmlsZSxcclxuXHRjYWxsYmFjazogKGZyb250bWF0dGVyOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgPT4gdm9pZFxyXG4pOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRpZiAoaXNNZHhGaWxlKGZpbGUpKSB7XHJcblx0XHQvLyBNRFggZmlsZXM6IHVzZSBtYW51YWwgcHJvY2Vzc2luZ1xyXG5cdFx0YXdhaXQgcHJvY2Vzc01keEZyb250TWF0dGVyKGFwcCwgZmlsZSwgY2FsbGJhY2spO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyAubWQgZmlsZXM6IHVzZSBPYnNpZGlhbidzIGJ1aWx0LWluIG1ldGhvZFxyXG5cdFx0YXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCBjYWxsYmFjayk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGFuIE1EWCBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNNZHhGaWxlSGVscGVyKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGlzTWR4RmlsZShmaWxlKTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIFNldHRpbmdzIHNjaGVtYSBmb3IgQ01TIHZpZXdzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHR5cGUgeyBCYXNlc0NNU1NldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgdHlwZSB7IENNU1NldHRpbmdzIH0gZnJvbSAnLi9kYXRhLXRyYW5zZm9ybSc7XHJcblxyXG4vLyBCYXNlcyBjb25maWcgb2JqZWN0IGludGVyZmFjZVxyXG5pbnRlcmZhY2UgQmFzZXNDb25maWcge1xyXG5cdGdldChrZXk6IHN0cmluZyk6IHVua25vd247XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZWFkIENNUyBzZXR0aW5ncyBmcm9tIEJhc2VzIGNvbmZpZyB3aXRoIHBsdWdpbiBkZWZhdWx0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRDTVNTZXR0aW5ncyhcclxuXHRjb25maWc6IEJhc2VzQ29uZmlnIHwgdW5kZWZpbmVkLFxyXG5cdHBsdWdpblNldHRpbmdzOiBCYXNlc0NNU1NldHRpbmdzXHJcbik6IENNU1NldHRpbmdzIHtcclxuXHQvLyBIZWxwZXIgdG8gc2FmZWx5IGdldCBjb25maWcgdmFsdWVzXHJcblx0Y29uc3QgZ2V0Q29uZmlnID0gKGtleTogc3RyaW5nKTogdW5rbm93biA9PiB7XHJcblx0XHRyZXR1cm4gY29uZmlnPy5nZXQ/LihrZXkpO1xyXG5cdH07XHJcblx0XHJcblx0cmV0dXJuIHtcclxuXHRcdHRpdGxlUHJvcGVydHk6IChnZXRDb25maWcoJ3RpdGxlUHJvcGVydHknKSBhcyBzdHJpbmcpIHx8ICcnLFxyXG5cdFx0ZGVzY3JpcHRpb25Qcm9wZXJ0eTogKGdldENvbmZpZygnZGVzY3JpcHRpb25Qcm9wZXJ0eScpIGFzIHN0cmluZykgfHwgJycsXHJcblx0XHRpbWFnZVByb3BlcnR5OiAoZ2V0Q29uZmlnKCdpbWFnZVByb3BlcnR5JykgYXMgc3RyaW5nKSB8fCAnJyxcclxuXHRcdHNob3dUaXRsZTogdHJ1ZSwgLy8gQWx3YXlzIHNob3cgdGl0bGUsIGRlZmF1bHRpbmcgdG8gZmlsZSBuYW1lIGlmIG5vIHByb3BlcnR5IHNldFxyXG5cdFx0c2hvd0RhdGU6IChnZXRDb25maWcoJ3Nob3dEYXRlJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXHJcblx0XHRkYXRlUHJvcGVydHk6IChnZXRDb25maWcoJ2RhdGVQcm9wZXJ0eScpIGFzIHN0cmluZykgfHwgJycsXHJcblx0XHRkYXRlSW5jbHVkZVRpbWU6IChnZXRDb25maWcoJ2RhdGVJbmNsdWRlVGltZScpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxyXG5cdFx0c2hvd1RleHRQcmV2aWV3OiAoZ2V0Q29uZmlnKCdzaG93VGV4dFByZXZpZXcnKSBhcyBib29sZWFuKSA/PyB0cnVlLFxyXG5cdFx0ZmFsbGJhY2tUb0NvbnRlbnQ6IChnZXRDb25maWcoJ2ZhbGxiYWNrVG9Db250ZW50JykgYXMgYm9vbGVhbikgPz8gdHJ1ZSxcclxuXHRcdHRydW5jYXRlUHJldmlld1Byb3BlcnR5OiAoZ2V0Q29uZmlnKCd0cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eScpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxyXG5cdFx0ZmFsbGJhY2tUb0VtYmVkczogKCgpID0+IHtcclxuXHRcdFx0Y29uc3QgdmFsdWUgPSBnZXRDb25maWcoJ2ZhbGxiYWNrVG9FbWJlZHMnKTtcclxuXHRcdFx0aWYgKHZhbHVlID09PSAnYWx3YXlzJyB8fCB2YWx1ZSA9PT0gJ2lmLWVtcHR5JyB8fCB2YWx1ZSA9PT0gJ25ldmVyJykge1xyXG5cdFx0XHRcdHJldHVybiB2YWx1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHQvLyBMZWdhY3kgYm9vbGVhbiBzdXBwb3J0IC0gZGVmYXVsdCB0byAnaWYtZW1wdHknIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XHJcblx0XHRcdHJldHVybiAodmFsdWUgPT09IGZhbHNlKSA/ICduZXZlcicgOiAnaWYtZW1wdHknO1xyXG5cdFx0fSkoKSxcclxuXHRcdHByb3BlcnR5RGlzcGxheTE6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTEnKSBhcyBzdHJpbmcpIHx8ICcnLFxyXG5cdFx0cHJvcGVydHlEaXNwbGF5MjogKGdldENvbmZpZygncHJvcGVydHlEaXNwbGF5MicpIGFzIHN0cmluZykgfHwgJycsXHJcblx0XHRwcm9wZXJ0eURpc3BsYXkzOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXkzJykgYXMgc3RyaW5nKSB8fCAnJyxcclxuXHRcdHByb3BlcnR5RGlzcGxheTQ6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTQnKSBhcyBzdHJpbmcpIHx8ICcnLFxyXG5cdFx0cHJvcGVydHlEaXNwbGF5NTogKGdldENvbmZpZygncHJvcGVydHlEaXNwbGF5NScpIGFzIHN0cmluZykgfHwgJycsXHJcblx0XHRwcm9wZXJ0eURpc3BsYXk2OiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXk2JykgYXMgc3RyaW5nKSB8fCAnJyxcclxuXHRcdHByb3BlcnR5RGlzcGxheTc6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTcnKSBhcyBzdHJpbmcpIHx8ICcnLFxyXG5cdFx0cHJvcGVydHlEaXNwbGF5ODogKGdldENvbmZpZygncHJvcGVydHlEaXNwbGF5OCcpIGFzIHN0cmluZykgfHwgJycsXHJcblx0XHRwcm9wZXJ0eURpc3BsYXk5OiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXk5JykgYXMgc3RyaW5nKSB8fCAnJyxcclxuXHRcdHByb3BlcnR5RGlzcGxheTEwOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXkxMCcpIGFzIHN0cmluZykgfHwgJycsXHJcblx0XHRwcm9wZXJ0eURpc3BsYXkxMTogKGdldENvbmZpZygncHJvcGVydHlEaXNwbGF5MTEnKSBhcyBzdHJpbmcpIHx8ICcnLFxyXG5cdFx0cHJvcGVydHlEaXNwbGF5MTI6IChnZXRDb25maWcoJ3Byb3BlcnR5RGlzcGxheTEyJykgYXMgc3RyaW5nKSB8fCAnJyxcclxuXHRcdHByb3BlcnR5RGlzcGxheTEzOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eURpc3BsYXkxMycpIGFzIHN0cmluZykgfHwgJycsXHJcblx0XHRwcm9wZXJ0eURpc3BsYXkxNDogKGdldENvbmZpZygncHJvcGVydHlEaXNwbGF5MTQnKSBhcyBzdHJpbmcpIHx8ICcnLFxyXG5cdFx0cHJvcGVydHlMYXlvdXQxMlNpZGVCeVNpZGU6IChnZXRDb25maWcoJ3Byb3BlcnR5TGF5b3V0MTJTaWRlQnlTaWRlJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXHJcblx0XHRwcm9wZXJ0eUxheW91dDM0U2lkZUJ5U2lkZTogKGdldENvbmZpZygncHJvcGVydHlMYXlvdXQzNFNpZGVCeVNpZGUnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcclxuXHRcdHByb3BlcnR5TGF5b3V0NTZTaWRlQnlTaWRlOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eUxheW91dDU2U2lkZUJ5U2lkZScpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxyXG5cdFx0cHJvcGVydHlMYXlvdXQ3OFNpZGVCeVNpZGU6IChnZXRDb25maWcoJ3Byb3BlcnR5TGF5b3V0NzhTaWRlQnlTaWRlJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXHJcblx0XHRwcm9wZXJ0eUxheW91dDkxMFNpZGVCeVNpZGU6IChnZXRDb25maWcoJ3Byb3BlcnR5TGF5b3V0OTEwU2lkZUJ5U2lkZScpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxyXG5cdFx0cHJvcGVydHlMYXlvdXQxMTEyU2lkZUJ5U2lkZTogKGdldENvbmZpZygncHJvcGVydHlMYXlvdXQxMTEyU2lkZUJ5U2lkZScpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxyXG5cdFx0cHJvcGVydHlMYXlvdXQxMzE0U2lkZUJ5U2lkZTogKGdldENvbmZpZygncHJvcGVydHlMYXlvdXQxMzE0U2lkZUJ5U2lkZScpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxyXG5cdFx0cHJvcGVydHlHcm91cDFQb3NpdGlvbjogKGdldENvbmZpZygncHJvcGVydHlHcm91cDFQb3NpdGlvbicpIGFzICd0b3AnIHwgJ2JvdHRvbScpIHx8ICdib3R0b20nLFxyXG5cdFx0cHJvcGVydHlHcm91cDJQb3NpdGlvbjogKGdldENvbmZpZygncHJvcGVydHlHcm91cDJQb3NpdGlvbicpIGFzICd0b3AnIHwgJ2JvdHRvbScpIHx8ICdib3R0b20nLFxyXG5cdFx0cHJvcGVydHlHcm91cDNQb3NpdGlvbjogKGdldENvbmZpZygncHJvcGVydHlHcm91cDNQb3NpdGlvbicpIGFzICd0b3AnIHwgJ2JvdHRvbScpIHx8ICdib3R0b20nLFxyXG5cdFx0cHJvcGVydHlHcm91cDRQb3NpdGlvbjogKGdldENvbmZpZygncHJvcGVydHlHcm91cDRQb3NpdGlvbicpIGFzICd0b3AnIHwgJ2JvdHRvbScpIHx8ICdib3R0b20nLFxyXG5cdFx0cHJvcGVydHlHcm91cDVQb3NpdGlvbjogKGdldENvbmZpZygncHJvcGVydHlHcm91cDVQb3NpdGlvbicpIGFzICd0b3AnIHwgJ2JvdHRvbScpIHx8ICdib3R0b20nLFxyXG5cdFx0cHJvcGVydHlHcm91cDZQb3NpdGlvbjogKGdldENvbmZpZygncHJvcGVydHlHcm91cDZQb3NpdGlvbicpIGFzICd0b3AnIHwgJ2JvdHRvbScpIHx8ICdib3R0b20nLFxyXG5cdFx0cHJvcGVydHlHcm91cDdQb3NpdGlvbjogKGdldENvbmZpZygncHJvcGVydHlHcm91cDdQb3NpdGlvbicpIGFzICd0b3AnIHwgJ2JvdHRvbScpIHx8ICdib3R0b20nLFxyXG5cdFx0aW1hZ2VGb3JtYXQ6IChnZXRDb25maWcoJ2ltYWdlRm9ybWF0JykgYXMgJ25vbmUnIHwgJ3RodW1ibmFpbCcgfCAnY292ZXInKSB8fCAndGh1bWJuYWlsJyxcclxuXHRcdGltYWdlUG9zaXRpb246IChnZXRDb25maWcoJ2ltYWdlUG9zaXRpb24nKSBhcyAnbGVmdCcgfCAncmlnaHQnIHwgJ3RvcCcgfCAnYm90dG9tJykgfHwgJ3JpZ2h0JyxcclxuXHRcdHByb3BlcnR5TGFiZWxzOiAoZ2V0Q29uZmlnKCdwcm9wZXJ0eUxhYmVscycpIGFzICdoaWRlJyB8ICdpbmxpbmUnIHwgJ2Fib3ZlJykgfHwgJ2hpZGUnLFxyXG5cdFx0c2hvd0RyYWZ0U3RhdHVzOiAoZ2V0Q29uZmlnKCdzaG93RHJhZnRTdGF0dXMnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcclxuXHRcdGRyYWZ0U3RhdHVzUHJvcGVydHk6IChnZXRDb25maWcoJ2RyYWZ0U3RhdHVzUHJvcGVydHknKSBhcyBzdHJpbmcpIHx8ICcnLFxyXG5cdFx0ZHJhZnRTdGF0dXNSZXZlcnNlOiAoZ2V0Q29uZmlnKCdkcmFmdFN0YXR1c1JldmVyc2UnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcclxuXHRcdGRyYWZ0U3RhdHVzVXNlRmlsZW5hbWVQcmVmaXg6IChnZXRDb25maWcoJ2RyYWZ0U3RhdHVzVXNlRmlsZW5hbWVQcmVmaXgnKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcclxuXHRcdHNob3dUYWdzOiAoZ2V0Q29uZmlnKCdzaG93VGFncycpIGFzIGJvb2xlYW4pID8/IGZhbHNlLFxyXG5cdFx0dGFnc1Byb3BlcnR5OiAoZ2V0Q29uZmlnKCd0YWdzUHJvcGVydHknKSBhcyBzdHJpbmcpIHx8ICcnLFxyXG5cdFx0bWF4VGFnc1RvU2hvdzogKGdldENvbmZpZygnbWF4VGFnc1RvU2hvdycpIGFzIG51bWJlcikgPz8gMyxcclxuXHRcdGN1c3RvbWl6ZU5ld0J1dHRvbjogKGdldENvbmZpZygnY3VzdG9taXplTmV3QnV0dG9uJykgYXMgYm9vbGVhbikgPz8gZmFsc2UsXHJcblx0XHRuZXdOb3RlTG9jYXRpb246IChnZXRDb25maWcoJ25ld05vdGVMb2NhdGlvbicpIGFzIHN0cmluZykgfHwgJycsXHJcblx0XHRoaWRlUXVpY2tFZGl0SWNvbjogKGdldENvbmZpZygnaGlkZVF1aWNrRWRpdEljb24nKSBhcyBib29sZWFuKSA/PyBmYWxzZSxcclxuXHRcdGNhcmRTaXplOiAoZ2V0Q29uZmlnKCdjYXJkU2l6ZScpIGFzIG51bWJlcikgPz8gMjUwLFxyXG5cdFx0aW1hZ2VBc3BlY3RSYXRpbzogKGdldENvbmZpZygnaW1hZ2VBc3BlY3RSYXRpbycpIGFzIG51bWJlcikgPz8gMC41NSxcclxuXHR9O1xyXG59XHJcblxyXG4vKipcclxuICogQ01TIHZpZXcgb3B0aW9ucyBmb3IgQmFzZXMgY29uZmlndXJhdGlvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENNU1ZpZXdPcHRpb25zKCk6IHVua25vd25bXSB7XHJcblx0cmV0dXJuIFtcclxuXHRcdC8vIENhcmQgc2l6ZSAoc3RhbmRhbG9uZSlcclxuXHRcdHtcclxuXHRcdFx0dHlwZTogJ3NsaWRlcicsXHJcblx0XHRcdGRpc3BsYXlOYW1lOiAnQ2FyZCBzaXplJyxcclxuXHRcdFx0a2V5OiAnY2FyZFNpemUnLFxyXG5cdFx0XHRtaW46IDUwLFxyXG5cdFx0XHRtYXg6IDgwMCxcclxuXHRcdFx0c3RlcDogMTAsXHJcblx0XHRcdGRlZmF1bHQ6IDI1MFxyXG5cdFx0fSxcclxuXHRcdC8vIFRpdGxlIGdyb3VwXHJcblx0XHR7XHJcblx0XHRcdHR5cGU6ICdncm91cCcsXHJcblx0XHRcdGRpc3BsYXlOYW1lOiAnVGl0bGUnLFxyXG5cdFx0XHRpdGVtczogW1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1RpdGxlIHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGtleTogJ3RpdGxlUHJvcGVydHknLFxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcclxuXHRcdFx0XHR9XHJcblx0XHRcdF1cclxuXHRcdH0sXHJcblx0XHQvLyBUZXh0IHByZXZpZXcgZ3JvdXBcclxuXHRcdHtcclxuXHRcdFx0dHlwZTogJ2dyb3VwJyxcclxuXHRcdFx0ZGlzcGxheU5hbWU6ICdUZXh0IHByZXZpZXcnLFxyXG5cdFx0XHRpdGVtczogW1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IHRleHQgcHJldmlldycsXHJcblx0XHRcdFx0XHRrZXk6ICdzaG93VGV4dFByZXZpZXcnLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogdHJ1ZVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnVGV4dCBwcmV2aWV3IHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGtleTogJ2Rlc2NyaXB0aW9uUHJvcGVydHknLFxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdVc2Ugbm90ZSBjb250ZW50IGlmIHRleHQgcHJldmlldyBwcm9wZXJ0eSB1bmF2YWlsYWJsZScsXHJcblx0XHRcdFx0XHRrZXk6ICdmYWxsYmFja1RvQ29udGVudCcsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiB0cnVlXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnVHJ1bmNhdGUgcHJldmlldyBwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRrZXk6ICd0cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XVxyXG5cdFx0fSxcclxuXHRcdC8vIEltYWdlIGdyb3VwXHJcblx0XHR7XHJcblx0XHRcdHR5cGU6ICdncm91cCcsXHJcblx0XHRcdGRpc3BsYXlOYW1lOiAnSW1hZ2UnLFxyXG5cdFx0XHRpdGVtczogW1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICdkcm9wZG93bicsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0ltYWdlIGZvcm1hdCcsXHJcblx0XHRcdFx0XHRrZXk6ICdpbWFnZUZvcm1hdCcsXHJcblx0XHRcdFx0XHRvcHRpb25zOiB7XHJcblx0XHRcdFx0XHRcdCdub25lJzogJ05vIGltYWdlJyxcclxuXHRcdFx0XHRcdFx0J3RodW1ibmFpbCc6ICdUaHVtYm5haWwnLFxyXG5cdFx0XHRcdFx0XHQnY292ZXInOiAnQ292ZXInXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ3RodW1ibmFpbCdcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0ltYWdlIHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGtleTogJ2ltYWdlUHJvcGVydHknLFxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICdkcm9wZG93bicsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgaW1hZ2UgZW1iZWRzJyxcclxuXHRcdFx0XHRcdGtleTogJ2ZhbGxiYWNrVG9FbWJlZHMnLFxyXG5cdFx0XHRcdFx0b3B0aW9uczoge1xyXG5cdFx0XHRcdFx0XHQnYWx3YXlzJzogJ0Fsd2F5cycsXHJcblx0XHRcdFx0XHRcdCdpZi1lbXB0eSc6ICdJZiBpbWFnZSBwcm9wZXJ0eSBtaXNzaW5nIG9yIGVtcHR5JyxcclxuXHRcdFx0XHRcdFx0J25ldmVyJzogJ05ldmVyJ1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdGRlZmF1bHQ6ICdpZi1lbXB0eSdcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICdzbGlkZXInLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdJbWFnZSBhc3BlY3QgcmF0aW8nLFxyXG5cdFx0XHRcdFx0a2V5OiAnaW1hZ2VBc3BlY3RSYXRpbycsXHJcblx0XHRcdFx0XHRtaW46IDAuMSxcclxuXHRcdFx0XHRcdG1heDogMi4wLFxyXG5cdFx0XHRcdFx0c3RlcDogMC4wNSxcclxuXHRcdFx0XHRcdGRlZmF1bHQ6IDAuNTUsXHJcblx0XHRcdFx0XHRzaG93V2hlbjoge1xyXG5cdFx0XHRcdFx0XHRrZXk6ICdpbWFnZUZvcm1hdCcsXHJcblx0XHRcdFx0XHRcdHZhbHVlOiAnY292ZXInXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRdXHJcblx0XHR9LFxyXG5cdFx0Ly8gRGF0ZSBncm91cFxyXG5cdFx0e1xyXG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxyXG5cdFx0XHRkaXNwbGF5TmFtZTogJ0RhdGUnLFxyXG5cdFx0XHRpdGVtczogW1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IGRhdGUnLFxyXG5cdFx0XHRcdFx0a2V5OiAnc2hvd0RhdGUnLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2VcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0RhdGUgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0a2V5OiAnZGF0ZVByb3BlcnR5JyxcclxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnSW5jbHVkZSB0aW1lJyxcclxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiAnV2hlbiBlbmFibGVkLCBkaXNwbGF5cyBib3RoIGRhdGUgYW5kIHRpbWUgdXNpbmcgeW91ciBzeXN0ZW0gbG9jYWxlIHNldHRpbmdzJyxcclxuXHRcdFx0XHRcdGtleTogJ2RhdGVJbmNsdWRlVGltZScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XVxyXG5cdFx0fSxcclxuXHRcdC8vIERyYWZ0IHN0YXR1cyBncm91cFxyXG5cdFx0e1xyXG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxyXG5cdFx0XHRkaXNwbGF5TmFtZTogJ0RyYWZ0IHN0YXR1cycsXHJcblx0XHRcdGl0ZW1zOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgZHJhZnQgc3RhdHVzJyxcclxuXHRcdFx0XHRcdGtleTogJ3Nob3dEcmFmdFN0YXR1cycsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRHJhZnQgc3RhdHVzIHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGtleTogJ2RyYWZ0U3RhdHVzUHJvcGVydHknLFxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdSZXZlcnNlIGxvZ2ljJyxcclxuXHRcdFx0XHRcdGtleTogJ2RyYWZ0U3RhdHVzUmV2ZXJzZScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0ZpbGVuYW1lIHVuZGVyc2NvcmUgcHJlZml4IGFzIGRyYWZ0IGluZGljYXRvcicsXHJcblx0XHRcdFx0XHRrZXk6ICdkcmFmdFN0YXR1c1VzZUZpbGVuYW1lUHJlZml4JyxcclxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRdXHJcblx0XHR9LFxyXG5cdFx0Ly8gVGFncyBncm91cFxyXG5cdFx0e1xyXG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxyXG5cdFx0XHRkaXNwbGF5TmFtZTogJ1RhZ3MnLFxyXG5cdFx0XHRpdGVtczogW1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IHRhZ3MnLFxyXG5cdFx0XHRcdFx0a2V5OiAnc2hvd1RhZ3MnLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2VcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1RhZ3MgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0a2V5OiAndGFnc1Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0eXBlOiAnc2xpZGVyJyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnTWF4aW11bSB0YWdzIHRvIHNob3cnLFxyXG5cdFx0XHRcdFx0a2V5OiAnbWF4VGFnc1RvU2hvdycsXHJcblx0XHRcdFx0XHRtaW46IDEsXHJcblx0XHRcdFx0XHRtYXg6IDUwLFxyXG5cdFx0XHRcdFx0c3RlcDogMSxcclxuXHRcdFx0XHRcdGRlZmF1bHQ6IDMsXHJcblx0XHRcdFx0XHRzaG93V2hlbjoge1xyXG5cdFx0XHRcdFx0XHRrZXk6ICdzaG93VGFncycsXHJcblx0XHRcdFx0XHRcdHZhbHVlOiB0cnVlXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRdXHJcblx0XHR9LFxyXG5cdFx0Ly8gUHJvcGVydGllcyBncm91cFxyXG5cdFx0e1xyXG5cdFx0XHR0eXBlOiAnZ3JvdXAnLFxyXG5cdFx0XHRkaXNwbGF5TmFtZTogJ1Byb3BlcnRpZXMnLFxyXG5cdFx0XHRpdGVtczogW1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICdkcm9wZG93bicsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgcHJvcGVydHkgbGFiZWxzJyxcclxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5TGFiZWxzJyxcclxuXHRcdFx0XHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0XHRcdFx0J2hpZGUnOiAnSGlkZScsXHJcblx0XHRcdFx0XHRcdCdpbmxpbmUnOiAnSW5saW5lJyxcclxuXHRcdFx0XHRcdFx0J2Fib3ZlJzogJ09uIHRvcCdcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRkZWZhdWx0OiAnaGlkZSdcclxuXHRcdFx0XHR9XHJcblx0XHRcdF1cclxuXHRcdH0sXHJcblx0XHQvLyBQcm9wZXJ0eSBncm91cCAxXHJcblx0XHR7XHJcblx0XHRcdHR5cGU6ICdncm91cCcsXHJcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydHkgZ3JvdXAgMScsXHJcblx0XHRcdGl0ZW1zOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRmlyc3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5MScsXHJcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2Vjb25kIHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTInLFxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IHNpZGUtYnktc2lkZScsXHJcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUxheW91dDEyU2lkZUJ5U2lkZScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ2Ryb3Bkb3duJyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnUG9zaXRpb24nLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlHcm91cDFQb3NpdGlvbicsXHJcblx0XHRcdFx0XHRvcHRpb25zOiB7XHJcblx0XHRcdFx0XHRcdCd0b3AnOiAnVG9wJyxcclxuXHRcdFx0XHRcdFx0J2JvdHRvbSc6ICdCb3R0b20nXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ2JvdHRvbSdcclxuXHRcdFx0XHR9XHJcblx0XHRcdF1cclxuXHRcdH0sXHJcblx0XHQvLyBQcm9wZXJ0eSBncm91cCAyXHJcblx0XHR7XHJcblx0XHRcdHR5cGU6ICdncm91cCcsXHJcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydHkgZ3JvdXAgMicsXHJcblx0XHRcdGl0ZW1zOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnVGhpcmQgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5MycsXHJcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRm91cnRoIHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTQnLFxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IHNpZGUtYnktc2lkZScsXHJcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUxheW91dDM0U2lkZUJ5U2lkZScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ2Ryb3Bkb3duJyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnUG9zaXRpb24nLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlHcm91cDJQb3NpdGlvbicsXHJcblx0XHRcdFx0XHRvcHRpb25zOiB7XHJcblx0XHRcdFx0XHRcdCd0b3AnOiAnVG9wJyxcclxuXHRcdFx0XHRcdFx0J2JvdHRvbSc6ICdCb3R0b20nXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ2JvdHRvbSdcclxuXHRcdFx0XHR9XHJcblx0XHRcdF1cclxuXHRcdH0sXHJcblx0XHQvLyBQcm9wZXJ0eSBncm91cCAzXHJcblx0XHR7XHJcblx0XHRcdHR5cGU6ICdncm91cCcsXHJcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydHkgZ3JvdXAgMycsXHJcblx0XHRcdGl0ZW1zOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRmlyc3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5NScsXHJcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2Vjb25kIHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTYnLFxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IHNpZGUtYnktc2lkZScsXHJcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUxheW91dDU2U2lkZUJ5U2lkZScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ2Ryb3Bkb3duJyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnUG9zaXRpb24nLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlHcm91cDNQb3NpdGlvbicsXHJcblx0XHRcdFx0XHRvcHRpb25zOiB7XHJcblx0XHRcdFx0XHRcdCd0b3AnOiAnVG9wJyxcclxuXHRcdFx0XHRcdFx0J2JvdHRvbSc6ICdCb3R0b20nXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ2JvdHRvbSdcclxuXHRcdFx0XHR9XHJcblx0XHRcdF1cclxuXHRcdH0sXHJcblx0XHQvLyBQcm9wZXJ0eSBncm91cCA0XHJcblx0XHR7XHJcblx0XHRcdHR5cGU6ICdncm91cCcsXHJcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydHkgZ3JvdXAgNCcsXHJcblx0XHRcdGl0ZW1zOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRmlyc3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5NycsXHJcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2Vjb25kIHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTgnLFxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICd0b2dnbGUnLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdTaG93IHNpZGUtYnktc2lkZScsXHJcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUxheW91dDc4U2lkZUJ5U2lkZScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ2Ryb3Bkb3duJyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnUG9zaXRpb24nLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlHcm91cDRQb3NpdGlvbicsXHJcblx0XHRcdFx0XHRvcHRpb25zOiB7XHJcblx0XHRcdFx0XHRcdCd0b3AnOiAnVG9wJyxcclxuXHRcdFx0XHRcdFx0J2JvdHRvbSc6ICdCb3R0b20nXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ2JvdHRvbSdcclxuXHRcdFx0XHR9XHJcblx0XHRcdF1cclxuXHRcdH0sXHJcblx0XHQvLyBQcm9wZXJ0eSBncm91cCA1XHJcblx0XHR7XHJcblx0XHRcdHR5cGU6ICdncm91cCcsXHJcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydHkgZ3JvdXAgNScsXHJcblx0XHRcdGl0ZW1zOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRmlyc3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5OScsXHJcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2Vjb25kIHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTEwJyxcclxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2hvdyBzaWRlLWJ5LXNpZGUnLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlMYXlvdXQ5MTBTaWRlQnlTaWRlJyxcclxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0eXBlOiAnZHJvcGRvd24nLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdQb3NpdGlvbicsXHJcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eUdyb3VwNVBvc2l0aW9uJyxcclxuXHRcdFx0XHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0XHRcdFx0J3RvcCc6ICdUb3AnLFxyXG5cdFx0XHRcdFx0XHQnYm90dG9tJzogJ0JvdHRvbSdcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRkZWZhdWx0OiAnYm90dG9tJ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XVxyXG5cdFx0fSxcclxuXHRcdC8vIFByb3BlcnR5IGdyb3VwIDZcclxuXHRcdHtcclxuXHRcdFx0dHlwZTogJ2dyb3VwJyxcclxuXHRcdFx0ZGlzcGxheU5hbWU6ICdQcm9wZXJ0eSBncm91cCA2JyxcclxuXHRcdFx0aXRlbXM6IFtcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0eXBlOiAncHJvcGVydHknLFxyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWU6ICdGaXJzdCBwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXkxMScsXHJcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2Vjb25kIHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5RGlzcGxheTEyJyxcclxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IHByb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRlZmF1bHQ6ICcnXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR0eXBlOiAndG9nZ2xlJyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnU2hvdyBzaWRlLWJ5LXNpZGUnLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlMYXlvdXQxMTEyU2lkZUJ5U2lkZScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiBmYWxzZVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ2Ryb3Bkb3duJyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnUG9zaXRpb24nLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlHcm91cDZQb3NpdGlvbicsXHJcblx0XHRcdFx0XHRvcHRpb25zOiB7XHJcblx0XHRcdFx0XHRcdCd0b3AnOiAnVG9wJyxcclxuXHRcdFx0XHRcdFx0J2JvdHRvbSc6ICdCb3R0b20nXHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJ2JvdHRvbSdcclxuXHRcdFx0XHR9XHJcblx0XHRcdF1cclxuXHRcdH0sXHJcblx0XHQvLyBQcm9wZXJ0eSBncm91cCA3XHJcblx0XHR7XHJcblx0XHRcdHR5cGU6ICdncm91cCcsXHJcblx0XHRcdGRpc3BsYXlOYW1lOiAnUHJvcGVydHkgZ3JvdXAgNycsXHJcblx0XHRcdGl0ZW1zOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3Byb3BlcnR5JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnRmlyc3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0a2V5OiAncHJvcGVydHlEaXNwbGF5MTMnLFxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTZWxlY3QgcHJvcGVydHknLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogJydcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICdwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1NlY29uZCBwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRrZXk6ICdwcm9wZXJ0eURpc3BsYXkxNCcsXHJcblx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBwcm9wZXJ0eScsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Nob3cgc2lkZS1ieS1zaWRlJyxcclxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5TGF5b3V0MTMxNFNpZGVCeVNpZGUnLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2VcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICdkcm9wZG93bicsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ1Bvc2l0aW9uJyxcclxuXHRcdFx0XHRcdGtleTogJ3Byb3BlcnR5R3JvdXA3UG9zaXRpb24nLFxyXG5cdFx0XHRcdFx0b3B0aW9uczoge1xyXG5cdFx0XHRcdFx0XHQndG9wJzogJ1RvcCcsXHJcblx0XHRcdFx0XHRcdCdib3R0b20nOiAnQm90dG9tJ1xyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdGRlZmF1bHQ6ICdib3R0b20nXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRdXHJcblx0XHR9LFxyXG5cdFx0Ly8gQmVoYXZpb3IgZ3JvdXBcclxuXHRcdHtcclxuXHRcdFx0dHlwZTogJ2dyb3VwJyxcclxuXHRcdFx0ZGlzcGxheU5hbWU6ICdCZWhhdmlvcicsXHJcblx0XHRcdGl0ZW1zOiBbXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ09wZW4gbmV3IG5vdGVzIGRpcmVjdGx5JyxcclxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uOiAnU2tpcCB0aGUgQmFzZXMgbW9kYWwgYW5kIGNyZWF0ZSBub3RlcyBkaXJlY3RseSAobGlrZSB0aGUgZmlsZSBleHBsb3JlcikuIFdoZW4gZGlzYWJsZWQsIHVzZXMgbm9ybWFsIEJhc2VzIGJlaGF2aW9yIHdpdGggdGhlIHByb3BlcnR5IHBvcHVwLicsXHJcblx0XHRcdFx0XHRrZXk6ICdjdXN0b21pemVOZXdCdXR0b24nLFxyXG5cdFx0XHRcdFx0ZGVmYXVsdDogZmFsc2VcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHR5cGU6ICd0ZXh0JyxcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lOiAnTG9jYXRpb24gZm9yIG5ldyBub3RlcycsXHJcblx0XHRcdFx0XHRkZXNjcmlwdGlvbjogJ0ZvbGRlciBwYXRoIHdoZXJlIG5ldyBub3RlcyB3aWxsIGJlIGNyZWF0ZWQuIFVzZSAvIGZvciB2YXVsdCByb290LCBvciBzcGVjaWZ5IGEgZm9sZGVyIHBhdGguIFdvcmtzIGluZGVwZW5kZW50bHkgb2YgXCJPcGVuIG5ldyBub3RlcyBkaXJlY3RseVwiLicsXHJcblx0XHRcdFx0XHRrZXk6ICduZXdOb3RlTG9jYXRpb24nLFxyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXI6ICdTaW1wbHkgdXNlIC8gZm9yIHZhdWx0IGZvbGRlcicsXHJcblx0XHRcdFx0XHRkZWZhdWx0OiAnJ1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dHlwZTogJ3RvZ2dsZScsXHJcblx0XHRcdFx0XHRkaXNwbGF5TmFtZTogJ0hpZGUgcXVpY2sgZWRpdCBpY29uJyxcclxuXHRcdFx0XHRcdGtleTogJ2hpZGVRdWlja0VkaXRJY29uJyxcclxuXHRcdFx0XHRcdGRlZmF1bHQ6IGZhbHNlXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRdXHJcblx0XHR9XHJcblx0XTtcclxufVxyXG5cclxuIiwgIi8qKlxyXG4gKiBBdHRhY2htZW50IGRldGVjdGlvbiB1dGlsaXRpZXNcclxuICogRGV0ZWN0cyB1bmlxdWUgYXR0YWNobWVudHMgdGhhdCBhcmUgb25seSB1c2VkIGJ5IHNwZWNpZmljIGZpbGVzL2ZvbGRlcnNcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBnZXRGaWxlRnJvbnRtYXR0ZXIgfSBmcm9tICcuL2Zyb250bWF0dGVyLWhlbHBlcic7XHJcblxyXG4vKipcclxuICogRmluZCBhbGwgYXR0YWNobWVudHMgaW4gYSBub3RlXHJcbiAqIEluY2x1ZGVzIGJvdGggZW1iZWRkZWQgaW1hZ2VzIGluIG1hcmtkb3duIGFuZCBpbWFnZXMgcmVmZXJlbmNlZCBpbiBmcm9udG1hdHRlciBwcm9wZXJ0aWVzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXR0YWNobWVudHNJbk5vdGUoYXBwOiBBcHAsIGZpbGU6IFRGaWxlKTogUHJvbWlzZTxURmlsZVtdPiB7XHJcblx0Y29uc3QgYXR0YWNobWVudHM6IFRGaWxlW10gPSBbXTtcclxuXHRjb25zdCBjb250ZW50ID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlLnBhdGgpO1xyXG5cdFxyXG5cdGlmIChjb250ZW50IGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdC8vIEdldCBlbWJlZGRlZCBpbWFnZXMgZnJvbSBtYXJrZG93biBib2R5IChvbmx5IHdvcmtzIGZvciAubWQgZmlsZXMpXHJcblx0XHRpZiAoZmlsZS5leHRlbnNpb24gPT09ICdtZCcpIHtcclxuXHRcdFx0Y29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoY29udGVudCk7XHJcblx0XHRcdGNvbnN0IGVtYmVkcyA9IG1ldGFkYXRhPy5lbWJlZHMgfHwgW107XHJcblx0XHRcdGZvciAoY29uc3QgZW1iZWQgb2YgZW1iZWRzKSB7XHJcblx0XHRcdFx0Y29uc3QgZW1iZWRGaWxlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QoZW1iZWQubGluaywgZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRpZiAoZW1iZWRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdGF0dGFjaG1lbnRzLnB1c2goZW1iZWRGaWxlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gR2V0IGltYWdlcyBmcm9tIGZyb250bWF0dGVyIHByb3BlcnRpZXMgKHdvcmtzIGZvciBib3RoIC5tZCBhbmQgLm1keClcclxuXHRcdGNvbnN0IGZyb250bWF0dGVyID0gYXdhaXQgZ2V0RmlsZUZyb250bWF0dGVyKGFwcCwgZmlsZSk7XHJcblx0XHRpZiAoZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0Y29uc3QgaW1hZ2VQcm9wZXJ0eU5hbWVzID0gWydpbWFnZScsICdpbWFnZU9HJywgJ2NvdmVyJywgJ3RodW1ibmFpbCddO1xyXG5cdFx0XHRjb25zdCB2YWxpZEltYWdlRXh0ZW5zaW9ucyA9IFsnYXZpZicsICdibXAnLCAnZ2lmJywgJ2pwZWcnLCAnanBnJywgJ3BuZycsICdzdmcnLCAnd2VicCddO1xyXG5cdFx0XHRcclxuXHRcdFx0Zm9yIChjb25zdCBwcm9wTmFtZSBvZiBpbWFnZVByb3BlcnR5TmFtZXMpIHtcclxuXHRcdFx0XHRjb25zdCBwcm9wVmFsdWUgPSBmcm9udG1hdHRlcltwcm9wTmFtZV07XHJcblx0XHRcdFx0aWYgKCFwcm9wVmFsdWUpIGNvbnRpbnVlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEhhbmRsZSBhcnJheSBvZiBpbWFnZSBwYXRoc1xyXG5cdFx0XHRcdGNvbnN0IGltYWdlUGF0aHMgPSBBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkgPyBwcm9wVmFsdWUgOiBbcHJvcFZhbHVlXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRmb3IgKGNvbnN0IGltYWdlUGF0aCBvZiBpbWFnZVBhdGhzKSB7XHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIGltYWdlUGF0aCAhPT0gJ3N0cmluZycpIGNvbnRpbnVlO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBTdHJpcCB3aWtpbGluayBzeW50YXggaWYgcHJlc2VudFxyXG5cdFx0XHRcdFx0Y29uc3QgY2xlYW5QYXRoID0gaW1hZ2VQYXRoLnJlcGxhY2UoL14hP1xcW1xcWyhbXlxcXV0rKVxcXVxcXSQvLCAnJDEnKS50cmltKCk7XHJcblx0XHRcdFx0XHRpZiAoIWNsZWFuUGF0aCkgY29udGludWU7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNraXAgZXh0ZXJuYWwgVVJMc1xyXG5cdFx0XHRcdFx0aWYgKGNsZWFuUGF0aC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgY2xlYW5QYXRoLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHtcclxuXHRcdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFRyeSB0byByZXNvbHZlIHRoZSBpbWFnZSBmaWxlXHJcblx0XHRcdFx0XHRsZXQgaW1hZ2VGaWxlOiBURmlsZSB8IG51bGwgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChjbGVhblBhdGgsIGZpbGUucGF0aCk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIElmIG5vdCBmb3VuZCBhbmQgcGF0aCBzdGFydHMgd2l0aCAuLywgdHJ5IHJlc29sdmluZyByZWxhdGl2ZSB0byBmaWxlJ3MgZGlyZWN0b3J5XHJcblx0XHRcdFx0XHRpZiAoIWltYWdlRmlsZSAmJiBjbGVhblBhdGguc3RhcnRzV2l0aCgnLi8nKSkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCByZWxhdGl2ZVBhdGggPSBjbGVhblBhdGguc3Vic3RyaW5nKDIpO1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmdWxsUGF0aCA9IGZpbGUucGFyZW50Py5wYXRoIFxyXG5cdFx0XHRcdFx0XHRcdD8gYCR7ZmlsZS5wYXJlbnQucGF0aH0vJHtyZWxhdGl2ZVBhdGh9YFxyXG5cdFx0XHRcdFx0XHRcdDogcmVsYXRpdmVQYXRoO1xyXG5cdFx0XHRcdFx0XHRjb25zdCByZXNvbHZlZEZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZ1bGxQYXRoKTtcclxuXHRcdFx0XHRcdFx0aWYgKHJlc29sdmVkRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0XHRcdFx0aW1hZ2VGaWxlID0gcmVzb2x2ZWRGaWxlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIElmIHN0aWxsIG5vdCBmb3VuZCwgdHJ5IGFzIGFic29sdXRlIHBhdGhcclxuXHRcdFx0XHRcdGlmICghaW1hZ2VGaWxlKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGFic29sdXRlRmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY2xlYW5QYXRoKTtcclxuXHRcdFx0XHRcdFx0aWYgKGFic29sdXRlRmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0XHRcdFx0aW1hZ2VGaWxlID0gYWJzb2x1dGVGaWxlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIE9ubHkgYWRkIGlmIGl0J3MgYSB2YWxpZCBpbWFnZSBmaWxlXHJcblx0XHRcdFx0XHRpZiAoaW1hZ2VGaWxlICYmIHZhbGlkSW1hZ2VFeHRlbnNpb25zLmluY2x1ZGVzKGltYWdlRmlsZS5leHRlbnNpb24pKSB7XHJcblx0XHRcdFx0XHRcdGF0dGFjaG1lbnRzLnB1c2goaW1hZ2VGaWxlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIGF0dGFjaG1lbnRzO1xyXG59XHJcblxyXG4vKipcclxuICogRmluZCBhbGwgYXR0YWNobWVudHMgaW4gYSBmb2xkZXJcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBdHRhY2htZW50c0luRm9sZGVyKGFwcDogQXBwLCBmb2xkZXI6IFRGb2xkZXIpOiBQcm9taXNlPFRGaWxlW10+IHtcclxuXHRjb25zdCBhdHRhY2htZW50czogVEZpbGVbXSA9IFtdO1xyXG5cdFxyXG5cdGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XHJcblx0XHRpZiAoY2hpbGQgaW5zdGFuY2VvZiBURmlsZSAmJiAoY2hpbGQuZXh0ZW5zaW9uID09PSAnbWQnIHx8IGNoaWxkLmV4dGVuc2lvbiA9PT0gJ21keCcpKSB7XHJcblx0XHRcdGF0dGFjaG1lbnRzLnB1c2goLi4uYXdhaXQgZ2V0QXR0YWNobWVudHNJbk5vdGUoYXBwLCBjaGlsZCkpO1xyXG5cdFx0fSBlbHNlIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuXHRcdFx0YXR0YWNobWVudHMucHVzaCguLi5hd2FpdCBnZXRBdHRhY2htZW50c0luRm9sZGVyKGFwcCwgY2hpbGQpKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIGF0dGFjaG1lbnRzO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYW4gYXR0YWNobWVudCBpcyB1c2VkIGluIG90aGVyIG5vdGVzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNBdHRhY2htZW50VXNlZEluT3RoZXJOb3RlcyhcclxuXHRhcHA6IEFwcCxcclxuXHRhdHRhY2htZW50OiBURmlsZSxcclxuXHRleGNsdWRlZE5vdGU6IFRGaWxlLFxyXG5cdGV4Y2x1ZGVkRm9sZGVyPzogVEZvbGRlclxyXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRjb25zdCBhbGxOb3RlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKFxyXG5cdFx0ZmlsZSA9PiBmaWxlLnBhdGggIT09IGV4Y2x1ZGVkTm90ZS5wYXRoXHJcblx0KTtcclxuXHRcclxuXHRjb25zdCBhdHRhY2htZW50UGF0aCA9IGF0dGFjaG1lbnQucGF0aDtcclxuXHRjb25zdCBhdHRhY2htZW50TmFtZSA9IGF0dGFjaG1lbnQubmFtZTtcclxuXHRjb25zdCBhdHRhY2htZW50QmFzZW5hbWUgPSBhdHRhY2htZW50LmJhc2VuYW1lO1xyXG5cdFxyXG5cdGZvciAoY29uc3Qgbm90ZSBvZiBhbGxOb3Rlcykge1xyXG5cdFx0Ly8gU2tpcCBub3RlcyBpbiBleGNsdWRlZCBmb2xkZXJcclxuXHRcdGlmIChleGNsdWRlZEZvbGRlciAmJiBub3RlLnBhdGguc3RhcnRzV2l0aChleGNsdWRlZEZvbGRlci5wYXRoICsgJy8nKSkge1xyXG5cdFx0XHRjb250aW51ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKG5vdGUpO1xyXG5cdFx0XHJcblx0XHQvLyBDaGVjayBmb3IgdmFyaW91cyByZWZlcmVuY2UgcGF0dGVybnNcclxuXHRcdGlmIChcclxuXHRcdFx0Y29udGVudC5pbmNsdWRlcyhhdHRhY2htZW50UGF0aCkgfHxcclxuXHRcdFx0Y29udGVudC5pbmNsdWRlcyhhdHRhY2htZW50TmFtZSkgfHxcclxuXHRcdFx0Y29udGVudC5pbmNsdWRlcyhhdHRhY2htZW50QmFzZW5hbWUpIHx8XHJcblx0XHRcdGNvbnRlbnQuaW5jbHVkZXMoYCFbWyR7YXR0YWNobWVudE5hbWV9XV1gKSB8fFxyXG5cdFx0XHRjb250ZW50LmluY2x1ZGVzKGBbWyR7YXR0YWNobWVudE5hbWV9XV1gKSB8fFxyXG5cdFx0XHRjb250ZW50LmluY2x1ZGVzKGAoJHthdHRhY2htZW50TmFtZX0pYCkgfHxcclxuXHRcdFx0Y29udGVudC5pbmNsdWRlcyhgKCR7YXR0YWNobWVudFBhdGh9KWApXHJcblx0XHQpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7IC8vIEF0dGFjaG1lbnQgaXMgdXNlZCBlbHNld2hlcmVcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIGZhbHNlOyAvLyBBdHRhY2htZW50IGlzIHVuaXF1ZSB0byBkZWxldGVkIG5vdGUvZm9sZGVyXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGaW5kIHVuaXF1ZSBhdHRhY2htZW50cyBmb3IgYSBub3RlL2ZvbGRlclxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRVbmlxdWVBdHRhY2htZW50cyhcclxuXHRhcHA6IEFwcCxcclxuXHRkZWxldGVkTm90ZTogVEZpbGUsXHJcblx0ZGVsZXRlZEZvbGRlcj86IFRGb2xkZXJcclxuKTogUHJvbWlzZTxURmlsZVtdPiB7XHJcblx0Ly8gR2V0IGFsbCBhdHRhY2htZW50cyBpbiBkZWxldGVkIG5vdGUvZm9sZGVyXHJcblx0Y29uc3QgYXR0YWNobWVudHM6IFRGaWxlW10gPSBbXTtcclxuXHRcclxuXHRhdHRhY2htZW50cy5wdXNoKC4uLmF3YWl0IGdldEF0dGFjaG1lbnRzSW5Ob3RlKGFwcCwgZGVsZXRlZE5vdGUpKTtcclxuXHRcclxuXHRpZiAoZGVsZXRlZEZvbGRlcikge1xyXG5cdFx0YXR0YWNobWVudHMucHVzaCguLi5hd2FpdCBnZXRBdHRhY2htZW50c0luRm9sZGVyKGFwcCwgZGVsZXRlZEZvbGRlcikpO1xyXG5cdH1cclxuXHRcclxuXHQvLyBSZW1vdmUgZHVwbGljYXRlc1xyXG5cdGNvbnN0IHVuaXF1ZUF0dGFjaG1lbnRzID0gQXJyYXkuZnJvbShuZXcgU2V0KGF0dGFjaG1lbnRzLm1hcChhID0+IGEucGF0aCkpKVxyXG5cdFx0Lm1hcChwYXRoID0+IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCkpXHJcblx0XHQuZmlsdGVyKChmaWxlKTogZmlsZSBpcyBURmlsZSA9PiBmaWxlIGluc3RhbmNlb2YgVEZpbGUpO1xyXG5cdFxyXG5cdC8vIENoZWNrIGVhY2ggYXR0YWNobWVudCBhZ2FpbnN0IGFsbCBvdGhlciBub3Rlc1xyXG5cdGNvbnN0IHJlc3VsdDogVEZpbGVbXSA9IFtdO1xyXG5cdFxyXG5cdGZvciAoY29uc3QgYXR0YWNobWVudCBvZiB1bmlxdWVBdHRhY2htZW50cykge1xyXG5cdFx0Y29uc3QgaXNVc2VkRWxzZXdoZXJlID0gYXdhaXQgaXNBdHRhY2htZW50VXNlZEluT3RoZXJOb3RlcyhcclxuXHRcdFx0YXBwLFxyXG5cdFx0XHRhdHRhY2htZW50LFxyXG5cdFx0XHRkZWxldGVkTm90ZSxcclxuXHRcdFx0ZGVsZXRlZEZvbGRlclxyXG5cdFx0KTtcclxuXHRcdFxyXG5cdFx0aWYgKCFpc1VzZWRFbHNld2hlcmUpIHtcclxuXHRcdFx0cmVzdWx0LnB1c2goYXR0YWNobWVudCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXHJcbiAqIFNtYXJ0IGRlbGV0aW9uIHV0aWxpdGllc1xyXG4gKiBIYW5kbGVzIGZvbGRlci1iYXNlZCBjb250ZW50IGRlbGV0aW9uIGFuZCB1bmlxdWUgYXR0YWNobWVudCBkZXRlY3Rpb25cclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEJhc2VzQ01TU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IGZpbmRVbmlxdWVBdHRhY2htZW50cyB9IGZyb20gJy4vYXR0YWNobWVudC1kZXRlY3Rpb24nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBEZWxldGlvblByZXZpZXcge1xyXG5cdGZpbGVzVG9EZWxldGU6IFRGaWxlW107XHJcblx0Zm9sZGVyc1RvRGVsZXRlOiBURm9sZGVyW107XHJcblx0YXR0YWNobWVudHNUb0RlbGV0ZTogVEZpbGVbXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgZmlsZSBpcyBmb2xkZXItYmFzZWQgY29udGVudFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzRm9sZGVyQmFzZWRDb250ZW50KGZpbGU6IFRGaWxlLCBjb25maWc6IEJhc2VzQ01TU2V0dGluZ3MpOiBib29sZWFuIHtcclxuXHRjb25zdCBjb25maWd1cmVkRmlsZW5hbWUgPSBjb25maWcuZGVsZXRlUGFyZW50Rm9sZGVyRmlsZW5hbWUgfHwgJ2luZGV4JztcclxuXHRyZXR1cm4gZmlsZS5iYXNlbmFtZSA9PT0gY29uZmlndXJlZEZpbGVuYW1lICYmIGZpbGUucGFyZW50ICE9PSBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgc2hvdWxkIGRlbGV0ZSBwYXJlbnQgZm9sZGVyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkRGVsZXRlUGFyZW50Rm9sZGVyKGZpbGU6IFRGaWxlLCBjb25maWc6IEJhc2VzQ01TU2V0dGluZ3MpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gY29uZmlnLmRlbGV0ZVBhcmVudEZvbGRlciAmJiBpc0ZvbGRlckJhc2VkQ29udGVudChmaWxlLCBjb25maWcpO1xyXG59XHJcblxyXG4vKipcclxuICogUHJlcGFyZSBkZWxldGlvbiBwcmV2aWV3XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJlcGFyZURlbGV0aW9uUHJldmlldyhcclxuXHRhcHA6IEFwcCxcclxuXHRmaWxlczogc3RyaW5nW10sXHJcblx0Y29uZmlnOiBCYXNlc0NNU1NldHRpbmdzXHJcbik6IFByb21pc2U8RGVsZXRpb25QcmV2aWV3PiB7XHJcblx0Y29uc3QgZmlsZXNUb0RlbGV0ZTogVEZpbGVbXSA9IFtdO1xyXG5cdGNvbnN0IGZvbGRlcnNUb0RlbGV0ZTogVEZvbGRlcltdID0gW107XHJcblx0Y29uc3QgYXR0YWNobWVudHNUb0RlbGV0ZTogVEZpbGVbXSA9IFtdO1xyXG5cdFxyXG5cdGZvciAoY29uc3QgZmlsZVBhdGggb2YgZmlsZXMpIHtcclxuXHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuXHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIGNvbnRpbnVlO1xyXG5cdFx0XHJcblx0XHQvLyBDaGVjayBpZiBzaG91bGQgZGVsZXRlIHBhcmVudCBmb2xkZXJcclxuXHRcdGlmIChzaG91bGREZWxldGVQYXJlbnRGb2xkZXIoZmlsZSwgY29uZmlnKSkge1xyXG5cdFx0XHRjb25zdCBwYXJlbnRGb2xkZXIgPSBmaWxlLnBhcmVudDtcclxuXHRcdFx0aWYgKHBhcmVudEZvbGRlciAmJiAhZm9sZGVyc1RvRGVsZXRlLmluY2x1ZGVzKHBhcmVudEZvbGRlcikpIHtcclxuXHRcdFx0XHRmb2xkZXJzVG9EZWxldGUucHVzaChwYXJlbnRGb2xkZXIpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEdldCBhbGwgZmlsZXMgaW4gZm9sZGVyIGZvciBkZWxldGlvblxyXG5cdFx0XHRcdGNvbnN0IGZvbGRlckZpbGVzID0gcGFyZW50Rm9sZGVyLmNoaWxkcmVuLmZpbHRlcihcclxuXHRcdFx0XHRcdChjaGlsZCk6IGNoaWxkIGlzIFRGaWxlID0+IGNoaWxkIGluc3RhbmNlb2YgVEZpbGVcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHRcdGZpbGVzVG9EZWxldGUucHVzaCguLi5mb2xkZXJGaWxlcyk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGZpbGVzVG9EZWxldGUucHVzaChmaWxlKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gRmluZCB1bmlxdWUgYXR0YWNobWVudHMgaWYgc2V0dGluZyBlbmFibGVkXHJcblx0XHRpZiAoY29uZmlnLmRlbGV0ZVVuaXF1ZUF0dGFjaG1lbnRzKSB7XHJcblx0XHRcdGNvbnN0IHBhcmVudEZvbGRlciA9IHNob3VsZERlbGV0ZVBhcmVudEZvbGRlcihmaWxlLCBjb25maWcpIFxyXG5cdFx0XHRcdD8gKGZpbGUucGFyZW50IHx8IHVuZGVmaW5lZClcclxuXHRcdFx0XHQ6IHVuZGVmaW5lZDtcclxuXHRcdFx0Y29uc3QgdW5pcXVlQXR0YWNobWVudHMgPSBhd2FpdCBmaW5kVW5pcXVlQXR0YWNobWVudHMoXHJcblx0XHRcdFx0YXBwLFxyXG5cdFx0XHRcdGZpbGUsXHJcblx0XHRcdFx0cGFyZW50Rm9sZGVyXHJcblx0XHRcdCk7XHJcblx0XHRcdGF0dGFjaG1lbnRzVG9EZWxldGUucHVzaCguLi51bmlxdWVBdHRhY2htZW50cyk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIFJlbW92ZSBkdXBsaWNhdGVzXHJcblx0Y29uc3QgdW5pcXVlRmlsZXMgPSBBcnJheS5mcm9tKG5ldyBTZXQoZmlsZXNUb0RlbGV0ZS5tYXAoZiA9PiBmLnBhdGgpKSlcclxuXHRcdC5tYXAocGF0aCA9PiBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpKVxyXG5cdFx0LmZpbHRlcigoZmlsZSk6IGZpbGUgaXMgVEZpbGUgPT4gZmlsZSBpbnN0YW5jZW9mIFRGaWxlKTtcclxuXHRcclxuXHRjb25zdCB1bmlxdWVBdHRhY2htZW50cyA9IEFycmF5LmZyb20obmV3IFNldChhdHRhY2htZW50c1RvRGVsZXRlLm1hcChhID0+IGEucGF0aCkpKVxyXG5cdFx0Lm1hcChwYXRoID0+IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCkpXHJcblx0XHQuZmlsdGVyKChmaWxlKTogZmlsZSBpcyBURmlsZSA9PiBmaWxlIGluc3RhbmNlb2YgVEZpbGUpO1xyXG5cdFxyXG5cdHJldHVybiB7XHJcblx0XHRmaWxlc1RvRGVsZXRlOiB1bmlxdWVGaWxlcyxcclxuXHRcdGZvbGRlcnNUb0RlbGV0ZTogQXJyYXkuZnJvbShuZXcgU2V0KGZvbGRlcnNUb0RlbGV0ZSkpLFxyXG5cdFx0YXR0YWNobWVudHNUb0RlbGV0ZTogdW5pcXVlQXR0YWNobWVudHMsXHJcblx0fTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEV4ZWN1dGUgc21hcnQgZGVsZXRpb25cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlU21hcnREZWxldGlvbihcclxuXHRhcHA6IEFwcCxcclxuXHRwcmV2aWV3OiBEZWxldGlvblByZXZpZXdcclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0bGV0IGRlbGV0ZWRDb3VudCA9IDA7XHJcblx0bGV0IGVycm9yQ291bnQgPSAwO1xyXG5cdFxyXG5cdC8vIERlbGV0ZSBmaWxlc1xyXG5cdGZvciAoY29uc3QgZmlsZSBvZiBwcmV2aWV3LmZpbGVzVG9EZWxldGUpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGF3YWl0IGFwcC5maWxlTWFuYWdlci50cmFzaEZpbGUoZmlsZSk7XHJcblx0XHRcdGRlbGV0ZWRDb3VudCsrO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgZGVsZXRpbmcgZmlsZSAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xyXG5cdFx0XHRlcnJvckNvdW50Kys7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIERlbGV0ZSBhdHRhY2htZW50c1xyXG5cdGZvciAoY29uc3QgYXR0YWNobWVudCBvZiBwcmV2aWV3LmF0dGFjaG1lbnRzVG9EZWxldGUpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGF3YWl0IGFwcC5maWxlTWFuYWdlci50cmFzaEZpbGUoYXR0YWNobWVudCk7XHJcblx0XHRcdGRlbGV0ZWRDb3VudCsrO1xyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihgRXJyb3IgZGVsZXRpbmcgYXR0YWNobWVudCAke2F0dGFjaG1lbnQucGF0aH06YCwgZXJyb3IpO1xyXG5cdFx0XHRlcnJvckNvdW50Kys7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdC8vIERlbGV0ZSBmb2xkZXJzIChyZWN1cnNpdmUpXHJcblx0Zm9yIChjb25zdCBmb2xkZXIgb2YgcHJldmlldy5mb2xkZXJzVG9EZWxldGUpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGF3YWl0IGFwcC5maWxlTWFuYWdlci50cmFzaEZpbGUoZm9sZGVyKTtcclxuXHRcdFx0ZGVsZXRlZENvdW50Kys7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGBFcnJvciBkZWxldGluZyBmb2xkZXIgJHtmb2xkZXIucGF0aH06YCwgZXJyb3IpO1xyXG5cdFx0XHRlcnJvckNvdW50Kys7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGlmIChlcnJvckNvdW50ID4gMCkge1xyXG5cdFx0bmV3IE5vdGljZShgRGVsZXRlZCAke2RlbGV0ZWRDb3VudH0gaXRlbXMsICR7ZXJyb3JDb3VudH0gZXJyb3JzIG9jY3VycmVkYCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdG5ldyBOb3RpY2UoYFN1Y2Nlc3NmdWxseSBkZWxldGVkICR7ZGVsZXRlZENvdW50fSBpdGVtJHtkZWxldGVkQ291bnQgIT09IDEgPyAncycgOiAnJ31gKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXHJcbiAqIERlbGV0aW9uIFByZXZpZXcgTW9kYWxcclxuICogU2hvd3MgcHJldmlldyBvZiB3aGF0IHdpbGwgYmUgZGVsZXRlZCBiZWZvcmUgY29uZmlybWF0aW9uXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTW9kYWwsIEFwcCwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgRGVsZXRpb25QcmV2aWV3IH0gZnJvbSAnLi4vdXRpbHMvc21hcnQtZGVsZXRpb24nO1xyXG5pbXBvcnQgeyBleGVjdXRlU21hcnREZWxldGlvbiB9IGZyb20gJy4uL3V0aWxzL3NtYXJ0LWRlbGV0aW9uJztcclxuXHJcbmV4cG9ydCBjbGFzcyBEZWxldGlvblByZXZpZXdNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRwcml2YXRlIHByZXZpZXc6IERlbGV0aW9uUHJldmlldztcclxuXHRwcml2YXRlIG9uQ29uZmlybTogKCkgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHByZXZpZXc6IERlbGV0aW9uUHJldmlldywgb25Db25maXJtOiAoKSA9PiB2b2lkKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5wcmV2aWV3ID0gcHJldmlldztcclxuXHRcdHRoaXMub25Db25maXJtID0gb25Db25maXJtO1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoJ0NvbmZpcm0gZGVsZXRpb24nKS5zZXRIZWFkaW5nKCk7XHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG5cdFx0XHR0ZXh0OiAnVGhlIGZvbGxvd2luZyBpdGVtcyB3aWxsIGJlIGRlbGV0ZWQ6JyxcclxuXHRcdFx0Y2xzOiAnYmFzZXMtY21zLWRlbGV0aW9uLXdhcm5pbmcnXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBGaWxlcyB0byBkZWxldGVcclxuXHRcdGlmICh0aGlzLnByZXZpZXcuZmlsZXNUb0RlbGV0ZS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGBGaWxlcyAoJHt0aGlzLnByZXZpZXcuZmlsZXNUb0RlbGV0ZS5sZW5ndGh9KWAgfSk7XHJcblx0XHRcdGNvbnN0IGZpbGVzTGlzdCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndWwnLCB7IGNsczogJ2Jhc2VzLWNtcy1kZWxldGlvbi1saXN0JyB9KTtcclxuXHRcdFx0Zm9yIChjb25zdCBmaWxlIG9mIHRoaXMucHJldmlldy5maWxlc1RvRGVsZXRlLnNsaWNlKDAsIDIwKSkge1xyXG5cdFx0XHRcdGNvbnN0IGxpID0gZmlsZXNMaXN0LmNyZWF0ZUVsKCdsaScpO1xyXG5cdFx0XHRcdGxpLnNldFRleHQoZmlsZS5wYXRoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAodGhpcy5wcmV2aWV3LmZpbGVzVG9EZWxldGUubGVuZ3RoID4gMjApIHtcclxuXHRcdFx0XHRmaWxlc0xpc3QuY3JlYXRlRWwoJ2xpJywgeyBcclxuXHRcdFx0XHRcdHRleHQ6IGAuLi4gYW5kICR7dGhpcy5wcmV2aWV3LmZpbGVzVG9EZWxldGUubGVuZ3RoIC0gMjB9IG1vcmUgZmlsZXNgXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBGb2xkZXJzIHRvIGRlbGV0ZVxyXG5cdFx0aWYgKHRoaXMucHJldmlldy5mb2xkZXJzVG9EZWxldGUubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBgRm9sZGVycyAoJHt0aGlzLnByZXZpZXcuZm9sZGVyc1RvRGVsZXRlLmxlbmd0aH0pYCB9KTtcclxuXHRcdFx0Y29uc3QgZm9sZGVyc0xpc3QgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3VsJywgeyBjbHM6ICdiYXNlcy1jbXMtZGVsZXRpb24tbGlzdCcgfSk7XHJcblx0XHRcdGZvciAoY29uc3QgZm9sZGVyIG9mIHRoaXMucHJldmlldy5mb2xkZXJzVG9EZWxldGUpIHtcclxuXHRcdFx0XHRjb25zdCBsaSA9IGZvbGRlcnNMaXN0LmNyZWF0ZUVsKCdsaScpO1xyXG5cdFx0XHRcdGxpLnNldFRleHQoZm9sZGVyLnBhdGgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQXR0YWNobWVudHMgdG8gZGVsZXRlXHJcblx0XHRpZiAodGhpcy5wcmV2aWV3LmF0dGFjaG1lbnRzVG9EZWxldGUubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBgQXR0YWNobWVudHMgKCR7dGhpcy5wcmV2aWV3LmF0dGFjaG1lbnRzVG9EZWxldGUubGVuZ3RofSlgIH0pO1xyXG5cdFx0XHRjb25zdCBhdHRhY2htZW50c0xpc3QgPSBjb250ZW50RWwuY3JlYXRlRWwoJ3VsJywgeyBjbHM6ICdiYXNlcy1jbXMtZGVsZXRpb24tbGlzdCcgfSk7XHJcblx0XHRcdGZvciAoY29uc3QgYXR0YWNobWVudCBvZiB0aGlzLnByZXZpZXcuYXR0YWNobWVudHNUb0RlbGV0ZS5zbGljZSgwLCAyMCkpIHtcclxuXHRcdFx0XHRjb25zdCBsaSA9IGF0dGFjaG1lbnRzTGlzdC5jcmVhdGVFbCgnbGknKTtcclxuXHRcdFx0XHRsaS5zZXRUZXh0KGF0dGFjaG1lbnQucGF0aCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMucHJldmlldy5hdHRhY2htZW50c1RvRGVsZXRlLmxlbmd0aCA+IDIwKSB7XHJcblx0XHRcdFx0YXR0YWNobWVudHNMaXN0LmNyZWF0ZUVsKCdsaScsIHsgXHJcblx0XHRcdFx0XHR0ZXh0OiBgLi4uIGFuZCAke3RoaXMucHJldmlldy5hdHRhY2htZW50c1RvRGVsZXRlLmxlbmd0aCAtIDIwfSBtb3JlIGF0dGFjaG1lbnRzYFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gV2FybmluZ1xyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdwJywge1xyXG5cdFx0XHR0ZXh0OiAnVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZS4nLFxyXG5cdFx0XHRjbHM6ICdiYXNlcy1jbXMtZGVsZXRpb24td2FybmluZydcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEJ1dHRvbnNcclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuXHRcdGJ1dHRvbkNvbnRhaW5lci5hZGRDbGFzcygnYmFzZXMtY21zLW1vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcclxuXHJcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG5cdFx0Y2FuY2VsQnRuLnNldFRleHQoJ0NhbmNlbCcpO1xyXG5cdFx0Y2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcblx0XHRjb25zdCBkZWxldGVCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG5cdFx0ZGVsZXRlQnRuLnNldFRleHQoJ0RlbGV0ZScpO1xyXG5cdFx0ZGVsZXRlQnRuLmFkZENsYXNzKCdtb2QtY3RhJyk7XHJcblx0XHRkZWxldGVCdG4uYWRkQ2xhc3MoJ2Rlc3RydWN0aXZlJyk7XHJcblx0XHRkZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRhd2FpdCBleGVjdXRlU21hcnREZWxldGlvbih0aGlzLmFwcCwgdGhpcy5wcmV2aWV3KTtcclxuXHRcdFx0XHR0aGlzLm9uQ29uZmlybSgpO1xyXG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0fSkoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgImltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQmFzZXNDTVNTZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XHJcbmltcG9ydCB7IEJhc2VzQ01TVmlldyB9IGZyb20gJy4vdmlld3MvY21zLXZpZXcnO1xyXG5pbXBvcnQgeyBCYXNlc0NNU1NldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IHJlZ2lzdGVyQmFzZXNDTVNWaWV3IH0gZnJvbSAnLi91dGlscy92aWV3LXJlZ2lzdHJhdGlvbic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlc0NNU1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3MhOiBCYXNlc0NNU1NldHRpbmdzO1xyXG5cdGFjdGl2ZVZpZXdzOiBTZXQ8QmFzZXNDTVNWaWV3PiA9IG5ldyBTZXQoKTtcclxuXHRyZWdpc3RyYXRpb25UaW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcblx0XHQvLyBSZWdpc3RlciBzZXR0aW5ncyB0YWJcclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQmFzZXNDTVNTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdFx0Ly8gUmVnaXN0ZXIgQ01TIHZpZXcgd2l0aCBCYXNlIHBsdWdpblxyXG5cdFx0Ly8gR3JhY2VmdWwgZGVncmFkYXRpb246IGlmIEJhc2UgcGx1Z2luIG5vdCBpbnN0YWxsZWQsIHRoaXMgd2lsbCBzaW1wbHkgZG8gbm90aGluZ1xyXG5cdFx0Ly8gT24gbW9iaWxlLCBCYXNlcyBwbHVnaW4gbWF5IG5vdCBiZSBsb2FkZWQgeWV0LCBzbyB3ZSB3YWl0IGEgYml0XHJcblx0XHRyZWdpc3RlckJhc2VzQ01TVmlldyh0aGlzKTtcclxuXHR9XHJcblxyXG5cdG9udW5sb2FkKCkge1xyXG5cdFx0Ly8gQ2xlYXIgYW55IHBlbmRpbmcgcmVnaXN0cmF0aW9uIHRpbWVvdXRcclxuXHRcdGlmICh0aGlzLnJlZ2lzdHJhdGlvblRpbWVvdXQgIT09IG51bGwpIHtcclxuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCh0aGlzLnJlZ2lzdHJhdGlvblRpbWVvdXQpO1xyXG5cdFx0XHR0aGlzLnJlZ2lzdHJhdGlvblRpbWVvdXQgPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBDbGVhbiB1cCBhY3RpdmUgdmlld3NcclxuXHRcdHRoaXMuYWN0aXZlVmlld3MuY2xlYXIoKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCkgYXMgUGFydGlhbDxCYXNlc0NNU1NldHRpbmdzPjtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZWZyZXNoIHRvb2xiYXJzIGluIGFsbCBhY3RpdmUgQ01TIHZpZXdzXHJcblx0ICovXHJcblx0cmVmcmVzaEFsbFRvb2xiYXJzKCk6IHZvaWQge1xyXG5cdFx0Ly8gQ2xlYW4gdXAgYW55IHZpZXdzIHRoYXQgYXJlIG5vIGxvbmdlciBhY3RpdmVcclxuXHRcdGNvbnN0IHZpZXdzVG9SZW1vdmU6IEJhc2VzQ01TVmlld1tdID0gW107XHJcblx0XHR0aGlzLmFjdGl2ZVZpZXdzLmZvckVhY2godmlldyA9PiB7XHJcblx0XHRcdC8vIENoZWNrIGlmIHZpZXcgaXMgc3RpbGwgaW4gRE9NXHJcblx0XHRcdGNvbnN0IGNvbnRhaW5lckVsID0gKHZpZXcgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfSkuY29udGFpbmVyRWw7XHJcblx0XHRcdGlmICghY29udGFpbmVyRWwgfHwgIWNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0XHR2aWV3c1RvUmVtb3ZlLnB1c2godmlldyk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHQvLyBSZW1vdmUgaW5hY3RpdmUgdmlld3NcclxuXHRcdHZpZXdzVG9SZW1vdmUuZm9yRWFjaCh2aWV3ID0+IHRoaXMuYWN0aXZlVmlld3MuZGVsZXRlKHZpZXcpKTtcclxuXHRcdFxyXG5cdFx0Ly8gUmVmcmVzaCBhbGwgYWN0aXZlIHZpZXdzXHJcblx0XHR0aGlzLmFjdGl2ZVZpZXdzLmZvckVhY2godmlldyA9PiB7XHJcblx0XHRcdGlmICh2aWV3ICYmIHR5cGVvZiB2aWV3LnJlZnJlc2hUb29sYmFyID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0dmlldy5yZWZyZXNoVG9vbGJhcigpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZSBhIHZpZXcgZnJvbSB0cmFja2luZyB3aGVuIGl0J3MgY2xvc2VkXHJcblx0ICovXHJcblx0cmVtb3ZlVmlldyh2aWV3OiBCYXNlc0NNU1ZpZXcpOiB2b2lkIHtcclxuXHRcdHRoaXMuYWN0aXZlVmlld3MuZGVsZXRlKHZpZXcpO1xyXG5cdH1cclxuXHJcbn1cclxuXHJcblxyXG4iLCAiaW1wb3J0IHsgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgQXBwLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEJhc2VzQ01TU2V0dGluZ3MgfSBmcm9tICcuL3R5cGVzJztcclxuaW1wb3J0IHsgQ29tbWFuZFBpY2tlck1vZGFsIH0gZnJvbSAnLi9jb21wb25lbnRzL2NvbW1hbmQtcGlja2VyLW1vZGFsJztcclxuaW1wb3J0IHsgSWNvblBpY2tlck1vZGFsIH0gZnJvbSAnLi9jb21wb25lbnRzL2ljb24tcGlja2VyLW1vZGFsJztcclxuaW1wb3J0IHsgY3JlYXRlU2V0dGluZ3NHcm91cCB9IGZyb20gJy4vdXRpbHMvc2V0dGluZ3MtY29tcGF0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBCYXNlc0NNU1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IFBsdWdpbiAmIHsgc2V0dGluZ3M6IEJhc2VzQ01TU2V0dGluZ3MgfTtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogUGx1Z2luICYgeyBzZXR0aW5nczogQmFzZXNDTVNTZXR0aW5ncyB9KSB7XHJcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZnJlc2ggdG9vbGJhcnMgaW4gYWxsIGFjdGl2ZSBDTVMgdmlld3Mgd2hlbiBzZXR0aW5ncyBjaGFuZ2VcclxuXHQgKi9cclxuXHRwcml2YXRlIHJlZnJlc2hBY3RpdmVUb29sYmFycygpOiB2b2lkIHtcclxuXHRcdC8vIFVzZSB0aGUgcGx1Z2luJ3MgbWV0aG9kIHRvIHJlZnJlc2ggYWxsIHRvb2xiYXJzXHJcblx0XHRjb25zdCBwbHVnaW5XaXRoTWV0aG9kID0gdGhpcy5wbHVnaW4gYXMgeyByZWZyZXNoQWxsVG9vbGJhcnM/OiAoKSA9PiB2b2lkIH07XHJcblx0XHRpZiAocGx1Z2luV2l0aE1ldGhvZCAmJiB0eXBlb2YgcGx1Z2luV2l0aE1ldGhvZC5yZWZyZXNoQWxsVG9vbGJhcnMgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0cGx1Z2luV2l0aE1ldGhvZC5yZWZyZXNoQWxsVG9vbGJhcnMoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGRpc3BsYXkoKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0Ly8gQnVsayBvcGVyYXRpb24gc2V0dGluZ3NcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnQ29uZmlybSBidWxrIG9wZXJhdGlvbnMnKVxyXG5cdFx0XHQuc2V0RGVzYygnU2hvdyBjb25maXJtYXRpb24gZGlhbG9ncyBiZWZvcmUgcGVyZm9ybWluZyBidWxrIG9wZXJhdGlvbnMuJylcclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1CdWxrT3BlcmF0aW9ucylcclxuXHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1CdWxrT3BlcmF0aW9ucyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHQvLyBUb29sYmFyIGJ1dHRvbiB2aXNpYmlsaXR5IHNldHRpbmdzXHJcblx0XHRjb25zdCB0b29sYmFyQnV0dG9uc0dyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ1Rvb2xiYXIgYnV0dG9ucycpO1xyXG5cclxuXHRcdHRvb2xiYXJCdXR0b25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IHNlbGVjdCBhbGwgYnV0dG9uJylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEaXNwbGF5IHRoZSBzZWxlY3QgYWxsIGJ1dHRvbiBpbiB0aGUgQ01TIHRvb2xiYXIuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJTZWxlY3RBbGwpO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclNlbGVjdEFsbCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaEFjdGl2ZVRvb2xiYXJzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRvb2xiYXJCdXR0b25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IGNsZWFyIGJ1dHRvbicpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnRGlzcGxheSB0aGUgY2xlYXIgc2VsZWN0aW9uIGJ1dHRvbiBpbiB0aGUgQ01TIHRvb2xiYXIuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJDbGVhcik7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyQ2xlYXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2hBY3RpdmVUb29sYmFycygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0b29sYmFyQnV0dG9uc0dyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2hvdyBwdWJsaXNoIGJ1dHRvbicpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnRGlzcGxheSB0aGUgcHVibGlzaCBidXR0b24gaW4gdGhlIENNUyB0b29sYmFyLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyUHVibGlzaCk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyUHVibGlzaCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaEFjdGl2ZVRvb2xiYXJzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRvb2xiYXJCdXR0b25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IGRyYWZ0IGJ1dHRvbicpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnRGlzcGxheSB0aGUgZHJhZnQgYnV0dG9uIGluIHRoZSBDTVMgdG9vbGJhci4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhckRyYWZ0KTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJEcmFmdCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaEFjdGl2ZVRvb2xiYXJzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRvb2xiYXJCdXR0b25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IHRhZ3MgYnV0dG9uJylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEaXNwbGF5IHRoZSB0YWdzIGJ1dHRvbiBpbiB0aGUgQ01TIHRvb2xiYXIuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJUYWdzKTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJUYWdzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoQWN0aXZlVG9vbGJhcnMoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dG9vbGJhckJ1dHRvbnNHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1Nob3cgc2V0IGJ1dHRvbicpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnRGlzcGxheSB0aGUgc2V0IHByb3BlcnR5IGJ1dHRvbiBpbiB0aGUgQ01TIHRvb2xiYXIuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJTZXQpO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclNldCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaEFjdGl2ZVRvb2xiYXJzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRvb2xiYXJCdXR0b25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTaG93IHJlbW92ZSBidXR0b24nKVxyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBBbHJlYWR5IGluIHNlbnRlbmNlIGNhc2VcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldERlc2MoJ0Rpc3BsYXkgdGhlIHJlbW92ZSBwcm9wZXJ0eSBidXR0b24gaW4gdGhlIENNUyB0b29sYmFyLicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyUmVtb3ZlKTtcclxuXHRcdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJSZW1vdmUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2hBY3RpdmVUb29sYmFycygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0b29sYmFyQnV0dG9uc0dyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2hvdyBkZWxldGUgYnV0dG9uJylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEaXNwbGF5IHRoZSBkZWxldGUgYnV0dG9uIGluIHRoZSBDTVMgdG9vbGJhci4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhckRlbGV0ZSk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyRGVsZXRlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoQWN0aXZlVG9vbGJhcnMoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRGVsZXRpb24gc2V0dGluZ3NcclxuXHRcdGNvbnN0IGRlbGV0aW9uc0dyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ0RlbGV0aW9ucycpO1xyXG5cclxuXHRcdGRlbGV0aW9uc0dyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnRGVsZXRlIHBhcmVudCBmb2xkZXIgZm9yIHNwZWNpZmljIGZpbGUgbmFtZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ1doZW4gZW5hYmxlZCwgZGVsZXRpbmcgYSBub3RlIHdpbGwgZGVsZXRlIGl0cyBwYXJlbnQgZm9sZGVyIGFuZCBhbGwgaXRzIGNvbnRlbnRzIGlmIHRoZSBub3RlIGZpbGUgbmFtZSBtYXRjaGVzIHRoZSBzcGVjaWZpZWQgbmFtZS4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVQYXJlbnRGb2xkZXIpO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVQYXJlbnRGb2xkZXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRkZWxldGlvbnNHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0ZvbGRlciBkZWxldGlvbiBmaWxlIG5hbWUnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdGaWxlIG5hbWUgdGhhdCB0cmlnZ2VycyBwYXJlbnQgZm9sZGVyIGRlbGV0aW9uLicpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogUGxhY2Vob2xkZXIgdGV4dCwgbm90IFVJIHRleHRcclxuXHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoJ2luZGV4Jyk7XHJcblx0XHRcdFx0XHR0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlbGV0ZVBhcmVudEZvbGRlckZpbGVuYW1lKTtcclxuXHRcdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlbGV0ZVBhcmVudEZvbGRlckZpbGVuYW1lID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LnNldERpc2FibGVkKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVQYXJlbnRGb2xkZXIpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZGVsZXRpb25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdEZWxldGUgYXNzb2NpYXRlZCB1bmlxdWUgYXR0YWNobWVudHMnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIGRlbGV0aW5nIGEgbm90ZSwgYXV0b21hdGljYWxseSBkZWxldGUgYXR0YWNobWVudHMgdGhhdCBhcmUgb25seSB1c2VkIGJ5IHRoYXQgbm90ZS4gQXR0YWNobWVudHMgdXNlZCBieSBvdGhlciBub3RlcyB3aWxsIGJlIHByZXNlcnZlZC4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWxldGVVbmlxdWVBdHRhY2htZW50cyk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlbGV0ZVVuaXF1ZUF0dGFjaG1lbnRzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZGVsZXRpb25zR3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdDb25maXJtIGRlbGV0aW9ucycpXHJcblx0XHRcdFx0LnNldERlc2MoJ1Nob3cgY29uZmlybWF0aW9uIGRpYWxvZyBiZWZvcmUgZGVsZXRpbmcgZmlsZXMuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29uZmlybURlbGV0aW9ucyk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1EZWxldGlvbnMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBJY29uIHNldHRpbmdzXHJcblx0XHRjb25zdCBhcHBlYXJhbmNlR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnQXBwZWFyYW5jZScpO1xyXG5cclxuXHRcdGFwcGVhcmFuY2VHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZTsgXCJDTVNcIiBpcyBhIHByb3BlciBub3VuXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXROYW1lKCdVc2UgaG9tZSBpY29uIGZvciBDTVMgdmlldycpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZTsgXCJDTVNcIiBhbmQgXCJPYnNpZGlhblwiIGFyZSBwcm9wZXIgbm91bnNcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0LnNldERlc2MoJ1VzZSB0aGUgaG9tZSBpY29uIGluc3RlYWQgb2YgYmxvY2tzIGljb24gZm9yIHRoZSBDTVMgdmlldyBpbiB0aGUgQmFzZXMgdmlldyBzZWxlY3Rvci4gUmVzdGFydCBPYnNpZGlhbiBmb3IgdGhpcyBjaGFuZ2UgdG8gdGFrZSBlZmZlY3QuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlSG9tZUljb24pO1xyXG5cdFx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VIb21lSWNvbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGFwcGVhcmFuY2VHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IEFscmVhZHkgaW4gc2VudGVuY2UgY2FzZTsgXCJHSUZzXCIgaXMgYSBwcm9wZXIgbm91bi9hY3JvbnltXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXROYW1lKCdGb3JjZSBzdGF0aWMgaW1hZ2UgZm9yIGFuaW1hdGVkIEdJRnMnKVxyXG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBBbHJlYWR5IGluIHNlbnRlbmNlIGNhc2U7IFwiR0lGc1wiIGlzIGEgcHJvcGVyIG5vdW4vYWNyb255bVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnV2hlbiBlbmFibGVkLCBhbmltYXRlZCBHSUZzIHdpbGwgZGlzcGxheSBvbmx5IHRoZSBmaXJzdCBmcmFtZSB3aGVuIHVzZWQgYXMgY2FyZCBjb3ZlcnMgb3IgdGh1bWJuYWlscy4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb3JjZVN0YXRpY0dpZkltYWdlcyk7XHJcblx0XHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmZvcmNlU3RhdGljR2lmSW1hZ2VzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0Ly8gUmVmcmVzaCBhbGwgYWN0aXZlIHZpZXdzIHRvIGFwcGx5IHRoZSBjaGFuZ2VcclxuXHRcdFx0XHRcdFx0Y29uc3QgcGx1Z2luV2l0aE1ldGhvZCA9IHRoaXMucGx1Z2luIGFzIHsgYWN0aXZlVmlld3M/OiBTZXQ8eyBvbkRhdGFVcGRhdGVkPzogKCkgPT4gdm9pZCB9PiB9O1xyXG5cdFx0XHRcdFx0XHRpZiAocGx1Z2luV2l0aE1ldGhvZC5hY3RpdmVWaWV3cykge1xyXG5cdFx0XHRcdFx0XHRcdHBsdWdpbldpdGhNZXRob2QuYWN0aXZlVmlld3MuZm9yRWFjaCh2aWV3ID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICh2aWV3Lm9uRGF0YVVwZGF0ZWQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dmlldy5vbkRhdGFVcGRhdGVkKCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUHJvcGVydGllcyBpbmZvIG1vZGFsIHNldHRpbmdcclxuXHRcdC8vIFF1aWNrIGVkaXQgc2V0dGluZ3NcclxuXHRcdGNvbnN0IHF1aWNrRWRpdEdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ1F1aWNrIGVkaXQnKTtcclxuXHJcblx0XHQvLyBEZWZpbmUgcXVpY2sgZWRpdCBzZXR0aW5ncyBmaXJzdCAobmVlZGVkIGZvciB2aXNpYmlsaXR5IHRvZ2dsaW5nKVxyXG5cdFx0bGV0IHF1aWNrRWRpdENvbW1hbmRTZXR0aW5nOiBTZXR0aW5nO1xyXG5cdFx0bGV0IHF1aWNrRWRpdEljb25TZXR0aW5nOiBTZXR0aW5nO1xyXG5cdFx0bGV0IHF1aWNrRWRpdE9wZW5GaWxlU2V0dGluZzogU2V0dGluZztcclxuXHJcblx0XHRxdWlja0VkaXRHcm91cC5hZGRTZXR0aW5nKHNldHRpbmcgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBxdWljayBlZGl0JylcclxuXHRcdFx0XHQuc2V0RGVzYygnU2hvdyBhbiBpY29uIG9uIGNhcmQgdGl0bGVzIHRoYXQgbGF1bmNoZXMgYSBjb21tYW5kIHdoZW4gY2xpY2tlZC4nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVF1aWNrRWRpdClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVF1aWNrRWRpdCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0XHQvLyBTaG93L2hpZGUgY29tbWFuZCBzZWxlY3RvciBhbmQgcmVsYXRlZCBzZXR0aW5ncyBiYXNlZCBvbiB0b2dnbGVcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBzaG91bGRIaWRlID0gIXZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdC8vIEV4dHJhY3Qgc2V0dGluZ0VsIHByb3BlcnRpZXMgdG8gYXZvaWQgcHJvbWlzZSBtaXN1c2UgZXJyb3JzXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgY29tbWFuZEVsID0gcXVpY2tFZGl0Q29tbWFuZFNldHRpbmc/LnNldHRpbmdFbDtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBpY29uRWwgPSBxdWlja0VkaXRJY29uU2V0dGluZz8uc2V0dGluZ0VsO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG9wZW5GaWxlRWwgPSBxdWlja0VkaXRPcGVuRmlsZVNldHRpbmc/LnNldHRpbmdFbDtcclxuXHRcdFx0XHRcdFx0XHRpZiAoY29tbWFuZEVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb21tYW5kRWwudG9nZ2xlQ2xhc3MoJ2Jhc2VzLWNtcy1zZXR0aW5nLWhpZGRlbicsIHNob3VsZEhpZGUpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRpZiAoaWNvbkVsKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpY29uRWwudG9nZ2xlQ2xhc3MoJ2Jhc2VzLWNtcy1zZXR0aW5nLWhpZGRlbicsIHNob3VsZEhpZGUpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRpZiAob3BlbkZpbGVFbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0b3BlbkZpbGVFbC50b2dnbGVDbGFzcygnYmFzZXMtY21zLXNldHRpbmctaGlkZGVuJywgc2hvdWxkSGlkZSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ29tbWFuZCBwaWNrZXIgc2V0dGluZ1xyXG5cdFx0cXVpY2tFZGl0R3JvdXAuYWRkU2V0dGluZyhzZXR0aW5nID0+IHtcclxuXHRcdFx0cXVpY2tFZGl0Q29tbWFuZFNldHRpbmcgPSBzZXR0aW5nO1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1F1aWNrIGVkaXQgY29tbWFuZCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ1RoZSBjb21tYW5kIHRvIGV4ZWN1dGUgd2hlbiBjbGlja2luZyB0aGUgcXVpY2sgZWRpdCBpY29uIG9uIGEgY2FyZCB0aXRsZS4nKVxyXG5cdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGN1cnJlbnRDb21tYW5kTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmROYW1lIHx8IFxyXG5cdFx0XHRcdFx0XHQodGhpcy5wbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0Q29tbWFuZCA/ICdTZWxlY3QgY29tbWFuZC4uLicgOiAnTm8gY29tbWFuZCBzZWxlY3RlZCcpO1xyXG5cdFx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoY3VycmVudENvbW1hbmROYW1lKVxyXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgQ29tbWFuZFBpY2tlck1vZGFsKHRoaXMuYXBwLCAoY29tbWFuZElkOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gR2V0IGNvbW1hbmQgbmFtZSBieSBsb29raW5nIGl0IHVwXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmRSZWdpc3RyeSA9ICh0aGlzLmFwcCBhcyB7IGNvbW1hbmRzPzogeyBsaXN0Q29tbWFuZHM/OiAoKSA9PiBBcnJheTx7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9PjsgY29tbWFuZHM/OiBSZWNvcmQ8c3RyaW5nLCB7IG5hbWU/OiBzdHJpbmcgfT4gfSB9KS5jb21tYW5kcztcclxuXHRcdFx0XHRcdFx0XHRcdFx0bGV0IGNvbW1hbmROYW1lID0gJyc7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBUcnkgdG8gZmluZCB0aGUgY29tbWFuZCBuYW1lXHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChjb21tYW5kUmVnaXN0cnkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBUcnkgbGlzdENvbW1hbmRzKClcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZW9mIGNvbW1hbmRSZWdpc3RyeS5saXN0Q29tbWFuZHMgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmRzID0gY29tbWFuZFJlZ2lzdHJ5Lmxpc3RDb21tYW5kcygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgY29tbWFuZCA9IGNvbW1hbmRzLmZpbmQoKGNtZCkgPT4gY21kLmlkID09PSBjb21tYW5kSWQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbW1hbmQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZE5hbWUgPSBjb21tYW5kLm5hbWU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrOiB0cnkgZGlyZWN0IHJlZ2lzdHJ5IGFjY2Vzc1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICghY29tbWFuZE5hbWUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHJlZ2lzdHJ5ID0gY29tbWFuZFJlZ2lzdHJ5LmNvbW1hbmRzO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHJlZ2lzdHJ5ICYmIHJlZ2lzdHJ5W2NvbW1hbmRJZF0pIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29tbWFuZE5hbWUgPSByZWdpc3RyeVtjb21tYW5kSWRdLm5hbWUgfHwgJyc7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRDb21tYW5kID0gY29tbWFuZElkO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRDb21tYW5kTmFtZSA9IGNvbW1hbmROYW1lO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gdXBkYXRlIHRoZSBVSVxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQWRkIGEgY2xlYXIgYnV0dG9uIGlmIGEgY29tbWFuZCBpcyBzZWxlY3RlZFxyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmQpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgY2xlYXJCdXR0b24gPSBidXR0b24uYnV0dG9uRWwucGFyZW50RWxlbWVudD8uY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuXHRcdFx0XHRcdFx0XHR0ZXh0OiAnQ2xlYXInLFxyXG5cdFx0XHRcdFx0XHRcdGF0dHI6IHsgc3R5bGU6ICdtYXJnaW4tbGVmdDogOHB4OycgfVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0Y2xlYXJCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmQgPSAnJztcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdENvbW1hbmROYW1lID0gJyc7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gdXBkYXRlIHRoZSBVSVxyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdC8vIEhpZGUgY29tbWFuZCBzZWxlY3RvciBpZiBxdWljayBlZGl0IGlzIGRpc2FibGVkXHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLnRvZ2dsZUNsYXNzKCdiYXNlcy1jbXMtc2V0dGluZy1oaWRkZW4nLCAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tFZGl0KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEljb24gcGlja2VyIHNldHRpbmdcclxuXHRcdHF1aWNrRWRpdEdyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHF1aWNrRWRpdEljb25TZXR0aW5nID0gc2V0dGluZztcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdRdWljayBlZGl0IGljb24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIGljb24gdG8gZGlzcGxheSBmb3IgdGhlIHF1aWNrIGVkaXQgYnV0dG9uIG9uIGNhcmQgdGl0bGVzLicpXHJcblx0XHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSB0aGlzLmdldEljb25OYW1lKHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdEljb24gfHwgJ3BlbmNpbC1saW5lJyk7XHJcblx0XHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dChpY29uTmFtZSB8fCAnU2VsZWN0IGljb24uLi4nKVxyXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSWNvblBpY2tlck1vZGFsKHRoaXMuYXBwLCAoaWNvbklkKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdEljb24gPSBpY29uSWQ7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cgdXBkYXRlZCBpY29uIG5hbWVcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdC8vIEhpZGUgaWNvbiBzZWxlY3RvciBpZiBxdWljayBlZGl0IGlzIGRpc2FibGVkXHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLnRvZ2dsZUNsYXNzKCdiYXNlcy1jbXMtc2V0dGluZy1oaWRkZW4nLCAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tFZGl0KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFF1aWNrIGVkaXQgb3BlbiBmaWxlIHNldHRpbmdcclxuXHRcdHF1aWNrRWRpdEdyb3VwLmFkZFNldHRpbmcoc2V0dGluZyA9PiB7XHJcblx0XHRcdHF1aWNrRWRpdE9wZW5GaWxlU2V0dGluZyA9IHNldHRpbmc7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQXR0ZW1wdCB0byBvcGVuIGZpbGUgYW5kIGV4ZWN1dGUgcXVpY2sgZWRpdCBjb21tYW5kJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRm9yIGNvbW1hbmRzIHRoYXQgZG9uXFwndCBoYXZlIHNwZWNpYWwgaGFuZGxpbmcsIGF0dGVtcHQgdG8gb3BlbiB0aGUgZmlsZSBhbmQgZXhlY3V0ZSB0aGUgY29tbWFuZC4gU29tZSBjb21tYW5kcyBtYXkgbm90IHdvcmsgcHJvcGVybHkgdGhpcyB3YXkuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRPcGVuRmlsZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdE9wZW5GaWxlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHQvLyBIaWRlIHRoaXMgc2V0dGluZyBpZiBxdWljayBlZGl0IGlzIGRpc2FibGVkXHJcblx0XHRcdHNldHRpbmcuc2V0dGluZ0VsLnRvZ2dsZUNsYXNzKCdiYXNlcy1jbXMtc2V0dGluZy1oaWRkZW4nLCAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tFZGl0KTtcclxuXHRcdH0pO1xyXG5cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0SWNvbk5hbWUoaWNvbklkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0aWYgKCFpY29uSWQpIHJldHVybiAnJztcclxuXHRcdC8vIENvbnZlcnQgaWNvbiBJRCB0byBhIHJlYWRhYmxlIG5hbWUsIHJlbW92aW5nIGx1Y2lkZS0gcHJlZml4IGlmIHByZXNlbnRcclxuXHRcdHJldHVybiBpY29uSWRcclxuXHRcdFx0LnJlcGxhY2UoL15sdWNpZGUtLywgJycpIC8vIFJlbW92ZSBsdWNpZGUtIHByZWZpeFxyXG5cdFx0XHQuc3BsaXQoJy0nKVxyXG5cdFx0XHQubWFwKHdvcmQgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkpXHJcblx0XHRcdC5qb2luKCcgJyk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBDb21tYW5kIFBpY2tlciBNb2RhbFxyXG4gKiBTZWFyY2hhYmxlIG1vZGFsIGZvciBzZWxlY3RpbmcgYW4gT2JzaWRpYW4gY29tbWFuZFxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgRnV6enlTdWdnZXN0TW9kYWwgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5pbnRlcmZhY2UgQ29tbWFuZE9wdGlvbiB7XHJcblx0aWQ6IHN0cmluZztcclxuXHRuYW1lOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb21tYW5kUGlja2VyTW9kYWwgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxDb21tYW5kT3B0aW9uPiB7XHJcblx0cHJpdmF0ZSBvblNlbGVjdDogKGNvbW1hbmRJZDogc3RyaW5nKSA9PiB2b2lkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25TZWxlY3Q6IChjb21tYW5kSWQ6IHN0cmluZykgPT4gdm9pZCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMub25TZWxlY3QgPSBvblNlbGVjdDtcclxuXHR9XHJcblxyXG5cdGdldEl0ZW1zKCk6IENvbW1hbmRPcHRpb25bXSB7XHJcblx0XHQvLyBHZXQgYWxsIGF2YWlsYWJsZSBjb21tYW5kc1xyXG5cdFx0Ly8gVHJ5IG11bHRpcGxlIG1ldGhvZHMgdG8gZW5zdXJlIHdlIGdldCBBTEwgY29tbWFuZHMsIG5vdCBqdXN0IGNvbnRleHQtZmlsdGVyZWQgb25lc1xyXG5cdFx0Y29uc3QgY29tbWFuZFJlZ2lzdHJ5ID0gKHRoaXMuYXBwIGFzIHsgY29tbWFuZHM/OiB7IGxpc3RDb21tYW5kcz86ICgpID0+IENvbW1hbmRPcHRpb25bXTsgY29tbWFuZHM/OiBSZWNvcmQ8c3RyaW5nLCBDb21tYW5kT3B0aW9uPjsgY29tbWFuZFJlZ2lzdHJ5PzogUmVjb3JkPHN0cmluZywgQ29tbWFuZE9wdGlvbj4gfSB9KS5jb21tYW5kcztcclxuXHRcdFxyXG5cdFx0Ly8gVXNlIGEgU2V0IHRvIGRlZHVwbGljYXRlIGJ5IGNvbW1hbmQgSURcclxuXHRcdGNvbnN0IGNvbW1hbmRNYXAgPSBuZXcgTWFwPHN0cmluZywgQ29tbWFuZE9wdGlvbj4oKTtcclxuXHRcdFxyXG5cdFx0Ly8gTWV0aG9kIDE6IFRyeSBsaXN0Q29tbWFuZHMoKSAtIGJ1dCB0aGlzIG1pZ2h0IGJlIGNvbnRleHQtZmlsdGVyZWRcclxuXHRcdGlmIChjb21tYW5kUmVnaXN0cnkgJiYgdHlwZW9mIGNvbW1hbmRSZWdpc3RyeS5saXN0Q29tbWFuZHMgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBjb21tYW5kcyA9IGNvbW1hbmRSZWdpc3RyeS5saXN0Q29tbWFuZHMoKTtcclxuXHRcdFx0XHRmb3IgKGNvbnN0IGNvbW1hbmQgb2YgY29tbWFuZHMpIHtcclxuXHRcdFx0XHRcdGlmIChjb21tYW5kICYmIGNvbW1hbmQuaWQgJiYgY29tbWFuZC5uYW1lICYmICFjb21tYW5kTWFwLmhhcyhjb21tYW5kLmlkKSkge1xyXG5cdFx0XHRcdFx0XHRjb21tYW5kTWFwLnNldChjb21tYW5kLmlkLCB7XHJcblx0XHRcdFx0XHRcdFx0aWQ6IGNvbW1hbmQuaWQsXHJcblx0XHRcdFx0XHRcdFx0bmFtZTogY29tbWFuZC5uYW1lXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUud2FybignW0Jhc2VzIENNU10gRXJyb3IgZ2V0dGluZyBjb21tYW5kcyB2aWEgbGlzdENvbW1hbmRzKCk6JywgZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gTWV0aG9kIDI6IFRyeSBhY2Nlc3NpbmcgdGhlIGludGVybmFsIGNvbW1hbmRzIHJlZ2lzdHJ5IGRpcmVjdGx5XHJcblx0XHQvLyBUaGlzIHNob3VsZCBnaXZlIHVzIEFMTCBjb21tYW5kcyByZWdhcmRsZXNzIG9mIGNvbnRleHRcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHJlZ2lzdHJ5ID0gY29tbWFuZFJlZ2lzdHJ5Py5jb21tYW5kcztcclxuXHRcdFx0aWYgKHJlZ2lzdHJ5ICYmIHR5cGVvZiByZWdpc3RyeSA9PT0gJ29iamVjdCcpIHtcclxuXHRcdFx0XHRjb25zdCBhbGxDb21tYW5kcyA9IE9iamVjdC52YWx1ZXMocmVnaXN0cnkpO1xyXG5cdFx0XHRcdGZvciAoY29uc3QgY29tbWFuZCBvZiBhbGxDb21tYW5kcykge1xyXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmQgJiYgY29tbWFuZC5pZCAmJiBjb21tYW5kLm5hbWUgJiYgIWNvbW1hbmRNYXAuaGFzKGNvbW1hbmQuaWQpKSB7XHJcblx0XHRcdFx0XHRcdGNvbW1hbmRNYXAuc2V0KGNvbW1hbmQuaWQsIHtcclxuXHRcdFx0XHRcdFx0XHRpZDogY29tbWFuZC5pZCxcclxuXHRcdFx0XHRcdFx0XHRuYW1lOiBjb21tYW5kLm5hbWVcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdGNvbnNvbGUud2FybignW0Jhc2VzIENNU10gRXJyb3IgZ2V0dGluZyBjb21tYW5kcyB2aWEgcmVnaXN0cnk6JywgZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIE1ldGhvZCAzOiBUcnkgYWNjZXNzaW5nIHZpYSBpbnRlcm5hbCBzdHJ1Y3R1cmUgKGZhbGxiYWNrKVxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgaW50ZXJuYWxSZWdpc3RyeSA9IGNvbW1hbmRSZWdpc3RyeT8uY29tbWFuZFJlZ2lzdHJ5O1xyXG5cdFx0XHRpZiAoaW50ZXJuYWxSZWdpc3RyeSAmJiB0eXBlb2YgaW50ZXJuYWxSZWdpc3RyeSA9PT0gJ29iamVjdCcpIHtcclxuXHRcdFx0XHRjb25zdCBhbGxDb21tYW5kcyA9IE9iamVjdC52YWx1ZXMoaW50ZXJuYWxSZWdpc3RyeSk7XHJcblx0XHRcdFx0Zm9yIChjb25zdCBjb21tYW5kIG9mIGFsbENvbW1hbmRzKSB7XHJcblx0XHRcdFx0XHRpZiAoY29tbWFuZCAmJiBjb21tYW5kLmlkICYmIGNvbW1hbmQubmFtZSAmJiAhY29tbWFuZE1hcC5oYXMoY29tbWFuZC5pZCkpIHtcclxuXHRcdFx0XHRcdFx0Y29tbWFuZE1hcC5zZXQoY29tbWFuZC5pZCwge1xyXG5cdFx0XHRcdFx0XHRcdGlkOiBjb21tYW5kLmlkLFxyXG5cdFx0XHRcdFx0XHRcdG5hbWU6IGNvbW1hbmQubmFtZVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbQmFzZXMgQ01TXSBFcnJvciBnZXR0aW5nIGNvbW1hbmRzIHZpYSBpbnRlcm5hbCByZWdpc3RyeTonLCBlKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Y29uc3QgY29tbWFuZE9wdGlvbnMgPSBBcnJheS5mcm9tKGNvbW1hbmRNYXAudmFsdWVzKCkpO1xyXG5cdFx0XHJcblx0XHQvLyBTb3J0IGFscGhhYmV0aWNhbGx5IGJ5IG5hbWVcclxuXHRcdGNvbW1hbmRPcHRpb25zLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gY29tbWFuZE9wdGlvbnM7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtVGV4dChpdGVtOiBDb21tYW5kT3B0aW9uKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiBpdGVtLm5hbWU7XHJcblx0fVxyXG5cclxuXHRvbkNob29zZUl0ZW0oaXRlbTogQ29tbWFuZE9wdGlvbiwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xyXG5cdFx0dGhpcy5vblNlbGVjdChpdGVtLmlkKTtcclxuXHR9XHJcblxyXG5cdC8vIE92ZXJyaWRlIHRvIHNob3cgY29tbWFuZCBuYW1lIG9ubHlcclxuXHRyZW5kZXJTdWdnZXN0aW9uKG1hdGNoOiB7IGl0ZW06IENvbW1hbmRPcHRpb24gfSwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBpdGVtID0gbWF0Y2guaXRlbTtcclxuXHRcdGVsLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnLCB0ZXh0OiBpdGVtLm5hbWUgfSk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBJY29uIFBpY2tlciBNb2RhbFxyXG4gKiBTZWFyY2hhYmxlIG1vZGFsIGZvciBzZWxlY3RpbmcgYSBMdWNpZGUgaWNvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgRnV6enlTdWdnZXN0TW9kYWwsIHNldEljb24sIGdldEljb25JZHMsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW50ZXJmYWNlIEljb25PcHRpb24ge1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0bmFtZTogc3RyaW5nO1xyXG59XHJcblxyXG4vLyBHZXQgaWNvbiBsaXN0IGZyb20gT2JzaWRpYW4gQVBJIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBmYWxsYmFjayBsaXN0XHJcbmNvbnN0IGdldEljb25MaXN0ID0gKCk6IHN0cmluZ1tdID0+IHtcclxuXHRpZiAocmVxdWlyZUFwaVZlcnNpb24gJiYgcmVxdWlyZUFwaVZlcnNpb24oJzEuNy4zJykgJiYgZ2V0SWNvbklkcykge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0cmV0dXJuIGdldEljb25JZHMoKTtcclxuXHRcdH0gY2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbQmFzZXMgQ01TXSBFcnJvciBnZXR0aW5nIGljb24gSURzIGZyb20gT2JzaWRpYW46JywgZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdC8vIEZhbGxiYWNrIHRvIGEgYmFzaWMgbGlzdCBpZiBBUEkgaXMgbm90IGF2YWlsYWJsZVxyXG5cdHJldHVybiBbXHJcblx0XHQnc2V0dGluZ3MtMicsICdzZXR0aW5ncycsICdoZWxwLWNpcmNsZScsICdpbmZvJywgJ3N0YXInLCAnaGVhcnQnLCAnYm9va21hcmsnLFxyXG5cdFx0J2hvbWUnLCAnc2VhcmNoJywgJ2JlbGwnLCAnbWFpbCcsICd1c2VyJywgJ3VzZXJzJywgJ2ZvbGRlcicsICdmaWxlJywgJ2ZpbGUtdGV4dCcsXHJcblx0XHQnaW1hZ2UnLCAndmlkZW8nLCAnbXVzaWMnLCAnY2FsZW5kYXInLCAnY2xvY2snLCAnZWRpdCcsICdwZW5jaWwnLCAndHJhc2gnLFxyXG5cdFx0J2NvcHknLCAnY3V0JywgJ3Bhc3RlJywgJ2Rvd25sb2FkJywgJ3VwbG9hZCcsICdzYXZlJywgJ3NoYXJlJywgJ2xpbmsnLFxyXG5cdFx0J2V4dGVybmFsLWxpbmsnLCAnbG9jaycsICd1bmxvY2snLCAnZXllJywgJ2V5ZS1vZmYnLCAna2V5JywgJ3NoaWVsZCcsXHJcblx0XHQnY2hlY2snLCAneCcsICdwbHVzJywgJ21pbnVzJywgJ2Fycm93LWxlZnQnLCAnYXJyb3ctcmlnaHQnLCAnYXJyb3ctdXAnLFxyXG5cdFx0J2Fycm93LWRvd24nLCAnY2hldnJvbi1sZWZ0JywgJ2NoZXZyb24tcmlnaHQnLCAnY2hldnJvbi11cCcsICdjaGV2cm9uLWRvd24nLFxyXG5cdFx0J21lbnUnLCAnbW9yZS1ob3Jpem9udGFsJywgJ21vcmUtdmVydGljYWwnLCAnZ3JpZCcsICdsaXN0JywgJ2xheW91dCcsXHJcblx0XHQnY29sdW1ucycsICdyb3dzJywgJ21heGltaXplJywgJ21pbmltaXplJywgJ3pvb20taW4nLCAnem9vbS1vdXQnLFxyXG5cdFx0J3JlZnJlc2gtY3cnLCAncGxheScsICdwYXVzZScsICdzdG9wJywgJ3N1bicsICdtb29uJywgJ2Nsb3VkJywgJ3phcCcsXHJcblx0XHQnd2FuZC0yJywgJ3dhbmQnLCAnd2FuZC1zcGFya2xlcycsICdwYWxldHRlJywgJ2JydXNoJywgJ3NsaWRlcnMnLFxyXG5cdFx0J3Bvd2VyJywgJ3dpZmknLCAnYmx1ZXRvb3RoJywgJ21vbml0b3InLCAnbGFwdG9wJywgJ3NtYXJ0cGhvbmUnLFxyXG5cdFx0J2NhbWVyYScsICdtaWMnLCAnaGVhZHBob25lcycsICdjb2RlJywgJ3Rlcm1pbmFsJywgJ3Rlcm1pbmFsLXNxdWFyZScsXHJcblx0XHQnZ2l0aHViJywgJ2dpdGxhYicsICdnaXQtYnJhbmNoJywgJ2dpdC1jb21taXQnLCAnZGF0YWJhc2UnLCAnc2VydmVyJyxcclxuXHRcdCdjbG91ZC1kb3dubG9hZCcsICdjbG91ZC11cGxvYWQnLCAndGFnJywgJ3RhZ3MnLCAnZmxhZycsICdwaW4nLFxyXG5cdFx0J21hcC1waW4nLCAnY29tcGFzcycsICdnbG9iZScsICdyb2NrZXQnLCAnY2FyJywgJ2Jpa2UnLCAncm9ib3QnLFxyXG5cdFx0J2FwcGxlJywgJ3dpbmRvd3MnLCAnbGludXgnLCAnY2hyb21lJywgJ2ZpcmVmb3gnLCAnc2FmYXJpJyxcclxuXHRcdCdjcmVkaXQtY2FyZCcsICd3YWxsZXQnLCAnY29pbnMnLCAnYm9vaycsICdib29rLW9wZW4nLCAnYXdhcmQnLFxyXG5cdFx0J3Ryb3BoeScsICdiYWRnZScsICd3cmVuY2gnLCAndG9vbCcsICdwYWNrYWdlJywgJ2JveCcsICdhcmNoaXZlJyxcclxuXHRcdCdzZW5kJywgJ3JlcGx5JywgJ2ZvcndhcmQnLCAnbWFpbC1vcGVuJywgJ3RhZy1wbHVzJywgJ3RhZy1taW51cycsXHJcblx0XHQnZmxhZy1vZmYnLCAncGluLW9mZicsICdtYXAtcGluLW9mZicsICduYXZpZ2F0aW9uJywgJ21hcCcsICdlYXJ0aCcsXHJcblx0XHQncGxhbmUnLCAnc2hpcCcsICdhbmNob3InLCAnaGVsaWNvcHRlcicsICdkcm9uZScsICdhbmRyb2lkJyxcclxuXHRcdCdrZXlob2xlJywgJ2tleXMnLCAnZmluZ2VycHJpbnQnLCAnc2NhbicsICdxci1jb2RlJywgJ2JhcmNvZGUnLFxyXG5cdFx0J3JlY2VpcHQnLCAncGlnZ3ktYmFuaycsICdiYW5rbm90ZScsICdwZW5jaWwtbGluZScsICdlZGl0LTInLCAnZWRpdC0zJ1xyXG5cdF07XHJcbn07XHJcblxyXG4vLyBDb252ZXJ0IGljb24gSURzIHRvIEljb25PcHRpb24gZm9ybWF0XHJcbmNvbnN0IExVQ0lERV9JQ09OUzogSWNvbk9wdGlvbltdID0gZ2V0SWNvbkxpc3QoKS5tYXAoaWQgPT4gKHtcclxuXHRpZDogaWQsXHJcblx0bmFtZTogaWRcclxuXHRcdC5yZXBsYWNlKC9ebHVjaWRlLS8sICcnKSAvLyBSZW1vdmUgbHVjaWRlLSBwcmVmaXggZm9yIGRpc3BsYXlcclxuXHRcdC5yZXBsYWNlKC8tL2csICcgJylcclxuXHRcdC5yZXBsYWNlKC8oXlxcd3sxfSl8KFxccytcXHd7MX0pL2csIChsZXR0ZXIpID0+IGxldHRlci50b1VwcGVyQ2FzZSgpKVxyXG59KSkuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7XHJcblxyXG5leHBvcnQgY2xhc3MgSWNvblBpY2tlck1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8SWNvbk9wdGlvbj4ge1xyXG5cdHByaXZhdGUgb25TZWxlY3Q6IChpY29uSWQ6IHN0cmluZykgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU2VsZWN0OiAoaWNvbklkOiBzdHJpbmcpID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLm9uU2VsZWN0ID0gb25TZWxlY3Q7XHJcblx0fVxyXG5cclxuXHRnZXRJdGVtcygpOiBJY29uT3B0aW9uW10ge1xyXG5cdFx0cmV0dXJuIExVQ0lERV9JQ09OUztcclxuXHR9XHJcblxyXG5cdGdldEl0ZW1UZXh0KGl0ZW06IEljb25PcHRpb24pOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIGl0ZW0ubmFtZTtcclxuXHR9XHJcblxyXG5cdG9uQ2hvb3NlSXRlbShpdGVtOiBJY29uT3B0aW9uLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XHJcblx0XHR0aGlzLm9uU2VsZWN0KGl0ZW0uaWQpO1xyXG5cdH1cclxuXHJcblx0Ly8gT3ZlcnJpZGUgdG8gc2hvdyBpY29uIHByZXZpZXdcclxuXHRyZW5kZXJTdWdnZXN0aW9uKG1hdGNoOiB7IGl0ZW06IEljb25PcHRpb24gfSwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHRjb25zdCBpdGVtID0gbWF0Y2guaXRlbTtcclxuXHRcdGVsLmFkZENsYXNzKCdtb2QtY29tcGxleCcpO1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGVsLmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tY29udGVudCcgfSk7XHJcblx0XHRjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnLCB0ZXh0OiBpdGVtLm5hbWUgfSk7XHJcblx0XHRcclxuXHRcdC8vIENyZWF0ZSBpY29uIHByZXZpZXcgdXNpbmcgT2JzaWRpYW4ncyBzZXRJY29uXHJcblx0XHRjb25zdCBhdXggPSBlbC5jcmVhdGVEaXYoeyBjbHM6ICdzdWdnZXN0aW9uLWF1eCcgfSk7XHJcblx0XHRzZXRJY29uKGF1eC5jcmVhdGVTcGFuKHsgY2xzOiAnc3VnZ2VzdGlvbi1mbGFpcicgfSksIGl0ZW0uaWQpO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbiIsICIvKipcclxuICogQ29tcGF0aWJpbGl0eSB1dGlsaXRpZXMgZm9yIHNldHRpbmdzXHJcbiAqIFByb3ZpZGVzIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgZm9yIFNldHRpbmdHcm91cCAocmVxdWlyZXMgQVBJIDEuMTEuMCspXHJcbiAqL1xyXG5pbXBvcnQgeyBTZXR0aW5nLCByZXF1aXJlQXBpVmVyc2lvbiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8vIFR5cGUgZGVmaW5pdGlvbiBmb3IgU2V0dGluZ0dyb3VwIChtYXkgbm90IGJlIGluIHR5cGUgZGVmaW5pdGlvbnMgZm9yIG9sZGVyIHZlcnNpb25zKVxyXG50eXBlIFNldHRpbmdHcm91cENvbnN0cnVjdG9yID0gbmV3IChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IHtcclxuXHRzZXRIZWFkaW5nKGhlYWRpbmc6IHN0cmluZyk6IHtcclxuXHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxuXHR9O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHdvcmtzIHdpdGggYm90aCBTZXR0aW5nR3JvdXAgYW5kIGZhbGxiYWNrIGNvbnRhaW5lclxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTZXR0aW5nc0NvbnRhaW5lciB7XHJcblx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIHNldHRpbmdzIGNvbnRhaW5lciB0aGF0IHVzZXMgU2V0dGluZ0dyb3VwIGlmIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspLFxyXG4gKiBvdGhlcndpc2UgZmFsbHMgYmFjayB0byBjcmVhdGluZyBhIGhlYWRpbmcgYW5kIHVzaW5nIHRoZSBjb250YWluZXIgZGlyZWN0bHkuXHJcbiAqIFxyXG4gKiBVc2VzIHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSB0byBjaGVjayBpZiBTZXR0aW5nR3JvdXAgaXMgYXZhaWxhYmxlLlxyXG4gKiBUaGlzIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nLlxyXG4gKiBcclxuICogQHBhcmFtIGNvbnRhaW5lckVsIC0gVGhlIGNvbnRhaW5lciBlbGVtZW50IGZvciBzZXR0aW5nc1xyXG4gKiBAcGFyYW0gaGVhZGluZyAtIFRoZSBoZWFkaW5nIHRleHQgZm9yIHRoZSBzZXR0aW5ncyBncm91cFxyXG4gKiBAcmV0dXJucyBBIGNvbnRhaW5lciB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNldHRpbmdzR3JvdXAoXHJcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG5cdGhlYWRpbmc6IHN0cmluZ1xyXG4pOiBTZXR0aW5nc0NvbnRhaW5lciB7XHJcblx0Ly8gQ2hlY2sgaWYgU2V0dGluZ0dyb3VwIGlzIGF2YWlsYWJsZSAoQVBJIDEuMTEuMCspXHJcblx0Ly8gcmVxdWlyZUFwaVZlcnNpb24gaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmdcclxuXHRpZiAocmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpKSB7XHJcblx0XHQvLyBVc2UgU2V0dGluZ0dyb3VwIC0gaXQncyBndWFyYW50ZWVkIHRvIGV4aXN0IGlmIHJlcXVpcmVBcGlWZXJzaW9uIHJldHVybnMgdHJ1ZVxyXG5cdFx0Ly8gQWNjZXNzIFNldHRpbmdHcm91cCBmcm9tIHRoZSBvYnNpZGlhbiBtb2R1bGUgZHluYW1pY2FsbHkgdG8gYXZvaWQgdHlwZSBlcnJvcnNcclxuXHRcdC8vIFdlIG5lZWQgdG8gdXNlIHJlcXVpcmUgaGVyZSBiZWNhdXNlIFNldHRpbmdHcm91cCBtYXkgbm90IGJlIGluIHR5cGUgZGVmaW5pdGlvbnMgZm9yIG9sZGVyIHZlcnNpb25zXHJcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXJlcXVpcmUtaW1wb3J0cywgbm8tdW5kZWZcclxuXHRcdGNvbnN0IG9ic2lkaWFuTW9kdWxlID0gcmVxdWlyZSgnb2JzaWRpYW4nKSBhcyB7IFNldHRpbmdHcm91cD86IFNldHRpbmdHcm91cENvbnN0cnVjdG9yIH07XHJcblx0XHRjb25zdCBTZXR0aW5nR3JvdXAgPSBvYnNpZGlhbk1vZHVsZS5TZXR0aW5nR3JvdXA7XHJcblx0XHRpZiAoU2V0dGluZ0dyb3VwKSB7XHJcblx0XHRcdGNvbnN0IGdyb3VwID0gbmV3IFNldHRpbmdHcm91cChjb250YWluZXJFbCkuc2V0SGVhZGluZyhoZWFkaW5nKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZyhjYik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdFx0Ly8gRmFsbGJhY2sgaWYgU2V0dGluZ0dyb3VwIGlzIG5vdCBmb3VuZCAoc2hvdWxkbid0IGhhcHBlbiBpZiByZXF1aXJlQXBpVmVyc2lvbiBpcyBjb3JyZWN0KVxyXG5cdH1cclxuXHRcclxuXHQvLyBGYWxsYmFjazogQ3JlYXRlIGEgaGVhZGluZyBtYW51YWxseSBhbmQgdXNlIGNvbnRhaW5lciBkaXJlY3RseVxyXG5cdGNvbnN0IGhlYWRpbmdFbCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignc2V0dGluZy1ncm91cC1oZWFkaW5nJyk7XHJcblx0aGVhZGluZ0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogaGVhZGluZyB9KTtcclxuXHRcclxuXHRyZXR1cm4ge1xyXG5cdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcclxuXHRcdFx0Y29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0Y2Ioc2V0dGluZyk7XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIFR5cGVTY3JpcHQgdHlwZXMgZm9yIEJhc2VzIENNUyBwbHVnaW5cclxuICovXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VzQ01TU2V0dGluZ3Mge1xyXG5cdC8vIEJ1bGsgb3BlcmF0aW9uIHNldHRpbmdzXHJcblx0Y29uZmlybUJ1bGtPcGVyYXRpb25zOiBib29sZWFuO1xyXG5cdFxyXG5cdC8vIERlbGV0aW9uIHNldHRpbmdzXHJcblx0ZGVsZXRlUGFyZW50Rm9sZGVyOiBib29sZWFuO1xyXG5cdGRlbGV0ZVBhcmVudEZvbGRlckZpbGVuYW1lOiBzdHJpbmc7XHJcblx0ZGVsZXRlVW5pcXVlQXR0YWNobWVudHM6IGJvb2xlYW47XHJcblx0XHJcblx0Ly8gQ29uZmlybWF0aW9uIGRpYWxvZyBzZXR0aW5nc1xyXG5cdGNvbmZpcm1EZWxldGlvbnM6IGJvb2xlYW47XHJcblx0XHJcblx0Ly8gSWNvbiBzZXR0aW5nc1xyXG5cdHVzZUhvbWVJY29uOiBib29sZWFuO1xyXG5cdFxyXG5cdC8vIFF1aWNrIGVkaXQgc2V0dGluZ3NcclxuXHRlbmFibGVRdWlja0VkaXQ6IGJvb2xlYW47XHJcblx0cXVpY2tFZGl0Q29tbWFuZDogc3RyaW5nO1xyXG5cdHF1aWNrRWRpdENvbW1hbmROYW1lOiBzdHJpbmc7IC8vIFN0b3JlIGNvbW1hbmQgbmFtZSBmb3IgZGlzcGxheVxyXG5cdHF1aWNrRWRpdEljb246IHN0cmluZzsgLy8gSWNvbiBJRCBmb3IgdGhlIHF1aWNrIGVkaXQgaWNvblxyXG5cdHF1aWNrRWRpdE9wZW5GaWxlOiBib29sZWFuOyAvLyBBdHRlbXB0IHRvIG9wZW4gZmlsZSBhbmQgZXhlY3V0ZSBjb21tYW5kIGZvciB1bnN1cHBvcnRlZCBjb21tYW5kc1xyXG5cdFxyXG5cdC8vIFRvb2xiYXIgYnV0dG9uIHZpc2liaWxpdHkgc2V0dGluZ3NcclxuXHRzaG93VG9vbGJhclNlbGVjdEFsbDogYm9vbGVhbjtcclxuXHRzaG93VG9vbGJhckNsZWFyOiBib29sZWFuO1xyXG5cdHNob3dUb29sYmFyRHJhZnQ6IGJvb2xlYW47XHJcblx0c2hvd1Rvb2xiYXJQdWJsaXNoOiBib29sZWFuO1xyXG5cdHNob3dUb29sYmFyVGFnczogYm9vbGVhbjtcclxuXHRzaG93VG9vbGJhclNldDogYm9vbGVhbjtcclxuXHRzaG93VG9vbGJhclJlbW92ZTogYm9vbGVhbjtcclxuXHRzaG93VG9vbGJhckRlbGV0ZTogYm9vbGVhbjtcclxuXHRcclxuXHQvLyBBcHBlYXJhbmNlIHNldHRpbmdzXHJcblx0Zm9yY2VTdGF0aWNHaWZJbWFnZXM6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBCYXNlc0NNU1NldHRpbmdzID0ge1xyXG5cdGNvbmZpcm1CdWxrT3BlcmF0aW9uczogdHJ1ZSxcclxuXHRkZWxldGVQYXJlbnRGb2xkZXI6IGZhbHNlLFxyXG5cdGRlbGV0ZVBhcmVudEZvbGRlckZpbGVuYW1lOiAnaW5kZXgnLFxyXG5cdGRlbGV0ZVVuaXF1ZUF0dGFjaG1lbnRzOiBmYWxzZSxcclxuXHRjb25maXJtRGVsZXRpb25zOiB0cnVlLFxyXG5cdHVzZUhvbWVJY29uOiBmYWxzZSxcclxuXHRlbmFibGVRdWlja0VkaXQ6IGZhbHNlLFxyXG5cdHF1aWNrRWRpdENvbW1hbmQ6ICcnLFxyXG5cdHF1aWNrRWRpdENvbW1hbmROYW1lOiAnJyxcclxuXHRxdWlja0VkaXRJY29uOiAncGVuY2lsLWxpbmUnLFxyXG5cdHF1aWNrRWRpdE9wZW5GaWxlOiBmYWxzZSxcclxuXHRzaG93VG9vbGJhclNlbGVjdEFsbDogdHJ1ZSxcclxuXHRzaG93VG9vbGJhckNsZWFyOiB0cnVlLFxyXG5cdHNob3dUb29sYmFyRHJhZnQ6IHRydWUsXHJcblx0c2hvd1Rvb2xiYXJQdWJsaXNoOiB0cnVlLFxyXG5cdHNob3dUb29sYmFyVGFnczogdHJ1ZSxcclxuXHRzaG93VG9vbGJhclNldDogdHJ1ZSxcclxuXHRzaG93VG9vbGJhclJlbW92ZTogdHJ1ZSxcclxuXHRzaG93VG9vbGJhckRlbGV0ZTogdHJ1ZSxcclxuXHRmb3JjZVN0YXRpY0dpZkltYWdlczogZmFsc2UsXHJcbn07XHJcblxyXG4vKipcclxuICogQ2FyZCBkYXRhIHN0cnVjdHVyZSBmb3IgcmVuZGVyaW5nXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENhcmREYXRhIHtcclxuXHRwYXRoOiBzdHJpbmc7XHJcblx0bmFtZTogc3RyaW5nO1xyXG5cdHRpdGxlOiBzdHJpbmc7XHJcblx0dGFnczogc3RyaW5nW107XHJcblx0eWFtbFRhZ3M6IHN0cmluZ1tdO1xyXG5cdGN0aW1lOiBudW1iZXI7XHJcblx0bXRpbWU6IG51bWJlcjtcclxuXHRmb2xkZXJQYXRoOiBzdHJpbmc7XHJcblx0c25pcHBldD86IHN0cmluZztcclxuXHRpbWFnZVVybD86IHN0cmluZyB8IHN0cmluZ1tdO1xyXG5cdGhhc0ltYWdlQXZhaWxhYmxlOiBib29sZWFuO1xyXG5cdHByb3BlcnRpZXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG59XHJcblxyXG4vKipcclxuICogQnVsayBvcGVyYXRpb24gdHlwZXNcclxuICovXHJcbmV4cG9ydCB0eXBlIEJ1bGtPcGVyYXRpb24gPSBcclxuXHR8ICdzZXQtZHJhZnQnXHJcblx0fCAncHVibGlzaCdcclxuXHR8ICdtYW5hZ2UtdGFncydcclxuXHR8ICdzZXQtcHJvcGVydHknXHJcblx0fCAncmVtb3ZlLXByb3BlcnR5J1xyXG5cdHwgJ2RlbGV0ZSc7XHJcbiIsICIvKipcclxuICogQmFzZXMgQ01TIFZpZXdcclxuICovXHJcblxyXG5pbXBvcnQgeyBCYXNlc1ZpZXcsIEJhc2VzRW50cnksIFF1ZXJ5Q29udHJvbGxlciwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IHNldENzc1Byb3BzIH0gZnJvbSAnLi4vdXRpbHMvY3NzLXByb3BzJztcclxuaW1wb3J0IHR5cGUgQmFzZXNDTVNQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IHRyYW5zZm9ybUJhc2VzRW50cmllcywgdHlwZSBDYXJkRGF0YSwgdHlwZSBDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9kYXRhLXRyYW5zZm9ybSc7XHJcbmltcG9ydCB7IHJlYWRDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9zZXR0aW5ncy1zY2hlbWEnO1xyXG5pbXBvcnQgeyBnZXRGaXJzdEJhc2VzUHJvcGVydHlWYWx1ZSwgZ2V0QWxsQmFzZXNJbWFnZVByb3BlcnR5VmFsdWVzIH0gZnJvbSAnLi4vdXRpbHMvcHJvcGVydHknO1xyXG5pbXBvcnQgeyBsb2FkU25pcHBldHNGb3JFbnRyaWVzLCBsb2FkSW1hZ2VzRm9yRW50cmllcyB9IGZyb20gJy4uL3NoYXJlZC9jb250ZW50LWxvYWRlcic7XHJcbmltcG9ydCB7IFNoYXJlZENhcmRSZW5kZXJlciB9IGZyb20gJy4vc2hhcmVkLXJlbmRlcmVyJztcclxuaW1wb3J0IHsgQnVsa1Rvb2xiYXIgfSBmcm9tICcuLi9jb21wb25lbnRzL2J1bGstdG9vbGJhcic7XHJcbmltcG9ydCB7IHNldHVwTmV3Tm90ZUludGVyY2VwdG9yIH0gZnJvbSAnLi4vdXRpbHMvbmV3LW5vdGUtaW50ZXJjZXB0b3InO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eVRvZ2dsZUhhbmRsZXIgfSBmcm9tICcuLi91dGlscy9wcm9wZXJ0eS10b2dnbGUtaGFuZGxlcic7XHJcbmltcG9ydCB7IFNjcm9sbExheW91dE1hbmFnZXIgfSBmcm9tICcuLi91dGlscy9zY3JvbGwtbGF5b3V0LW1hbmFnZXInO1xyXG5pbXBvcnQgeyBWaWV3U3dpdGNoTGlzdGVuZXIgfSBmcm9tICcuLi91dGlscy92aWV3LXN3aXRjaC1saXN0ZW5lcic7XHJcbmltcG9ydCB7IGNvbnZlcnRHaWZUb1N0YXRpYyB9IGZyb20gJy4uL3V0aWxzL2ltYWdlJztcclxuaW1wb3J0IHsgZ2V0RmlsZUZyb250bWF0dGVyIH0gZnJvbSAnLi4vdXRpbHMvZnJvbnRtYXR0ZXItaGVscGVyJztcclxuXHJcbmV4cG9ydCBjb25zdCBDTVNfVklFV19UWVBFID0gJ2Jhc2VzLWNtcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFzZXNDTVNWaWV3IGV4dGVuZHMgQmFzZXNWaWV3IHtcclxuXHRyZWFkb25seSB0eXBlID0gQ01TX1ZJRVdfVFlQRTtcclxuXHRwcml2YXRlIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIHBsdWdpbjogQmFzZXNDTVNQbHVnaW47XHJcblx0cHJpdmF0ZSBzZWxlY3RlZEZpbGVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcclxuXHRwcml2YXRlIHNuaXBwZXRzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XHJcblx0cHJpdmF0ZSBpbWFnZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPiA9IHt9O1xyXG5cdHByaXZhdGUgaGFzSW1hZ2VBdmFpbGFibGU6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+ID0ge307XHJcblx0cHJpdmF0ZSBtZHhGcm9udG1hdHRlckNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+ID0ge307XHJcblx0cHJpdmF0ZSB1cGRhdGVMYXlvdXRSZWY6IHsgY3VycmVudDogKCgpID0+IHZvaWQpIHwgbnVsbCB9ID0geyBjdXJyZW50OiBudWxsIH07XHJcblx0cHJpdmF0ZSBwcm9wZXJ0eU9ic2VydmVyczogUmVzaXplT2JzZXJ2ZXJbXSA9IFtdO1xyXG5cdHByaXZhdGUgY2FyZFJlbmRlcmVyOiBTaGFyZWRDYXJkUmVuZGVyZXI7XHJcblx0cHJpdmF0ZSBidWxrVG9vbGJhcjogQnVsa1Rvb2xiYXIgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIGlzUmVmcmVzaGluZ1dpdGhTZWxlY3Rpb246IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRwcml2YXRlIHByb3BlcnR5VG9nZ2xlSGFuZGxlcjogUHJvcGVydHlUb2dnbGVIYW5kbGVyIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBzY3JvbGxMYXlvdXRNYW5hZ2VyOiBTY3JvbGxMYXlvdXRNYW5hZ2VyO1xyXG5cdHByaXZhdGUgdmlld1N3aXRjaExpc3RlbmVyOiBWaWV3U3dpdGNoTGlzdGVuZXIgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHNldHRpbmdzUG9sbEludGVydmFsOiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIGxhc3RTZXR0aW5nczogUGFydGlhbDxDTVNTZXR0aW5ncz4gfCBudWxsID0gbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoY29udHJvbGxlcjogUXVlcnlDb250cm9sbGVyLCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQmFzZXNDTVNQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGNvbnRyb2xsZXIpO1xyXG5cdFx0dGhpcy5jb250YWluZXJFbCA9IGNvbnRhaW5lckVsO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0XHRcclxuXHRcdC8vIEluaXRpYWxpemUgc2hhcmVkIGNhcmQgcmVuZGVyZXIgKGNvbmZpZyB3aWxsIGJlIHNldCBsYXRlciBpbiBvbkRhdGFVcGRhdGVkKVxyXG5cdFx0dGhpcy5jYXJkUmVuZGVyZXIgPSBuZXcgU2hhcmVkQ2FyZFJlbmRlcmVyKFxyXG5cdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0dGhpcy5wbHVnaW4sXHJcblx0XHRcdHRoaXMucHJvcGVydHlPYnNlcnZlcnMsXHJcblx0XHRcdHRoaXMudXBkYXRlTGF5b3V0UmVmLFxyXG5cdFx0XHR1bmRlZmluZWQsIC8vIENvbmZpZyBub3QgYXZhaWxhYmxlIGluIGNvbnN0cnVjdG9yXHJcblx0XHRcdGNvbnRyb2xsZXJcclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdC8vIEFkZCBDTVMgY29udGFpbmVyIGNsYXNzZXNcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ2Jhc2VzLWNtcycpO1xyXG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygnYmFzZXMtY21zLWNvbnRhaW5lcicpO1xyXG5cdFx0XHJcblx0XHQvLyBJbml0aWFsaXplIG1hbmFnZXJzIHdpdGggZXJyb3IgaGFuZGxpbmdcclxuXHRcdHRyeSB7XHJcblx0XHR0aGlzLnByb3BlcnR5VG9nZ2xlSGFuZGxlciA9IG5ldyBQcm9wZXJ0eVRvZ2dsZUhhbmRsZXIoXHJcblx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHR0aGlzLmNvbmZpZyBhcyB7IGdldDogKGtleTogc3RyaW5nKSA9PiB1bmtub3duIH0sXHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLFxyXG5cdFx0XHQoKSA9PiB0aGlzLm9uRGF0YVVwZGF0ZWQoKVxyXG5cdFx0KTtcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHR0aGlzLnByb3BlcnR5VG9nZ2xlSGFuZGxlciA9IG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgY29uZmlnIGlzIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHVzZSBhIHNhZmUgZmFsbGJhY2tcclxuXHRcdFx0Y29uc3QgY29uZmlnVG9Vc2UgPSAodGhpcy5jb25maWcgJiYgdHlwZW9mICh0aGlzLmNvbmZpZyBhcyB7IGdldD86IChrZXk6IHN0cmluZykgPT4gdW5rbm93biB9KS5nZXQgPT09ICdmdW5jdGlvbicpXHJcblx0XHRcdFx0PyAodGhpcy5jb25maWcgYXMgeyBnZXQ6IChrZXk6IHN0cmluZykgPT4gdW5rbm93biB9KVxyXG5cdFx0XHRcdDogeyBnZXQ6ICgpID0+IHVuZGVmaW5lZCB9O1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyID0gbmV3IFNjcm9sbExheW91dE1hbmFnZXIoXHJcblx0XHRcdFx0dGhpcy5jb250YWluZXJFbCxcclxuXHRcdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0XHRjb25maWdUb1VzZSxcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncyxcclxuXHRcdFx0XHQoKSA9PiB0aGlzLm9uRGF0YVVwZGF0ZWQoKSxcclxuXHRcdFx0XHQoY2xlYW51cCkgPT4gdGhpcy5yZWdpc3RlcihjbGVhbnVwKVxyXG5cdFx0XHQpO1xyXG5cdFx0fSBjYXRjaCB7XHJcblx0XHRcdC8vIENyZWF0ZSBhIG1pbmltYWwgZmFsbGJhY2sgd2l0aCBhIGR1bW15IGNvbmZpZ1xyXG5cdFx0XHRjb25zdCBkdW1teUNvbmZpZyA9IHsgZ2V0OiAoKSA9PiB1bmRlZmluZWQgfTtcclxuXHRcdFx0dGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyID0gbmV3IFNjcm9sbExheW91dE1hbmFnZXIoXHJcblx0XHRcdFx0dGhpcy5jb250YWluZXJFbCxcclxuXHRcdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0XHRkdW1teUNvbmZpZyxcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncyxcclxuXHRcdFx0XHQoKSA9PiB0aGlzLm9uRGF0YVVwZGF0ZWQoKSxcclxuXHRcdFx0XHQoY2xlYW51cCkgPT4gdGhpcy5yZWdpc3RlcihjbGVhbnVwKVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRyeSB7XHJcblx0XHR0aGlzLnZpZXdTd2l0Y2hMaXN0ZW5lciA9IG5ldyBWaWV3U3dpdGNoTGlzdGVuZXIoXHJcblx0XHRcdHRoaXMuY29udGFpbmVyRWwsXHJcblx0XHRcdHRoaXMucGx1Z2luLFxyXG5cdFx0XHR0aGlzLmNvbmZpZyBhcyB7IGdldE5hbWU/OiAoKSA9PiBzdHJpbmc7IG5hbWU/OiBzdHJpbmcgfSxcclxuXHRcdFx0KHRoaXMgYXMgdW5rbm93biBhcyB7IGNvbnRyb2xsZXI/OiB7IGdldEJhc2VOYW1lPzogKCkgPT4gc3RyaW5nOyBiYXNlTmFtZT86IHN0cmluZyB9IH0pLmNvbnRyb2xsZXIsXHJcblx0XHRcdHRoaXMuZGF0YSBhcyB7IGJhc2VOYW1lPzogc3RyaW5nIH0gfCB1bmRlZmluZWQsXHJcblx0XHRcdHRoaXMuc2VsZWN0ZWRGaWxlcyxcclxuXHRcdFx0KCkgPT4gdGhpcy51cGRhdGVTZWxlY3Rpb25VSSgpLFxyXG5cdFx0XHQoY2xlYW51cCkgPT4gdGhpcy5yZWdpc3RlcihjbGVhbnVwKVxyXG5cdFx0KTtcclxuXHRcdH0gY2F0Y2gge1xyXG5cdFx0XHR0aGlzLnZpZXdTd2l0Y2hMaXN0ZW5lciA9IG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2V0dXAgdmlldyBzd2l0Y2ggbGlzdGVuZXIgLSB3cmFwcyBoYW5kbGVTZWxlY3Rpb25DaGFuZ2VcclxuXHRcdGlmICh0aGlzLnZpZXdTd2l0Y2hMaXN0ZW5lcikge1xyXG5cdFx0Y29uc3Qgb3JpZ2luYWxIYW5kbGVTZWxlY3Rpb25DaGFuZ2UgPSB0aGlzLmhhbmRsZVNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpO1xyXG5cdFx0dGhpcy5oYW5kbGVTZWxlY3Rpb25DaGFuZ2UgPSB0aGlzLnZpZXdTd2l0Y2hMaXN0ZW5lci5zZXR1cChvcmlnaW5hbEhhbmRsZVNlbGVjdGlvbkNoYW5nZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cclxuXHRvbkRhdGFVcGRhdGVkKCk6IHZvaWQge1xyXG5cdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdC8vIEd1YXJkOiB3YWl0IGZvciBkYXRhIHRvIGJlIHJlYWR5IC0gTkVWRVIgcmV0dXJuIGVhcmx5IGFuZCBsZWF2ZSBibGFuayBzY3JlZW5cclxuXHRcdFx0XHRpZiAoIXRoaXMuZGF0YSkge1xyXG5cdFx0XHRcdFx0Ly8gU2hvdyBsb2FkaW5nIHN0YXRlIGluc3RlYWQgb2YgYmxhbmsgc2NyZWVuXHJcblx0XHRcdFx0XHRpZiAodGhpcy5jb250YWluZXJFbC5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbG9hZGluZ0VsID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ2Jhc2VzLWNtcy1sb2FkaW5nJyk7XHJcblx0XHRcdFx0XHRcdGxvYWRpbmdFbC5zZXRUZXh0KCdMb2FkaW5nLi4uJyk7XHJcblx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGxvYWRpbmdFbCwge1xyXG5cdFx0XHRcdFx0XHRcdHBhZGRpbmc6ICcyMHB4JyxcclxuXHRcdFx0XHRcdFx0XHR0ZXh0QWxpZ246ICdjZW50ZXInXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gUmV0cnkgYWZ0ZXIgYSBzaG9ydCBkZWxheVxyXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmICh0aGlzLmRhdGEpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLm9uRGF0YVVwZGF0ZWQoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIEVuc3VyZSB3ZSBoYXZlIHZhbGlkIGRhdGEgc3RydWN0dXJlc1xyXG5cdFx0XHRcdGlmICghdGhpcy5kYXRhLmdyb3VwZWREYXRhIHx8ICF0aGlzLmRhdGEuZGF0YSkge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmICh0aGlzLmRhdGEgJiYgdGhpcy5kYXRhLmdyb3VwZWREYXRhICYmIHRoaXMuZGF0YS5kYXRhKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5vbkRhdGFVcGRhdGVkKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0sIDEwMCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgZ3JvdXBlZERhdGEgPSB0aGlzLmRhdGEuZ3JvdXBlZERhdGE7XHJcblx0XHRcdGNvbnN0IGFsbEVudHJpZXMgPSB0aGlzLmRhdGEuZGF0YTtcclxuXHJcblx0XHRcdC8vIFJlYWQgc2V0dGluZ3MgZnJvbSBCYXNlcyBjb25maWdcclxuXHRcdFx0Y29uc3Qgc2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3MoXHJcblx0XHRcdFx0dGhpcy5jb25maWcsXHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3NcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdC8vIFVwZGF0ZSBjb25maWcgcmVmZXJlbmNlIGluIHNjcm9sbCBsYXlvdXQgbWFuYWdlciBpZiBpdCdzIG5vdyBhdmFpbGFibGVcclxuXHRcdFx0aWYgKHRoaXMuY29uZmlnICYmIHR5cGVvZiAodGhpcy5jb25maWcgYXMgeyBnZXQ/OiAoa2V5OiBzdHJpbmcpID0+IHVua25vd24gfSkuZ2V0ID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlci51cGRhdGVDb25maWcodGhpcy5jb25maWcgYXMgeyBnZXQ6IChrZXk6IHN0cmluZykgPT4gdW5rbm93biB9KTtcclxuXHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdC8vIElnbm9yZSAtIGNvbmZpZyB1cGRhdGUgaXMgb3B0aW9uYWxcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFVwZGF0ZSBncmlkIGxheW91dCB1c2luZyBzY3JvbGwgbGF5b3V0IG1hbmFnZXJcclxuXHRcdFx0dGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLnVwZGF0ZUdyaWRMYXlvdXQoc2V0dGluZ3MpO1xyXG5cclxuXHRcdFx0Ly8gU2F2ZSBzY3JvbGwgcG9zaXRpb24gYmVmb3JlIHJlLXJlbmRlcmluZ1xyXG5cdFx0XHRjb25zdCBzYXZlZFNjcm9sbFRvcCA9IHRoaXMuY29udGFpbmVyRWwuc2Nyb2xsVG9wO1xyXG5cclxuXHRcdFx0Ly8gR2V0IHNvcnQgbWV0aG9kXHJcblx0XHRcdGNvbnN0IHNvcnRNZXRob2QgPSB0aGlzLmdldFNvcnRNZXRob2QoKTtcclxuXHJcblx0XHRcdC8vIFByb2Nlc3MgZ3JvdXBzXHJcblx0XHRcdGNvbnN0IHByb2Nlc3NlZEdyb3VwcyA9IGdyb3VwZWREYXRhLm1hcChncm91cCA9PiAoe1xyXG5cdFx0XHRcdGdyb3VwLFxyXG5cdFx0XHRcdGVudHJpZXM6IFsuLi5ncm91cC5lbnRyaWVzXVxyXG5cdFx0XHR9KSk7XHJcblxyXG5cdFx0XHQvLyBDb2xsZWN0IHZpc2libGUgZW50cmllcyBhY3Jvc3MgYWxsIGdyb3VwcyAodXAgdG8gZGlzcGxheWVkQ291bnQpXHJcblx0XHRcdGNvbnN0IHZpc2libGVFbnRyaWVzOiBCYXNlc0VudHJ5W10gPSBbXTtcclxuXHRcdFx0bGV0IHJlbWFpbmluZ0NvdW50ID0gdGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLmdldERpc3BsYXllZENvdW50KCk7XHJcblxyXG5cdFx0XHRmb3IgKGNvbnN0IHByb2Nlc3NlZEdyb3VwIG9mIHByb2Nlc3NlZEdyb3Vwcykge1xyXG5cdFx0XHRcdGlmIChyZW1haW5pbmdDb3VudCA8PSAwKSBicmVhaztcclxuXHRcdFx0XHRjb25zdCBlbnRyaWVzVG9UYWtlID0gTWF0aC5taW4ocHJvY2Vzc2VkR3JvdXAuZW50cmllcy5sZW5ndGgsIHJlbWFpbmluZ0NvdW50KTtcclxuXHRcdFx0XHR2aXNpYmxlRW50cmllcy5wdXNoKC4uLnByb2Nlc3NlZEdyb3VwLmVudHJpZXMuc2xpY2UoMCwgZW50cmllc1RvVGFrZSkpO1xyXG5cdFx0XHRcdHJlbWFpbmluZ0NvdW50IC09IGVudHJpZXNUb1Rha2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIExvYWQgc25pcHBldHMgYW5kIGltYWdlcyBPTkxZIGZvciBkaXNwbGF5ZWQgZW50cmllc1xyXG5cdFx0XHRhd2FpdCB0aGlzLmxvYWRDb250ZW50Rm9yRW50cmllcyh2aXNpYmxlRW50cmllcywgc2V0dGluZ3MpO1xyXG5cclxuXHRcdFx0Ly8gU2V0IHVwIGludGVyY2VwdG9yIG9uY2UgY29uZmlnIGlzIGF2YWlsYWJsZSAob25seSBvbiBmaXJzdCBjYWxsKVxyXG5cdFx0XHRpZiAodGhpcy5jb25maWcgJiYgISh0aGlzLmNvbnRhaW5lckVsIGFzIHVua25vd24gYXMgeyBfX2Ntc0ludGVyY2VwdG9yU2V0dXA/OiBib29sZWFuIH0pLl9fY21zSW50ZXJjZXB0b3JTZXR1cCkge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHQodGhpcy5jb250YWluZXJFbCBhcyB1bmtub3duIGFzIHsgX19jbXNJbnRlcmNlcHRvclNldHVwPzogYm9vbGVhbiB9KS5fX2Ntc0ludGVyY2VwdG9yU2V0dXAgPSB0cnVlO1xyXG5cdFx0XHRcdFx0Y29uc3QgY29udGFpbmVyV2l0aENvbmZpZyA9IHRoaXMuY29udGFpbmVyRWwgYXMgdW5rbm93biBhcyB7IFxyXG5cdFx0XHRcdFx0XHRfX2Ntc0NvbmZpZz86IHsgZ2V0OiAoa2V5OiBzdHJpbmcpID0+IHVua25vd24gfTtcclxuXHRcdFx0XHRcdFx0X19jbXNWaWV3PzogQmFzZXNDTVNWaWV3O1xyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdGNvbnRhaW5lcldpdGhDb25maWcuX19jbXNDb25maWcgPSB0aGlzLmNvbmZpZztcclxuXHRcdFx0XHRcdGNvbnRhaW5lcldpdGhDb25maWcuX19jbXNWaWV3ID0gdGhpcztcclxuXHRcdFx0XHRcdHNldHVwTmV3Tm90ZUludGVyY2VwdG9yKFxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsLFxyXG5cdFx0XHRcdFx0XHR0aGlzLmNvbmZpZyxcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MsXHJcblx0XHRcdFx0XHRcdChjbGVhbnVwKSA9PiB0aGlzLnJlZ2lzdGVyKGNsZWFudXApXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0Ly8gRmFpbGVkIHRvIHNldHVwIGludGVyY2VwdG9yIC0gY29udGludWUgYW55d2F5XHJcblx0XHRcdFx0XHQodGhpcy5jb250YWluZXJFbCBhcyB1bmtub3duIGFzIHsgX19jbXNJbnRlcmNlcHRvclNldHVwPzogYm9vbGVhbiB9KS5fX2Ntc0ludGVyY2VwdG9yU2V0dXAgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVXBkYXRlIGNhcmQgcmVuZGVyZXIgd2l0aCBjb25maWcgKG5vdyBhdmFpbGFibGUpXHJcblx0XHRcdCh0aGlzLmNhcmRSZW5kZXJlciBhcyB1bmtub3duIGFzIHsgYmFzZXNDb25maWc/OiB7IGdldD86IChrZXk6IHN0cmluZykgPT4gdW5rbm93biB9IH0pLmJhc2VzQ29uZmlnID0gdGhpcy5jb25maWc7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBVcGRhdGUgY2FyZCByZW5kZXJlciB3aXRoIE1EWCBmcm9udG1hdHRlciBjYWNoZSBmb3Igc3luY2hyb25vdXMgcmVuZGVyaW5nXHJcblx0XHRcdGlmICh0aGlzLmNhcmRSZW5kZXJlciAmJiB0eXBlb2YgKHRoaXMuY2FyZFJlbmRlcmVyIGFzIHsgc2V0TWR4RnJvbnRtYXR0ZXJDYWNoZT86IChjYWNoZTogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPikgPT4gdm9pZCB9KS5zZXRNZHhGcm9udG1hdHRlckNhY2hlID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0KHRoaXMuY2FyZFJlbmRlcmVyIGFzIHsgc2V0TWR4RnJvbnRtYXR0ZXJDYWNoZTogKGNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+KSA9PiB2b2lkIH0pLnNldE1keEZyb250bWF0dGVyQ2FjaGUodGhpcy5tZHhGcm9udG1hdHRlckNhY2hlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ2xlYXIgYW5kIHJlLXJlbmRlciBhZnRlciBjb250ZW50IGlzIGxvYWRlZFxyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG5cdFx0XHQvLyBDbGVhciBNRFggZnJvbnRtYXR0ZXIgY2FjaGUgd2hlbiByZS1yZW5kZXJpbmdcclxuXHRcdFx0dGhpcy5tZHhGcm9udG1hdHRlckNhY2hlID0ge307XHJcblxyXG5cdFx0XHQvLyBEaXNjb25uZWN0IG9sZCBwcm9wZXJ0eSBvYnNlcnZlcnMgYmVmb3JlIHJlLXJlbmRlcmluZ1xyXG5cdFx0XHR0aGlzLnByb3BlcnR5T2JzZXJ2ZXJzLmZvckVhY2gob2JzID0+IG9icy5kaXNjb25uZWN0KCkpO1xyXG5cdFx0XHR0aGlzLnByb3BlcnR5T2JzZXJ2ZXJzID0gW107XHJcblxyXG5cdFx0XHQvLyBDcmVhdGUgY2FyZHMgZmVlZCBjb250YWluZXJcclxuXHRcdFx0Y29uc3QgZmVlZEVsID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ2Jhc2VzLWNtcy1ncmlkJyk7XHJcblxyXG5cdFx0XHQvLyBSZW5kZXIgZ3JvdXBzIHdpdGggaGVhZGVyc1xyXG5cdFx0XHRsZXQgZGlzcGxheWVkU29GYXIgPSAwO1xyXG5cdFx0XHRcclxuXHRcdFx0bGV0IHRvdGFsQ2FyZHNSZW5kZXJlZCA9IDA7XHJcblx0XHRcdFxyXG5cdFx0XHRmb3IgKGNvbnN0IHByb2Nlc3NlZEdyb3VwIG9mIHByb2Nlc3NlZEdyb3Vwcykge1xyXG5cdFx0XHRcdGlmIChkaXNwbGF5ZWRTb0ZhciA+PSB0aGlzLnNjcm9sbExheW91dE1hbmFnZXIuZ2V0RGlzcGxheWVkQ291bnQoKSkgYnJlYWs7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGVudHJpZXNUb0Rpc3BsYXkgPSBNYXRoLm1pbihwcm9jZXNzZWRHcm91cC5lbnRyaWVzLmxlbmd0aCwgdGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLmdldERpc3BsYXllZENvdW50KCkgLSBkaXNwbGF5ZWRTb0Zhcik7XHJcblx0XHRcdFx0aWYgKGVudHJpZXNUb0Rpc3BsYXkgPT09IDApIGNvbnRpbnVlO1xyXG5cclxuXHRcdFx0XHRjb25zdCBncm91cEVudHJpZXMgPSBwcm9jZXNzZWRHcm91cC5lbnRyaWVzLnNsaWNlKDAsIGVudHJpZXNUb0Rpc3BsYXkpO1xyXG5cclxuXHRcdFx0XHQvLyBDcmVhdGUgZ3JvdXAgY29udGFpbmVyXHJcblx0XHRcdFx0Y29uc3QgZ3JvdXBFbCA9IGZlZWRFbC5jcmVhdGVEaXYoJ2Jhc2VzLWNtcy1ncm91cCcpO1xyXG5cclxuXHRcdFx0XHQvLyBSZW5kZXIgZ3JvdXAgaGVhZGVyIGlmIGtleSBleGlzdHNcclxuXHRcdFx0XHRpZiAocHJvY2Vzc2VkR3JvdXAuZ3JvdXAuaGFzS2V5KCkpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGhlYWRlckVsID0gZ3JvdXBFbC5jcmVhdGVEaXYoJ2Jhc2VzLWNtcy1ncm91cC1oZWFkaW5nJyk7XHJcblx0XHRcdFx0XHRjb25zdCB2YWx1ZUVsID0gaGVhZGVyRWwuY3JlYXRlRGl2KCdiYXNlcy1jbXMtZ3JvdXAtdmFsdWUnKTtcclxuXHRcdFx0XHRcdGNvbnN0IGtleVZhbHVlID0gcHJvY2Vzc2VkR3JvdXAuZ3JvdXAua2V5Py50b1N0cmluZygpIHx8ICcnO1xyXG5cdFx0XHRcdFx0dmFsdWVFbC5zZXRUZXh0KGtleVZhbHVlKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFJlbmRlciBjYXJkcyBpbiB0aGlzIGdyb3VwXHJcblx0XHRcdFx0Y29uc3QgY2FyZHMgPSBhd2FpdCB0cmFuc2Zvcm1CYXNlc0VudHJpZXMoXHJcblx0XHRcdFx0XHRncm91cEVudHJpZXMsXHJcblx0XHRcdFx0XHRzZXR0aW5ncyxcclxuXHRcdFx0XHRcdHNvcnRNZXRob2QsXHJcblx0XHRcdFx0XHRmYWxzZSxcclxuXHRcdFx0XHRcdHRoaXMuc25pcHBldHMsXHJcblx0XHRcdFx0XHR0aGlzLmltYWdlcyxcclxuXHRcdFx0XHRcdHRoaXMuaGFzSW1hZ2VBdmFpbGFibGUsXHJcblx0XHRcdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0XHRcdHRoaXMubWR4RnJvbnRtYXR0ZXJDYWNoZVxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY2FyZHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHRcdGNvbnN0IGNhcmQgPSBjYXJkc1tpXTtcclxuXHRcdFx0XHRcdGNvbnN0IGVudHJ5ID0gZ3JvdXBFbnRyaWVzW2ldO1xyXG5cdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJDYXJkKGdyb3VwRWwsIGNhcmQsIGVudHJ5LCBkaXNwbGF5ZWRTb0ZhciArIGksIHNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0dG90YWxDYXJkc1JlbmRlcmVkKys7XHJcblx0XHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdFx0Ly8gQ29udGludWUgcmVuZGVyaW5nIG90aGVyIGNhcmRzIGV2ZW4gaWYgb25lIGZhaWxzXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRkaXNwbGF5ZWRTb0ZhciArPSBlbnRyaWVzVG9EaXNwbGF5O1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDUklUSUNBTDogSWYgbm8gY2FyZHMgd2VyZSByZW5kZXJlZCwgc2hvdyBlcnJvciBpbnN0ZWFkIG9mIGJsYW5rIHNjcmVlblxyXG5cdFx0XHRpZiAodG90YWxDYXJkc1JlbmRlcmVkID09PSAwICYmIGFsbEVudHJpZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignTm8gY2FyZHMgd2VyZSByZW5kZXJlZCBkZXNwaXRlIGhhdmluZyBlbnRyaWVzLiBDaGVjayBjYXJkIHJlbmRlcmluZyBsb2dpYy4nKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSW1hZ2VzIGFyZSBub3cgc2V0IHZpYSBiYWNrZ3JvdW5kLWltYWdlIGluIHJlbmRlckNhcmQsIHNvIG5vIGJhdGNoIGxvYWRpbmcgbmVlZGVkXHJcblx0XHRcdC8vIEltYWdlcyB3aWxsIGJlIHVwZGF0ZWQgYnkgdXBkYXRlQ2FyZEltYWdlIHdoZW4gdGhleSBsb2FkXHJcblxyXG5cdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJpbmdcclxuXHRcdFx0aWYgKHNhdmVkU2Nyb2xsVG9wID4gMCkge1xyXG5cdFx0XHRcdHRoaXMuY29udGFpbmVyRWwuc2Nyb2xsVG9wID0gc2F2ZWRTY3JvbGxUb3A7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNldHVwIGluZmluaXRlIHNjcm9sbCBhbmQgcmVzaXplIG9ic2VydmVyXHJcblx0XHRcdHRoaXMuc2Nyb2xsTGF5b3V0TWFuYWdlci5zZXR1cEluZmluaXRlU2Nyb2xsKGFsbEVudHJpZXMubGVuZ3RoKTtcclxuXHRcdFx0dGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLnNldHVwUmVzaXplT2JzZXJ2ZXIoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFNldHVwIHNldHRpbmdzIHBvbGxpbmcgdG8gZGV0ZWN0IGNoYW5nZXMgYW5kIHJlZnJlc2ggdmlld1xyXG5cdFx0XHR0aGlzLnNldHVwU2V0dGluZ3NQb2xsaW5nKHNldHRpbmdzKTtcclxuXHJcblx0XHRcdC8vIFVwZGF0ZSBzZWxlY3Rpb24gVUlcclxuXHRcdFx0dGhpcy51cGRhdGVTZWxlY3Rpb25VSSgpO1xyXG5cclxuXHRcdFx0XHQvLyBDbGVhciBsb2FkaW5nIGZsYWcgYWZ0ZXIgYXN5bmMgd29yayBjb21wbGV0ZXNcclxuXHRcdFx0XHR0aGlzLnNjcm9sbExheW91dE1hbmFnZXIuc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuXHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0Ly8gRW5zdXJlIGxvYWRpbmcgZmxhZyBpcyBjbGVhcmVkIGV2ZW4gb24gZXJyb3JcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0dGhpcy5zY3JvbGxMYXlvdXRNYW5hZ2VyLnNldElzTG9hZGluZyhmYWxzZSk7XHJcblx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHQvLyBJZ25vcmUgY2xlYW51cCBlcnJvcnNcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSWYgY29udGFpbmVyIGlzIGVtcHR5IGR1ZSB0byBlcnJvciwgc2hvdyBlcnJvciBtZXNzYWdlXHJcblx0XHRcdFx0aWYgKHRoaXMuY29udGFpbmVyRWwgJiYgdGhpcy5jb250YWluZXJFbC5pc0Nvbm5lY3RlZCkge1xyXG5cdFx0XHRcdFx0dGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0XHRcdFx0Y29uc3QgZXJyb3JFbCA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdiYXNlcy1jbXMtZXJyb3InKTtcclxuXHRcdFx0XHRcdGVycm9yRWwuc2V0VGV4dCgnRXJyb3IgbG9hZGluZyB2aWV3LiBDaGVjayBjb25zb2xlIGZvciBkZXRhaWxzLicpO1xyXG5cdFx0XHRcdFx0c2V0Q3NzUHJvcHMoZXJyb3JFbCwge1xyXG5cdFx0XHRcdFx0XHRwYWRkaW5nOiAnMjBweCcsXHJcblx0XHRcdFx0XHRcdHRleHRBbGlnbjogJ2NlbnRlcicsXHJcblx0XHRcdFx0XHRcdGNvbG9yOiAndmFyKC0tdGV4dC1lcnJvciknLFxyXG5cdFx0XHRcdFx0XHRtYXJnaW46ICcyMHB4J1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KSgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0dXAgcG9sbGluZyB0byBkZXRlY3Qgc2V0dGluZ3MgY2hhbmdlcyBhbmQgcmVmcmVzaCB2aWV3XHJcblx0ICovXHJcblx0cHJpdmF0ZSBzZXR1cFNldHRpbmdzUG9sbGluZyhpbml0aWFsU2V0dGluZ3M6IENNU1NldHRpbmdzKTogdm9pZCB7XHJcblx0XHQvLyBPbmx5IHNldCB1cCBvbmNlXHJcblx0XHRpZiAodGhpcy5zZXR0aW5nc1BvbGxJbnRlcnZhbCAhPT0gbnVsbCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU3RvcmUgaW5pdGlhbCBzZXR0aW5ncyBmb3IgY29tcGFyaXNvblxyXG5cdFx0dGhpcy5sYXN0U2V0dGluZ3MgPSB7XHJcblx0XHRcdGRlc2NyaXB0aW9uUHJvcGVydHk6IGluaXRpYWxTZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5LFxyXG5cdFx0XHRzaG93VGV4dFByZXZpZXc6IGluaXRpYWxTZXR0aW5ncy5zaG93VGV4dFByZXZpZXcsXHJcblx0XHRcdGZhbGxiYWNrVG9Db250ZW50OiBpbml0aWFsU2V0dGluZ3MuZmFsbGJhY2tUb0NvbnRlbnQsXHJcblx0XHRcdHRydW5jYXRlUHJldmlld1Byb3BlcnR5OiBpbml0aWFsU2V0dGluZ3MudHJ1bmNhdGVQcmV2aWV3UHJvcGVydHksXHJcblx0XHRcdGltYWdlUHJvcGVydHk6IGluaXRpYWxTZXR0aW5ncy5pbWFnZVByb3BlcnR5LFxyXG5cdFx0XHRpbWFnZUZvcm1hdDogaW5pdGlhbFNldHRpbmdzLmltYWdlRm9ybWF0LFxyXG5cdFx0XHRmYWxsYmFja1RvRW1iZWRzOiBpbml0aWFsU2V0dGluZ3MuZmFsbGJhY2tUb0VtYmVkcyxcclxuXHRcdFx0cHJvcGVydHlEaXNwbGF5MTogaW5pdGlhbFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEsXHJcblx0XHRcdHByb3BlcnR5RGlzcGxheTI6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkyLFxyXG5cdFx0XHRwcm9wZXJ0eURpc3BsYXkzOiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MyxcclxuXHRcdFx0cHJvcGVydHlEaXNwbGF5NDogaW5pdGlhbFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTQsXHJcblx0XHRcdHByb3BlcnR5RGlzcGxheTU6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk1LFxyXG5cdFx0XHRwcm9wZXJ0eURpc3BsYXk2OiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NixcclxuXHRcdFx0cHJvcGVydHlEaXNwbGF5NzogaW5pdGlhbFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTcsXHJcblx0XHRcdHByb3BlcnR5RGlzcGxheTg6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk4LFxyXG5cdFx0XHRwcm9wZXJ0eURpc3BsYXk5OiBpbml0aWFsU2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OSxcclxuXHRcdFx0cHJvcGVydHlEaXNwbGF5MTA6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMCxcclxuXHRcdFx0cHJvcGVydHlEaXNwbGF5MTE6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMSxcclxuXHRcdFx0cHJvcGVydHlEaXNwbGF5MTI6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMixcclxuXHRcdFx0cHJvcGVydHlEaXNwbGF5MTM6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMyxcclxuXHRcdFx0cHJvcGVydHlEaXNwbGF5MTQ6IGluaXRpYWxTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxNCxcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gUG9sbCBldmVyeSAxMDBtcyB0byBjaGVjayBmb3Igc2V0dGluZ3MgY2hhbmdlc1xyXG5cdFx0dGhpcy5zZXR0aW5nc1BvbGxJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdGlmICghdGhpcy5jb25maWcgfHwgdHlwZW9mIHRoaXMuY29uZmlnLmdldCAhPT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdHJldHVybjsgLy8gQ29uZmlnIG5vdCByZWFkeSB5ZXRcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgY3VycmVudFNldHRpbmdzID0gcmVhZENNU1NldHRpbmdzKFxyXG5cdFx0XHRcdHRoaXMuY29uZmlnLFxyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHQvLyBTa2lwIGlmIGxhc3RTZXR0aW5ncyBpcyBub3QgaW5pdGlhbGl6ZWQgeWV0XHJcblx0XHRcdGlmICghdGhpcy5sYXN0U2V0dGluZ3MpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIGFueSByZWxldmFudCBzZXR0aW5ncyBoYXZlIGNoYW5nZWRcclxuXHRcdFx0Y29uc3Qgc2V0dGluZ3NDaGFuZ2VkID0gXHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eSAhPT0gY3VycmVudFNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHkgfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5zaG93VGV4dFByZXZpZXcgIT09IGN1cnJlbnRTZXR0aW5ncy5zaG93VGV4dFByZXZpZXcgfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5mYWxsYmFja1RvQ29udGVudCAhPT0gY3VycmVudFNldHRpbmdzLmZhbGxiYWNrVG9Db250ZW50IHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MudHJ1bmNhdGVQcmV2aWV3UHJvcGVydHkgIT09IGN1cnJlbnRTZXR0aW5ncy50cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eSB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLmltYWdlUHJvcGVydHkgIT09IGN1cnJlbnRTZXR0aW5ncy5pbWFnZVByb3BlcnR5IHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MuaW1hZ2VGb3JtYXQgIT09IGN1cnJlbnRTZXR0aW5ncy5pbWFnZUZvcm1hdCB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLmZhbGxiYWNrVG9FbWJlZHMgIT09IGN1cnJlbnRTZXR0aW5ncy5mYWxsYmFja1RvRW1iZWRzIHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MSAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEgfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkyICE9PSBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MiB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTMgIT09IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkzIHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NCAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTQgfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk1ICE9PSBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NSB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTYgIT09IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk2IHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NyAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTcgfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk4ICE9PSBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OCB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTkgIT09IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk5IHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTAgIT09IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMCB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTExICE9PSBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTEgfHxcclxuXHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMiAhPT0gY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEyIHx8XHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTMgIT09IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMyB8fFxyXG5cdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTE0ICE9PSBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTQ7XHJcblxyXG5cdFx0XHRpZiAoc2V0dGluZ3NDaGFuZ2VkKSB7XHJcblx0XHRcdFx0Ly8gQ2xlYXIgY2FjaGVzIHdoZW4gcmVsZXZhbnQgc2V0dGluZ3MgY2hhbmdlXHJcblx0XHRcdFx0aWYgKHRoaXMubGFzdFNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHkgIT09IGN1cnJlbnRTZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5IHx8XHJcblx0XHRcdFx0XHR0aGlzLmxhc3RTZXR0aW5ncy5zaG93VGV4dFByZXZpZXcgIT09IGN1cnJlbnRTZXR0aW5ncy5zaG93VGV4dFByZXZpZXcgfHxcclxuXHRcdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLmZhbGxiYWNrVG9Db250ZW50ICE9PSBjdXJyZW50U2V0dGluZ3MuZmFsbGJhY2tUb0NvbnRlbnQgfHxcclxuXHRcdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLnRydW5jYXRlUHJldmlld1Byb3BlcnR5ICE9PSBjdXJyZW50U2V0dGluZ3MudHJ1bmNhdGVQcmV2aWV3UHJvcGVydHkpIHtcclxuXHRcdFx0XHRcdC8vIENsZWFyIHNuaXBwZXQgY2FjaGUgd2hlbiB0ZXh0IHByZXZpZXcgc2V0dGluZ3MgY2hhbmdlXHJcblx0XHRcdFx0XHR0aGlzLnNuaXBwZXRzID0ge307XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAodGhpcy5sYXN0U2V0dGluZ3MuaW1hZ2VQcm9wZXJ0eSAhPT0gY3VycmVudFNldHRpbmdzLmltYWdlUHJvcGVydHkgfHxcclxuXHRcdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLmltYWdlRm9ybWF0ICE9PSBjdXJyZW50U2V0dGluZ3MuaW1hZ2VGb3JtYXQgfHxcclxuXHRcdFx0XHRcdHRoaXMubGFzdFNldHRpbmdzLmZhbGxiYWNrVG9FbWJlZHMgIT09IGN1cnJlbnRTZXR0aW5ncy5mYWxsYmFja1RvRW1iZWRzKSB7XHJcblx0XHRcdFx0XHQvLyBDbGVhciBpbWFnZSBjYWNoZSB3aGVuIGltYWdlIHNldHRpbmdzIGNoYW5nZVxyXG5cdFx0XHRcdFx0dGhpcy5pbWFnZXMgPSB7fTtcclxuXHRcdFx0XHRcdHRoaXMuaGFzSW1hZ2VBdmFpbGFibGUgPSB7fTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFVwZGF0ZSBsYXN0IHNldHRpbmdzXHJcblx0XHRcdFx0dGhpcy5sYXN0U2V0dGluZ3MgPSB7XHJcblx0XHRcdFx0XHRkZXNjcmlwdGlvblByb3BlcnR5OiBjdXJyZW50U2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eSxcclxuXHRcdFx0XHRcdHNob3dUZXh0UHJldmlldzogY3VycmVudFNldHRpbmdzLnNob3dUZXh0UHJldmlldyxcclxuXHRcdFx0XHRcdGZhbGxiYWNrVG9Db250ZW50OiBjdXJyZW50U2V0dGluZ3MuZmFsbGJhY2tUb0NvbnRlbnQsXHJcblx0XHRcdFx0XHR0cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eTogY3VycmVudFNldHRpbmdzLnRydW5jYXRlUHJldmlld1Byb3BlcnR5LFxyXG5cdFx0XHRcdFx0aW1hZ2VQcm9wZXJ0eTogY3VycmVudFNldHRpbmdzLmltYWdlUHJvcGVydHksXHJcblx0XHRcdFx0XHRpbWFnZUZvcm1hdDogY3VycmVudFNldHRpbmdzLmltYWdlRm9ybWF0LFxyXG5cdFx0XHRcdFx0ZmFsbGJhY2tUb0VtYmVkczogY3VycmVudFNldHRpbmdzLmZhbGxiYWNrVG9FbWJlZHMsXHJcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXkxOiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MSxcclxuXHRcdFx0XHRcdHByb3BlcnR5RGlzcGxheTI6IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkyLFxyXG5cdFx0XHRcdFx0cHJvcGVydHlEaXNwbGF5MzogY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTMsXHJcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXk0OiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NCxcclxuXHRcdFx0XHRcdHByb3BlcnR5RGlzcGxheTU6IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk1LFxyXG5cdFx0XHRcdFx0cHJvcGVydHlEaXNwbGF5NjogY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTYsXHJcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXk3OiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NyxcclxuXHRcdFx0XHRcdHByb3BlcnR5RGlzcGxheTg6IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk4LFxyXG5cdFx0XHRcdFx0cHJvcGVydHlEaXNwbGF5OTogY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTksXHJcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXkxMDogY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEwLFxyXG5cdFx0XHRcdFx0cHJvcGVydHlEaXNwbGF5MTE6IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMSxcclxuXHRcdFx0XHRcdHByb3BlcnR5RGlzcGxheTEyOiBjdXJyZW50U2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTIsXHJcblx0XHRcdFx0XHRwcm9wZXJ0eURpc3BsYXkxMzogY3VycmVudFNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEzLFxyXG5cdFx0XHRcdFx0cHJvcGVydHlEaXNwbGF5MTQ6IGN1cnJlbnRTZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxNCxcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHQvLyBUcmlnZ2VyIHZpZXcgcmVmcmVzaFxyXG5cdFx0XHRcdHRoaXMub25EYXRhVXBkYXRlZCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCAxMDApO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIGNsZWFudXBcclxuXHRcdHRoaXMucmVnaXN0ZXIoKCkgPT4ge1xyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5nc1BvbGxJbnRlcnZhbCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuc2V0dGluZ3NQb2xsSW50ZXJ2YWwpO1xyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3NQb2xsSW50ZXJ2YWwgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFByZWxvYWQgTURYIGZyb250bWF0dGVyIGZvciBhbGwgdmlzaWJsZSBlbnRyaWVzIHRvIHByZXZlbnQgZmxhc2hpbmdcclxuXHQgKiBUaGlzIGVuc3VyZXMgYWxsIE1EWCBkYXRhIGlzIGF2YWlsYWJsZSBzeW5jaHJvbm91c2x5IGR1cmluZyBjYXJkIHRyYW5zZm9ybWF0aW9uXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBwcmVsb2FkTWR4RnJvbnRtYXR0ZXIoZW50cmllczogQmFzZXNFbnRyeVtdKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHQvLyBGaWx0ZXIgdG8gb25seSBNRFggZmlsZXMgdGhhdCBhcmVuJ3QgYWxyZWFkeSBjYWNoZWRcclxuXHRcdGNvbnN0IG1keEVudHJpZXMgPSBlbnRyaWVzLmZpbHRlcihlbnRyeSA9PiB7XHJcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdFx0cmV0dXJuIGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21keCcgJiYgIShlbnRyeS5maWxlLnBhdGggaW4gdGhpcy5tZHhGcm9udG1hdHRlckNhY2hlKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmIChtZHhFbnRyaWVzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTG9hZCBhbGwgTURYIGZyb250bWF0dGVyIGluIHBhcmFsbGVsXHJcblx0XHRhd2FpdCBQcm9taXNlLmFsbChcclxuXHRcdFx0bWR4RW50cmllcy5tYXAoYXN5bmMgKGVudHJ5KSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChlbnRyeS5maWxlLnBhdGgpO1xyXG5cdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gYXdhaXQgZ2V0RmlsZUZyb250bWF0dGVyKHRoaXMuYXBwLCBmaWxlKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5tZHhGcm9udG1hdHRlckNhY2hlW2VudHJ5LmZpbGUucGF0aF0gPSBmcm9udG1hdHRlcjtcclxuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEJhc2VzIENNUzogRXJyb3IgcHJlbG9hZGluZyBmcm9udG1hdHRlciBmb3IgJHtlbnRyeS5maWxlLnBhdGh9OmAsIGVycm9yKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5tZHhGcm9udG1hdHRlckNhY2hlW2VudHJ5LmZpbGUucGF0aF0gPSBudWxsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIGxvYWRDb250ZW50Rm9yRW50cmllcyhcclxuXHRcdGVudHJpZXM6IEJhc2VzRW50cnlbXSxcclxuXHRcdHNldHRpbmdzOiBDTVNTZXR0aW5nc1xyXG5cdCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gTG9hZCBzbmlwcGV0cyBmb3IgdGV4dCBwcmV2aWV3XHJcblx0XHRpZiAoc2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3KSB7XHJcblx0XHRcdGNvbnN0IHNuaXBwZXRFbnRyaWVzUHJvbWlzZXMgPSBlbnRyaWVzXHJcblx0XHRcdFx0LmZpbHRlcihlbnRyeSA9PiAhKGVudHJ5LmZpbGUucGF0aCBpbiB0aGlzLnNuaXBwZXRzKSlcclxuXHRcdFx0XHQubWFwKGFzeW5jIGVudHJ5ID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybiBudWxsO1xyXG5cdFx0XHRcdFx0Y29uc3QgZGVzY1ZhbHVlID0gYXdhaXQgZ2V0Rmlyc3RCYXNlc1Byb3BlcnR5VmFsdWUoZW50cnksIHNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHksIHRoaXMuYXBwKSBhcyB7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsO1xyXG5cdFx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0cGF0aDogZW50cnkuZmlsZS5wYXRoLFxyXG5cdFx0XHRcdFx0XHRmaWxlLFxyXG5cdFx0XHRcdFx0XHRkZXNjcmlwdGlvbkRhdGE6IGRlc2NWYWx1ZT8uZGF0YVxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0Y29uc3Qgc25pcHBldEVudHJpZXMgPSAoYXdhaXQgUHJvbWlzZS5hbGwoc25pcHBldEVudHJpZXNQcm9taXNlcykpXHJcblx0XHRcdFx0LmZpbHRlcigoZSk6IGUgaXMgeyBwYXRoOiBzdHJpbmc7IGZpbGU6IFRGaWxlOyBkZXNjcmlwdGlvbkRhdGE6IHVua25vd24gfSA9PiBlICE9PSBudWxsKTtcclxuXHJcblx0XHRcdGlmIChzbmlwcGV0RW50cmllcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0YXdhaXQgbG9hZFNuaXBwZXRzRm9yRW50cmllcyhcclxuXHRcdFx0XHRcdHNuaXBwZXRFbnRyaWVzLFxyXG5cdFx0XHRcdFx0c2V0dGluZ3MuZmFsbGJhY2tUb0NvbnRlbnQsXHJcblx0XHRcdFx0XHRmYWxzZSxcclxuXHRcdFx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRcdFx0dGhpcy5zbmlwcGV0cyxcclxuXHRcdFx0XHRcdHNldHRpbmdzLnRydW5jYXRlUHJldmlld1Byb3BlcnR5XHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIExvYWQgaW1hZ2VzIGZvciB0aHVtYm5haWxzXHJcblx0XHRpZiAoc2V0dGluZ3MuaW1hZ2VGb3JtYXQgIT09ICdub25lJykge1xyXG5cdFx0XHRjb25zdCBpbWFnZUVudHJpZXNQcm9taXNlcyA9IGVudHJpZXNcclxuXHRcdFx0XHQuZmlsdGVyKGVudHJ5ID0+ICEoZW50cnkuZmlsZS5wYXRoIGluIHRoaXMuaW1hZ2VzKSlcclxuXHRcdFx0XHQubWFwKGFzeW5jIGVudHJ5ID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybiBudWxsO1xyXG5cdFx0XHRcdFx0Y29uc3QgaW1hZ2VQcm9wZXJ0eVZhbHVlcyA9IGF3YWl0IGdldEFsbEJhc2VzSW1hZ2VQcm9wZXJ0eVZhbHVlcyhlbnRyeSwgc2V0dGluZ3MuaW1hZ2VQcm9wZXJ0eSwgdGhpcy5hcHApO1xyXG5cdFx0XHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0cGF0aDogZW50cnkuZmlsZS5wYXRoLFxyXG5cdFx0XHRcdFx0XHRmaWxlLFxyXG5cdFx0XHRcdFx0XHRpbWFnZVByb3BlcnR5VmFsdWVzOiBpbWFnZVByb3BlcnR5VmFsdWVzIGFzIHVua25vd25bXVxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0Y29uc3QgaW1hZ2VFbnRyaWVzID0gKGF3YWl0IFByb21pc2UuYWxsKGltYWdlRW50cmllc1Byb21pc2VzKSlcclxuXHRcdFx0XHQuZmlsdGVyKChlKTogZSBpcyBOb25OdWxsYWJsZTx0eXBlb2YgZT4gPT4gZSAhPT0gbnVsbCk7XHJcblxyXG5cdFx0XHRpZiAoaW1hZ2VFbnRyaWVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRhd2FpdCBsb2FkSW1hZ2VzRm9yRW50cmllcyhcclxuXHRcdFx0XHRcdGltYWdlRW50cmllcyxcclxuXHRcdFx0XHRcdHNldHRpbmdzLmZhbGxiYWNrVG9FbWJlZHMsXHJcblx0XHRcdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0XHRcdHRoaXMuaW1hZ2VzLFxyXG5cdFx0XHRcdFx0dGhpcy5oYXNJbWFnZUF2YWlsYWJsZVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIERpcmVjdCBkZWxldGUgaGFuZGxlciBmb3IgY29udGV4dCBtZW51IC0gZGVsZXRlcyBhIHNpbmdsZSBmaWxlIHdpdGhvdXQgc2VsZWN0aW9uXHJcblx0ICovXHJcblx0cHJpdmF0ZSBnZXREaXJlY3REZWxldGVIYW5kbGVyKGZpbGVQYXRoOiBzdHJpbmcpOiAoKSA9PiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdHJldHVybiBhc3luYyAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHsgcHJlcGFyZURlbGV0aW9uUHJldmlldywgZXhlY3V0ZVNtYXJ0RGVsZXRpb24gfSA9IGF3YWl0IGltcG9ydCgnLi4vdXRpbHMvc21hcnQtZGVsZXRpb24nKTtcclxuXHRcdFx0Y29uc3QgeyBEZWxldGlvblByZXZpZXdNb2RhbCB9ID0gYXdhaXQgaW1wb3J0KCcuLi9jb21wb25lbnRzL2RlbGV0aW9uLXByZXZpZXcnKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb25maXJtRGVsZXRpb25zKSB7XHJcblx0XHRcdFx0Y29uc3QgcHJldmlldyA9IGF3YWl0IHByZXBhcmVEZWxldGlvblByZXZpZXcoXHJcblx0XHRcdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0XHRcdFtmaWxlUGF0aF0sXHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1xyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IERlbGV0aW9uUHJldmlld01vZGFsKFxyXG5cdFx0XHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdFx0XHRwcmV2aWV3LFxyXG5cdFx0XHRcdFx0KCkgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBSZWZyZXNoIHZpZXcgYWZ0ZXIgZGVsZXRpb25cclxuXHRcdFx0XHRcdFx0dGhpcy5vbkRhdGFVcGRhdGVkKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHRtb2RhbC5vcGVuKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gRGlyZWN0IGRlbGV0aW9uIHdpdGhvdXQgY29uZmlybWF0aW9uXHJcblx0XHRcdFx0Y29uc3QgcHJldmlldyA9IGF3YWl0IHByZXBhcmVEZWxldGlvblByZXZpZXcoXHJcblx0XHRcdFx0XHR0aGlzLmFwcCxcclxuXHRcdFx0XHRcdFtmaWxlUGF0aF0sXHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1xyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0YXdhaXQgZXhlY3V0ZVNtYXJ0RGVsZXRpb24odGhpcy5hcHAsIHByZXZpZXcpO1xyXG5cdFx0XHRcdC8vIFJlZnJlc2ggdmlldyBhZnRlciBkZWxldGlvblxyXG5cdFx0XHRcdHRoaXMub25EYXRhVXBkYXRlZCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJDYXJkKFxyXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdGNhcmQ6IENhcmREYXRhLFxyXG5cdFx0ZW50cnk6IEJhc2VzRW50cnksXHJcblx0XHRpbmRleDogbnVtYmVyLFxyXG5cdFx0c2V0dGluZ3M6IENNU1NldHRpbmdzXHJcblx0KTogdm9pZCB7XHJcblx0XHRjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5zZWxlY3RlZEZpbGVzLmhhcyhjYXJkLnBhdGgpO1xyXG5cdFx0cmV0dXJuIHRoaXMuY2FyZFJlbmRlcmVyLnJlbmRlckNhcmQoXHJcblx0XHRcdGNvbnRhaW5lcixcclxuXHRcdFx0Y2FyZCxcclxuXHRcdFx0ZW50cnksXHJcblx0XHRcdHNldHRpbmdzLFxyXG5cdFx0XHR0aGlzLFxyXG5cdFx0XHRpc1NlbGVjdGVkLFxyXG5cdFx0XHQocGF0aDogc3RyaW5nLCBzZWxlY3RlZDogYm9vbGVhbikgPT4ge1xyXG5cdFx0XHRcdHRoaXMuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHBhdGgsIHNlbGVjdGVkKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0KHBhdGg6IHN0cmluZywgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHVua25vd24pID0+IHtcclxuXHRcdFx0XHR2b2lkIHRoaXMuaGFuZGxlUHJvcGVydHlUb2dnbGUocGF0aCwgcHJvcGVydHksIHZhbHVlKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0eyBoYW5kbGVEZWxldGU6IHRoaXMuZ2V0RGlyZWN0RGVsZXRlSGFuZGxlcihjYXJkLnBhdGgpIH1cclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgY2FyZCBpbWFnZSB3aGVuIGl0IGJlY29tZXMgYXZhaWxhYmxlXHJcblx0ICogQ2FsbGVkIGFzeW5jaHJvbm91c2x5IGFmdGVyIGltYWdlcyBsb2FkXHJcblx0ICovXHJcblx0cHJpdmF0ZSB1cGRhdGVDYXJkSW1hZ2UocGF0aDogc3RyaW5nLCBpbWFnZVVybDogc3RyaW5nIHwgc3RyaW5nW10pOiB2b2lkIHtcclxuXHRcdGNvbnN0IGNhcmRFbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihgLmNhcmRbZGF0YS1wYXRoPVwiJHtwYXRofVwiXWApIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0aWYgKCFjYXJkRWwpIHJldHVybjtcclxuXHJcblx0XHRjb25zdCB1cmwgPSBBcnJheS5pc0FycmF5KGltYWdlVXJsKSA/IGltYWdlVXJsWzBdIDogaW1hZ2VVcmw7XHJcblx0XHRpZiAoIXVybCkgcmV0dXJuO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIGltYWdlLWVtYmVkIGNvbnRhaW5lciBleGlzdHNcclxuXHRcdGxldCBpbWFnZUVtYmVkQ29udGFpbmVyID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZS1lbWJlZCcpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0aWYgKCFpbWFnZUVtYmVkQ29udGFpbmVyKSB7XHJcblx0XHRcdC8vIE5vIGltYWdlIGNvbnRhaW5lciAtIG5lZWQgdG8gY3JlYXRlIGl0XHJcblx0XHRcdGNvbnN0IHBsYWNlaG9sZGVyID0gY2FyZEVsLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvdmVyLXBsYWNlaG9sZGVyLCAuY2FyZC10aHVtYm5haWwtcGxhY2Vob2xkZXInKTtcclxuXHRcdFx0Y29uc3QgaXNUaHVtYm5haWwgPSBjYXJkRWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbWFnZS1mb3JtYXQtdGh1bWJuYWlsJyk7XHJcblx0XHRcdGNvbnN0IGlzQ292ZXIgPSBjYXJkRWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbWFnZS1mb3JtYXQtY292ZXInKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChwbGFjZWhvbGRlcikge1xyXG5cdFx0XHRcdC8vIFJlcGxhY2UgcGxhY2Vob2xkZXJcclxuXHRcdFx0XHRjb25zdCBleGlzdGluZ0JhZGdlID0gcGxhY2Vob2xkZXIucXVlcnlTZWxlY3RvcignLmNhcmQtc3RhdHVzLWJhZGdlJyk7XHJcblx0XHRcdFx0Y29uc3QgaW1hZ2VDbGFzc05hbWUgPSBwbGFjZWhvbGRlci5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmQtY292ZXItcGxhY2Vob2xkZXInKSA/ICdjYXJkLWNvdmVyJyA6ICdjYXJkLXRodW1ibmFpbCc7XHJcblx0XHRcdFx0Y29uc3QgaW1hZ2VFbCA9IHBsYWNlaG9sZGVyLnBhcmVudEVsZW1lbnQ/LmNyZWF0ZURpdihpbWFnZUNsYXNzTmFtZSk7XHJcblx0XHRcdFx0aWYgKGltYWdlRWwpIHtcclxuXHRcdFx0XHRcdGltYWdlRW1iZWRDb250YWluZXIgPSBpbWFnZUVsLmNyZWF0ZURpdignaW1hZ2UtZW1iZWQnKTtcclxuXHRcdFx0XHRcdGlmIChleGlzdGluZ0JhZGdlKSB7XHJcblx0XHRcdFx0XHRcdGltYWdlRWwuYXBwZW5kQ2hpbGQoZXhpc3RpbmdCYWRnZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRwbGFjZWhvbGRlci5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoaXNUaHVtYm5haWwpIHtcclxuXHRcdFx0XHQvLyBGb3IgdGh1bWJuYWlscywgY3JlYXRlIGVsZW1lbnQgZGlyZWN0bHkgaW4gY29udGVudENvbnRhaW5lciAobm8gcGxhY2Vob2xkZXJzKVxyXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBjYXJkRWwucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdGlmIChjb250ZW50Q29udGFpbmVyKSB7XHJcblx0XHRcdFx0XHQvLyBJbnNlcnQgdGh1bWJuYWlsIEJFRk9SRSB0ZXh0LXdyYXBwZXIgZm9yIHByb3BlciBwb3NpdGlvbmluZ1xyXG5cdFx0XHRcdFx0Y29uc3QgdGV4dFdyYXBwZXIgPSBjb250ZW50Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLXRleHQtd3JhcHBlcicpO1xyXG5cdFx0XHRcdFx0Y29uc3QgaW1hZ2VFbCA9IHRleHRXcmFwcGVyXHJcblx0XHRcdFx0XHRcdD8gY29udGVudENvbnRhaW5lci5pbnNlcnRCZWZvcmUoY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtdGh1bWJuYWlsJyksIHRleHRXcmFwcGVyKVxyXG5cdFx0XHRcdFx0XHQ6IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdjYXJkLXRodW1ibmFpbCcpO1xyXG5cdFx0XHRcdFx0aW1hZ2VFbWJlZENvbnRhaW5lciA9IGltYWdlRWwuY3JlYXRlRGl2KCdpbWFnZS1lbWJlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChpc0NvdmVyKSB7XHJcblx0XHRcdFx0Ly8gRm9yIGNvdmVyLCBjcmVhdGUgaW4gY29udGVudENvbnRhaW5lclxyXG5cdFx0XHRcdGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBjYXJkRWwucXVlcnlTZWxlY3RvcignLmNhcmQtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcdGlmIChjb250ZW50Q29udGFpbmVyKSB7XHJcblx0XHRcdFx0XHRjb25zdCBpbWFnZUVsID0gY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtY292ZXInKTtcclxuXHRcdFx0XHRcdGltYWdlRW1iZWRDb250YWluZXIgPSBpbWFnZUVsLmNyZWF0ZURpdignaW1hZ2UtZW1iZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gVXBkYXRlIGJhY2tncm91bmQtaW1hZ2Ugb24gdGhlIGNvbnRhaW5lclxyXG5cdFx0aWYgKGltYWdlRW1iZWRDb250YWluZXIpIHtcclxuXHRcdFx0Ly8gQ29udmVydCBHSUYgdG8gc3RhdGljIGlmIHNldHRpbmcgaXMgZW5hYmxlZFxyXG5cdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgZmluYWxVcmwgPSBhd2FpdCBjb252ZXJ0R2lmVG9TdGF0aWModXJsLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb3JjZVN0YXRpY0dpZkltYWdlcyk7XHJcblx0XHRcdFx0aW1hZ2VFbWJlZENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtmaW5hbFVybH1cIilgO1xyXG5cdFx0XHR9KSgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gU2V0IGluaXRpYWwgYmFja2dyb3VuZCBpbWFnZSAod2lsbCBiZSB1cGRhdGVkIGlmIEdJRiBjb252ZXJzaW9uIGlzIG5lZWRlZClcclxuXHRcdGltYWdlRW1iZWRDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybChcIiR7dXJsfVwiKWA7XHJcblx0XHRzZXRDc3NQcm9wcyhpbWFnZUVtYmVkQ29udGFpbmVyLCB7XHJcblx0XHRcdFx0YmFja2dyb3VuZFNpemU6ICdjb3ZlcicsXHJcblx0XHRcdFx0YmFja2dyb3VuZFBvc2l0aW9uOiAnY2VudGVyIGNlbnRlcicsXHJcblx0XHRcdFx0YmFja2dyb3VuZFJlcGVhdDogJ25vLXJlcGVhdCdcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldFNvcnRNZXRob2QoKTogc3RyaW5nIHtcclxuXHRcdGNvbnN0IHNvcnRDb25maWdzID0gdGhpcy5jb25maWcuZ2V0U29ydCgpO1xyXG5cdFx0aWYgKHNvcnRDb25maWdzICYmIHNvcnRDb25maWdzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Y29uc3QgZmlyc3RTb3J0ID0gc29ydENvbmZpZ3NbMF07XHJcblx0XHRcdGNvbnN0IHByb3BlcnR5ID0gZmlyc3RTb3J0LnByb3BlcnR5O1xyXG5cdFx0XHRjb25zdCBkaXJlY3Rpb24gPSBmaXJzdFNvcnQuZGlyZWN0aW9uLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdGlmIChwcm9wZXJ0eS5pbmNsdWRlcygnY3RpbWUnKSkge1xyXG5cdFx0XHRcdHJldHVybiBgY3RpbWUtJHtkaXJlY3Rpb259YDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAocHJvcGVydHkuaW5jbHVkZXMoJ210aW1lJykpIHtcclxuXHRcdFx0XHRyZXR1cm4gYG10aW1lLSR7ZGlyZWN0aW9ufWA7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiAnbXRpbWUtZGVzYyc7XHJcblx0fVxyXG5cclxuXHJcblxyXG5cdHByaXZhdGUgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHBhdGg6IHN0cmluZywgc2VsZWN0ZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdGlmIChzZWxlY3RlZCkge1xyXG5cdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuYWRkKHBhdGgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmRlbGV0ZShwYXRoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gQWx3YXlzIHVwZGF0ZSBVSSB3aGVuIHNlbGVjdGlvbiBjaGFuZ2VzIC0gdGhpcyB3aWxsIGhpZGUgdG9vbGJhciBpZiBzZWxlY3Rpb24gaXMgZW1wdHlcclxuXHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uVUkoKTtcclxuXHRcdFxyXG5cdFx0Ly8gRm9yY2UgaGlkZSB0b29sYmFyIGltbWVkaWF0ZWx5IGlmIHNlbGVjdGlvbiBpcyBlbXB0eVxyXG5cdFx0Ly8gRG8gdGhpcyBhZnRlciB1cGRhdGVTZWxlY3Rpb25VSSB0byBlbnN1cmUgaXQgdGFrZXMgcHJlY2VkZW5jZVxyXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRGaWxlcy5zaXplID09PSAwKSB7XHJcblx0XHRcdGlmICh0aGlzLmJ1bGtUb29sYmFyKSB7XHJcblx0XHRcdFx0Ly8gRm9yY2UgaW1tZWRpYXRlIGhpZGUgd2l0aG91dCB3YWl0aW5nIGZvciB0cmFuc2l0aW9uc1xyXG5cdFx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIuaGlkZSgpO1xyXG5cdFx0XHRcdC8vIEFsc28gZGlyZWN0bHkgaGlkZSB0aGUgZWxlbWVudCBhcyBhIGJhY2t1cFxyXG5cdFx0XHRcdGNvbnN0IHRvb2xiYXJFbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLmJhc2VzLWNtcy1idWxrLXRvb2xiYXInKTtcclxuXHRcdFx0XHRpZiAodG9vbGJhckVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdHRvb2xiYXJFbC5yZW1vdmVDbGFzcygnYmFzZXMtY21zLWJ1bGstdG9vbGJhci12aXNpYmxlJyk7XHJcblx0XHRcdFx0XHR0b29sYmFyRWwuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItaGlkZGVuJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIGhhbmRsZVByb3BlcnR5VG9nZ2xlKHBhdGg6IHN0cmluZywgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHVua25vd24pOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGlmICh0aGlzLnByb3BlcnR5VG9nZ2xlSGFuZGxlcikge1xyXG5cdFx0YXdhaXQgdGhpcy5wcm9wZXJ0eVRvZ2dsZUhhbmRsZXIuaGFuZGxlUHJvcGVydHlUb2dnbGUocGF0aCwgcHJvcGVydHksIHZhbHVlKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2VsZWN0QWxsKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgY2FyZHMgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXNlcy1jbXMtY2FyZCcpO1xyXG5cdFx0Y2FyZHMuZm9yRWFjaCgoY2FyZEVsKSA9PiB7XHJcblx0XHRcdGNvbnN0IHBhdGggPSBjYXJkRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXBhdGgnKTtcclxuXHRcdFx0aWYgKHBhdGgpIHtcclxuXHRcdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuYWRkKHBhdGgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uVUkoKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZGVzZWxlY3RBbGwoKTogdm9pZCB7XHJcblx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuY2xlYXIoKTtcclxuXHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uVUkoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlZnJlc2ggdGhlIHRvb2xiYXIgd2hlbiBzZXR0aW5ncyBjaGFuZ2VcclxuXHQgKiBDYWxsZWQgZnJvbSBzZXR0aW5ncyB0YWIgd2hlbiB0b29sYmFyIGJ1dHRvbiB2aXNpYmlsaXR5IHNldHRpbmdzIGFyZSB1cGRhdGVkXHJcblx0ICovXHJcblx0cmVmcmVzaFRvb2xiYXIoKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5idWxrVG9vbGJhcikge1xyXG5cdFx0XHRjb25zdCBjdXJyZW50Q291bnQgPSB0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZTtcclxuXHRcdFx0dGhpcy5idWxrVG9vbGJhci5yZWNyZWF0ZSgpO1xyXG5cdFx0XHQvLyBVcGRhdGUgY291bnQgYWZ0ZXIgcmVjcmVhdGlvblxyXG5cdFx0XHRpZiAoY3VycmVudENvdW50ID4gMCkge1xyXG5cdFx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIudXBkYXRlQ291bnQoY3VycmVudENvdW50KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB1cGRhdGVTZWxlY3Rpb25VSSgpOiB2b2lkIHtcclxuXHRcdC8vIFVwZGF0ZSBjYXJkIHZpc3VhbCBzdGF0ZXNcclxuXHRcdGNvbnN0IGNhcmRzID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZCcpO1xyXG5cdFx0Y2FyZHMuZm9yRWFjaCgoY2FyZEVsKSA9PiB7XHJcblx0XHRcdGNvbnN0IHBhdGggPSBjYXJkRWwuZ2V0QXR0cmlidXRlKCdkYXRhLXBhdGgnKTtcclxuXHRcdFx0Y29uc3QgY2hlY2tib3ggPSBjYXJkRWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdLnNlbGVjdGlvbi1jaGVja2JveCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblx0XHRcdGlmIChwYXRoKSB7XHJcblx0XHRcdFx0Y29uc3QgaXNTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRGaWxlcy5oYXMocGF0aCk7XHJcblx0XHRcdFx0aWYgKGlzU2VsZWN0ZWQpIHtcclxuXHRcdFx0XHRcdGNhcmRFbC5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y2FyZEVsLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoY2hlY2tib3gpIHtcclxuXHRcdFx0XHRcdGNoZWNrYm94LmNoZWNrZWQgPSBpc1NlbGVjdGVkO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU2hvdy9oaWRlIGJ1bGsgdG9vbGJhciAtIGhpZGUgd2hlbiBzZWxlY3Rpb24gaXMgZW1wdHlcclxuXHRcdC8vIERvbid0IGhpZGUgaWYgd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBhIHJlZnJlc2ggdGhhdCB3aWxsIHJlc3RvcmUgc2VsZWN0aW9uXHJcblx0XHRpZiAodGhpcy5zZWxlY3RlZEZpbGVzLnNpemUgPiAwKSB7XHJcblx0XHRcdC8vIENoZWNrIGlmIHRvb2xiYXIgZWxlbWVudCBhbHJlYWR5IGV4aXN0cyBpbiBET00gKGZyb20gcHJldmlvdXMgdmlldyBzd2l0Y2gpXHJcblx0XHRcdC8vIFJlbW92ZSBhbnkgb3JwaGFuZWQgdG9vbGJhciBlbGVtZW50cyB0aGF0IG1pZ2h0IGJlIGxlZnQgb3ZlclxyXG5cdFx0XHRjb25zdCBvcnBoYW5lZFRvb2xiYXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhc2VzLWNtcy1idWxrLXRvb2xiYXInKTtcclxuXHRcdFx0b3JwaGFuZWRUb29sYmFycy5mb3JFYWNoKHRvb2xiYXIgPT4ge1xyXG5cdFx0XHRcdC8vIE9ubHkgcmVtb3ZlIGlmIGl0J3Mgbm90IG91ciBjdXJyZW50IHRvb2xiYXJcclxuXHRcdFx0XHRjb25zdCB0b29sYmFySW5zdGFuY2UgPSAodG9vbGJhciBhcyB1bmtub3duIGFzIHsgX19idWxrVG9vbGJhckluc3RhbmNlPzogQnVsa1Rvb2xiYXIgfSkuX19idWxrVG9vbGJhckluc3RhbmNlO1xyXG5cdFx0XHRcdGlmICghdG9vbGJhckluc3RhbmNlIHx8IHRvb2xiYXJJbnN0YW5jZSAhPT0gdGhpcy5idWxrVG9vbGJhcikge1xyXG5cdFx0XHRcdFx0dG9vbGJhci5yZW1vdmUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSWYgdG9vbGJhciBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgaXRcclxuXHRcdFx0aWYgKCF0aGlzLmJ1bGtUb29sYmFyKSB7XHJcblx0XHRcdFx0Y29uc3Qgc2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3MoXHJcblx0XHRcdFx0XHR0aGlzLmNvbmZpZyxcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0XHR0aGlzLmJ1bGtUb29sYmFyID0gbmV3IEJ1bGtUb29sYmFyKFxyXG5cdFx0XHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbixcclxuXHRcdFx0XHRcdHRoaXMuY29udGFpbmVyRWwsXHJcblx0XHRcdFx0XHQoKSA9PiBBcnJheS5mcm9tKHRoaXMuc2VsZWN0ZWRGaWxlcyksXHJcblx0XHRcdFx0XHQoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRGaWxlcy5jbGVhcigpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvblVJKCk7XHJcblx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0KCkgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBSZWZyZXNoIHZpZXcgYnV0IHByZXNlcnZlIHNlbGVjdGlvblxyXG5cdFx0XHRcdFx0XHRjb25zdCBzZWxlY3RlZFBhdGhzID0gQXJyYXkuZnJvbSh0aGlzLnNlbGVjdGVkRmlsZXMpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gU2V0IGZsYWcgdG8gcHJldmVudCB0b29sYmFyIGZyb20gYmVpbmcgaGlkZGVuIGR1cmluZyByZWZyZXNoXHJcblx0XHRcdFx0XHRcdHRoaXMuaXNSZWZyZXNoaW5nV2l0aFNlbGVjdGlvbiA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBLZWVwIHRvb2xiYXIgdmlzaWJsZSBkdXJpbmcgcmVmcmVzaCAtIGNyaXRpY2FsIHRvIHByZXZlbnQgaXQgZnJvbSBkaXNhcHBlYXJpbmdcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuYnVsa1Rvb2xiYXIgJiYgc2VsZWN0ZWRQYXRocy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5idWxrVG9vbGJhci5zaG93KCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIFJlZnJlc2ggdGhlIHZpZXdcclxuXHRcdFx0XHRcdFx0dGhpcy5vbkRhdGFVcGRhdGVkKCk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNlbGVjdGlvbiBhZnRlciByZWZyZXNoIGNvbXBsZXRlc1xyXG5cdFx0XHRcdFx0XHQvLyBVc2UgbXVsdGlwbGUgdGltZW91dHMgdG8gZW5zdXJlIGl0IHdvcmtzIGV2ZW4gaWYgdGhlIGZpcnN0IG9uZSBpcyB0b28gZWFybHlcclxuXHRcdFx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2VsZWN0aW9uXHJcblx0XHRcdFx0XHRcdFx0c2VsZWN0ZWRQYXRocy5mb3JFYWNoKHBhdGggPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuYWRkKHBhdGgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdC8vIENsZWFyIHRoZSBmbGFnIGFuZCB1cGRhdGUgVUlcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmlzUmVmcmVzaGluZ1dpdGhTZWxlY3Rpb24gPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvblVJKCk7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gRW5zdXJlIHRvb2xiYXIgaXMgdmlzaWJsZSBhbmQgdXBkYXRlZFxyXG5cdFx0XHRcdFx0XHRcdGlmICh0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZSA+IDAgJiYgdGhpcy5idWxrVG9vbGJhcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5idWxrVG9vbGJhci5zaG93KCk7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmJ1bGtUb29sYmFyLnVwZGF0ZUNvdW50KHRoaXMuc2VsZWN0ZWRGaWxlcy5zaXplKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gRG91YmxlLWNoZWNrIGFmdGVyIGEgYml0IG1vcmUgdGltZVxyXG5cdFx0XHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZSA+IDAgJiYgdGhpcy5idWxrVG9vbGJhcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmJ1bGtUb29sYmFyLnNob3coKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5idWxrVG9vbGJhci51cGRhdGVDb3VudCh0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0XHRcdFx0fSwgMjUwKTtcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHQoKSA9PiB7XHJcblx0XHRcdFx0XHRcdC8vIFNlbGVjdCBhbGwgY2FsbGJhY2tcclxuXHRcdFx0XHRcdFx0dGhpcy5zZWxlY3RBbGwoKTtcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRzZXR0aW5nc1xyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gVXBkYXRlIHNldHRpbmdzIGlmIHRvb2xiYXIgYWxyZWFkeSBleGlzdHNcclxuXHRcdFx0XHRjb25zdCBzZXR0aW5ncyA9IHJlYWRDTVNTZXR0aW5ncyhcclxuXHRcdFx0XHRcdHRoaXMuY29uZmlnLFxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3NcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIudXBkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuYnVsa1Rvb2xiYXIudXBkYXRlQ291bnQodGhpcy5zZWxlY3RlZEZpbGVzLnNpemUpO1xyXG5cdFx0XHR0aGlzLmJ1bGtUb29sYmFyLnNob3coKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIFNlbGVjdGlvbiBpcyBlbXB0eSAtIGZvcmNlIGhpZGUgdG9vbGJhciBpbW1lZGlhdGVseVxyXG5cdFx0XHRpZiAodGhpcy5idWxrVG9vbGJhciAmJiAhdGhpcy5pc1JlZnJlc2hpbmdXaXRoU2VsZWN0aW9uKSB7XHJcblx0XHRcdFx0dGhpcy5idWxrVG9vbGJhci5oaWRlKCk7XHJcblx0XHRcdFx0Ly8gRm9yY2UgaW1tZWRpYXRlIGhpZGUgYXMgYmFja3VwXHJcblx0XHRcdFx0Y29uc3QgdG9vbGJhckVsID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuYmFzZXMtY21zLWJ1bGstdG9vbGJhcicpO1xyXG5cdFx0XHRcdGlmICh0b29sYmFyRWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xyXG5cdFx0XHRcdFx0dG9vbGJhckVsLnJlbW92ZUNsYXNzKCdiYXNlcy1jbXMtYnVsay10b29sYmFyLXZpc2libGUnKTtcclxuXHRcdFx0XHRcdHRvb2xiYXJFbC5hZGRDbGFzcygnYmFzZXMtY21zLWJ1bGstdG9vbGJhci1oaWRkZW4nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKTogdm9pZCB7XHJcblx0XHR0aGlzLnNjcm9sbExheW91dE1hbmFnZXIuY2xlYW51cCgpO1xyXG5cdFx0aWYgKHRoaXMudmlld1N3aXRjaExpc3RlbmVyKSB7XHJcblx0XHR0aGlzLnZpZXdTd2l0Y2hMaXN0ZW5lci5jbGVhbnVwKCk7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5zZXR0aW5nc1BvbGxJbnRlcnZhbCAhPT0gbnVsbCkge1xyXG5cdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnNldHRpbmdzUG9sbEludGVydmFsKTtcclxuXHRcdFx0dGhpcy5zZXR0aW5nc1BvbGxJbnRlcnZhbCA9IG51bGw7XHJcblx0XHR9XHJcblx0XHR0aGlzLnByb3BlcnR5T2JzZXJ2ZXJzLmZvckVhY2gob2JzID0+IG9icy5kaXNjb25uZWN0KCkpO1xyXG5cdFx0dGhpcy5wcm9wZXJ0eU9ic2VydmVycyA9IFtdO1xyXG5cdFx0aWYgKHRoaXMuYnVsa1Rvb2xiYXIpIHtcclxuXHRcdFx0dGhpcy5idWxrVG9vbGJhci5kZXN0cm95KCk7XHJcblx0XHR9XHJcblx0XHQvLyBDbGVhbiB1cCBzZWxlY3Rpb24gYW5kIHRvb2xiYXIgd2hlbiB2aWV3IGNsb3Nlc1xyXG5cdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmNsZWFyKCk7XHJcblx0XHRjb25zdCBvcnBoYW5lZFRvb2xiYXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhc2VzLWNtcy1idWxrLXRvb2xiYXInKTtcclxuXHRcdG9ycGhhbmVkVG9vbGJhcnMuZm9yRWFjaCh0b29sYmFyID0+IHRvb2xiYXIucmVtb3ZlKCkpO1xyXG5cdFx0XHJcblx0XHQvLyBSZW1vdmUgZnJvbSBwbHVnaW4gdHJhY2tpbmdcclxuXHRcdGNvbnN0IHBsdWdpbldpdGhNZXRob2QgPSB0aGlzLnBsdWdpbiBhcyB7IHJlbW92ZVZpZXc/OiAodmlldzogQmFzZXNDTVNWaWV3KSA9PiB2b2lkIH07XHJcblx0XHRpZiAocGx1Z2luV2l0aE1ldGhvZCAmJiB0eXBlb2YgcGx1Z2luV2l0aE1ldGhvZC5yZW1vdmVWaWV3ID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdHBsdWdpbldpdGhNZXRob2QucmVtb3ZlVmlldyh0aGlzKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE92ZXJyaWRlIG5ldyBub3RlIGNyZWF0aW9uIHRvIHVzZSBjdXN0b20gbG9jYXRpb24gaWYgY29uZmlndXJlZFxyXG5cdCAqL1xyXG5cdGFzeW5jIG9uTmV3KCk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3MoXHJcblx0XHRcdHRoaXMuY29uZmlnLFxyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1xyXG5cdFx0KTtcclxuXHJcblx0XHRpZiAoc2V0dGluZ3MuY3VzdG9taXplTmV3QnV0dG9uKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y29uc3QgbG9jYXRpb25JbnB1dCA9IHNldHRpbmdzLm5ld05vdGVMb2NhdGlvbj8udHJpbSgpIHx8ICcnO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIElmIGxvY2F0aW9uIGlzIGVtcHR5LCB1c2UgT2JzaWRpYW4ncyBkZWZhdWx0IG5ldyBub3RlIGxvY2F0aW9uXHJcblx0XHRcdFx0aWYgKGxvY2F0aW9uSW5wdXQgPT09ICcnKSB7XHJcblx0XHRcdFx0XHQvLyBVc2UgT2JzaWRpYW4ncyBkZWZhdWx0IG5ldyBub3RlIGNyZWF0aW9uIGJlaGF2aW9yXHJcblx0XHRcdFx0XHRjb25zdCB2YXVsdENvbmZpZyA9ICh0aGlzLmFwcC52YXVsdCBhcyB7IGNvbmZpZz86IHsgbmV3RmlsZUxvY2F0aW9uPzogc3RyaW5nOyBuZXdGaWxlRm9sZGVyUGF0aD86IHN0cmluZyB9IH0pLmNvbmZpZztcclxuXHRcdFx0XHRcdGNvbnN0IG5ld0ZpbGVMb2NhdGlvbiA9IHZhdWx0Q29uZmlnPy5uZXdGaWxlTG9jYXRpb24gfHwgJ2ZvbGRlcic7XHJcblx0XHRcdFx0XHRjb25zdCBuZXdGaWxlRm9sZGVyUGF0aCA9IHZhdWx0Q29uZmlnPy5uZXdGaWxlRm9sZGVyUGF0aCB8fCAnJztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0bGV0IGZpbGVQYXRoID0gJ1VudGl0bGVkLm1kJztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gSGFuZGxlIE9ic2lkaWFuJ3MgbmV3IGZpbGUgbG9jYXRpb24gc2V0dGluZ3NcclxuXHRcdFx0XHRcdGlmIChuZXdGaWxlTG9jYXRpb24gPT09ICdmb2xkZXInICYmIG5ld0ZpbGVGb2xkZXJQYXRoKSB7XHJcblx0XHRcdFx0XHRcdGZpbGVQYXRoID0gYCR7bmV3RmlsZUZvbGRlclBhdGh9L1VudGl0bGVkLm1kYDtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAobmV3RmlsZUxvY2F0aW9uID09PSAnY3VycmVudCcpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0XHRcdGlmIChhY3RpdmVGaWxlICYmIGFjdGl2ZUZpbGUucGFyZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0ZmlsZVBhdGggPSBgJHthY3RpdmVGaWxlLnBhcmVudC5wYXRofS9VbnRpdGxlZC5tZGA7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAobmV3RmlsZUxvY2F0aW9uID09PSAncm9vdCcpIHtcclxuXHRcdFx0XHRcdFx0ZmlsZVBhdGggPSAnVW50aXRsZWQubWQnO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCAnJyk7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGUucGF0aCwgJycsIGZhbHNlKTtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBJZiBsb2NhdGlvbiBpcyBcIi9cIiBvciBqdXN0IHNsYXNoZXMsIHVzZSB2YXVsdCByb290XHJcblx0XHRcdFx0aWYgKGxvY2F0aW9uSW5wdXQgPT09ICcvJyB8fCBsb2NhdGlvbklucHV0LnJlcGxhY2UoL1xcLy9nLCAnJykgPT09ICcnKSB7XHJcblx0XHRcdFx0XHRjb25zdCBuZXdGaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKCdVbnRpdGxlZC5tZCcsICcnKTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQobmV3RmlsZS5wYXRoLCAnJywgZmFsc2UpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgdXNlIHRoZSBzcGVjaWZpZWQgZm9sZGVyXHJcblx0XHRcdFx0Y29uc3QgZm9sZGVyUGF0aCA9IGxvY2F0aW9uSW5wdXQucmVwbGFjZSgvXlxcLyt8XFwvKyQvZywgJycpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGxldCBmb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCFmb2xkZXIgfHwgISgnY2hpbGRyZW4nIGluIGZvbGRlcikpIHtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcclxuXHRcdFx0XHRcdGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGZvbGRlciAmJiAnY2hpbGRyZW4nIGluIGZvbGRlcikge1xyXG5cdFx0XHRcdFx0Y29uc3QgbmV3RmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShgJHtmb2xkZXJQYXRofS9VbnRpdGxlZC5tZGAsICcnKTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQobmV3RmlsZS5wYXRoLCAnJywgZmFsc2UpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBFcnJvciBjcmVhdGluZyBuZXcgbm90ZSAtIHNpbGVudGx5IGZhaWxcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBEZWZhdWx0IGJlaGF2aW9yIC0gbGV0IEJhc2VzIGhhbmRsZSBpdFxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIFV0aWxpdHkgZnVuY3Rpb24gdG8gc2V0IENTUyBwcm9wZXJ0aWVzIG9uIGFuIGVsZW1lbnRcclxuICogUmVwbGFjZXMgdGhlIG5vbi1leGlzdGVudCBzZXRDc3NQcm9wcyBmcm9tIG9ic2lkaWFuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFNldHMgQ1NTIHByb3BlcnRpZXMgb24gYW4gZWxlbWVudCBmcm9tIGFuIG9iamVjdFxyXG4gKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBlbGVtZW50IHRvIGFwcGx5IHN0eWxlcyB0byAoSFRNTEVsZW1lbnQgb3IgU1ZHRWxlbWVudClcclxuICogQHBhcmFtIHByb3BzIC0gT2JqZWN0IHdpdGggQ1NTIHByb3BlcnRpZXMgaW4gY2FtZWxDYXNlIG9yIGtlYmFiLWNhc2VcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXRDc3NQcm9wcyhlbGVtZW50OiBIVE1MRWxlbWVudCB8IFNWR0VsZW1lbnQsIHByb3BzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudW1iZXI+KTogdm9pZCB7XHJcblx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocHJvcHMpKSB7XHJcblx0XHQvLyBDU1MgY3VzdG9tIHByb3BlcnRpZXMgKHZhcmlhYmxlcykgc3RhcnQgd2l0aCAtLVxyXG5cdFx0aWYgKGtleS5zdGFydHNXaXRoKCctLScpKSB7XHJcblx0XHRcdGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoa2V5LCBTdHJpbmcodmFsdWUpKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIENvbnZlcnQgY2FtZWxDYXNlIHRvIGtlYmFiLWNhc2UgZm9yIENTUyBwcm9wZXJ0aWVzXHJcblx0XHRcdGNvbnN0IGNzc0tleSA9IGtleS5yZXBsYWNlKC8oW0EtWl0pL2csICctJDEnKS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHRlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KGNzc0tleSwgU3RyaW5nKHZhbHVlKSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogRGF0YSB0cmFuc2Zvcm1hdGlvbiB1dGlsaXRpZXNcclxuICogQ29udmVydHMgQmFzZXMgZW50cmllcyBpbnRvIG5vcm1hbGl6ZWQgQ2FyZERhdGEgZm9ybWF0XHJcbiAqIFVwZGF0ZWQgdG8gc3VwcG9ydCBNRFggZmlsZXMgdmlhIG1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nXHJcbiAqL1xyXG5cclxuaW1wb3J0IHR5cGUgeyBBcHAsIEJhc2VzRW50cnkgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBnZXRGaXJzdEJhc2VzUHJvcGVydHlWYWx1ZSB9IGZyb20gJy4uL3V0aWxzL3Byb3BlcnR5JztcclxuaW1wb3J0IHsgZ2V0TGlzdFNlcGFyYXRvciB9IGZyb20gJy4uL3V0aWxzL3N0eWxlLXNldHRpbmdzJztcclxuaW1wb3J0IHsgZ2V0RmlsZUZyb250bWF0dGVyIH0gZnJvbSAnLi4vdXRpbHMvZnJvbnRtYXR0ZXItaGVscGVyJztcclxuXHJcbi8qKlxyXG4gKiBSZW1vdmUgZHVwbGljYXRpb24gZnJvbSBhIHN0cmluZyAoZS5nLiwgXCJ2YWx1ZXZhbHVlXCIgLT4gXCJ2YWx1ZVwiKVxyXG4gKiBIYW5kbGVzIG11bHRpcGxlIHJlcGV0aXRpb25zIC0gZmluZHMgdGhlIHNob3J0ZXN0IHJlcGVhdGluZyBwYXR0ZXJuXHJcbiAqL1xyXG5mdW5jdGlvbiByZW1vdmVEdXBsaWNhdGlvbihzdHI6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0aWYgKHN0ci5sZW5ndGggPT09IDApIHJldHVybiBzdHI7XHJcblx0XHJcblx0Ly8gRmluZCB0aGUgc2hvcnRlc3QgcmVwZWF0aW5nIHBhdHRlcm4gYnkgY2hlY2tpbmcgYWxsIHBvc3NpYmxlIHByZWZpeCBsZW5ndGhzXHJcblx0Ly8gU3RhcnQgZnJvbSAxIGFuZCBnbyB1cCB0byBoYWxmIHRoZSBzdHJpbmcgbGVuZ3RoXHJcblx0Zm9yIChsZXQgbGVuID0gMTsgbGVuIDw9IE1hdGguZmxvb3Ioc3RyLmxlbmd0aCAvIDIpOyBsZW4rKykge1xyXG5cdFx0Y29uc3QgcHJlZml4ID0gc3RyLnN1YnN0cmluZygwLCBsZW4pO1xyXG5cdFx0XHJcblx0XHQvLyBDaGVjayBpZiBzdHJpbmcgaXMgZXhhY3RseSBtYWRlIG9mIHJlcGV0aXRpb25zIG9mIHRoaXMgcHJlZml4XHJcblx0XHRjb25zdCByZXBlYXRDb3VudCA9IE1hdGguZmxvb3Ioc3RyLmxlbmd0aCAvIGxlbik7XHJcblx0XHRpZiAocmVwZWF0Q291bnQgPCAyKSBjb250aW51ZTsgLy8gTmVlZCBhdCBsZWFzdCAyIHJlcGV0aXRpb25zXHJcblx0XHRcclxuXHRcdGxldCBpc0NvbXBsZXRlRHVwbGljYXRpb24gPSB0cnVlO1xyXG5cdFx0XHJcblx0XHQvLyBWZXJpZnkgYWxsIGZ1bGwgc2VnbWVudHMgbWF0Y2ggdGhlIHByZWZpeFxyXG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPCByZXBlYXRDb3VudDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IHNlZ21lbnQgPSBzdHIuc3Vic3RyaW5nKGkgKiBsZW4sIChpICsgMSkgKiBsZW4pO1xyXG5cdFx0XHRpZiAoc2VnbWVudCAhPT0gcHJlZml4KSB7XHJcblx0XHRcdFx0aXNDb21wbGV0ZUR1cGxpY2F0aW9uID0gZmFsc2U7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gSWYgdGhlcmUncyBhIHJlbWFpbmRlciwgY2hlY2sgaWYgaXQgbWF0Y2hlcyB0aGUgc3RhcnQgb2YgdGhlIHByZWZpeFxyXG5cdFx0Y29uc3QgcmVtYWluZGVyID0gc3RyLmxlbmd0aCAlIGxlbjtcclxuXHRcdGlmIChyZW1haW5kZXIgPiAwKSB7XHJcblx0XHRcdGNvbnN0IGxhc3RTZWdtZW50ID0gc3RyLnN1YnN0cmluZyhyZXBlYXRDb3VudCAqIGxlbik7XHJcblx0XHRcdGlmIChsYXN0U2VnbWVudCAhPT0gcHJlZml4LnN1YnN0cmluZygwLCByZW1haW5kZXIpKSB7XHJcblx0XHRcdFx0aXNDb21wbGV0ZUR1cGxpY2F0aW9uID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKGlzQ29tcGxldGVEdXBsaWNhdGlvbikge1xyXG5cdFx0XHRcdHJldHVybiBwcmVmaXg7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBzdHI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2FyZERhdGEge1xyXG5cdHBhdGg6IHN0cmluZztcclxuXHRuYW1lOiBzdHJpbmc7XHJcblx0dGl0bGU6IHN0cmluZztcclxuXHR0YWdzOiBzdHJpbmdbXTtcclxuXHR5YW1sVGFnczogc3RyaW5nW107XHJcblx0Y3RpbWU6IG51bWJlcjtcclxuXHRtdGltZTogbnVtYmVyO1xyXG5cdGZvbGRlclBhdGg6IHN0cmluZztcclxuXHRzbmlwcGV0Pzogc3RyaW5nO1xyXG5cdGltYWdlVXJsPzogc3RyaW5nIHwgc3RyaW5nW107XHJcblx0aGFzSW1hZ2VBdmFpbGFibGU/OiBib29sZWFuO1xyXG5cdGRpc3BsYXlUYWdzPzogc3RyaW5nW107XHJcblx0cHJvcGVydHlOYW1lMT86IHN0cmluZztcclxuXHRwcm9wZXJ0eU5hbWUyPzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTM/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lND86IHN0cmluZztcclxuXHRwcm9wZXJ0eU5hbWU1Pzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTY/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lNz86IHN0cmluZztcclxuXHRwcm9wZXJ0eU5hbWU4Pzogc3RyaW5nO1xyXG5cdHByb3BlcnR5TmFtZTk/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lMTA/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lMTE/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lMTI/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lMTM/OiBzdHJpbmc7XHJcblx0cHJvcGVydHlOYW1lMTQ/OiBzdHJpbmc7XHJcblx0cHJvcGVydHkxPzogc3RyaW5nIHwgbnVsbDtcclxuXHRwcm9wZXJ0eTI/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5Mz86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHk0Pzogc3RyaW5nIHwgbnVsbDtcclxuXHRwcm9wZXJ0eTU/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5Nj86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHk3Pzogc3RyaW5nIHwgbnVsbDtcclxuXHRwcm9wZXJ0eTg/OiBzdHJpbmcgfCBudWxsO1xyXG5cdHByb3BlcnR5OT86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHkxMD86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHkxMT86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHkxMj86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHkxMz86IHN0cmluZyB8IG51bGw7XHJcblx0cHJvcGVydHkxND86IHN0cmluZyB8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ01TU2V0dGluZ3Mge1xyXG5cdHRpdGxlUHJvcGVydHk6IHN0cmluZztcclxuXHRkZXNjcmlwdGlvblByb3BlcnR5OiBzdHJpbmc7XHJcblx0aW1hZ2VQcm9wZXJ0eTogc3RyaW5nO1xyXG5cdHNob3dUaXRsZTogYm9vbGVhbjtcclxuXHRzaG93RGF0ZTogYm9vbGVhbjtcclxuXHRkYXRlUHJvcGVydHk6IHN0cmluZztcclxuXHRkYXRlSW5jbHVkZVRpbWU6IGJvb2xlYW47XHJcblx0c2hvd1RleHRQcmV2aWV3OiBib29sZWFuO1xyXG5cdGZhbGxiYWNrVG9Db250ZW50OiBib29sZWFuO1xyXG5cdHRydW5jYXRlUHJldmlld1Byb3BlcnR5OiBib29sZWFuO1xyXG5cdGZhbGxiYWNrVG9FbWJlZHM6IGJvb2xlYW4gfCAnYWx3YXlzJyB8ICdpZi1lbXB0eScgfCAnbmV2ZXInO1xyXG5cdHByb3BlcnR5RGlzcGxheTE6IHN0cmluZztcclxuXHRwcm9wZXJ0eURpc3BsYXkyOiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5Mzogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTQ6IHN0cmluZztcclxuXHRwcm9wZXJ0eURpc3BsYXk1OiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5Njogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTc6IHN0cmluZztcclxuXHRwcm9wZXJ0eURpc3BsYXk4OiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5OTogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTEwOiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5MTE6IHN0cmluZztcclxuXHRwcm9wZXJ0eURpc3BsYXkxMjogc3RyaW5nO1xyXG5cdHByb3BlcnR5RGlzcGxheTEzOiBzdHJpbmc7XHJcblx0cHJvcGVydHlEaXNwbGF5MTQ6IHN0cmluZztcclxuXHRwcm9wZXJ0eUxheW91dDEyU2lkZUJ5U2lkZTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eUxheW91dDM0U2lkZUJ5U2lkZTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eUxheW91dDU2U2lkZUJ5U2lkZTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eUxheW91dDc4U2lkZUJ5U2lkZTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eUxheW91dDkxMFNpZGVCeVNpZGU6IGJvb2xlYW47XHJcblx0cHJvcGVydHlMYXlvdXQxMTEyU2lkZUJ5U2lkZTogYm9vbGVhbjtcclxuXHRwcm9wZXJ0eUxheW91dDEzMTRTaWRlQnlTaWRlOiBib29sZWFuO1xyXG5cdHByb3BlcnR5R3JvdXAxUG9zaXRpb246ICd0b3AnIHwgJ2JvdHRvbSc7XHJcblx0cHJvcGVydHlHcm91cDJQb3NpdGlvbjogJ3RvcCcgfCAnYm90dG9tJztcclxuXHRwcm9wZXJ0eUdyb3VwM1Bvc2l0aW9uOiAndG9wJyB8ICdib3R0b20nO1xyXG5cdHByb3BlcnR5R3JvdXA0UG9zaXRpb246ICd0b3AnIHwgJ2JvdHRvbSc7XHJcblx0cHJvcGVydHlHcm91cDVQb3NpdGlvbjogJ3RvcCcgfCAnYm90dG9tJztcclxuXHRwcm9wZXJ0eUdyb3VwNlBvc2l0aW9uOiAndG9wJyB8ICdib3R0b20nO1xyXG5cdHByb3BlcnR5R3JvdXA3UG9zaXRpb246ICd0b3AnIHwgJ2JvdHRvbSc7XHJcblx0aW1hZ2VGb3JtYXQ6ICdub25lJyB8ICd0aHVtYm5haWwnIHwgJ2NvdmVyJztcclxuXHRpbWFnZVBvc2l0aW9uOiAnbGVmdCcgfCAncmlnaHQnIHwgJ3RvcCcgfCAnYm90dG9tJztcclxuXHRwcm9wZXJ0eUxhYmVsczogJ2hpZGUnIHwgJ2lubGluZScgfCAnYWJvdmUnO1xyXG5cdHNob3dEcmFmdFN0YXR1czogYm9vbGVhbjtcclxuXHRkcmFmdFN0YXR1c1Byb3BlcnR5OiBzdHJpbmc7XHJcblx0ZHJhZnRTdGF0dXNSZXZlcnNlOiBib29sZWFuO1xyXG5cdGRyYWZ0U3RhdHVzVXNlRmlsZW5hbWVQcmVmaXg6IGJvb2xlYW47XHJcblx0c2hvd1RhZ3M6IGJvb2xlYW47XHJcblx0dGFnc1Byb3BlcnR5OiBzdHJpbmc7XHJcblx0bWF4VGFnc1RvU2hvdzogbnVtYmVyO1xyXG5cdGN1c3RvbWl6ZU5ld0J1dHRvbjogYm9vbGVhbjtcclxuXHRuZXdOb3RlTG9jYXRpb246IHN0cmluZztcclxuXHRoaWRlUXVpY2tFZGl0SWNvbjogYm9vbGVhbjtcclxuXHRjYXJkU2l6ZTogbnVtYmVyO1xyXG5cdGltYWdlQXNwZWN0UmF0aW86IG51bWJlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRyYW5zZm9ybSBCYXNlcyBlbnRyeSBpbnRvIENhcmREYXRhXHJcbiAqIFN1cHBvcnRzIE1EWCBmaWxlcyB2aWEgbWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmdcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBiYXNlc0VudHJ5VG9DYXJkRGF0YShcclxuXHRlbnRyeTogQmFzZXNFbnRyeSxcclxuXHRzZXR0aW5nczogQ01TU2V0dGluZ3MsXHJcblx0c29ydE1ldGhvZDogc3RyaW5nLFxyXG5cdGlzU2h1ZmZsZWQ6IGJvb2xlYW4sXHJcblx0c25pcHBldD86IHN0cmluZyxcclxuXHRpbWFnZVVybD86IHN0cmluZyB8IHN0cmluZ1tdLFxyXG5cdGhhc0ltYWdlQXZhaWxhYmxlPzogYm9vbGVhbixcclxuXHRhcHA/OiBBcHAsXHJcblx0bWR4RnJvbnRtYXR0ZXJDYWNoZT86IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD5cclxuKTogUHJvbWlzZTxDYXJkRGF0YT4ge1xyXG5cdGNvbnN0IGZpbGVOYW1lID0gZW50cnkuZmlsZS5iYXNlbmFtZSB8fCBlbnRyeS5maWxlLm5hbWU7XHJcblxyXG5cdC8vIEdldCB0aXRsZSBmcm9tIHByb3BlcnR5IG9yIGZhbGxiYWNrIHRvIGZpbGVuYW1lXHJcblx0Ly8gRm9yIE1EWCBmaWxlcywgY2hlY2sgY2FjaGUgZmlyc3QgdG8gYXZvaWQgYXN5bmMgbG9hZGluZ1xyXG5cdGxldCB0aXRsZVZhbHVlOiB7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsID0gbnVsbDtcclxuXHRpZiAoYXBwKSB7XHJcblx0XHRjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChlbnRyeS5maWxlLnBhdGgpO1xyXG5cdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21keCcgJiYgbWR4RnJvbnRtYXR0ZXJDYWNoZSkge1xyXG5cdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IG1keEZyb250bWF0dGVyQ2FjaGVbZW50cnkuZmlsZS5wYXRoXTtcclxuXHRcdFx0aWYgKGZyb250bWF0dGVyKSB7XHJcblx0XHRcdFx0Ly8gU3RyaXAgXCJub3RlLlwiIHByZWZpeCBpZiBwcmVzZW50XHJcblx0XHRcdFx0Y29uc3QgY2xlYW5Qcm9wID0gc2V0dGluZ3MudGl0bGVQcm9wZXJ0eS5zdGFydHNXaXRoKCdub3RlLicpID8gc2V0dGluZ3MudGl0bGVQcm9wZXJ0eS5zdWJzdHJpbmcoNSkgOiBzZXR0aW5ncy50aXRsZVByb3BlcnR5O1xyXG5cdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyVmFsdWUgPSBmcm9udG1hdHRlcltjbGVhblByb3BdO1xyXG5cdFx0XHRcdGlmIChmcm9udG1hdHRlclZhbHVlICE9IG51bGwpIHtcclxuXHRcdFx0XHRcdHRpdGxlVmFsdWUgPSB7IGRhdGE6IGZyb250bWF0dGVyVmFsdWUgfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gSWYgY2FjaGUgZGlkbid0IGhhdmUgaXQsIHVzZSB0aGUgYXN5bmMgbWV0aG9kXHJcblx0aWYgKCF0aXRsZVZhbHVlKSB7XHJcblx0XHR0aXRsZVZhbHVlID0gYXdhaXQgZ2V0Rmlyc3RCYXNlc1Byb3BlcnR5VmFsdWUoZW50cnksIHNldHRpbmdzLnRpdGxlUHJvcGVydHksIGFwcCkgYXMgeyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHR9XHJcblx0Y29uc3QgdGl0bGVEYXRhID0gdGl0bGVWYWx1ZT8uZGF0YTtcclxuXHRcclxuXHQvLyBIYW5kbGUgYXJyYXlzIChlLmcuLCBhbGlhc2VzKSBieSBqb2luaW5nIHRoZW1cclxuXHRsZXQgdGl0bGU6IHN0cmluZztcclxuXHRpZiAodGl0bGVEYXRhICE9IG51bGwgJiYgdGl0bGVEYXRhICE9PSAnJykge1xyXG5cdFx0aWYgKEFycmF5LmlzQXJyYXkodGl0bGVEYXRhKSkge1xyXG5cdFx0XHQvLyBKb2luIGFycmF5IGl0ZW1zIGludG8gYSBzdHJpbmdcclxuXHRcdFx0Y29uc3QgaXRlbXMgPSB0aXRsZURhdGEubWFwKChpdGVtOiB1bmtub3duKSA9PiB7XHJcblx0XHRcdFx0aWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICdkYXRhJyBpbiBpdGVtKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gU3RyaW5nKChpdGVtIGFzIHsgZGF0YTogdW5rbm93biB9KS5kYXRhKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIFN0cmluZyhpdGVtKTtcclxuXHRcdFx0fSkuZmlsdGVyKChzOiBzdHJpbmcpID0+IHMudHJpbSgpLmxlbmd0aCA+IDApO1xyXG5cdFx0XHR0aXRsZSA9IGl0ZW1zLmxlbmd0aCA+IDAgPyBpdGVtcy5qb2luKCcsICcpIDogZmlsZU5hbWU7XHJcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiB0aXRsZURhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0aXRsZURhdGEgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdHRpdGxlID0gU3RyaW5nKHRpdGxlRGF0YSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aXRsZSA9IGZpbGVOYW1lO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHR0aXRsZSA9IGZpbGVOYW1lO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IGZvbGRlciBwYXRoXHJcblx0Y29uc3QgcGF0aCA9IGVudHJ5LmZpbGUucGF0aDtcclxuXHRjb25zdCBmb2xkZXJQYXRoID0gcGF0aC5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKS5qb2luKCcvJyk7XHJcblxyXG5cdC8vIEdldCBZQU1MIHRhZ3Mgb25seVxyXG5cdGxldCB5YW1sVGFnc1ZhbHVlID0gZW50cnkuZ2V0VmFsdWUoJ25vdGUudGFncycpIGFzIHsgZGF0YT86IHVua25vd24gfSB8IG51bGw7XHJcblx0bGV0IHlhbWxUYWdzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHQvLyBGb3IgTURYIGZpbGVzLCBmYWxsYmFjayB0byBtYW51YWwgZnJvbnRtYXR0ZXIgcGFyc2luZyBpZiBCYXNlcyBBUEkgcmV0dXJucyBudWxsXHJcblx0aWYgKCF5YW1sVGFnc1ZhbHVlICYmIGFwcCkge1xyXG5cdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdC8vIENoZWNrIGNhY2hlIGZpcnN0LCB0aGVuIGZhbGxiYWNrIHRvIGFzeW5jIGxvYWRpbmdcclxuXHRcdFx0bGV0IGZyb250bWF0dGVyID0gbWR4RnJvbnRtYXR0ZXJDYWNoZT8uW2VudHJ5LmZpbGUucGF0aF0gPz8gbnVsbDtcclxuXHRcdFx0aWYgKGZyb250bWF0dGVyID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcihhcHAsIGZpbGUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChmcm9udG1hdHRlcj8udGFncykge1xyXG5cdFx0XHRcdGNvbnN0IHRhZ0RhdGEgPSBmcm9udG1hdHRlci50YWdzO1xyXG5cdFx0XHRcdGNvbnN0IHJhd1RhZ3MgPSBBcnJheS5pc0FycmF5KHRhZ0RhdGEpXHJcblx0XHRcdFx0XHQ/IHRhZ0RhdGEubWFwKCh0OiB1bmtub3duKSA9PiB7XHJcblx0XHRcdFx0XHRcdGlmICh0ICYmIHR5cGVvZiB0ID09PSAnb2JqZWN0JyAmJiB0ICE9PSBudWxsKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgdCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHQgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyh0KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdCA/IEpTT04uc3RyaW5naWZ5KHQpIDogJyc7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0OiAoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAodGFnRGF0YSAmJiB0eXBlb2YgdGFnRGF0YSA9PT0gJ29iamVjdCcgJiYgdGFnRGF0YSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBbSlNPTi5zdHJpbmdpZnkodGFnRGF0YSldO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgdGFnRGF0YSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHRhZ0RhdGEgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIFtTdHJpbmcodGFnRGF0YSldO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHJldHVybiB0YWdEYXRhID8gW0pTT04uc3RyaW5naWZ5KHRhZ0RhdGEpXSA6IFsnJ107XHJcblx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdHlhbWxUYWdzID0gcmF3VGFncy5tYXAodGFnID0+IHRhZy5yZXBsYWNlKC9eIy8sICcnKSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmICh5YW1sVGFnc1ZhbHVlICYmIHlhbWxUYWdzVmFsdWUuZGF0YSAhPSBudWxsKSB7XHJcblx0XHRjb25zdCB0YWdEYXRhID0geWFtbFRhZ3NWYWx1ZS5kYXRhO1xyXG5cdFx0Y29uc3QgcmF3VGFncyA9IEFycmF5LmlzQXJyYXkodGFnRGF0YSlcclxuXHRcdFx0PyB0YWdEYXRhLm1hcCgodDogdW5rbm93bikgPT4ge1xyXG5cdFx0XHRcdGlmICh0ICYmIHR5cGVvZiB0ID09PSAnb2JqZWN0JyAmJiAnZGF0YScgaW4gdCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIFN0cmluZygodCBhcyB7IGRhdGE6IHVua25vd24gfSkuZGF0YSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAodHlwZW9mIHQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0ID09PSAnbnVtYmVyJykgPyBTdHJpbmcodCkgOiAnJztcclxuXHRcdFx0fSkuZmlsdGVyKHQgPT4gdClcclxuXHRcdFx0OiAodHlwZW9mIHRhZ0RhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0YWdEYXRhID09PSAnbnVtYmVyJykgPyBbU3RyaW5nKHRhZ0RhdGEpXSA6IFtdO1xyXG5cdFx0eWFtbFRhZ3MgPSByYXdUYWdzLm1hcCh0YWcgPT4gdGFnLnJlcGxhY2UoL14jLywgJycpKTtcclxuXHR9XHJcblxyXG5cdC8vIEdldCB0YWdzIGluIFlBTUwgKyBub3RlIGJvZHlcclxuXHRsZXQgYWxsVGFnc1ZhbHVlID0gZW50cnkuZ2V0VmFsdWUoJ2ZpbGUudGFncycpIGFzIHsgZGF0YT86IHVua25vd24gfSB8IG51bGw7XHJcblx0bGV0IHRhZ3M6IHN0cmluZ1tdID0gW107XHJcblxyXG5cdFx0aWYgKGFsbFRhZ3NWYWx1ZSAmJiBhbGxUYWdzVmFsdWUuZGF0YSAhPSBudWxsKSB7XHJcblx0XHRcdGNvbnN0IHRhZ0RhdGEgPSBhbGxUYWdzVmFsdWUuZGF0YTtcclxuXHRcdFx0Y29uc3QgcmF3VGFncyA9IEFycmF5LmlzQXJyYXkodGFnRGF0YSlcclxuXHRcdFx0XHQ/IHRhZ0RhdGEubWFwKCh0OiB1bmtub3duKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodCAmJiB0eXBlb2YgdCA9PT0gJ29iamVjdCcgJiYgdCAhPT0gbnVsbCAmJiAnZGF0YScgaW4gdCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBpdGVtRGF0YSA9ICh0IGFzIHsgZGF0YTogdW5rbm93biB9KS5kYXRhO1xyXG5cdFx0XHRcdFx0XHRpZiAoaXRlbURhdGEgJiYgdHlwZW9mIGl0ZW1EYXRhID09PSAnb2JqZWN0JyAmJiBpdGVtRGF0YSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtRGF0YSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyhpdGVtRGF0YSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAodCAmJiB0eXBlb2YgdCA9PT0gJ29iamVjdCcgJiYgdCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRyZXR1cm4gKHR5cGVvZiB0ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdCA9PT0gJ251bWJlcicpID8gU3RyaW5nKHQpIDogJyc7XHJcblx0XHRcdFx0fSkuZmlsdGVyKCh0KTogdCBpcyBzdHJpbmcgPT4gdHlwZW9mIHQgPT09ICdzdHJpbmcnICYmIHQubGVuZ3RoID4gMClcclxuXHRcdFx0XHQ6ICgoKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGFnRGF0YSAmJiB0eXBlb2YgdGFnRGF0YSA9PT0gJ29iamVjdCcgJiYgdGFnRGF0YSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gW0pTT04uc3RyaW5naWZ5KHRhZ0RhdGEpXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiAodHlwZW9mIHRhZ0RhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0YWdEYXRhID09PSAnbnVtYmVyJykgPyBbU3RyaW5nKHRhZ0RhdGEpXSA6IFtdO1xyXG5cdFx0XHRcdH0pKCk7XHJcblx0XHRcdHRhZ3MgPSByYXdUYWdzLm1hcCh0YWcgPT4gdGFnLnJlcGxhY2UoL14jLywgJycpKTtcclxuXHRcdH0gZWxzZSBpZiAoIWFsbFRhZ3NWYWx1ZSAmJiBhcHApIHtcclxuXHRcdFx0Ly8gRm9yIE1EWCBmaWxlcywgdXNlIFlBTUwgdGFncyAobm8gYm9keSB0YWdzIHNpbmNlIG1ldGFkYXRhIGNhY2hlIGRvZXNuJ3Qgd29yaylcclxuXHRcdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21keCcpIHtcclxuXHRcdFx0XHQvLyBGb3IgTURYLCBmaWxlLnRhZ3MgaXMgc2FtZSBhcyBub3RlLnRhZ3MgKG5vIGJvZHkgcGFyc2luZylcclxuXHRcdFx0XHQvLyBGcm9udG1hdHRlciBhbHJlYWR5IGxvYWRlZCBhYm92ZSBpZiBuZWVkZWRcclxuXHRcdFx0XHR0YWdzID0gWy4uLnlhbWxUYWdzXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHQvLyBHZXQgdGltZXN0YW1wc1xyXG5cdGNvbnN0IGN0aW1lID0gZW50cnkuZmlsZS5zdGF0LmN0aW1lO1xyXG5cdGNvbnN0IG10aW1lID0gZW50cnkuZmlsZS5zdGF0Lm10aW1lO1xyXG5cclxuXHQvLyBHZXQgdGFncyBmcm9tIHNwZWNpZmllZCBwcm9wZXJ0eSBpZiBlbmFibGVkXHJcblx0bGV0IGRpc3BsYXlUYWdzOiBzdHJpbmdbXSA9IFtdO1xyXG5cdGlmIChzZXR0aW5ncy5zaG93VGFncyAmJiBzZXR0aW5ncy50YWdzUHJvcGVydHkpIHtcclxuXHRcdGNvbnN0IHRhZ3NWYWx1ZSA9IGF3YWl0IGdldEZpcnN0QmFzZXNQcm9wZXJ0eVZhbHVlKGVudHJ5LCBzZXR0aW5ncy50YWdzUHJvcGVydHksIGFwcCkgYXMgeyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHRcdGlmICh0YWdzVmFsdWUgJiYgdGFnc1ZhbHVlLmRhdGEgIT0gbnVsbCkge1xyXG5cdFx0XHRjb25zdCB0YWdEYXRhID0gdGFnc1ZhbHVlLmRhdGE7XHJcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KHRhZ0RhdGEpKSB7XHJcblx0XHRcdFx0ZGlzcGxheVRhZ3MgPSB0YWdEYXRhLm1hcCgodDogdW5rbm93bikgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHQgJiYgdHlwZW9mIHQgPT09ICdvYmplY3QnICYmICdkYXRhJyBpbiB0KSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBTdHJpbmcoKHQgYXMgeyBkYXRhOiB1bmtub3duIH0pLmRhdGEpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cmV0dXJuICh0eXBlb2YgdCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHQgPT09ICdudW1iZXInKSA/IFN0cmluZyh0KSA6ICcnO1xyXG5cdFx0XHRcdH0pLmZpbHRlcigodCk6IHQgaXMgc3RyaW5nID0+IHR5cGVvZiB0ID09PSAnc3RyaW5nJyAmJiB0Lmxlbmd0aCA+IDApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHR5cGVvZiB0YWdEYXRhID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdGFnRGF0YSA9PT0gJ251bWJlcicpIHtcclxuXHRcdFx0XHRkaXNwbGF5VGFncyA9IFtTdHJpbmcodGFnRGF0YSldO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBDcmVhdGUgYmFzZSBjYXJkIGRhdGFcclxuXHRjb25zdCBjYXJkRGF0YTogQ2FyZERhdGEgPSB7XHJcblx0XHRwYXRoLFxyXG5cdFx0bmFtZTogZmlsZU5hbWUsXHJcblx0XHR0aXRsZSxcclxuXHRcdHRhZ3MsXHJcblx0XHR5YW1sVGFncyxcclxuXHRcdGN0aW1lLFxyXG5cdFx0bXRpbWUsXHJcblx0XHRmb2xkZXJQYXRoLFxyXG5cdFx0c25pcHBldCxcclxuXHRcdGltYWdlVXJsLFxyXG5cdFx0aGFzSW1hZ2VBdmFpbGFibGU6IGhhc0ltYWdlQXZhaWxhYmxlIHx8IGZhbHNlLFxyXG5cdFx0ZGlzcGxheVRhZ3M6IGRpc3BsYXlUYWdzLmxlbmd0aCA+IDAgPyBkaXNwbGF5VGFncyA6IHVuZGVmaW5lZFxyXG5cdH07XHJcblxyXG5cdC8vIFJlc29sdmUgcHJvcGVydGllc1xyXG5cdGNvbnN0IHByb3BzID0gW1xyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MSxcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTIsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkzLFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NCxcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTUsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk2LFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NyxcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTgsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXk5LFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTAsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMSxcclxuXHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTEyLFxyXG5cdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTMsXHJcblx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxNFxyXG5cdF07XHJcblxyXG5cdC8vIERldGVjdCBkdXBsaWNhdGVzXHJcblx0Y29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG5cdGNvbnN0IGVmZmVjdGl2ZVByb3BzID0gcHJvcHMubWFwKHByb3AgPT4ge1xyXG5cdFx0aWYgKCFwcm9wIHx8IHByb3AgPT09ICcnKSByZXR1cm4gJyc7XHJcblx0XHRpZiAoc2Vlbi5oYXMocHJvcCkpIHJldHVybiAnJztcclxuXHRcdHNlZW4uYWRkKHByb3ApO1xyXG5cdFx0cmV0dXJuIHByb3A7XHJcblx0fSk7XHJcblxyXG5cdC8vIFN0b3JlIHByb3BlcnR5IG5hbWVzXHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lMSA9IGVmZmVjdGl2ZVByb3BzWzBdIHx8IHVuZGVmaW5lZDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eU5hbWUyID0gZWZmZWN0aXZlUHJvcHNbMV0gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTMgPSBlZmZlY3RpdmVQcm9wc1syXSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lNCA9IGVmZmVjdGl2ZVByb3BzWzNdIHx8IHVuZGVmaW5lZDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eU5hbWU1ID0gZWZmZWN0aXZlUHJvcHNbNF0gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTYgPSBlZmZlY3RpdmVQcm9wc1s1XSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lNyA9IGVmZmVjdGl2ZVByb3BzWzZdIHx8IHVuZGVmaW5lZDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eU5hbWU4ID0gZWZmZWN0aXZlUHJvcHNbN10gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTkgPSBlZmZlY3RpdmVQcm9wc1s4XSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lMTAgPSBlZmZlY3RpdmVQcm9wc1s5XSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lMTEgPSBlZmZlY3RpdmVQcm9wc1sxMF0gfHwgdW5kZWZpbmVkO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5TmFtZTEyID0gZWZmZWN0aXZlUHJvcHNbMTFdIHx8IHVuZGVmaW5lZDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eU5hbWUxMyA9IGVmZmVjdGl2ZVByb3BzWzEyXSB8fCB1bmRlZmluZWQ7XHJcblx0Y2FyZERhdGEucHJvcGVydHlOYW1lMTQgPSBlZmZlY3RpdmVQcm9wc1sxM10gfHwgdW5kZWZpbmVkO1xyXG5cclxuXHQvLyBSZXNvbHZlIHByb3BlcnR5IHZhbHVlc1xyXG5cdC8vIFJlc29sdmUgcHJvcGVydHkgdmFsdWVzIChhc3luYyBmb3IgTURYIHN1cHBvcnQsIGJ1dCB1c2VzIGNhY2hlIHdoZW4gYXZhaWxhYmxlKVxyXG5cdGNhcmREYXRhLnByb3BlcnR5MSA9IGVmZmVjdGl2ZVByb3BzWzBdID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1swXSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblx0Y2FyZERhdGEucHJvcGVydHkyID0gZWZmZWN0aXZlUHJvcHNbMV0gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzFdLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTMgPSBlZmZlY3RpdmVQcm9wc1syXSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbMl0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5NCA9IGVmZmVjdGl2ZVByb3BzWzNdID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1szXSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblx0Y2FyZERhdGEucHJvcGVydHk1ID0gZWZmZWN0aXZlUHJvcHNbNF0gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzRdLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTYgPSBlZmZlY3RpdmVQcm9wc1s1XSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbNV0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5NyA9IGVmZmVjdGl2ZVByb3BzWzZdID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1s2XSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblx0Y2FyZERhdGEucHJvcGVydHk4ID0gZWZmZWN0aXZlUHJvcHNbN10gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzddLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTkgPSBlZmZlY3RpdmVQcm9wc1s4XSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbOF0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5MTAgPSBlZmZlY3RpdmVQcm9wc1s5XSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbOV0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5MTEgPSBlZmZlY3RpdmVQcm9wc1sxMF0gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzEwXSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblx0Y2FyZERhdGEucHJvcGVydHkxMiA9IGVmZmVjdGl2ZVByb3BzWzExXSA/IGF3YWl0IHJlc29sdmVCYXNlc1Byb3BlcnR5QXN5bmMoZWZmZWN0aXZlUHJvcHNbMTFdLCBlbnRyeSwgY2FyZERhdGEsIHNldHRpbmdzLCBhcHAsIG1keEZyb250bWF0dGVyQ2FjaGUpIDogbnVsbDtcclxuXHRjYXJkRGF0YS5wcm9wZXJ0eTEzID0gZWZmZWN0aXZlUHJvcHNbMTJdID8gYXdhaXQgcmVzb2x2ZUJhc2VzUHJvcGVydHlBc3luYyhlZmZlY3RpdmVQcm9wc1sxMl0sIGVudHJ5LCBjYXJkRGF0YSwgc2V0dGluZ3MsIGFwcCwgbWR4RnJvbnRtYXR0ZXJDYWNoZSkgOiBudWxsO1xyXG5cdGNhcmREYXRhLnByb3BlcnR5MTQgPSBlZmZlY3RpdmVQcm9wc1sxM10gPyBhd2FpdCByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKGVmZmVjdGl2ZVByb3BzWzEzXSwgZW50cnksIGNhcmREYXRhLCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKSA6IG51bGw7XHJcblxyXG5cdHJldHVybiBjYXJkRGF0YTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJhdGNoIHRyYW5zZm9ybSBCYXNlcyBlbnRyaWVzIHRvIENhcmREYXRhIGFycmF5XHJcbiAqIFN1cHBvcnRzIE1EWCBmaWxlcyB2aWEgbWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmdcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0cmFuc2Zvcm1CYXNlc0VudHJpZXMoXHJcblx0ZW50cmllczogQmFzZXNFbnRyeVtdLFxyXG5cdHNldHRpbmdzOiBDTVNTZXR0aW5ncyxcclxuXHRzb3J0TWV0aG9kOiBzdHJpbmcsXHJcblx0aXNTaHVmZmxlZDogYm9vbGVhbixcclxuXHRzbmlwcGV0czogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcclxuXHRpbWFnZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPixcclxuXHRoYXNJbWFnZUF2YWlsYWJsZTogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4sXHJcblx0YXBwPzogQXBwLFxyXG5cdG1keEZyb250bWF0dGVyQ2FjaGU/OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+XHJcbik6IFByb21pc2U8Q2FyZERhdGFbXT4ge1xyXG5cdHJldHVybiBQcm9taXNlLmFsbChlbnRyaWVzLm1hcChlbnRyeSA9PiBiYXNlc0VudHJ5VG9DYXJkRGF0YShcclxuXHRcdGVudHJ5LFxyXG5cdFx0c2V0dGluZ3MsXHJcblx0XHRzb3J0TWV0aG9kLFxyXG5cdFx0aXNTaHVmZmxlZCxcclxuXHRcdHNuaXBwZXRzW2VudHJ5LmZpbGUucGF0aF0sXHJcblx0XHRpbWFnZXNbZW50cnkuZmlsZS5wYXRoXSxcclxuXHRcdGhhc0ltYWdlQXZhaWxhYmxlW2VudHJ5LmZpbGUucGF0aF0sXHJcblx0XHRhcHAsXHJcblx0XHRtZHhGcm9udG1hdHRlckNhY2hlXHJcblx0KSkpO1xyXG59XHJcblxyXG4vKipcclxuICogUmVzb2x2ZSBwcm9wZXJ0eSB2YWx1ZSBmb3IgQmFzZXMgZW50cnkgKGFzeW5jIHZlcnNpb24gd2l0aCBNRFggc3VwcG9ydClcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXNvbHZlQmFzZXNQcm9wZXJ0eUFzeW5jKFxyXG5cdHByb3BlcnR5TmFtZTogc3RyaW5nLFxyXG5cdGVudHJ5OiBCYXNlc0VudHJ5LFxyXG5cdGNhcmREYXRhOiBDYXJkRGF0YSxcclxuXHRzZXR0aW5nczogQ01TU2V0dGluZ3MsXHJcblx0YXBwPzogQXBwLFxyXG5cdG1keEZyb250bWF0dGVyQ2FjaGU/OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+XHJcbik6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG5cdGlmICghcHJvcGVydHlOYW1lIHx8IHByb3BlcnR5TmFtZSA9PT0gJycpIHtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0Ly8gSGFuZGxlIHNwZWNpYWwgcHJvcGVydGllc1xyXG5cdGlmIChwcm9wZXJ0eU5hbWUgPT09ICdmaWxlLnBhdGgnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUgcGF0aCcpIHtcclxuXHRcdHJldHVybiBjYXJkRGF0YS5mb2xkZXJQYXRoIHx8IG51bGw7XHJcblx0fVxyXG5cclxuXHRpZiAocHJvcGVydHlOYW1lID09PSAndGFncycgfHwgcHJvcGVydHlOYW1lID09PSAnbm90ZS50YWdzJykge1xyXG5cdFx0cmV0dXJuIGNhcmREYXRhLnlhbWxUYWdzLmxlbmd0aCA+IDAgPyAndGFncycgOiBudWxsO1xyXG5cdH1cclxuXHJcblx0aWYgKHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUudGFncycgfHwgcHJvcGVydHlOYW1lID09PSAnZmlsZSB0YWdzJykge1xyXG5cdFx0cmV0dXJuIGNhcmREYXRhLnRhZ3MubGVuZ3RoID4gMCA/ICd0YWdzJyA6IG51bGw7XHJcblx0fVxyXG5cclxuXHRpZiAocHJvcGVydHlOYW1lID09PSAnZmlsZS5jdGltZScgfHwgcHJvcGVydHlOYW1lID09PSAnY3JlYXRlZCB0aW1lJykge1xyXG5cdFx0cmV0dXJuIG5ldyBEYXRlKGNhcmREYXRhLmN0aW1lKS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuXHR9XHJcblxyXG5cdGlmIChwcm9wZXJ0eU5hbWUgPT09ICdmaWxlLm10aW1lJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdtb2RpZmllZCB0aW1lJykge1xyXG5cdFx0cmV0dXJuIG5ldyBEYXRlKGNhcmREYXRhLm10aW1lKS50b0xvY2FsZURhdGVTdHJpbmcoKTtcclxuXHR9XHJcblxyXG5cdC8vIEdlbmVyaWMgcHJvcGVydHk6IHJlYWQgZnJvbSBmcm9udG1hdHRlclxyXG5cdC8vIEZvciBNRFggZmlsZXMsIGNoZWNrIGNhY2hlIGZpcnN0IHRvIGF2b2lkIGFzeW5jIGxvYWRpbmdcclxuXHRsZXQgdmFsdWU6IHVua25vd24gPSBudWxsO1xyXG5cdGlmIChhcHApIHtcclxuXHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XHJcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4JyAmJiBtZHhGcm9udG1hdHRlckNhY2hlKSB7XHJcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gbWR4RnJvbnRtYXR0ZXJDYWNoZVtlbnRyeS5maWxlLnBhdGhdO1xyXG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0XHQvLyBTdHJpcCBcIm5vdGUuXCIgcHJlZml4IGlmIHByZXNlbnRcclxuXHRcdFx0XHRjb25zdCBjbGVhblByb3AgPSBwcm9wZXJ0eU5hbWUuc3RhcnRzV2l0aCgnbm90ZS4nKSA/IHByb3BlcnR5TmFtZS5zdWJzdHJpbmcoNSkgOiBwcm9wZXJ0eU5hbWU7XHJcblx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJWYWx1ZSA9IGZyb250bWF0dGVyW2NsZWFuUHJvcF07XHJcblx0XHRcdFx0aWYgKGZyb250bWF0dGVyVmFsdWUgIT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0Ly8gUmV0dXJuIGluIEJhc2VzIEFQSSBmb3JtYXQ6IHsgZGF0YTogdmFsdWUgfVxyXG5cdFx0XHRcdFx0dmFsdWUgPSB7IGRhdGE6IGZyb250bWF0dGVyVmFsdWUgfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gSWYgY2FjaGUgZGlkbid0IGhhdmUgaXQsIHVzZSB0aGUgYXN5bmMgbWV0aG9kXHJcblx0aWYgKCF2YWx1ZSkge1xyXG5cdFx0dmFsdWUgPSBhd2FpdCBnZXRGaXJzdEJhc2VzUHJvcGVydHlWYWx1ZShlbnRyeSwgcHJvcGVydHlOYW1lLCBhcHApO1xyXG5cdH1cclxuXHRpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDtcclxuXHJcblx0Ly8gVHlwZSBndWFyZCBmb3IgdmFsdWVcclxuXHRjb25zdCB2YWx1ZU9iaiA9IHZhbHVlIGFzIHsgZGF0ZT86IERhdGU7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsO1xyXG5cdGlmICghdmFsdWVPYmopIHJldHVybiBudWxsO1xyXG5cclxuXHQvLyBDaGVjayBpZiBpdCdzIGEgZGF0ZS9kYXRldGltZSB2YWx1ZVxyXG5cdGlmICgnZGF0ZScgaW4gdmFsdWVPYmogJiYgdmFsdWVPYmouZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuXHRcdHJldHVybiB2YWx1ZU9iai5kYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG5cdH1cclxuXHJcblx0Ly8gRm9yIG5vbi1kYXRlIHByb3BlcnRpZXMsIGV4dHJhY3QgLmRhdGFcclxuXHRjb25zdCBkYXRhID0gdmFsdWVPYmouZGF0YTtcclxuXHRcclxuXHQvLyBJTVBPUlRBTlQ6IFJldHVybiBcIlwiIGZvciBlbXB0eSAocHJvcGVydHkgZXhpc3RzIGJ1dCBpcyBlbXB0eSksIG51bGwgZm9yIG1pc3NpbmcgKHByb3BlcnR5IGRvZXNuJ3QgZXhpc3QpXHJcblx0Ly8gVGhpcyBtYXRjaGVzIER5bmFtaWMgVmlld3MgYmVoYXZpb3IgZm9yIGhpZGUgbWlzc2luZy9lbXB0eSBwcm9wZXJ0aWVzXHJcblx0aWYgKGRhdGEgPT0gbnVsbCkge1xyXG5cdFx0cmV0dXJuIG51bGw7IC8vIFByb3BlcnR5IGRvZXNuJ3QgZXhpc3RcclxuXHR9XHJcblx0XHJcblx0aWYgKGRhdGEgPT09ICcnKSB7XHJcblx0XHRyZXR1cm4gXCJcIjsgLy8gUHJvcGVydHkgZXhpc3RzIGJ1dCBpcyBlbXB0eVxyXG5cdH1cclxuXHJcblx0Ly8gSGFuZGxlIGFycmF5cyAoZS5nLiwgYWxpYXNlcywgbGlzdHMpXHJcblx0Ly8gQ2hlY2sgaWYgZGF0YSBpcyBhbHJlYWR5IGEgc3RyaW5nIHRoYXQgbWlnaHQgYmUgZHVwbGljYXRlZFxyXG5cdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcclxuXHRcdGNvbnN0IHRyaW1tZWQgPSBkYXRhLnRyaW0oKTtcclxuXHRcdGlmICh0cmltbWVkLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gXCJcIjsgLy8gRW1wdHkgc3RyaW5nXHJcblx0XHR9XHJcblx0XHQvLyBSZW1vdmUgZHVwbGljYXRpb24gaWYgcHJlc2VudCAoaGFuZGxlcyBjYXNlcyB3aGVyZSBCYXNlcyByZXR1cm5zIGR1cGxpY2F0ZWQgc3RyaW5ncylcclxuXHRcdHJldHVybiByZW1vdmVEdXBsaWNhdGlvbih0cmltbWVkKTtcclxuXHR9XHJcblx0XHJcblx0aWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcclxuXHRcdGlmIChkYXRhLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRyZXR1cm4gXCJcIjsgLy8gRW1wdHkgYXJyYXlcclxuXHRcdH1cclxuXHRcdC8vIENvbnZlcnQgYXJyYXkgaXRlbXMgdG8gc3RyaW5ncyBhbmQgam9pbiwgcmVtb3ZpbmcgZHVwbGljYXRlc1xyXG5cdFx0Y29uc3QgdW5pcXVlSXRlbXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHRcdGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcclxuXHRcdFxyXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGRhdGEpIHtcclxuXHRcdFx0bGV0IHN0cjogc3RyaW5nO1xyXG5cdFx0XHRpZiAoaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgJ2RhdGEnIGluIGl0ZW0pIHtcclxuXHRcdFx0XHRjb25zdCBpdGVtRGF0YSA9IChpdGVtIGFzIHsgZGF0YTogdW5rbm93biB9KS5kYXRhO1xyXG5cdFx0XHRcdC8vIEhhbmRsZSBuZXN0ZWQgZGF0YSBzdHJ1Y3R1cmVzIC0gaWYgZGF0YSBpdHNlbGYgaXMgYW4gb2JqZWN0IHdpdGggZGF0YSwgZXh0cmFjdCByZWN1cnNpdmVseVxyXG5cdFx0XHRcdGlmIChpdGVtRGF0YSAmJiB0eXBlb2YgaXRlbURhdGEgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGl0ZW1EYXRhKSAmJiAnZGF0YScgaW4gaXRlbURhdGEpIHtcclxuXHRcdFx0XHRcdHN0ciA9IFN0cmluZygoaXRlbURhdGEgYXMgeyBkYXRhOiB1bmtub3duIH0pLmRhdGEpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRzdHIgPSBTdHJpbmcoaXRlbURhdGEpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyAmJiBpdGVtICE9PSBudWxsKSB7XHJcblx0XHRcdFx0Ly8gSWYgaXRlbSBpcyBhbiBvYmplY3QgYnV0IGRvZXNuJ3QgaGF2ZSAnZGF0YScsIHRyeSB0byBleHRyYWN0IHZhbHVlIGRpcmVjdGx5XHJcblx0XHRcdFx0Ly8gVGhpcyBoYW5kbGVzIGNhc2VzIHdoZXJlIEJhc2VzIG1pZ2h0IHJldHVybiB7dmFsdWU6IFwiLi4uXCJ9IG9yIHNpbWlsYXJcclxuXHRcdFx0XHRzdHIgPSBTdHJpbmcoaXRlbSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0c3RyID0gU3RyaW5nKGl0ZW0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBSZW1vdmUgZHVwbGljYXRpb24gQkVGT1JFIGNoZWNraW5nIHVuaXF1ZW5lc3MgKGhhbmRsZXMgY2FzZXMgd2hlcmUgQmFzZXMgcmV0dXJucyBkdXBsaWNhdGVkIHN0cmluZ3MpXHJcblx0XHRcdGNvbnN0IHRyaW1tZWQgPSBzdHIudHJpbSgpO1xyXG5cdFx0XHRpZiAodHJpbW1lZCAmJiB0cmltbWVkICE9PSAnJykge1xyXG5cdFx0XHRcdGNvbnN0IGRlZHVwbGljYXRlZCA9IHJlbW92ZUR1cGxpY2F0aW9uKHRyaW1tZWQpO1xyXG5cdFx0XHRcdGlmIChkZWR1cGxpY2F0ZWQgJiYgZGVkdXBsaWNhdGVkICE9PSAnJyAmJiAhdW5pcXVlSXRlbXMuaGFzKGRlZHVwbGljYXRlZCkpIHtcclxuXHRcdFx0XHRcdHVuaXF1ZUl0ZW1zLmFkZChkZWR1cGxpY2F0ZWQpO1xyXG5cdFx0XHRcdFx0cmVzdWx0LnB1c2goZGVkdXBsaWNhdGVkKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdHJldHVybiByZXN1bHQuam9pbihnZXRMaXN0U2VwYXJhdG9yKCkpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHQvLyBDb252ZXJ0IHRvIHN0cmluZ1xyXG5cdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcclxuXHRcdGxldCBzdHIgPSBkYXRhLnRyaW0oKTtcclxuXHRcdGlmIChzdHIubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBSZW1vdmUgYW55IGR1cGxpY2F0aW9uXHJcblx0XHRyZXR1cm4gcmVtb3ZlRHVwbGljYXRpb24oc3RyKTtcclxuXHR9XHJcblx0XHJcblx0aWYgKHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgZGF0YSA9PT0gJ2Jvb2xlYW4nKSB7XHJcblx0XHRyZXR1cm4gU3RyaW5nKGRhdGEpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbiIsICIvKipcclxuICogUHJvcGVydHkgdXRpbGl0eSBmdW5jdGlvbnNcclxuICogUG9ydGVkIGZyb20gRHluYW1pYyBWaWV3c1xyXG4gKiBVcGRhdGVkIHRvIHN1cHBvcnQgTURYIGZpbGVzIHZpYSBtYW51YWwgZnJvbnRtYXR0ZXIgcGFyc2luZ1xyXG4gKi9cclxuXHJcbmltcG9ydCB0eXBlIHsgQXBwLCBCYXNlc0VudHJ5IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgZ2V0RmlsZUZyb250bWF0dGVyIH0gZnJvbSAnLi9mcm9udG1hdHRlci1oZWxwZXInO1xyXG5cclxuLyoqXHJcbiAqIEdldCBmaXJzdCBub24tZW1wdHkgcHJvcGVydHkgdmFsdWUgZnJvbSBjb21tYS1zZXBhcmF0ZWQgbGlzdCAoQmFzZXMpXHJcbiAqIFN1cHBvcnRzIE1EWCBmaWxlcyB2aWEgbWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmcgd2hlbiBCYXNlcyBBUEkgZmFpbHNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGaXJzdEJhc2VzUHJvcGVydHlWYWx1ZShcclxuXHRlbnRyeTogQmFzZXNFbnRyeSwgXHJcblx0cHJvcGVydHlTdHJpbmc6IHN0cmluZyxcclxuXHRhcHA/OiBBcHBcclxuKTogUHJvbWlzZTx1bmtub3duPiB7XHJcblx0aWYgKCFwcm9wZXJ0eVN0cmluZyB8fCAhcHJvcGVydHlTdHJpbmcudHJpbSgpKSByZXR1cm4gbnVsbDtcclxuXHJcblx0Y29uc3QgcHJvcGVydGllcyA9IHByb3BlcnR5U3RyaW5nLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpLmZpbHRlcihwID0+IHApO1xyXG5cclxuXHRmb3IgKGNvbnN0IHByb3Agb2YgcHJvcGVydGllcykge1xyXG5cdFx0Y29uc3QgdmFsdWUgPSBlbnRyeS5nZXRWYWx1ZShwcm9wIGFzIGBub3RlLiR7c3RyaW5nfWAgfCBgZm9ybXVsYS4ke3N0cmluZ31gIHwgYGZpbGUuJHtzdHJpbmd9YCk7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgcHJvcGVydHkgZXhpc3RzIGFuZCBoYXMgYSB2YWx1ZVxyXG5cdFx0Y29uc3QgdmFsdWVPYmogPSB2YWx1ZSBhcyB7IGRhdGU/OiBEYXRlOyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHRcdGNvbnN0IHByb3BlcnR5RXhpc3RzID0gdmFsdWVPYmogJiYgKFxyXG5cdFx0XHQoJ2RhdGUnIGluIHZhbHVlT2JqICYmIHZhbHVlT2JqLmRhdGUgaW5zdGFuY2VvZiBEYXRlKSB8fFxyXG5cdFx0XHQoJ2RhdGEnIGluIHZhbHVlT2JqICYmIHZhbHVlT2JqLmRhdGEgIT0gbnVsbClcclxuXHRcdCk7XHJcblxyXG5cdFx0aWYgKHByb3BlcnR5RXhpc3RzKSB7XHJcblx0XHRcdHJldHVybiB2YWx1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGb3IgTURYIGZpbGVzLCBmYWxsYmFjayB0byBtYW51YWwgZnJvbnRtYXR0ZXIgcGFyc2luZyBpZiBCYXNlcyBBUEkgcmV0dXJuZWQgbnVsbFxyXG5cdFx0aWYgKCFwcm9wZXJ0eUV4aXN0cyAmJiBhcHApIHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21keCcpIHtcclxuXHRcdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcihhcHAsIGZpbGUpO1xyXG5cdFx0XHRcdGlmIChmcm9udG1hdHRlcikge1xyXG5cdFx0XHRcdFx0Ly8gU3RyaXAgXCJub3RlLlwiIHByZWZpeCBpZiBwcmVzZW50XHJcblx0XHRcdFx0XHRjb25zdCBjbGVhblByb3AgPSBwcm9wLnN0YXJ0c1dpdGgoJ25vdGUuJykgPyBwcm9wLnN1YnN0cmluZyg1KSA6IHByb3A7XHJcblx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlclZhbHVlID0gZnJvbnRtYXR0ZXJbY2xlYW5Qcm9wXTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKGZyb250bWF0dGVyVmFsdWUgIT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0XHQvLyBSZXR1cm4gaW4gQmFzZXMgQVBJIGZvcm1hdDogeyBkYXRhOiB2YWx1ZSB9XHJcblx0XHRcdFx0XHRcdHJldHVybiB7IGRhdGE6IGZyb250bWF0dGVyVmFsdWUgfTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGZpcnN0IGltYWdlIHZhbHVlIGZyb20gcHJvcGVydHkgKEJhc2VzKVxyXG4gKiBPbmx5IGFjY2VwdHMgdGV4dCBhbmQgbGlzdCBwcm9wZXJ0eSB0eXBlcyBjb250YWluaW5nIGltYWdlIHBhdGhzL1VSTHNcclxuICogUmV0dXJucyBmaXJzdCBpbWFnZSBwYXRoL1VSTCBmb3VuZCwgb3IgZW1wdHkgYXJyYXkgaWYgbm9uZVxyXG4gKiBTdXBwb3J0cyBNRFggZmlsZXMgdmlhIG1hbnVhbCBmcm9udG1hdHRlciBwYXJzaW5nIHdoZW4gQmFzZXMgQVBJIGZhaWxzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsQmFzZXNJbWFnZVByb3BlcnR5VmFsdWVzKFxyXG5cdGVudHJ5OiBCYXNlc0VudHJ5LCBcclxuXHRwcm9wZXJ0eVN0cmluZzogc3RyaW5nLFxyXG5cdGFwcD86IEFwcFxyXG4pOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcblx0aWYgKCFwcm9wZXJ0eVN0cmluZyB8fCAhcHJvcGVydHlTdHJpbmcudHJpbSgpKSByZXR1cm4gW107XHJcblxyXG5cdC8vIFVzZSBmaXJzdCBwcm9wZXJ0eSBvbmx5IChub3QgY29tbWEtc2VwYXJhdGVkKVxyXG5cdGNvbnN0IHByb3AgPSBwcm9wZXJ0eVN0cmluZy5zcGxpdCgnLCcpWzBdLnRyaW0oKTtcclxuXHRpZiAoIXByb3ApIHJldHVybiBbXTtcclxuXHJcblx0Y29uc3QgdmFsdWUgPSBlbnRyeS5nZXRWYWx1ZShwcm9wIGFzIGBub3RlLiR7c3RyaW5nfWAgfCBgZm9ybXVsYS4ke3N0cmluZ31gIHwgYGZpbGUuJHtzdHJpbmd9YCkgYXMgeyBkYXRhPzogdW5rbm93bjsgZGF0ZT86IERhdGUgfSB8IG51bGw7XHJcblxyXG5cdGxldCBkYXRhOiB1bmtub3duID0gbnVsbDtcclxuXHJcblx0Ly8gSWYgQmFzZXMgQVBJIHJldHVybmVkIGEgdmFsdWUsIHVzZSBpdFxyXG5cdGlmICh2YWx1ZSAmJiAnZGF0YScgaW4gdmFsdWUpIHtcclxuXHRcdGRhdGEgPSB2YWx1ZS5kYXRhO1xyXG5cdH0gZWxzZSBpZiAoYXBwKSB7XHJcblx0XHQvLyBGb3IgTURYIGZpbGVzLCBmYWxsYmFjayB0byBtYW51YWwgZnJvbnRtYXR0ZXIgcGFyc2luZ1xyXG5cdFx0Y29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZW50cnkuZmlsZS5wYXRoKTtcclxuXHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gYXdhaXQgZ2V0RmlsZUZyb250bWF0dGVyKGFwcCwgZmlsZSk7XHJcblx0XHRcdGlmIChmcm9udG1hdHRlcikge1xyXG5cdFx0XHRcdC8vIFN0cmlwIFwibm90ZS5cIiBwcmVmaXggaWYgcHJlc2VudFxyXG5cdFx0XHRcdGNvbnN0IGNsZWFuUHJvcCA9IHByb3Auc3RhcnRzV2l0aCgnbm90ZS4nKSA/IHByb3Auc3Vic3RyaW5nKDUpIDogcHJvcDtcclxuXHRcdFx0XHRkYXRhID0gZnJvbnRtYXR0ZXJbY2xlYW5Qcm9wXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gU2tpcCBpZiBwcm9wZXJ0eSBkb2Vzbid0IGV4aXN0XHJcblx0aWYgKGRhdGEgPT0gbnVsbCkgcmV0dXJuIFtdO1xyXG5cclxuXHRjb25zdCBpbWFnZXM6IHN0cmluZ1tdID0gW107XHJcblxyXG5cdGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcblx0XHQvLyBMaXN0IHByb3BlcnR5IC0gZ2V0IGFsbCB2YWx1ZXNcclxuXHRcdGZvciAoY29uc3QgaXRlbSBvZiBkYXRhKSB7XHJcblx0XHRcdGlmICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGl0ZW0gPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0Y29uc3Qgc3RyID0gU3RyaW5nKGl0ZW0pO1xyXG5cdFx0XHRcdGlmIChzdHIgJiYgc3RyLnRyaW0oKSkge1xyXG5cdFx0XHRcdFx0aW1hZ2VzLnB1c2goc3RyKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKGRhdGEgIT09ICcnKSB7XHJcblx0XHQvLyBUZXh0IHByb3BlcnR5IC0gc2luZ2xlIHZhbHVlXHJcblx0XHRpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHRjb25zdCBzdHIgPSBTdHJpbmcoZGF0YSk7XHJcblx0XHRcdGlmIChzdHIudHJpbSgpKSB7XHJcblx0XHRcdFx0aW1hZ2VzLnB1c2goc3RyKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIGltYWdlcztcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc29sdmUgYSBCYXNlcyBwcm9wZXJ0eSB2YWx1ZSB0byBhIHN0cmluZ1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVCYXNlc1Byb3BlcnR5KFxyXG5cdHByb3BlcnR5TmFtZTogc3RyaW5nLFxyXG5cdGVudHJ5OiBCYXNlc0VudHJ5LFxyXG5cdGNhcmQ6IHsgcGF0aDogc3RyaW5nOyBwcm9wZXJ0aWVzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB9XHJcbik6IHN0cmluZyB8IG51bGwge1xyXG5cdGlmICghcHJvcGVydHlOYW1lIHx8IHByb3BlcnR5TmFtZSA9PT0gJycpIHJldHVybiBudWxsO1xyXG5cclxuXHQvLyBIYW5kbGUgc3BlY2lhbCBwcm9wZXJ0aWVzXHJcblx0aWYgKHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUucGF0aCcgfHwgcHJvcGVydHlOYW1lID09PSAncGF0aCcgfHwgcHJvcGVydHlOYW1lID09PSAnZmlsZSBwYXRoJykge1xyXG5cdFx0cmV0dXJuIGNhcmQucGF0aDtcclxuXHR9XHJcblxyXG5cdGlmIChwcm9wZXJ0eU5hbWUgPT09ICdmaWxlLnRhZ3MnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUgdGFncycpIHtcclxuXHRcdC8vIFJldHVybiB0YWdzIGFzIGNvbW1hLXNlcGFyYXRlZCBzdHJpbmdcclxuXHRcdGNvbnN0IHRhZ3MgPSBjYXJkLnByb3BlcnRpZXMudGFncztcclxuXHRcdGlmIChBcnJheS5pc0FycmF5KHRhZ3MpKSB7XHJcblx0XHRcdHJldHVybiB0YWdzLmpvaW4oJywgJyk7XHJcblx0XHR9XHJcblx0XHRpZiAodGFncyAmJiB0eXBlb2YgdGFncyA9PT0gJ29iamVjdCcgJiYgdGFncyAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheSh0YWdzKSkge1xyXG5cdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodGFncyk7XHJcblx0XHR9XHJcblx0XHRpZiAodGFncyAhPT0gbnVsbCAmJiB0YWdzICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiB0YWdzID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdGFncyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHRhZ3MgPT09ICdib29sZWFuJykpIHtcclxuXHRcdFx0cmV0dXJuIFN0cmluZyh0YWdzKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0aWYgKHByb3BlcnR5TmFtZSA9PT0gJ3RhZ3MnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ25vdGUudGFncycpIHtcclxuXHRcdGNvbnN0IHRhZ3MgPSBjYXJkLnByb3BlcnRpZXMudGFncztcclxuXHRcdGlmIChBcnJheS5pc0FycmF5KHRhZ3MpKSB7XHJcblx0XHRcdHJldHVybiB0YWdzLmpvaW4oJywgJyk7XHJcblx0XHR9XHJcblx0XHRpZiAodGFncyAmJiB0eXBlb2YgdGFncyA9PT0gJ29iamVjdCcgJiYgdGFncyAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheSh0YWdzKSkge1xyXG5cdFx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodGFncyk7XHJcblx0XHR9XHJcblx0XHRpZiAodGFncyAhPT0gbnVsbCAmJiB0YWdzICE9PSB1bmRlZmluZWQgJiYgKHR5cGVvZiB0YWdzID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdGFncyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHRhZ3MgPT09ICdib29sZWFuJykpIHtcclxuXHRcdFx0cmV0dXJuIFN0cmluZyh0YWdzKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IHZhbHVlIGZyb20gQmFzZXNFbnRyeVxyXG5cdHRyeSB7XHJcblx0XHRjb25zdCB2YWx1ZSA9IGVudHJ5LmdldFZhbHVlKHByb3BlcnR5TmFtZSBhcyBgbm90ZS4ke3N0cmluZ31gIHwgYGZvcm11bGEuJHtzdHJpbmd9YCB8IGBmaWxlLiR7c3RyaW5nfWApIGFzIHsgZGF0YT86IHVua25vd247IGRhdGU/OiBEYXRlIH0gfCBudWxsO1xyXG5cdFx0XHJcblx0XHRpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDtcclxuXHJcblx0XHQvLyBIYW5kbGUgZGF0ZSB2YWx1ZXNcclxuXHRcdGlmICgnZGF0ZScgaW4gdmFsdWUgJiYgdmFsdWUuZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuXHRcdFx0cmV0dXJuIHZhbHVlLmRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSGFuZGxlIGRhdGEgdmFsdWVzXHJcblx0XHRpZiAoJ2RhdGEnIGluIHZhbHVlKSB7XHJcblx0XHRcdGNvbnN0IGRhdGEgPSB2YWx1ZS5kYXRhO1xyXG5cdFx0XHRpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xyXG5cdFx0XHRcdHJldHVybiBkYXRhLm1hcChTdHJpbmcpLmpvaW4oJywgJyk7XHJcblx0XHRcdH1cclxuXHRcdGlmIChkYXRhICE9IG51bGwgJiYgZGF0YSAhPT0gJycpIHtcclxuXHRcdFx0aWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcblx0XHRcdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGRhdGEgPT09ICdudW1iZXInIHx8IHR5cGVvZiBkYXRhID09PSAnYm9vbGVhbicpIHtcclxuXHRcdFx0XHRyZXR1cm4gU3RyaW5nKGRhdGEpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuXHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9IGNhdGNoIHtcclxuXHRcdC8vIEZhbGxiYWNrIHRvIGNhcmQgcHJvcGVydGllc1xyXG5cdFx0Y29uc3QgcHJvcFZhbHVlID0gY2FyZC5wcm9wZXJ0aWVzW3Byb3BlcnR5TmFtZV07XHJcblx0XHRpZiAocHJvcFZhbHVlICE9PSB1bmRlZmluZWQgJiYgcHJvcFZhbHVlICE9PSBudWxsKSB7XHJcblx0XHRcdGlmIChBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHtcclxuXHRcdFx0XHRyZXR1cm4gcHJvcFZhbHVlLm1hcChTdHJpbmcpLmpvaW4oJywgJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHR5cGVvZiBwcm9wVmFsdWUgPT09ICdib29sZWFuJykge1xyXG5cdFx0XHRcdHJldHVybiBwcm9wVmFsdWUgPyAnWWVzJyA6ICdObyc7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHR5cGVvZiBwcm9wVmFsdWUgPT09ICdvYmplY3QnICYmIHByb3BWYWx1ZSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShwcm9wVmFsdWUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0eXBlb2YgcHJvcFZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgcHJvcFZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgcHJvcFZhbHVlID09PSAnYm9vbGVhbicpIHtcclxuXHRcdFx0XHRyZXR1cm4gU3RyaW5nKHByb3BWYWx1ZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHByb3BWYWx1ZSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0IHByb3BlcnR5IG5hbWUgdG8gcmVhZGFibGUgbGFiZWxcclxuICogVXNlcyBCYXNlcyBjb25maWcuZ2V0RGlzcGxheU5hbWUoKSBtZXRob2QgKHNhbWUgYXMgRHluYW1pYyBWaWV3cylcclxuICogXHJcbiAqIEBwYXJhbSBwcm9wZXJ0eU5hbWUgLSBUaGUgcHJvcGVydHkgbmFtZSAoZS5nLiwgXCJmb3JtdWxhLlNsdWdcIilcclxuICogQHBhcmFtIGFwcCAtIE9ic2lkaWFuIGFwcCBpbnN0YW5jZSAodW51c2VkLCBrZXB0IGZvciBjb21wYXRpYmlsaXR5KVxyXG4gKiBAcGFyYW0gYmFzZXNDb25maWcgLSBCYXNlcyBjb25maWcgb2JqZWN0IHRoYXQgaGFzIGdldERpc3BsYXlOYW1lIG1ldGhvZFxyXG4gKiBAcGFyYW0gYmFzZXNDb250cm9sbGVyIC0gT3B0aW9uYWwgQmFzZXMgY29udHJvbGxlciAodW51c2VkLCBrZXB0IGZvciBjb21wYXRpYmlsaXR5KVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb3BlcnR5TGFiZWwoXHJcblx0cHJvcGVydHlOYW1lOiBzdHJpbmcsIFxyXG5cdGFwcD86IEFwcCwgXHJcblx0YmFzZXNDb25maWc/OiB7IGdldD86IChrZXk6IHN0cmluZykgPT4gdW5rbm93biB9LFxyXG5cdGJhc2VzQ29udHJvbGxlcj86IHsgZ2V0UHJvcGVydHlEaXNwbGF5TmFtZT86IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyB9XHJcbik6IHN0cmluZyB7XHJcblx0aWYgKCFwcm9wZXJ0eU5hbWUgfHwgcHJvcGVydHlOYW1lID09PSAnJykgcmV0dXJuICcnO1xyXG5cclxuXHQvLyBVc2UgQmFzZXMgY29uZmlnLmdldERpc3BsYXlOYW1lKCkgbWV0aG9kIChzYW1lIGFzIER5bmFtaWMgVmlld3MpXHJcblx0aWYgKGJhc2VzQ29uZmlnKSB7XHJcblx0XHRjb25zdCBjb25maWdXaXRoRGlzcGxheU5hbWUgPSBiYXNlc0NvbmZpZyBhcyB7IGdldERpc3BsYXlOYW1lPzogKG5hbWU6IHN0cmluZykgPT4gc3RyaW5nIH07XHJcblx0XHRpZiAodHlwZW9mIGNvbmZpZ1dpdGhEaXNwbGF5TmFtZS5nZXREaXNwbGF5TmFtZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IGRpc3BsYXlOYW1lID0gY29uZmlnV2l0aERpc3BsYXlOYW1lLmdldERpc3BsYXlOYW1lKHByb3BlcnR5TmFtZSk7XHJcblx0XHRcdFx0aWYgKGRpc3BsYXlOYW1lICYmIHR5cGVvZiBkaXNwbGF5TmFtZSA9PT0gJ3N0cmluZycgJiYgZGlzcGxheU5hbWUudHJpbSgpICE9PSAnJykge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGRpc3BsYXlOYW1lO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0Ly8gRmFsbCB0aHJvdWdoIHRvIHJldHVybiBwcm9wZXJ0eSBuYW1lXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEZhbGxiYWNrOiByZXR1cm4gcHJvcGVydHkgbmFtZSBhcy1pcyAoc2FtZSBhcyBEeW5hbWljIFZpZXdzKVxyXG5cdHJldHVybiBwcm9wZXJ0eU5hbWU7XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXHJcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIHRvIHJlYWQgU3R5bGUgU2V0dGluZ3MgdmFsdWVzIGZyb20gQ1NTIHZhcmlhYmxlcyBhbmQgYm9keSBjbGFzc2VzXHJcbiAqIEJhc2VkIG9uIER5bmFtaWMgVmlld3Mgc3R5bGUtc2V0dGluZ3MudHNcclxuICovXHJcblxyXG4vKipcclxuICogUmVhZCBhIENTUyB2YXJpYWJsZSB2YWx1ZSBmcm9tIHRoZSBkb2N1bWVudCBib2R5XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRDU1NWYXJpYWJsZShuYW1lOiBzdHJpbmcsIGRlZmF1bHRWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRjb25zdCB2YWx1ZSA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKS50cmltKCk7XHJcblx0cmV0dXJuIHZhbHVlIHx8IGRlZmF1bHRWYWx1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlIGEgQ1NTIHZhcmlhYmxlIGFzIGEgbnVtYmVyIChyZW1vdmluZyB1bml0cyBsaWtlICdweCcpXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRDU1NWYXJpYWJsZUFzTnVtYmVyKG5hbWU6IHN0cmluZywgZGVmYXVsdFZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xyXG5cdGNvbnN0IHZhbHVlID0gZ2V0Q1NTVmFyaWFibGUobmFtZSwgXCJcIik7XHJcblx0aWYgKCF2YWx1ZSkgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcclxuXHRjb25zdCBwYXJzZWQgPSBwYXJzZUZsb2F0KHZhbHVlKTtcclxuXHRyZXR1cm4gaXNOYU4ocGFyc2VkKSA/IGRlZmF1bHRWYWx1ZSA6IHBhcnNlZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGJvZHkgaGFzIGEgc3BlY2lmaWMgY2xhc3NcclxuICovXHJcbmZ1bmN0aW9uIGhhc0JvZHlDbGFzcyhjbGFzc05hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IG1pbmltdW0gZ3JpZCBjb2x1bW5zIGZyb20gQ1NTIHZhcmlhYmxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWluR3JpZENvbHVtbnMoKTogbnVtYmVyIHtcclxuXHRyZXR1cm4gZ2V0Q1NTVmFyaWFibGVBc051bWJlcihcIi0tYmFzZXMtY21zLW1pbi1ncmlkLWNvbHVtbnNcIiwgMSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgY2FyZCBzcGFjaW5nIGZyb20gQ1NTIHZhcmlhYmxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZFNwYWNpbmcoKTogbnVtYmVyIHtcclxuXHRyZXR1cm4gZ2V0Q1NTVmFyaWFibGVBc051bWJlcihcIi0tYmFzZXMtY21zLWNhcmQtc3BhY2luZ1wiLCA4KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBjYXJkIHBhZGRpbmcgY29udGFpbmVyIGZyb20gQ1NTIHZhcmlhYmxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FyZFBhZGRpbmdDb250YWluZXIoKTogbnVtYmVyIHtcclxuXHRyZXR1cm4gZ2V0Q1NTVmFyaWFibGVBc051bWJlcihcIi0tYmFzZXMtY21zLWNhcmQtcGFkZGluZy1jb250YWluZXJcIiwgMTIpO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGNhcmQgZWxlbWVudCBzcGFjaW5nIGZyb20gQ1NTIHZhcmlhYmxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWxlbWVudFNwYWNpbmcoKTogbnVtYmVyIHtcclxuXHRyZXR1cm4gZ2V0Q1NTVmFyaWFibGVBc051bWJlcihcIi0tYmFzZXMtY21zLWVsZW1lbnQtc3BhY2luZ1wiLCA4KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBjYXJkIHBhZGRpbmcgZnJvbSBDU1MgdmFyaWFibGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkUGFkZGluZygpOiBudW1iZXIge1xyXG5cdHJldHVybiBnZXRDU1NWYXJpYWJsZUFzTnVtYmVyKFwiLS1iYXNlcy1jbXMtY2FyZC1wYWRkaW5nXCIsIDEyKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBjYXJkIGJvcmRlciByYWRpdXMgZnJvbSBDU1MgdmFyaWFibGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkQm9yZGVyUmFkaXVzKCk6IG51bWJlciB7XHJcblx0cmV0dXJuIGdldENTU1ZhcmlhYmxlQXNOdW1iZXIoXCItLWJhc2VzLWNtcy1jYXJkLWJvcmRlci1yYWRpdXNcIiwgOCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBjYXJkIGJhY2tncm91bmQgaXMgZW5hYmxlZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc0NhcmRCYWNrZ3JvdW5kKCk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiBoYXNCb2R5Q2xhc3MoXCJiYXNlcy1jbXMtY2FyZC1iYWNrZ3JvdW5kXCIpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEdldCBsaXN0IHNlcGFyYXRvciBmcm9tIENTUyB2YXJpYWJsZVxyXG4gKiBSZXR1cm5zIHRoZSBzZXBhcmF0b3IgZm9yIGxpc3QtdHlwZSBwcm9wZXJ0aWVzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGlzdFNlcGFyYXRvcigpOiBzdHJpbmcge1xyXG5cdC8vIFJlYWQgd2l0aG91dCB0cmltIHRvIHByZXNlcnZlIHdoaXRlc3BhY2VcclxuXHRsZXQgdmFsdWUgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoXHJcblx0XHRcIi0tYmFzZXMtY21zLWxpc3Qtc2VwYXJhdG9yXCIsXHJcblx0KTtcclxuXHJcblx0Ly8gU3RyaXAgc3Vycm91bmRpbmcgcXVvdGVzIGlmIHByZXNlbnQgKFN0eWxlIFNldHRpbmdzIG9yIENTUyBkZWZhdWx0IGFkZHMgdGhlbSlcclxuXHRpZiAoXHJcblx0XHQodmFsdWUuc3RhcnRzV2l0aCgnXCInKSAmJiB2YWx1ZS5lbmRzV2l0aCgnXCInKSkgfHxcclxuXHRcdCh2YWx1ZS5zdGFydHNXaXRoKFwiJ1wiKSAmJiB2YWx1ZS5lbmRzV2l0aChcIidcIikpXHJcblx0KSB7XHJcblx0XHR2YWx1ZSA9IHZhbHVlLnNsaWNlKDEsIC0xKTtcclxuXHR9XHJcblxyXG5cdC8vIEZhbGxiYWNrIHRvIGRlZmF1bHQgaWYgZW1wdHkgKFN0eWxlIFNldHRpbmdzIHNob3dzIHBsYWNlaG9sZGVyIGJ1dCBkb2Vzbid0IHNldCB2YXJpYWJsZSlcclxuXHRyZXR1cm4gdmFsdWUgfHwgXCIsIFwiO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGVtcHR5IHZhbHVlIG1hcmtlciBmcm9tIENTUyB2YXJpYWJsZVxyXG4gKiBSZXR1cm5zIHRoZSBzeW1ib2wgZm9yIGVtcHR5IHByb3BlcnR5IHZhbHVlc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVtcHR5VmFsdWVNYXJrZXIoKTogc3RyaW5nIHtcclxuXHQvLyBSZWFkIHdpdGhvdXQgdHJpbSB0byBwcmVzZXJ2ZSB3aGl0ZXNwYWNlXHJcblx0bGV0IHZhbHVlID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKFxyXG5cdFx0XCItLWJhc2VzLWNtcy1lbXB0eS12YWx1ZS1tYXJrZXJcIixcclxuXHQpO1xyXG5cclxuXHQvLyBTdHJpcCBzdXJyb3VuZGluZyBxdW90ZXMgaWYgcHJlc2VudCAoU3R5bGUgU2V0dGluZ3Mgb3IgQ1NTIGRlZmF1bHQgYWRkcyB0aGVtKVxyXG5cdGlmIChcclxuXHRcdCh2YWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIHZhbHVlLmVuZHNXaXRoKCdcIicpKSB8fFxyXG5cdFx0KHZhbHVlLnN0YXJ0c1dpdGgoXCInXCIpICYmIHZhbHVlLmVuZHNXaXRoKFwiJ1wiKSlcclxuXHQpIHtcclxuXHRcdHZhbHVlID0gdmFsdWUuc2xpY2UoMSwgLTEpO1xyXG5cdH1cclxuXHJcblx0Ly8gRmFsbGJhY2sgdG8gZGVmYXVsdCBpZiBlbXB0eSAoU3R5bGUgU2V0dGluZ3Mgc2hvd3MgcGxhY2Vob2xkZXIgYnV0IGRvZXNuJ3Qgc2V0IHZhcmlhYmxlKVxyXG5cdHJldHVybiB2YWx1ZSB8fCBcIlx1MjAxNFwiO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgbWlzc2luZyBwcm9wZXJ0aWVzIHNob3VsZCBiZSBoaWRkZW5cclxuICogUmV0dXJucyB0cnVlIGlmIHByb3BlcnRpZXMgdGhhdCBkb24ndCBleGlzdCBvbiBhIGZpbGUgc2hvdWxkIG5vdCBiZSBkaXNwbGF5ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRIaWRlTWlzc2luZ1Byb3BlcnRpZXMoKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGhhc0JvZHlDbGFzcyhcImJhc2VzLWNtcy1oaWRlLW1pc3NpbmctcHJvcGVydGllc1wiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGVtcHR5IHByb3BlcnRpZXMgc2hvdWxkIGJlIGhpZGRlblxyXG4gKiBSZXR1cm5zIHRydWUgaWYgcHJvcGVydGllcyB3aXRoIGVtcHR5IHZhbHVlcyBzaG91bGQgbm90IGJlIGRpc3BsYXllZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZEhpZGVFbXB0eVByb3BlcnRpZXMoKTogYm9vbGVhbiB7XHJcblx0Ly8gQ2hlY2sgYm90aCB0aGUgYm9keSBjbGFzcyBhbmQgYWxzbyBjaGVjayBpZiB0aGUgQ1NTIHZhcmlhYmxlIGlzIHNldCAoYXMgYSBmYWxsYmFjaylcclxuXHRjb25zdCBoYXNDbGFzcyA9IGhhc0JvZHlDbGFzcyhcImJhc2VzLWNtcy1oaWRlLWVtcHR5LXByb3BlcnRpZXNcIik7XHJcblx0aWYgKGhhc0NsYXNzKSByZXR1cm4gdHJ1ZTtcclxuXHRcclxuXHQvLyBGYWxsYmFjazogY2hlY2sgaWYgdGhlIHNldHRpbmcgaXMgZW5hYmxlZCB2aWEgQ1NTIHZhcmlhYmxlIG9yIG90aGVyIG1lYW5zXHJcblx0Ly8gVGhpcyBlbnN1cmVzIHdlIGNhdGNoIHRoZSBzZXR0aW5nIGV2ZW4gaWYgdGhlIGNsYXNzIGlzbid0IGFwcGxpZWQgeWV0XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRhZyBzdHlsZSBmcm9tIGJvZHkgY2xhc3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUYWdTdHlsZSgpOiBcInBsYWluXCIgfCBcInRoZW1lXCIgfCBcIm1pbmltYWxcIiB7XHJcblx0aWYgKGhhc0JvZHlDbGFzcyhcImJhc2VzLWNtcy10YWctc3R5bGUtbWluaW1hbFwiKSkgcmV0dXJuIFwibWluaW1hbFwiO1xyXG5cdGlmIChoYXNCb2R5Q2xhc3MoXCJiYXNlcy1jbXMtdGFnLXN0eWxlLXRoZW1lXCIpKSByZXR1cm4gXCJ0aGVtZVwiO1xyXG5cdHJldHVybiBcInBsYWluXCI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB0YWcgaGFzaCAoIykgcHJlZml4IHNob3VsZCBiZSBzaG93blxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dUYWdIYXNoUHJlZml4KCk6IGJvb2xlYW4ge1xyXG5cdHJldHVybiBoYXNCb2R5Q2xhc3MoXCJiYXNlcy1jbXMtc2hvdy10YWctaGFzaFwiKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFR5cGUgZm9yIFN0eWxlIFNldHRpbmdzIGNvbG9yIGNhY2hlXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFN0eWxlU2V0dGluZ3NDb2xvckNhY2hlIHtcclxuXHR0aXRsZUNvbG9yPzogeyBsaWdodD86IHN0cmluZzsgZGFyaz86IHN0cmluZyB9O1xyXG5cdHNuaXBwZXRDb2xvcj86IHsgbGlnaHQ/OiBzdHJpbmc7IGRhcms/OiBzdHJpbmcgfTtcclxuXHR0YWdzQ29sb3I/OiB7IGxpZ2h0Pzogc3RyaW5nOyBkYXJrPzogc3RyaW5nIH07XHJcblx0dGltZXN0YW1wQ29sb3I/OiB7IGxpZ2h0Pzogc3RyaW5nOyBkYXJrPzogc3RyaW5nIH07XHJcblx0bWV0YWRhdGFDb2xvcj86IHsgbGlnaHQ/OiBzdHJpbmc7IGRhcms/OiBzdHJpbmcgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFwcGx5IGN1c3RvbSBjb2xvcnMgZnJvbSBTdHlsZSBTZXR0aW5ncyB0byBhIGNhcmQgZWxlbWVudFxyXG4gKiBVc2VkIGZvciBhbWJpZW50IGNhcmQgYmFja2dyb3VuZHMgdG8gYXBwbHkgdGhlbWVkIHRleHQgY29sb3JzXHJcbiAqIEBwYXJhbSBjYXJkRWwgLSBDYXJkIGVsZW1lbnQgdG8gYXBwbHkgY29sb3JzIHRvXHJcbiAqIEBwYXJhbSB0aGVtZSAtICdsaWdodCcgb3IgJ2RhcmsnIHRoZW1lIGJhc2VkIG9uIGFtYmllbnQgY29sb3JcclxuICogQHBhcmFtIGNhY2hlIC0gU3R5bGUgU2V0dGluZ3MgY29sb3IgY2FjaGUgd2l0aCBjdXN0b20gY29sb3JzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlDdXN0b21Db2xvcnMoXHJcblx0Y2FyZEVsOiBIVE1MRWxlbWVudCxcclxuXHR0aGVtZTogXCJsaWdodFwiIHwgXCJkYXJrXCIsXHJcblx0Y2FjaGU6IFN0eWxlU2V0dGluZ3NDb2xvckNhY2hlLFxyXG4pOiB2b2lkIHtcclxuXHRpZiAoY2FjaGUudGl0bGVDb2xvcj8uW3RoZW1lXSkge1xyXG5cdFx0Y2FyZEVsLnN0eWxlLnNldFByb3BlcnR5KFxyXG5cdFx0XHRcIi0tYmFzZXMtY21zLXRpdGxlLWNvbG9yXCIsXHJcblx0XHRcdGNhY2hlLnRpdGxlQ29sb3JbdGhlbWVdIHx8IG51bGwsXHJcblx0XHQpO1xyXG5cdH1cclxuXHRpZiAoY2FjaGUuc25pcHBldENvbG9yPy5bdGhlbWVdKSB7XHJcblx0XHRjYXJkRWwuc3R5bGUuc2V0UHJvcGVydHkoXHJcblx0XHRcdFwiLS1iYXNlcy1jbXMtc25pcHBldC1jb2xvclwiLFxyXG5cdFx0XHRjYWNoZS5zbmlwcGV0Q29sb3JbdGhlbWVdIHx8IG51bGwsXHJcblx0XHQpO1xyXG5cdH1cclxuXHRpZiAoY2FjaGUudGFnc0NvbG9yPy5bdGhlbWVdKSB7XHJcblx0XHRjYXJkRWwuc3R5bGUuc2V0UHJvcGVydHkoXHJcblx0XHRcdFwiLS1iYXNlcy1jbXMtdGFncy1jb2xvclwiLFxyXG5cdFx0XHRjYWNoZS50YWdzQ29sb3JbdGhlbWVdIHx8IG51bGwsXHJcblx0XHQpO1xyXG5cdH1cclxuXHRpZiAoY2FjaGUudGltZXN0YW1wQ29sb3I/Llt0aGVtZV0pIHtcclxuXHRcdGNhcmRFbC5zdHlsZS5zZXRQcm9wZXJ0eShcclxuXHRcdFx0XCItLWJhc2VzLWNtcy10aW1lc3RhbXAtY29sb3JcIixcclxuXHRcdFx0Y2FjaGUudGltZXN0YW1wQ29sb3JbdGhlbWVdIHx8IG51bGwsXHJcblx0XHQpO1xyXG5cdH1cclxuXHRpZiAoY2FjaGUubWV0YWRhdGFDb2xvcj8uW3RoZW1lXSkge1xyXG5cdFx0Y2FyZEVsLnN0eWxlLnNldFByb3BlcnR5KFxyXG5cdFx0XHRcIi0tYmFzZXMtY21zLW1ldGFkYXRhLWNvbG9yXCIsXHJcblx0XHRcdGNhY2hlLm1ldGFkYXRhQ29sb3JbdGhlbWVdIHx8IG51bGwsXHJcblx0XHQpO1xyXG5cdH1cclxufVxyXG5cclxuIiwgImltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBVUkwgaXMgYW4gZXh0ZXJuYWwgSFRUUC9IVFRQUyBVUkxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0V4dGVybmFsVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIC9eaHR0cHM/OlxcL1xcLy9pLnRlc3QodXJsKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgcGF0aCBoYXMgYSB2YWxpZCBpbWFnZSBmaWxlIGV4dGVuc2lvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc1ZhbGlkSW1hZ2VFeHRlbnNpb24ocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIC9cXC4oYXZpZnxibXB8Z2lmfGpwZT9nfHBuZ3xzdmd8d2VicCkkL2kudGVzdChwYXRoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGlmIGEgVVJMIHBvaW50cyB0byBhIHZhbGlkLCBsb2FkYWJsZSBpbWFnZVxyXG4gKiBOT1RFOiBUaGlzIGlzIHNsb3cgYW5kIHNob3VsZCBiZSBhdm9pZGVkIGZvciBwZXJmb3JtYW5jZS4gT25seSB1c2Ugd2hlbiBhYnNvbHV0ZWx5IG5lY2Vzc2FyeS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUltYWdlVXJsKHVybDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcblx0XHRjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuXHRcdGltZy5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKHRydWUpO1xyXG5cdFx0aW1nLm9uZXJyb3IgPSAoKSA9PiByZXNvbHZlKGZhbHNlKTtcclxuXHRcdHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZShmYWxzZSksIDUwMDApO1xyXG5cdFx0aW1nLnNyYyA9IHVybDtcclxuXHR9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFN0cmlwIHdpa2lsaW5rIHN5bnRheCBmcm9tIGltYWdlIHBhdGhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzdHJpcFdpa2lsaW5rU3ludGF4KHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3Qgd2lraWxpbmtNYXRjaCA9IHBhdGgubWF0Y2goL14hP1xcW1xcWyhbXlxcXXxdKykoPzpcXHxbXlxcXV0qKT9cXF1cXF0kLyk7XHJcblx0cmV0dXJuIHdpa2lsaW5rTWF0Y2ggPyB3aWtpbGlua01hdGNoWzFdLnRyaW0oKSA6IHBhdGg7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcm9jZXNzIGFuZCB2YWxpZGF0ZSBpbWFnZSBwYXRocyBmcm9tIHByb3BlcnR5IHZhbHVlc1xyXG4gKiBIYW5kbGVzIHdpa2lsaW5rIHN0cmlwcGluZywgVVJMIHZhbGlkYXRpb24sIGFuZCBwYXRoIHNlcGFyYXRpb25cclxuICogQmFzZWQgb24gRHluYW1pYyBWaWV3cycgYXBwcm9hY2ggd2l0aCBwYXJhbGxlbCB2YWxpZGF0aW9uIGZvciBwZXJmb3JtYW5jZVxyXG4gKiBcclxuICogQHBhcmFtIGltYWdlUGF0aHMgLSBSYXcgaW1hZ2UgcGF0aHMgZnJvbSBwcm9wZXJ0aWVzIChtYXkgY29udGFpbiB3aWtpbGlua3MpXHJcbiAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIG9iamVjdCB3aXRoIHZhbGlkYXRlZCBpbnRlcm5hbCBwYXRocyBhbmQgZXh0ZXJuYWwgVVJMc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NJbWFnZVBhdGhzKFxyXG5cdGltYWdlUGF0aHM6IHN0cmluZ1tdXHJcbik6IFByb21pc2U8eyBpbnRlcm5hbFBhdGhzOiBzdHJpbmdbXTsgZXh0ZXJuYWxVcmxzOiBzdHJpbmdbXSB9PiB7XHJcblx0Y29uc3QgaW50ZXJuYWxQYXRoczogc3RyaW5nW10gPSBbXTtcclxuXHRjb25zdCBleHRlcm5hbFVybENhbmRpZGF0ZXM6IHN0cmluZ1tdID0gW107XHJcblxyXG5cdC8vIEZpcnN0IHBhc3M6IHNlcGFyYXRlIGludGVybmFsIHBhdGhzIGFuZCBleHRlcm5hbCBVUkwgY2FuZGlkYXRlc1xyXG5cdGZvciAoY29uc3QgaW1nUGF0aCBvZiBpbWFnZVBhdGhzKSB7XHJcblx0XHQvLyBTdHJpcCB3aWtpbGluayBzeW50YXhcclxuXHRcdGNvbnN0IGNsZWFuUGF0aCA9IHN0cmlwV2lraWxpbmtTeW50YXgoaW1nUGF0aCk7XHJcblxyXG5cdFx0aWYgKGNsZWFuUGF0aC5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xyXG5cclxuXHRcdGlmIChpc0V4dGVybmFsVXJsKGNsZWFuUGF0aCkpIHtcclxuXHRcdFx0Ly8gRXh0ZXJuYWwgVVJMIC0gYWNjZXB0IGFsbCBleHRlcm5hbCBVUkxzIGFuZCB2YWxpZGF0ZSBieSBhY3R1YWxseSBsb2FkaW5nIHRoZW1cclxuXHRcdFx0Ly8gVGhpcyBoYW5kbGVzIE9wZW4gR3JhcGggVVJMcyBhbmQgb3RoZXIgaW1hZ2UgVVJMcyB0aGF0IGRvbid0IGhhdmUgZmlsZSBleHRlbnNpb25zXHJcblx0XHRcdGV4dGVybmFsVXJsQ2FuZGlkYXRlcy5wdXNoKGNsZWFuUGF0aCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBJbnRlcm5hbCBwYXRoIC0gdmFsaWRhdGUgZXh0ZW5zaW9uXHJcblx0XHRcdGlmIChoYXNWYWxpZEltYWdlRXh0ZW5zaW9uKGNsZWFuUGF0aCkpIHtcclxuXHRcdFx0XHRpbnRlcm5hbFBhdGhzLnB1c2goY2xlYW5QYXRoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gU2Vjb25kIHBhc3M6IHZhbGlkYXRlIGV4dGVybmFsIFVSTHMgaW4gcGFyYWxsZWwgKG11Y2ggZmFzdGVyKVxyXG5cdGNvbnN0IHZhbGlkYXRpb25Qcm9taXNlcyA9IGV4dGVybmFsVXJsQ2FuZGlkYXRlcy5tYXAodXJsID0+IFxyXG5cdFx0dmFsaWRhdGVJbWFnZVVybCh1cmwpLnRoZW4oaXNWYWxpZCA9PiBpc1ZhbGlkID8gdXJsIDogbnVsbClcclxuXHQpO1xyXG5cdGNvbnN0IHZhbGlkYXRlZFVybHMgPSBhd2FpdCBQcm9taXNlLmFsbCh2YWxpZGF0aW9uUHJvbWlzZXMpO1xyXG5cdGNvbnN0IGV4dGVybmFsVXJscyA9IHZhbGlkYXRlZFVybHMuZmlsdGVyKCh1cmwpOiB1cmwgaXMgc3RyaW5nID0+IHVybCAhPT0gbnVsbCk7XHJcblxyXG5cdHJldHVybiB7IGludGVybmFsUGF0aHMsIGV4dGVybmFsVXJscyB9O1xyXG59XHJcblxyXG4vKipcclxuICogQ29udmVydCBpbnRlcm5hbCBpbWFnZSBwYXRocyB0byByZXNvdXJjZSBVUkxzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZUludGVybmFsSW1hZ2VQYXRocyhcclxuXHRpbnRlcm5hbFBhdGhzOiBzdHJpbmdbXSxcclxuXHRzb3VyY2VQYXRoOiBzdHJpbmcsXHJcblx0YXBwOiBBcHBcclxuKTogc3RyaW5nW10ge1xyXG5cdGNvbnN0IHZhbGlkSW1hZ2VFeHRlbnNpb25zID0gWydhdmlmJywgJ2JtcCcsICdnaWYnLCAnanBlZycsICdqcGcnLCAncG5nJywgJ3N2ZycsICd3ZWJwJ107XHJcblx0Y29uc3QgcmVzb3VyY2VQYXRoczogc3RyaW5nW10gPSBbXTtcclxuXHJcblx0Zm9yIChjb25zdCBwcm9wUGF0aCBvZiBpbnRlcm5hbFBhdGhzKSB7XHJcblx0XHQvLyBUcnkgcmVzb2x2aW5nIHdpdGggbWV0YWRhdGEgY2FjaGUgZmlyc3QgKGhhbmRsZXMgcmVsYXRpdmUgcGF0aHMsIHdpa2lsaW5rcywgZXRjLilcclxuXHRcdGxldCBpbWFnZUZpbGU6IFRGaWxlIHwgbnVsbCA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHByb3BQYXRoLCBzb3VyY2VQYXRoKTtcclxuXHRcdFxyXG5cdFx0Ly8gSWYgbm90IGZvdW5kIGFuZCBwYXRoIHN0YXJ0cyB3aXRoIC4vLCB0cnkgcmVzb2x2aW5nIHJlbGF0aXZlIHRvIHNvdXJjZSBmaWxlJ3MgZGlyZWN0b3J5XHJcblx0XHRpZiAoIWltYWdlRmlsZSAmJiBwcm9wUGF0aC5zdGFydHNXaXRoKCcuLycpKSB7XHJcblx0XHRcdGNvbnN0IHNvdXJjZUZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNvdXJjZVBhdGgpO1xyXG5cdFx0XHRpZiAoc291cmNlRmlsZSAmJiBzb3VyY2VGaWxlLnBhcmVudCkge1xyXG5cdFx0XHRcdC8vIFJlbW92ZSAuLyBwcmVmaXggYW5kIHJlc29sdmUgcmVsYXRpdmUgdG8gcGFyZW50IGRpcmVjdG9yeVxyXG5cdFx0XHRcdGNvbnN0IHJlbGF0aXZlUGF0aCA9IHByb3BQYXRoLnN1YnN0cmluZygyKTsgLy8gUmVtb3ZlIC4vXHJcblx0XHRcdFx0Y29uc3QgZnVsbFBhdGggPSBzb3VyY2VGaWxlLnBhcmVudC5wYXRoID8gYCR7c291cmNlRmlsZS5wYXJlbnQucGF0aH0vJHtyZWxhdGl2ZVBhdGh9YCA6IHJlbGF0aXZlUGF0aDtcclxuXHRcdFx0XHRjb25zdCByZXNvbHZlZEZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZ1bGxQYXRoKTtcclxuXHRcdFx0XHRpZiAocmVzb2x2ZWRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdGltYWdlRmlsZSA9IHJlc29sdmVkRmlsZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gSWYgc3RpbGwgbm90IGZvdW5kLCB0cnkgYXMgYWJzb2x1dGUgcGF0aFxyXG5cdFx0aWYgKCFpbWFnZUZpbGUpIHtcclxuXHRcdFx0Y29uc3QgYWJzb2x1dGVGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwcm9wUGF0aCk7XHJcblx0XHRcdGlmIChhYnNvbHV0ZUZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdGltYWdlRmlsZSA9IGFic29sdXRlRmlsZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoaW1hZ2VGaWxlICYmIHZhbGlkSW1hZ2VFeHRlbnNpb25zLmluY2x1ZGVzKGltYWdlRmlsZS5leHRlbnNpb24pKSB7XHJcblx0XHRcdGNvbnN0IHJlc291cmNlUGF0aCA9IGFwcC52YXVsdC5nZXRSZXNvdXJjZVBhdGgoaW1hZ2VGaWxlKTtcclxuXHRcdFx0cmVzb3VyY2VQYXRocy5wdXNoKHJlc291cmNlUGF0aCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gcmVzb3VyY2VQYXRocztcclxufVxyXG5cclxuLyoqXHJcbiAqIEV4dHJhY3QgaW1hZ2UgVVJMcyBmcm9tIGZpbGUgZW1iZWRzXHJcbiAqIFZhbGlkYXRlcyBleHRlcm5hbCBVUkxzIGluIHBhcmFsbGVsIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcclxuICogQWxzbyBwYXJzZXMgZmlsZSBjb250ZW50IGZvciBleHRlcm5hbCBpbWFnZXMgaW4gbWFya2Rvd24gYW5kIEhUTUxcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHRyYWN0RW1iZWRJbWFnZXMoXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0YXBwOiBBcHBcclxuKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG5cdGNvbnN0IHZhbGlkSW1hZ2VFeHRlbnNpb25zID0gWydhdmlmJywgJ2JtcCcsICdnaWYnLCAnanBlZycsICdqcGcnLCAncG5nJywgJ3N2ZycsICd3ZWJwJ107XHJcblx0Y29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcblxyXG5cdGNvbnN0IGJvZHlSZXNvdXJjZVBhdGhzOiBzdHJpbmdbXSA9IFtdO1xyXG5cdGNvbnN0IGJvZHlFeHRlcm5hbFVybENhbmRpZGF0ZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xyXG5cclxuXHQvLyBGaXJzdCBwYXNzOiBjaGVjayBtZXRhZGF0YSBlbWJlZHMgKGZhc3QsIGZyb20gY2FjaGUpXHJcblx0aWYgKG1ldGFkYXRhPy5lbWJlZHMpIHtcclxuXHRcdGZvciAoY29uc3QgZW1iZWQgb2YgbWV0YWRhdGEuZW1iZWRzKSB7XHJcblx0XHRcdGNvbnN0IGVtYmVkTGluayA9IGVtYmVkLmxpbms7XHJcblx0XHRcdGlmIChpc0V4dGVybmFsVXJsKGVtYmVkTGluaykpIHtcclxuXHRcdFx0XHRpZiAoaGFzVmFsaWRJbWFnZUV4dGVuc2lvbihlbWJlZExpbmspIHx8ICFlbWJlZExpbmsuaW5jbHVkZXMoJy4nKSkge1xyXG5cdFx0XHRcdFx0Ym9keUV4dGVybmFsVXJsQ2FuZGlkYXRlcy5hZGQoZW1iZWRMaW5rKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y29uc3QgdGFyZ2V0RmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGVtYmVkTGluaywgZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRpZiAodGFyZ2V0RmlsZSAmJiB2YWxpZEltYWdlRXh0ZW5zaW9ucy5pbmNsdWRlcyh0YXJnZXRGaWxlLmV4dGVuc2lvbikpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHJlc291cmNlUGF0aCA9IGFwcC52YXVsdC5nZXRSZXNvdXJjZVBhdGgodGFyZ2V0RmlsZSk7XHJcblx0XHRcdFx0XHRib2R5UmVzb3VyY2VQYXRocy5wdXNoKHJlc291cmNlUGF0aCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBTZWNvbmQgcGFzczogcGFyc2UgZmlsZSBjb250ZW50IGZvciBleHRlcm5hbCBpbWFnZXMgKG1hcmtkb3duIGFuZCBIVE1MKVxyXG5cdC8vIFRoaXMgY2F0Y2hlcyBleHRlcm5hbCBpbWFnZXMgdGhhdCBtaWdodCBub3QgYmUgaW4gbWV0YWRhdGEuZW1iZWRzXHJcblx0Ly8gTm90ZTogRm9yIE1EWCBmaWxlcywgbWV0YWRhdGEgY2FjaGUgd29uJ3Qgd29yaywgc28gd2Ugc2tpcCBlbWJlZCBleHRyYWN0aW9uXHJcblx0aWYgKGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnIHx8IGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4Jykge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRXh0cmFjdCBtYXJrZG93biBpbWFnZSBzeW50YXg6ICFbYWx0XSh1cmwpIG9yICFbYWx0XSh1cmwgXCJ0aXRsZVwiKVxyXG5cdFx0XHRjb25zdCBtYXJrZG93bkltYWdlUmVnZXggPSAvIVxcWyhbXlxcXV0qKVxcXVxcKChodHRwcz86XFwvXFwvW15cXHMpXSspL2dpO1xyXG5cdFx0XHRsZXQgbWF0Y2g7XHJcblx0XHRcdHdoaWxlICgobWF0Y2ggPSBtYXJrZG93bkltYWdlUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcclxuXHRcdFx0XHRjb25zdCB1cmwgPSBtYXRjaFsyXS50cmltKCk7XHJcblx0XHRcdFx0Ly8gUmVtb3ZlIHRyYWlsaW5nIHF1b3RlcywgcGFyZW50aGVzZXMsIG9yIHdoaXRlc3BhY2UgdGhhdCBtaWdodCBiZSBwYXJ0IG9mIHRpdGxlXHJcblx0XHRcdFx0Y29uc3QgY2xlYW5VcmwgPSB1cmwucmVwbGFjZSgvW1wiJylcXHNdKyQvLCAnJyk7XHJcblx0XHRcdFx0aWYgKGlzRXh0ZXJuYWxVcmwoY2xlYW5VcmwpICYmIChoYXNWYWxpZEltYWdlRXh0ZW5zaW9uKGNsZWFuVXJsKSB8fCAhY2xlYW5VcmwuaW5jbHVkZXMoJy4nKSkpIHtcclxuXHRcdFx0XHRcdGJvZHlFeHRlcm5hbFVybENhbmRpZGF0ZXMuYWRkKGNsZWFuVXJsKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEV4dHJhY3QgSFRNTCBpbWcgdGFnczogPGltZyBzcmM9XCJ1cmxcIj4gb3IgPGltZyBzcmM9J3VybCc+IG9yIDxpbWcgc3JjPXVybD5cclxuXHRcdFx0Y29uc3QgaHRtbEltZ1JlZ2V4ID0gLzxpbWdbXj5dK3NyY1xccyo9XFxzKltcIiddPyhodHRwcz86XFwvXFwvW15cXHNcIic8Pl0rKS9naTtcclxuXHRcdFx0d2hpbGUgKChtYXRjaCA9IGh0bWxJbWdSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdGNvbnN0IHVybCA9IG1hdGNoWzFdLnRyaW0oKTtcclxuXHRcdFx0XHQvLyBSZW1vdmUgdHJhaWxpbmcgcXVvdGVzIG9yIHdoaXRlc3BhY2VcclxuXHRcdFx0XHRjb25zdCBjbGVhblVybCA9IHVybC5yZXBsYWNlKC9bXCInXFxzPl0rJC8sICcnKTtcclxuXHRcdFx0XHRpZiAoaXNFeHRlcm5hbFVybChjbGVhblVybCkgJiYgKGhhc1ZhbGlkSW1hZ2VFeHRlbnNpb24oY2xlYW5VcmwpIHx8ICFjbGVhblVybC5pbmNsdWRlcygnLicpKSkge1xyXG5cdFx0XHRcdFx0Ym9keUV4dGVybmFsVXJsQ2FuZGlkYXRlcy5hZGQoY2xlYW5VcmwpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0Ly8gSWYgZmlsZSByZWFkIGZhaWxzLCBqdXN0IGNvbnRpbnVlIHdpdGggd2hhdCB3ZSBmb3VuZCBpbiBtZXRhZGF0YVxyXG5cdFx0XHRjb25zb2xlLndhcm4oYEZhaWxlZCB0byByZWFkIGZpbGUgY29udGVudCBmb3IgaW1hZ2UgZXh0cmFjdGlvbjogJHtmaWxlLnBhdGh9YCwgZXJyb3IpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gVGhpcmQgcGFzczogdmFsaWRhdGUgZXh0ZXJuYWwgVVJMcyBpbiBwYXJhbGxlbCAobXVjaCBmYXN0ZXIpXHJcblx0Y29uc3QgZXh0ZXJuYWxVcmxBcnJheSA9IEFycmF5LmZyb20oYm9keUV4dGVybmFsVXJsQ2FuZGlkYXRlcyk7XHJcblx0Y29uc3QgdmFsaWRhdGlvblByb21pc2VzID0gZXh0ZXJuYWxVcmxBcnJheS5tYXAodXJsID0+IFxyXG5cdFx0dmFsaWRhdGVJbWFnZVVybCh1cmwpLnRoZW4oaXNWYWxpZCA9PiBpc1ZhbGlkID8gdXJsIDogbnVsbClcclxuXHQpO1xyXG5cdGNvbnN0IHZhbGlkYXRlZFVybHMgPSBhd2FpdCBQcm9taXNlLmFsbCh2YWxpZGF0aW9uUHJvbWlzZXMpO1xyXG5cdGNvbnN0IGJvZHlFeHRlcm5hbFVybHMgPSB2YWxpZGF0ZWRVcmxzLmZpbHRlcigodXJsKTogdXJsIGlzIHN0cmluZyA9PiB1cmwgIT09IG51bGwpO1xyXG5cclxuXHRyZXR1cm4gWy4uLmJvZHlSZXNvdXJjZVBhdGhzLCAuLi5ib2R5RXh0ZXJuYWxVcmxzXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIGEgVVJMIHBvaW50cyB0byBhIEdJRiBpbWFnZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGlzR2lmVXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0Ly8gQ2hlY2sgZm9yIC5naWYgZXh0ZW5zaW9uIChjYXNlLWluc2Vuc2l0aXZlKVxyXG5cdC8vIE1hdGNoIC5naWYgYXQgdGhlIGVuZCBvZiB0aGUgcGF0aCwgb3B0aW9uYWxseSBmb2xsb3dlZCBieSBxdWVyeSBzdHJpbmcgb3IgZnJhZ21lbnRcclxuXHRyZXR1cm4gL1xcLmdpZihcXD98I3wkKS9pLnRlc3QodXJsKSB8fCAvXFwuZ2lmJC9pLnRlc3QodXJsKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbnZlcnQgYW4gYW5pbWF0ZWQgR0lGIHRvIGEgc3RhdGljIGltYWdlIChmaXJzdCBmcmFtZSlcclxuICogUmV0dXJucyBhIGRhdGEgVVJMIG9mIHRoZSBmaXJzdCBmcmFtZSwgb3IgdGhlIG9yaWdpbmFsIFVSTCBpZiBjb252ZXJzaW9uIGZhaWxzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29udmVydEdpZlRvU3RhdGljKFxyXG5cdHVybDogc3RyaW5nLFxyXG5cdGZvcmNlU3RhdGljOiBib29sZWFuXHJcbik6IFByb21pc2U8c3RyaW5nPiB7XHJcblx0Ly8gSWYgbm90IGZvcmNpbmcgc3RhdGljIG9yIG5vdCBhIEdJRiwgcmV0dXJuIG9yaWdpbmFsIFVSTFxyXG5cdGlmICghZm9yY2VTdGF0aWMgfHwgIWlzR2lmVXJsKHVybCkpIHtcclxuXHRcdHJldHVybiB1cmw7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuXHRcdGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG5cdFx0aW1nLmNyb3NzT3JpZ2luID0gJ2Fub255bW91cyc7IC8vIEhhbmRsZSBDT1JTIGlmIG5lZWRlZFxyXG5cdFx0XHJcblx0XHRpbWcub25sb2FkID0gKCkgPT4ge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdC8vIENyZWF0ZSBjYW52YXMgYW5kIGRyYXcgZmlyc3QgZnJhbWVcclxuXHRcdFx0XHRjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuXHRcdFx0XHRjYW52YXMud2lkdGggPSBpbWcud2lkdGg7XHJcblx0XHRcdFx0Y2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7XHJcblx0XHRcdFx0Y29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGN0eCkge1xyXG5cdFx0XHRcdFx0Y3R4LmRyYXdJbWFnZShpbWcsIDAsIDApO1xyXG5cdFx0XHRcdFx0Ly8gQ29udmVydCB0byBQTkcgZGF0YSBVUkxcclxuXHRcdFx0XHRcdGNvbnN0IGRhdGFVcmwgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcclxuXHRcdFx0XHRcdHJlc29sdmUoZGF0YVVybCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIENhbnZhcyBjb250ZXh0IG5vdCBhdmFpbGFibGUsIHJldHVybiBvcmlnaW5hbFxyXG5cdFx0XHRcdFx0cmVzb2x2ZSh1cmwpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBjb252ZXJ0IEdJRiB0byBzdGF0aWMgaW1hZ2U6JywgZXJyb3IpO1xyXG5cdFx0XHRcdC8vIE9uIGVycm9yLCByZXR1cm4gb3JpZ2luYWwgVVJMXHJcblx0XHRcdFx0cmVzb2x2ZSh1cmwpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHRpbWcub25lcnJvciA9ICgpID0+IHtcclxuXHRcdFx0Ly8gSWYgaW1hZ2UgZmFpbHMgdG8gbG9hZCwgcmV0dXJuIG9yaWdpbmFsIFVSTFxyXG5cdFx0XHRyZXNvbHZlKHVybCk7XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQvLyBTZXQgdGltZW91dCB0byBwcmV2ZW50IGhhbmdpbmdcclxuXHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRyZXNvbHZlKHVybCk7XHJcblx0XHR9LCA1MDAwKTtcclxuXHRcdFxyXG5cdFx0aW1nLnNyYyA9IHVybDtcclxuXHR9KTtcclxufVxyXG5cclxuIiwgIi8qKlxyXG4gKiBQcmV2aWV3IGFuZCBzbmlwcGV0IHV0aWxpdGllc1xyXG4gKiBFeHRyYWN0cyBhbmQgc2FuaXRpemVzIGNvbnRlbnQgZm9yIGNhcmQgcHJldmlld3NcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuY29uc3QgbWFya2Rvd25QYXR0ZXJucyA9IFtcclxuXHQvYChbXmBdKylgL2csXHJcblx0L1xcKlxcKlxcKigoPzooPyFcXCpcXCpcXCopLikrKVxcKlxcKlxcKi9nLFxyXG5cdC9fX18oKD86KD8hX19fKS4pKylfX18vZyxcclxuXHQvXFwqXFwqKCg/Oig/IVxcKlxcKikuKSspXFwqXFwqL2csXHJcblx0L19fKCg/Oig/IV9fKS4pKylfXy9nLFxyXG5cdC9cXCooKD86KD8hXFwqKS4pKylcXCovZyxcclxuXHQvXygoPzooPyFfKS4pKylfL2csXHJcblx0L35+KCg/Oig/IX5+KS4pKyl+fi9nLFxyXG5cdC89PSgoPzooPyE9PSkuKSspPT0vZyxcclxuXHQvXFxbKFteXFxdXSspXFxdXFwoW14pXStcXCkvZyxcclxuXHQvIVxcW1xcW1teXFxdXStcXF1cXF0vZyxcclxuXHQvXFxbXFxbW15cXF18XStcXHxbXlxcXV0rXFxdXFxdL2csXHJcblx0L1xcW1xcW1teXFxdXStcXF1cXF0vZyxcclxuXHQvI1thLXpBLVowLTlfXFwtL10rL2csXHJcblx0L15bLSorXVxccypcXFtbIHhYXVxcXVxccysvZ20sXHJcblx0L14oXFxkK1xcLlxccyopXFxbWyB4WF1cXF1cXHMrL2dtLFxyXG5cdC9eKFxcZCtcXClcXHMqKVxcW1sgeFhdXFxdXFxzKy9nbSxcclxuXHQvXlstKitdXFxzKy9nbSxcclxuXHQvXiN7MSw2fVxccysuKyQvZ20sXHJcblx0L15cXHMqKD86Wy1fKl0pXFxzKig/OlstXypdKVxccyooPzpbLV8qXSlbXFxzXFwtXypdKiQvZ20sXHJcblx0L15cXHMqXFx8LipcXHwuKiQvZ20sXHJcblx0L1xcXlxcW1teXFxdXSo/XS9nLFxyXG5cdC9cXFtcXF5bXlxcXV0rXS9nLFxyXG5cdC9eXFxzKlxcW1xcXlteXFxdXStdOi4qJC9nbSxcclxuXHQvPChbYS16XVthLXowLTldKilcXGJbXj5dKj4oLio/KTxcXC9cXDE+L2dpLFxyXG5cdC88W14+XSs+L2dcclxuXTtcclxuXHJcbmZ1bmN0aW9uIHByb3RlY3RFc2NhcGVkQ2hhcnModGV4dDogc3RyaW5nKTogeyB0ZXh0OiBzdHJpbmc7IG1hcDogTWFwPHN0cmluZywgc3RyaW5nPiB9IHtcclxuXHRjb25zdCBtYXAgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nPigpO1xyXG5cdGxldCBjb3VudGVyID0gMDtcclxuXHRjb25zdCByZXN1bHQgPSB0ZXh0LnJlcGxhY2UoL1xcXFwoLikvZywgKG1hdGNoOiBzdHJpbmcsIGNoYXI6IHN0cmluZykgPT4ge1xyXG5cdFx0Y29uc3QgcGxhY2Vob2xkZXIgPSBgXHUwMEE3XHUwMEE3RVNDQVBFRCR7Y291bnRlcn1cdTAwQTdcdTAwQTdgO1xyXG5cdFx0bWFwLnNldChwbGFjZWhvbGRlciwgY2hhcik7XHJcblx0XHRjb3VudGVyKys7XHJcblx0XHRyZXR1cm4gcGxhY2Vob2xkZXI7XHJcblx0fSk7XHJcblx0cmV0dXJuIHsgdGV4dDogcmVzdWx0LCBtYXAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzdG9yZUVzY2FwZWRDaGFycyh0ZXh0OiBzdHJpbmcsIG1hcDogTWFwPHN0cmluZywgc3RyaW5nPik6IHN0cmluZyB7XHJcblx0bGV0IHJlc3VsdCA9IHRleHQ7XHJcblx0bWFwLmZvckVhY2goKGNoYXIsIHBsYWNlaG9sZGVyKSA9PiB7XHJcblx0XHRyZXN1bHQgPSByZXN1bHQuc3BsaXQocGxhY2Vob2xkZXIpLmpvaW4oY2hhcik7XHJcblx0fSk7XHJcblx0cmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlQ29kZUJsb2Nrcyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdGxldCByZXN1bHQgPSB0ZXh0O1xyXG5cdGxldCBjaGFuZ2VkID0gdHJ1ZTtcclxuXHR3aGlsZSAoY2hhbmdlZCkge1xyXG5cdFx0Y2hhbmdlZCA9IGZhbHNlO1xyXG5cdFx0Y29uc3Qgb3Blbk1hdGNoID0gcmVzdWx0Lm1hdGNoKC9eKFtgfl17Myx9KS9tKTtcclxuXHRcdGlmICghb3Blbk1hdGNoKSBicmVhaztcclxuXHRcdGNvbnN0IGZlbmNlQ2hhciA9IG9wZW5NYXRjaFsxXVswXTtcclxuXHRcdGNvbnN0IGZlbmNlTGVuZ3RoID0gb3Blbk1hdGNoWzFdLmxlbmd0aDtcclxuXHRcdGNvbnN0IG9wZW5JbmRleCA9IG9wZW5NYXRjaC5pbmRleCE7XHJcblx0XHRjb25zdCBlc2NhcGVkQ2hhciA9IGZlbmNlQ2hhci5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpO1xyXG5cdFx0Y29uc3QgY2xvc2VQYXR0ZXJuID0gbmV3IFJlZ0V4cChgXiR7ZXNjYXBlZENoYXJ9eyR7ZmVuY2VMZW5ndGh9fVxcXFxzKiRgLCAnbScpO1xyXG5cdFx0Y29uc3QgYWZ0ZXJPcGVuID0gcmVzdWx0LnN1YnN0cmluZyhvcGVuSW5kZXggKyBvcGVuTWF0Y2hbMV0ubGVuZ3RoKTtcclxuXHRcdGNvbnN0IGNsb3NlTWF0Y2ggPSBhZnRlck9wZW4ubWF0Y2goY2xvc2VQYXR0ZXJuKTtcclxuXHRcdGlmIChjbG9zZU1hdGNoKSB7XHJcblx0XHRcdGNvbnN0IGNsb3NlSW5kZXggPSBvcGVuSW5kZXggKyBvcGVuTWF0Y2hbMV0ubGVuZ3RoICsgY2xvc2VNYXRjaC5pbmRleCE7XHJcblx0XHRcdGNvbnN0IGJsb2NrRW5kID0gY2xvc2VJbmRleCArIGNsb3NlTWF0Y2hbMF0ubGVuZ3RoO1xyXG5cdFx0XHRyZXN1bHQgPSByZXN1bHQuc3Vic3RyaW5nKDAsIG9wZW5JbmRleCkgKyByZXN1bHQuc3Vic3RyaW5nKGJsb2NrRW5kKTtcclxuXHRcdFx0Y2hhbmdlZCA9IHRydWU7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zdCBsaW5lRW5kID0gcmVzdWx0LmluZGV4T2YoJ1xcbicsIG9wZW5JbmRleCk7XHJcblx0XHRcdGlmIChsaW5lRW5kID09PSAtMSkge1xyXG5cdFx0XHRcdHJlc3VsdCA9IHJlc3VsdC5zdWJzdHJpbmcoMCwgb3BlbkluZGV4KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXN1bHQgPSByZXN1bHQuc3Vic3RyaW5nKDAsIG9wZW5JbmRleCkgKyByZXN1bHQuc3Vic3RyaW5nKGxpbmVFbmQgKyAxKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RyaXBNYXJrZG93blN5bnRheCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdGlmICghdGV4dCB8fCB0ZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHJldHVybiAnJztcclxuXHR0ZXh0ID0gdGV4dC5yZXBsYWNlKC9ePlxccypcXFshW1xcdy1dK1xcXVsrLV0/LiokL2dtLCAnJyk7XHJcblx0dGV4dCA9IHRleHQucmVwbGFjZSgvXj5cXHM/L2dtLCAnJyk7XHJcblx0Y29uc3QgeyB0ZXh0OiBwcm90ZWN0ZWRUZXh0LCBtYXA6IGVzY2FwZWRDaGFyc01hcCB9ID0gcHJvdGVjdEVzY2FwZWRDaGFycyh0ZXh0KTtcclxuXHRsZXQgcmVzdWx0ID0gcmVtb3ZlQ29kZUJsb2Nrcyhwcm90ZWN0ZWRUZXh0KTtcclxuXHRtYXJrZG93blBhdHRlcm5zLmZvckVhY2goKHBhdHRlcm4pID0+IHtcclxuXHRcdHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKHBhdHRlcm4sIChtYXRjaDogc3RyaW5nLCAuLi5ncm91cHM6IHN0cmluZ1tdKSA9PiB7XHJcblx0XHRcdGlmIChtYXRjaC5tYXRjaCgvPFthLXpdW2EtejAtOV0qXFxiW14+XSo+Lio/PFxcLy9pKSkge1xyXG5cdFx0XHRcdHJldHVybiBncm91cHNbMV0gfHwgJyc7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGdyb3Vwcy5sZW5ndGggPiAwICYmIGdyb3Vwc1swXSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBncm91cHMubGVuZ3RoIC0gMjsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAodHlwZW9mIGdyb3Vwc1tpXSA9PT0gJ3N0cmluZycpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGdyb3Vwc1tpXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuICcnO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcblx0cmVzdWx0ID0gcmVzdG9yZUVzY2FwZWRDaGFycyhyZXN1bHQsIGVzY2FwZWRDaGFyc01hcCk7XHJcblx0cmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplRm9yUHJldmlldyhcclxuXHRjb250ZW50OiBzdHJpbmcsXHJcblx0b21pdEZpcnN0TGluZTogYm9vbGVhbiA9IGZhbHNlLFxyXG5cdGZpbGVuYW1lPzogc3RyaW5nLFxyXG5cdHRpdGxlVmFsdWU/OiBzdHJpbmdcclxuKTogc3RyaW5nIHtcclxuXHRjb25zdCBjbGVhbmVkID0gY29udGVudC5yZXBsYWNlKC9eLS0tW1xcc1xcU10qPy0tLS8sIFwiXCIpLnRyaW0oKTtcclxuXHRsZXQgc3RyaXBwZWQgPSBzdHJpcE1hcmtkb3duU3ludGF4KGNsZWFuZWQpO1xyXG5cdGNvbnN0IGZpcnN0TGluZUVuZCA9IHN0cmlwcGVkLmluZGV4T2YoJ1xcbicpO1xyXG5cdGNvbnN0IGZpcnN0TGluZSA9IChmaXJzdExpbmVFbmQgIT09IC0xID8gc3RyaXBwZWQuc3Vic3RyaW5nKDAsIGZpcnN0TGluZUVuZCkgOiBzdHJpcHBlZCkudHJpbSgpO1xyXG5cdGlmIChvbWl0Rmlyc3RMaW5lIHx8XHJcblx0XHQoZmlsZW5hbWUgJiYgZmlyc3RMaW5lID09PSBmaWxlbmFtZSkgfHxcclxuXHRcdCh0aXRsZVZhbHVlICYmIGZpcnN0TGluZSA9PT0gdGl0bGVWYWx1ZSkpIHtcclxuXHRcdHN0cmlwcGVkID0gZmlyc3RMaW5lRW5kICE9PSAtMSA/IHN0cmlwcGVkLnN1YnN0cmluZyhmaXJzdExpbmVFbmQgKyAxKS50cmltKCkgOiAnJztcclxuXHR9XHJcblx0Y29uc3Qgbm9ybWFsaXplZCA9IHN0cmlwcGVkXHJcblx0XHQucmVwbGFjZSgvXFxeW2EtekEtWjAtOS1dKy9nLCAnJylcclxuXHRcdC5zcGxpdCgvXFxzKy8pXHJcblx0XHQuZmlsdGVyKHdvcmQgPT4gd29yZClcclxuXHRcdC5qb2luKCcgJylcclxuXHRcdC50cmltKClcclxuXHRcdC5yZXBsYWNlKC9cXC57Mix9L2csIG1hdGNoID0+IG1hdGNoLnJlcGxhY2UoL1xcLi9nLCAnXFx1MjAyNCcpKTtcclxuXHRjb25zdCB3YXNUcnVuY2F0ZWQgPSBub3JtYWxpemVkLmxlbmd0aCA+IDUwMDtcclxuXHRsZXQgcHJldmlldyA9IG5vcm1hbGl6ZWQuc3Vic3RyaW5nKDAsIDUwMCk7XHJcblx0aWYgKHdhc1RydW5jYXRlZCkge1xyXG5cdFx0cHJldmlldyArPSAnXHUyMDI2JztcclxuXHR9XHJcblx0cmV0dXJuIHByZXZpZXc7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkRmlsZVByZXZpZXcoXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0YXBwOiBBcHAsXHJcblx0cHJvcGVydHlWYWx1ZTogdW5rbm93bixcclxuXHRzZXR0aW5nczoge1xyXG5cdFx0ZmFsbGJhY2tUb0NvbnRlbnQ6IGJvb2xlYW47XHJcblx0XHRvbWl0Rmlyc3RMaW5lOiBib29sZWFuO1xyXG5cdFx0dHJ1bmNhdGVQcmV2aWV3UHJvcGVydHk/OiBib29sZWFuO1xyXG5cdH0sXHJcblx0ZmlsZU5hbWU/OiBzdHJpbmcsXHJcblx0dGl0bGVWYWx1ZT86IHN0cmluZ1xyXG4pOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cdC8vIEhhbmRsZSBhcnJheXMgKGUuZy4sIGFsaWFzZXMsIHRhZ3MpIGJ5IGpvaW5pbmcgdGhlbVxyXG5cdGxldCByZXN1bHQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG5cdFxyXG5cdGlmIChwcm9wZXJ0eVZhbHVlICE9IG51bGwpIHtcclxuXHRcdGlmIChBcnJheS5pc0FycmF5KHByb3BlcnR5VmFsdWUpKSB7XHJcblx0XHRcdC8vIEpvaW4gYXJyYXkgaXRlbXMgaW50byBhIHN0cmluZ1xyXG5cdFx0XHRjb25zdCBpdGVtcyA9IHByb3BlcnR5VmFsdWUubWFwKChpdGVtOiB1bmtub3duKSA9PiB7XHJcblx0XHRcdFx0aWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICdkYXRhJyBpbiBpdGVtKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gU3RyaW5nKChpdGVtIGFzIHsgZGF0YTogdW5rbm93biB9KS5kYXRhKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIFN0cmluZyhpdGVtKTtcclxuXHRcdFx0fSkuZmlsdGVyKChzOiBzdHJpbmcpID0+IHMudHJpbSgpLmxlbmd0aCA+IDApO1xyXG5cdFx0XHRyZXN1bHQgPSBpdGVtcy5sZW5ndGggPiAwID8gaXRlbXMuam9pbignLCAnKSA6IG51bGw7XHJcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiBwcm9wZXJ0eVZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgcHJvcGVydHlWYWx1ZSA9PT0gJ251bWJlcicpIHtcclxuXHRcdFx0Y29uc3Qgc3RyID0gU3RyaW5nKHByb3BlcnR5VmFsdWUpLnRyaW0oKTtcclxuXHRcdFx0cmVzdWx0ID0gc3RyLmxlbmd0aCA+IDAgPyBzdHIgOiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKHJlc3VsdCkge1xyXG5cdFx0Ly8gVHJ1bmNhdGUgaWYgc2V0dGluZyBpcyBlbmFibGVkXHJcblx0XHRpZiAoc2V0dGluZ3MudHJ1bmNhdGVQcmV2aWV3UHJvcGVydHkpIHtcclxuXHRcdFx0Y29uc3Qgd2FzVHJ1bmNhdGVkID0gcmVzdWx0Lmxlbmd0aCA+IDUwMDtcclxuXHRcdFx0cmVzdWx0ID0gcmVzdWx0LnN1YnN0cmluZygwLCA1MDApO1xyXG5cdFx0XHRpZiAod2FzVHJ1bmNhdGVkKSB7XHJcblx0XHRcdFx0cmVzdWx0ICs9ICdcdTIwMjYnO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH1cclxuXHJcblx0aWYgKHNldHRpbmdzLmZhbGxiYWNrVG9Db250ZW50KSB7XHJcblx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XHJcblx0XHRyZXR1cm4gc2FuaXRpemVGb3JQcmV2aWV3KFxyXG5cdFx0XHRjb250ZW50LFxyXG5cdFx0XHRzZXR0aW5ncy5vbWl0Rmlyc3RMaW5lLFxyXG5cdFx0XHRmaWxlTmFtZSxcclxuXHRcdFx0dGl0bGVWYWx1ZVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdHJldHVybiAnJztcclxufVxyXG5cclxuIiwgIi8qKlxyXG4gKiBDb250ZW50IGxvYWRpbmcgdXRpbGl0aWVzXHJcbiAqIEhhbmRsZXMgbG9hZGluZyBpbWFnZXMgYW5kIHNuaXBwZXRzIGZvciBlbnRyaWVzXHJcbiAqIE9wdGltaXplZCBmb3IgcGVyZm9ybWFuY2Ugd2l0aCBwYXJhbGxlbCBsb2FkaW5nIGFuZCBjYWNoaW5nXHJcbiAqL1xyXG5cclxuaW1wb3J0IHR5cGUgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBwcm9jZXNzSW1hZ2VQYXRocywgcmVzb2x2ZUludGVybmFsSW1hZ2VQYXRocywgZXh0cmFjdEVtYmVkSW1hZ2VzIH0gZnJvbSAnLi4vdXRpbHMvaW1hZ2UnO1xyXG5pbXBvcnQgeyBsb2FkRmlsZVByZXZpZXcgfSBmcm9tICcuLi91dGlscy9wcmV2aWV3JztcclxuXHJcbi8qKlxyXG4gKiBMb2FkcyBpbWFnZXMgZm9yIGFuIGVudHJ5XHJcbiAqIEhhbmRsZXMgcHJvcGVydHkgaW1hZ2VzLCBmYWxsYmFjayB0byBlbWJlZHMsIGFuZCBjYWNoaW5nXHJcbiAqIEJhc2VkIG9uIER5bmFtaWMgVmlld3MnIGZhc3QgcGFyYWxsZWwgbG9hZGluZyBhcHByb2FjaFxyXG4gKlxyXG4gKiBAcGFyYW0gcGF0aCAtIEZpbGUgcGF0aCBmb3IgdGhlIGVudHJ5XHJcbiAqIEBwYXJhbSBmaWxlIC0gVEZpbGUgb2JqZWN0XHJcbiAqIEBwYXJhbSBhcHAgLSBPYnNpZGlhbiBhcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIGltYWdlUHJvcGVydHlWYWx1ZXMgLSBBcnJheSBvZiBpbWFnZSBwcm9wZXJ0eSB2YWx1ZXNcclxuICogQHBhcmFtIGZhbGxiYWNrVG9FbWJlZHMgLSBXaGV0aGVyIHRvIGV4dHJhY3QgZW1iZWRkZWQgaW1hZ2VzIGlmIG5vIHByb3BlcnR5IGltYWdlcyAoJ2Fsd2F5cycgfCAnaWYtZW1wdHknIHwgJ25ldmVyJyB8IGJvb2xlYW4gZm9yIGxlZ2FjeSlcclxuICogQHBhcmFtIGltYWdlQ2FjaGUgLSBDYWNoZSBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGltYWdlc1xyXG4gKiBAcGFyYW0gaGFzSW1hZ2VDYWNoZSAtIENhY2hlIG9iamVjdCB0byB0cmFjayBpbWFnZSBhdmFpbGFiaWxpdHlcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkSW1hZ2VGb3JFbnRyeShcclxuXHRwYXRoOiBzdHJpbmcsXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0YXBwOiBBcHAsXHJcblx0aW1hZ2VQcm9wZXJ0eVZhbHVlczogdW5rbm93bltdLFxyXG5cdGZhbGxiYWNrVG9FbWJlZHM6IGJvb2xlYW4gfCAnYWx3YXlzJyB8ICdpZi1lbXB0eScgfCAnbmV2ZXInLFxyXG5cdGltYWdlQ2FjaGU6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPixcclxuXHRoYXNJbWFnZUNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPlxyXG4pOiBQcm9taXNlPHZvaWQ+IHtcclxuXHQvLyBDaGVjayBpZiBpbWFnZSBwcm9wZXJ0eSBoYXMgYW55IHZhbHVlcyBhdCBhbGwgKGV2ZW4gaWYgdGhleSBmYWlsIHRvIHJlc29sdmUpXHJcblx0Y29uc3QgaGFzUHJvcGVydHlWYWx1ZXMgPSBpbWFnZVByb3BlcnR5VmFsdWVzICYmIEFycmF5LmlzQXJyYXkoaW1hZ2VQcm9wZXJ0eVZhbHVlcykgJiYgaW1hZ2VQcm9wZXJ0eVZhbHVlcy5sZW5ndGggPiAwO1xyXG5cdFxyXG5cdC8vIENvbnZlcnQgZmFsbGJhY2tUb0VtYmVkcyB0byBib29sZWFuIGZvciBsb2dpY1xyXG5cdGNvbnN0IHNob3VsZEZhbGxiYWNrID0gZmFsbGJhY2tUb0VtYmVkcyA9PT0gdHJ1ZSB8fCBmYWxsYmFja1RvRW1iZWRzID09PSAnYWx3YXlzJyB8fCBcclxuXHRcdChmYWxsYmFja1RvRW1iZWRzID09PSAnaWYtZW1wdHknICYmICFoYXNQcm9wZXJ0eVZhbHVlcyk7XHJcblx0XHJcblx0Ly8gSWYgZmFsbGJhY2sgaXMgZGlzYWJsZWQgYW5kIHdlIGhhdmUgY2FjaGVkIGltYWdlcywgY2xlYXIgdGhlbSB0byBmb3JjZSByZS1ldmFsdWF0aW9uXHJcblx0Ly8gVGhpcyBlbnN1cmVzIGNhY2hlZCBlbWJlZCBpbWFnZXMgYXJlIHJlbW92ZWQgd2hlbiBzZXR0aW5nIGlzIHR1cm5lZCBvZmZcclxuXHRpZiAoIXNob3VsZEZhbGxiYWNrICYmIHBhdGggaW4gaW1hZ2VDYWNoZSkge1xyXG5cdFx0ZGVsZXRlIGltYWdlQ2FjaGVbcGF0aF07XHJcblx0XHRkZWxldGUgaGFzSW1hZ2VDYWNoZVtwYXRoXTtcclxuXHR9XHJcblx0XHJcblx0Ly8gSWYgYWxyZWFkeSBpbiBjYWNoZSBhbmQgbm8gcHJvcGVydHkgdmFsdWVzLCBza2lwIChvbmx5IGlmIGZhbGxiYWNrIGlzIGVuYWJsZWQpXHJcblx0aWYgKHBhdGggaW4gaW1hZ2VDYWNoZSAmJiAhaGFzUHJvcGVydHlWYWx1ZXMgJiYgc2hvdWxkRmFsbGJhY2spIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdHRyeSB7XHJcblx0XHQvLyBQcm9jZXNzIGFuZCB2YWxpZGF0ZSBpbWFnZSBwYXRocyB1c2luZyBzaGFyZWQgdXRpbGl0eVxyXG5cdFx0Y29uc3QgeyBpbnRlcm5hbFBhdGhzLCBleHRlcm5hbFVybHMgfSA9IGF3YWl0IHByb2Nlc3NJbWFnZVBhdGhzKGltYWdlUHJvcGVydHlWYWx1ZXMgYXMgc3RyaW5nW10pO1xyXG5cclxuXHRcdC8vIENvbnZlcnQgaW50ZXJuYWwgcGF0aHMgdG8gcmVzb3VyY2UgVVJMcyB1c2luZyBzaGFyZWQgdXRpbGl0eVxyXG5cdFx0bGV0IHZhbGlkSW1hZ2VzOiBzdHJpbmdbXSA9IFtcclxuXHRcdFx0Li4ucmVzb2x2ZUludGVybmFsSW1hZ2VQYXRocyhpbnRlcm5hbFBhdGhzLCBwYXRoLCBhcHApLFxyXG5cdFx0XHQuLi5leHRlcm5hbFVybHMgIC8vIEV4dGVybmFsIFVSTHMgYWxyZWFkeSB2YWxpZGF0ZWQgYnkgcHJvY2Vzc0ltYWdlUGF0aHNcclxuXHRcdF07XHJcblxyXG5cdFx0Ly8gT25seSBmYWxsIGJhY2sgdG8gZW1iZWQgaW1hZ2VzIGlmOlxyXG5cdFx0Ly8gMS4gTm8gcHJvcGVydHkgdmFsdWVzIHdlcmUgc2V0IGF0IGFsbCAobm90IHdoZW4gdGhleSBleGlzdCBidXQgZmFpbCB0byByZXNvbHZlKVxyXG5cdFx0Ly8gMi4gTm8gdmFsaWQgaW1hZ2VzIHdlcmUgZm91bmQgZnJvbSBwcm9wZXJ0eVxyXG5cdFx0Ly8gMy4gRmFsbGJhY2sgaXMgZW5hYmxlZFxyXG5cdFx0aWYgKHZhbGlkSW1hZ2VzLmxlbmd0aCA9PT0gMCAmJiAhaGFzUHJvcGVydHlWYWx1ZXMgJiYgc2hvdWxkRmFsbGJhY2spIHtcclxuXHRcdFx0dmFsaWRJbWFnZXMgPSBhd2FpdCBleHRyYWN0RW1iZWRJbWFnZXMoZmlsZSwgYXBwKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodmFsaWRJbWFnZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBTdG9yZSBhcyBhcnJheSBpZiBtdWx0aXBsZSwgc3RyaW5nIGlmIHNpbmdsZVxyXG5cdFx0XHQvLyBUaGlzIHdpbGwgb3ZlcndyaXRlIGFueSBjYWNoZWQgZW1iZWQgaW1hZ2VzIGlmIHByb3BlcnR5IGltYWdlcyBhcmUgZm91bmRcclxuXHRcdFx0aW1hZ2VDYWNoZVtwYXRoXSA9IHZhbGlkSW1hZ2VzLmxlbmd0aCA+IDEgPyB2YWxpZEltYWdlcyA6IHZhbGlkSW1hZ2VzWzBdO1xyXG5cdFx0XHRoYXNJbWFnZUNhY2hlW3BhdGhdID0gdHJ1ZTtcclxuXHRcdH0gZWxzZSBpZiAoaGFzUHJvcGVydHlWYWx1ZXMpIHtcclxuXHRcdFx0Ly8gSWYgcHJvcGVydHkgdmFsdWVzIGV4aXN0IGJ1dCBmYWlsZWQgdG8gcmVzb2x2ZSwgbWFyayBhcyBhdHRlbXB0ZWRcclxuXHRcdFx0Ly8gVGhpcyBwcmV2ZW50cyBlbWJlZCBpbWFnZXMgZnJvbSBiZWluZyBsb2FkZWQgbGF0ZXJcclxuXHRcdFx0Ly8gQWxzbyBjbGVhciBhbnkgY2FjaGVkIGVtYmVkIGltYWdlc1xyXG5cdFx0XHRkZWxldGUgaW1hZ2VDYWNoZVtwYXRoXTtcclxuXHRcdFx0aGFzSW1hZ2VDYWNoZVtwYXRoXSA9IHRydWU7XHJcblx0XHR9IGVsc2UgaWYgKCFzaG91bGRGYWxsYmFjaykge1xyXG5cdFx0XHQvLyBJZiBmYWxsYmFjayBpcyBkaXNhYmxlZCBhbmQgbm8gcHJvcGVydHkgaW1hZ2VzLCBjbGVhciBjYWNoZVxyXG5cdFx0XHRkZWxldGUgaW1hZ2VDYWNoZVtwYXRoXTtcclxuXHRcdFx0ZGVsZXRlIGhhc0ltYWdlQ2FjaGVbcGF0aF07XHJcblx0XHR9XHJcblx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBsb2FkIGltYWdlIGZvciAke3BhdGh9OmAsIGVycm9yKTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMb2FkcyBpbWFnZXMgZm9yIG11bHRpcGxlIGVudHJpZXMgaW4gcGFyYWxsZWwgYmF0Y2hlc1xyXG4gKiBVc2VzIGJhdGNoaW5nIHRvIGF2b2lkIG92ZXJ3aGVsbWluZyB0aGUgYnJvd3NlciB3aXRoIHRvbyBtYW55IGNvbmN1cnJlbnQgcmVxdWVzdHNcclxuICogQmFzZWQgb24gRHluYW1pYyBWaWV3cycgYXBwcm9hY2ggYnV0IHdpdGggYmF0Y2hpbmcgZm9yIGxhcmdlIGRhdGFzZXRzXHJcbiAqXHJcbiAqIEBwYXJhbSBlbnRyaWVzIC0gQXJyYXkgb2YgZW50cmllcyB3aXRoIHBhdGgsIGZpbGUsIGFuZCBpbWFnZVByb3BlcnR5VmFsdWVzXHJcbiAqIEBwYXJhbSBmYWxsYmFja1RvRW1iZWRzIC0gV2hldGhlciB0byBleHRyYWN0IGVtYmVkZGVkIGltYWdlcyBpZiBubyBwcm9wZXJ0eSBpbWFnZXNcclxuICogQHBhcmFtIGFwcCAtIE9ic2lkaWFuIGFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gaW1hZ2VDYWNoZSAtIENhY2hlIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgaW1hZ2VzXHJcbiAqIEBwYXJhbSBoYXNJbWFnZUNhY2hlIC0gQ2FjaGUgb2JqZWN0IHRvIHRyYWNrIGltYWdlIGF2YWlsYWJpbGl0eVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRJbWFnZXNGb3JFbnRyaWVzKFxyXG5cdGVudHJpZXM6IEFycmF5PHtcclxuXHRcdHBhdGg6IHN0cmluZztcclxuXHRcdGZpbGU6IFRGaWxlO1xyXG5cdFx0aW1hZ2VQcm9wZXJ0eVZhbHVlczogdW5rbm93bltdO1xyXG5cdH0+LFxyXG5cdGZhbGxiYWNrVG9FbWJlZHM6IGJvb2xlYW4gfCAnYWx3YXlzJyB8ICdpZi1lbXB0eScgfCAnbmV2ZXInLFxyXG5cdGFwcDogQXBwLFxyXG5cdGltYWdlQ2FjaGU6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPixcclxuXHRoYXNJbWFnZUNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPlxyXG4pOiBQcm9taXNlPHZvaWQ+IHtcclxuXHQvLyBGaWx0ZXIgZW50cmllczogb25seSBza2lwIGlmIGNhY2hlZCBBTkQgbm8gcHJvcGVydHkgdmFsdWVzIGV4aXN0XHJcblx0Ly8gSWYgcHJvcGVydHkgdmFsdWVzIGV4aXN0LCB3ZSBNVVNUIHJlLWV2YWx1YXRlIHRvIGVuc3VyZSBwcm9wZXJ0eSBpbWFnZXMgdGFrZSBwcmlvcml0eVxyXG5cdGNvbnN0IGVudHJpZXNUb1Byb2Nlc3MgPSBlbnRyaWVzLmZpbHRlcihlbnRyeSA9PiB7XHJcblx0XHRjb25zdCBoYXNQcm9wZXJ0eVZhbHVlcyA9IGVudHJ5LmltYWdlUHJvcGVydHlWYWx1ZXMgJiYgQXJyYXkuaXNBcnJheShlbnRyeS5pbWFnZVByb3BlcnR5VmFsdWVzKSAmJiBlbnRyeS5pbWFnZVByb3BlcnR5VmFsdWVzLmxlbmd0aCA+IDA7XHJcblx0XHQvLyBQcm9jZXNzIGlmOiBub3QgY2FjaGVkLCBPUiBoYXMgcHJvcGVydHkgdmFsdWVzICh0byBlbnN1cmUgcHJvcGVydHkgaW1hZ2VzIG92ZXJyaWRlIGNhY2hlZCBlbWJlZHMpXHJcblx0XHRyZXR1cm4gIShlbnRyeS5wYXRoIGluIGltYWdlQ2FjaGUpIHx8IGhhc1Byb3BlcnR5VmFsdWVzO1xyXG5cdH0pO1xyXG5cdFxyXG5cdC8vIEJhdGNoIHNpemU6IHByb2Nlc3MgNTAgaW1hZ2VzIGF0IGEgdGltZSB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIGJyb3dzZXJcclxuXHQvLyBUaGlzIGJhbGFuY2VzIHBlcmZvcm1hbmNlIChwYXJhbGxlbCBsb2FkaW5nKSB3aXRoIGJyb3dzZXIgbGltaXRzXHJcblx0Y29uc3QgQkFUQ0hfU0laRSA9IDUwO1xyXG5cdFxyXG5cdC8vIFByb2Nlc3MgaW4gYmF0Y2hlc1xyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgZW50cmllc1RvUHJvY2Vzcy5sZW5ndGg7IGkgKz0gQkFUQ0hfU0laRSkge1xyXG5cdFx0Y29uc3QgYmF0Y2ggPSBlbnRyaWVzVG9Qcm9jZXNzLnNsaWNlKGksIGkgKyBCQVRDSF9TSVpFKTtcclxuXHRcdFxyXG5cdFx0Ly8gTG9hZCBiYXRjaCBpbiBwYXJhbGxlbFxyXG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwoXHJcblx0XHRcdGJhdGNoLm1hcChhc3luYyAoZW50cnkpID0+IHtcclxuXHRcdFx0XHRhd2FpdCBsb2FkSW1hZ2VGb3JFbnRyeShcclxuXHRcdFx0XHRcdGVudHJ5LnBhdGgsXHJcblx0XHRcdFx0XHRlbnRyeS5maWxlLFxyXG5cdFx0XHRcdFx0YXBwLFxyXG5cdFx0XHRcdFx0ZW50cnkuaW1hZ2VQcm9wZXJ0eVZhbHVlcyxcclxuXHRcdFx0XHRcdGZhbGxiYWNrVG9FbWJlZHMsXHJcblx0XHRcdFx0XHRpbWFnZUNhY2hlLFxyXG5cdFx0XHRcdFx0aGFzSW1hZ2VDYWNoZVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH0pXHJcblx0XHQpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIExvYWRzIGltYWdlcyBmb3IgbXVsdGlwbGUgZW50cmllcyBzeW5jaHJvbm91c2x5IChmYXN0IHBhdGgpXHJcbiAqIFJlc29sdmVzIGltYWdlIGZpbGUgcmVmZXJlbmNlcyBpbW1lZGlhdGVseSBmb3IgaW5zdGFudCByZW5kZXJpbmdcclxuICogVXNlcyBwYXJhbGxlbCBsb2FkaW5nIGxpa2UgRHluYW1pYyBWaWV3cyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXHJcbiAqIFxyXG4gKiBAZGVwcmVjYXRlZCBVc2UgbG9hZEltYWdlc0ZvckVudHJpZXMgaW5zdGVhZCAtIGl0J3MgZmFzdGVyIHdpdGggcGFyYWxsZWwgbG9hZGluZ1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRJbWFnZXNGb3JFbnRyaWVzU3luYyhcclxuXHRlbnRyaWVzOiBBcnJheTx7XHJcblx0XHRwYXRoOiBzdHJpbmc7XHJcblx0XHRmaWxlOiBURmlsZTtcclxuXHRcdGltYWdlUHJvcGVydHlWYWx1ZXM6IHVua25vd25bXTtcclxuXHR9PixcclxuXHRmYWxsYmFja1RvRW1iZWRzOiBib29sZWFuIHwgJ2Fsd2F5cycgfCAnaWYtZW1wdHknIHwgJ25ldmVyJyxcclxuXHRhcHA6IEFwcCxcclxuXHRpbWFnZUNhY2hlOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXT4sXHJcblx0aGFzSW1hZ2VDYWNoZTogUmVjb3JkPHN0cmluZywgYm9vbGVhbj5cclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0Ly8gVXNlIHRoZSBwYXJhbGxlbCBsb2FkaW5nIGFwcHJvYWNoIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2VcclxuXHRhd2FpdCBsb2FkSW1hZ2VzRm9yRW50cmllcyhlbnRyaWVzLCBmYWxsYmFja1RvRW1iZWRzLCBhcHAsIGltYWdlQ2FjaGUsIGhhc0ltYWdlQ2FjaGUpO1xyXG59XHJcblxyXG4vKipcclxuICogTG9hZHMgZW1iZWQgaW1hZ2VzIGFzeW5jaHJvbm91c2x5IChmYWxsYmFjayBvbmx5KVxyXG4gKiBDYWxsZWQgaW4gYmFja2dyb3VuZCBhZnRlciBpbml0aWFsIHJlbmRlciBmb3IgZW50cmllcyB3aXRob3V0IHByb3BlcnR5IGltYWdlc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRFbWJlZEltYWdlc0ZvckVudHJpZXMoXHJcblx0ZW50cmllczogQXJyYXk8e1xyXG5cdFx0cGF0aDogc3RyaW5nO1xyXG5cdFx0ZmlsZTogVEZpbGU7XHJcblx0fT4sXHJcblx0YXBwOiBBcHAsXHJcblx0aW1hZ2VDYWNoZTogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgc3RyaW5nW10+LFxyXG5cdGhhc0ltYWdlQ2FjaGU6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+XHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG5cdGF3YWl0IFByb21pc2UuYWxsKFxyXG5cdFx0ZW50cmllcy5tYXAoYXN5bmMgKGVudHJ5KSA9PiB7XHJcblx0XHRcdC8vIE9ubHkgcHJvY2VzcyBlbnRyaWVzIHRoYXQgZG9uJ3QgaGF2ZSBpbWFnZXMgeWV0XHJcblx0XHRcdGlmIChlbnRyeS5wYXRoIGluIGltYWdlQ2FjaGUgfHwgaGFzSW1hZ2VDYWNoZVtlbnRyeS5wYXRoXSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCB2YWxpZEltYWdlcyA9IGF3YWl0IGV4dHJhY3RFbWJlZEltYWdlcyhlbnRyeS5maWxlLCBhcHApO1xyXG5cdFx0XHRcdGlmICh2YWxpZEltYWdlcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRpbWFnZUNhY2hlW2VudHJ5LnBhdGhdID0gdmFsaWRJbWFnZXMubGVuZ3RoID4gMSA/IHZhbGlkSW1hZ2VzIDogdmFsaWRJbWFnZXNbMF07XHJcblx0XHRcdFx0XHRoYXNJbWFnZUNhY2hlW2VudHJ5LnBhdGhdID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGxvYWQgZW1iZWQgaW1hZ2VzIGZvciAke2VudHJ5LnBhdGh9OmAsIGVycm9yKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHQpO1xyXG59XHJcblxyXG4vKipcclxuICogTG9hZHMgc25pcHBldHMgZm9yIG11bHRpcGxlIGVudHJpZXMgaW4gcGFyYWxsZWxcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkU25pcHBldHNGb3JFbnRyaWVzKFxyXG5cdGVudHJpZXM6IEFycmF5PHtcclxuXHRcdHBhdGg6IHN0cmluZztcclxuXHRcdGZpbGU6IFRGaWxlO1xyXG5cdFx0ZGVzY3JpcHRpb25EYXRhOiB1bmtub3duO1xyXG5cdFx0ZmlsZU5hbWU/OiBzdHJpbmc7XHJcblx0XHR0aXRsZVN0cmluZz86IHN0cmluZztcclxuXHR9PixcclxuXHRmYWxsYmFja1RvQ29udGVudDogYm9vbGVhbixcclxuXHRvbWl0Rmlyc3RMaW5lOiBib29sZWFuLFxyXG5cdGFwcDogQXBwLFxyXG5cdHNuaXBwZXRDYWNoZTogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcclxuXHR0cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eT86IGJvb2xlYW5cclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0YXdhaXQgUHJvbWlzZS5hbGwoXHJcblx0XHRlbnRyaWVzLm1hcChhc3luYyAoZW50cnkpID0+IHtcclxuXHRcdFx0Ly8gU2tpcCBpZiBhbHJlYWR5IGluIGNhY2hlXHJcblx0XHRcdGlmIChlbnRyeS5wYXRoIGluIHNuaXBwZXRDYWNoZSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRpZiAoZW50cnkuZmlsZS5leHRlbnNpb24gPT09ICdtZCcgfHwgZW50cnkuZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdFx0XHRzbmlwcGV0Q2FjaGVbZW50cnkucGF0aF0gPSBhd2FpdCBsb2FkRmlsZVByZXZpZXcoXHJcblx0XHRcdFx0XHRcdGVudHJ5LmZpbGUsXHJcblx0XHRcdFx0XHRcdGFwcCxcclxuXHRcdFx0XHRcdFx0ZW50cnkuZGVzY3JpcHRpb25EYXRhLFxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0ZmFsbGJhY2tUb0NvbnRlbnQsXHJcblx0XHRcdFx0XHRcdFx0b21pdEZpcnN0TGluZSxcclxuXHRcdFx0XHRcdFx0XHR0cnVuY2F0ZVByZXZpZXdQcm9wZXJ0eVxyXG5cdFx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0XHRlbnRyeS5maWxlTmFtZSxcclxuXHRcdFx0XHRcdFx0ZW50cnkudGl0bGVTdHJpbmdcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHNuaXBwZXRDYWNoZVtlbnRyeS5wYXRoXSA9ICcnO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBzbmlwcGV0IGZvciAke2VudHJ5LnBhdGh9OmAsIGVycm9yKTtcclxuXHRcdFx0XHRzbmlwcGV0Q2FjaGVbZW50cnkucGF0aF0gPSAnJztcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHQpO1xyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIFNoYXJlZCBDYXJkIFJlbmRlcmVyIGZvciBDTVMgVmlld3NcclxuICogQmFzZWQgb24gRHluYW1pYyBWaWV3cyBidXQgd2l0aCBDTVMtc3BlY2lmaWMgZmVhdHVyZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIEJhc2VzRW50cnksIFRGaWxlLCBNZW51IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4uL3V0aWxzL2Nzcy1wcm9wcyc7XHJcbmltcG9ydCB0eXBlIEJhc2VzQ01TUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgdHlwZSB7IENhcmREYXRhIH0gZnJvbSAnLi4vc2hhcmVkL2RhdGEtdHJhbnNmb3JtJztcclxuaW1wb3J0IHR5cGUgeyBDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9kYXRhLXRyYW5zZm9ybSc7XHJcbmltcG9ydCB7IHJlbmRlckRyYWZ0U3RhdHVzQmFkZ2UgfSBmcm9tICcuLi91dGlscy9kcmFmdC1zdGF0dXMtYmFkZ2UnO1xyXG5pbXBvcnQgeyBzZXR1cFF1aWNrRWRpdEljb24gfSBmcm9tICcuLi91dGlscy9xdWljay1lZGl0LWljb24nO1xyXG5pbXBvcnQgeyBQcm9wZXJ0eVJlbmRlcmVyIH0gZnJvbSAnLi4vdXRpbHMvcHJvcGVydHktcmVuZGVyZXInO1xyXG5pbXBvcnQgeyBjb252ZXJ0R2lmVG9TdGF0aWMgfSBmcm9tICcuLi91dGlscy9pbWFnZSc7XHJcbmltcG9ydCB7IGdldFRhZ1N0eWxlLCBzaG93VGFnSGFzaFByZWZpeCB9IGZyb20gJy4uL3V0aWxzL3N0eWxlLXNldHRpbmdzJztcclxuaW1wb3J0IHsgZ2V0RmlsZUZyb250bWF0dGVyIH0gZnJvbSAnLi4vdXRpbHMvZnJvbnRtYXR0ZXItaGVscGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTaGFyZWRDYXJkUmVuZGVyZXIge1xyXG5cdHByb3RlY3RlZCBiYXNlc0NvbmZpZz86IHsgZ2V0PzogKGtleTogc3RyaW5nKSA9PiB1bmtub3duIH07XHJcblx0cHJvdGVjdGVkIGJhc2VzQ29udHJvbGxlcj86IHsgZ2V0UHJvcGVydHlEaXNwbGF5TmFtZT86IChuYW1lOiBzdHJpbmcpID0+IHN0cmluZyB9O1xyXG5cdHByaXZhdGUgcHJvcGVydHlSZW5kZXJlcjogUHJvcGVydHlSZW5kZXJlcjtcclxuXHRwcm90ZWN0ZWQgbWR4RnJvbnRtYXR0ZXJDYWNoZT86IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD47XHJcblx0XHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcm90ZWN0ZWQgYXBwOiBBcHAsXHJcblx0XHRwcm90ZWN0ZWQgcGx1Z2luOiBCYXNlc0NNU1BsdWdpbixcclxuXHRcdHByb3RlY3RlZCBwcm9wZXJ0eU9ic2VydmVyczogUmVzaXplT2JzZXJ2ZXJbXSxcclxuXHRcdHByb3RlY3RlZCB1cGRhdGVMYXlvdXRSZWY6IHsgY3VycmVudDogKCgpID0+IHZvaWQpIHwgbnVsbCB9LFxyXG5cdFx0YmFzZXNDb25maWc/OiB7IGdldD86IChrZXk6IHN0cmluZykgPT4gdW5rbm93biB9LFxyXG5cdFx0YmFzZXNDb250cm9sbGVyPzogdW5rbm93blxyXG5cdCkge1xyXG5cdFx0dGhpcy5iYXNlc0NvbmZpZyA9IGJhc2VzQ29uZmlnO1xyXG5cdFx0dGhpcy5iYXNlc0NvbnRyb2xsZXIgPSBiYXNlc0NvbnRyb2xsZXIgYXMgeyBnZXRQcm9wZXJ0eURpc3BsYXlOYW1lPzogKG5hbWU6IHN0cmluZykgPT4gc3RyaW5nIH07XHJcblx0XHR0aGlzLnByb3BlcnR5UmVuZGVyZXIgPSBuZXcgUHJvcGVydHlSZW5kZXJlcihcclxuXHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdCgpID0+IHRoaXMuYmFzZXNDb25maWcsIC8vIFBhc3MgYSBnZXR0ZXIgZnVuY3Rpb24gc28gaXQgYWx3YXlzIGdldHMgdGhlIGxhdGVzdCBjb25maWdcclxuXHRcdFx0KCkgPT4gdGhpcy5iYXNlc0NvbnRyb2xsZXIgLy8gUGFzcyBhIGdldHRlciBmdW5jdGlvbiBzbyBpdCBhbHdheXMgZ2V0cyB0aGUgbGF0ZXN0IGNvbnRyb2xsZXJcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgTURYIGZyb250bWF0dGVyIGNhY2hlIGZvciBzeW5jaHJvbm91cyBhY2Nlc3MgZHVyaW5nIHJlbmRlcmluZ1xyXG5cdCAqL1xyXG5cdHNldE1keEZyb250bWF0dGVyQ2FjaGUoY2FjaGU6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbD4pOiB2b2lkIHtcclxuXHRcdHRoaXMubWR4RnJvbnRtYXR0ZXJDYWNoZSA9IGNhY2hlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVuZGVycyBhIGNvbXBsZXRlIGNhcmQgd2l0aCBDTVMgZmVhdHVyZXNcclxuXHQgKi9cclxuXHRyZW5kZXJDYXJkKFxyXG5cdFx0Y29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuXHRcdGNhcmQ6IENhcmREYXRhLFxyXG5cdFx0ZW50cnk6IEJhc2VzRW50cnksXHJcblx0XHRzZXR0aW5nczogQ01TU2V0dGluZ3MsXHJcblx0XHRob3ZlclBhcmVudDogdW5rbm93bixcclxuXHRcdGlzU2VsZWN0ZWQ6IGJvb2xlYW4sXHJcblx0XHRvblNlbGVjdDogKHBhdGg6IHN0cmluZywgc2VsZWN0ZWQ6IGJvb2xlYW4pID0+IHZvaWQsXHJcblx0XHRvblByb3BlcnR5VG9nZ2xlPzogKHBhdGg6IHN0cmluZywgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHVua25vd24pID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+LFxyXG5cdFx0dG9vbGJhckFjdGlvbnM/OiB7IGhhbmRsZURlbGV0ZTogKCkgPT4gUHJvbWlzZTx2b2lkPiB9XHJcblx0KTogdm9pZCB7XHJcblx0XHQvLyBDcmVhdGUgY2FyZCBlbGVtZW50XHJcblx0XHRjb25zdCBjYXJkRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KCdjYXJkIGJhc2VzLWNtcy1jYXJkJyk7XHJcblx0XHRcclxuXHRcdC8vIENSSVRJQ0FMOiBGb3JjZSBpbW1lZGlhdGUgbGF5b3V0IHJlZmxvdyB0byBwcmV2ZW50IEZvbGRlciBOb3RlcyBwbHVnaW4gaW50ZXJmZXJlbmNlXHJcblx0XHQvLyBJbmxpbmUgc3R5bGVzIHRyaWdnZXIgbGF5b3V0IGNhbGN1bGF0aW9uIGJlZm9yZSBGb2xkZXIgTm90ZXMnIE11dGF0aW9uT2JzZXJ2ZXIgcHJvY2Vzc2VzIHRoZSBlbGVtZW50XHJcblx0XHRzZXRDc3NQcm9wcyhjYXJkRWwsIHtcclxuXHRcdFx0ZGlzcGxheTogJ2Jsb2NrJyxcclxuXHRcdFx0cG9zaXRpb246ICdyZWxhdGl2ZSdcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRpZiAoc2V0dGluZ3MuaW1hZ2VGb3JtYXQgPT09ICdjb3ZlcicpIHtcclxuXHRcdFx0Y2FyZEVsLmNsYXNzTGlzdC5hZGQoJ2ltYWdlLWZvcm1hdC1jb3ZlcicpO1xyXG5cdFx0fSBlbHNlIGlmIChzZXR0aW5ncy5pbWFnZUZvcm1hdCA9PT0gJ3RodW1ibmFpbCcpIHtcclxuXHRcdFx0Y2FyZEVsLmNsYXNzTGlzdC5hZGQoJ2ltYWdlLWZvcm1hdC10aHVtYm5haWwnKTtcclxuXHRcdFx0Ly8gQWRkIHBvc2l0aW9uIGNsYXNzIGZvciB0aHVtYm5haWxcclxuXHRcdFx0Y2FyZEVsLmNsYXNzTGlzdC5hZGQoYHRodW1ibmFpbC0ke3NldHRpbmdzLmltYWdlUG9zaXRpb259YCk7XHJcblx0XHR9XHJcblx0XHRjYXJkRWwuc2V0QXR0cmlidXRlKCdkYXRhLXBhdGgnLCBjYXJkLnBhdGgpO1xyXG5cdFx0Y2FyZEVsLnNldEF0dHJpYnV0ZSgnZGF0YS1ocmVmJywgY2FyZC5wYXRoKTtcclxuXHRcdGNhcmRFbC5hZGRDbGFzcygnYmFzZXMtY21zLWN1cnNvci1wb2ludGVyJyk7XHJcblxyXG5cdFx0Ly8gU2VsZWN0aW9uIGNoZWNrYm94XHJcblx0XHRjb25zdCBjaGVja2JveEVsID0gY2FyZEVsLmNyZWF0ZURpdignYmFzZXMtY21zLXNlbGVjdC1jaGVja2JveCcpO1xyXG5cdFx0Y29uc3QgY2hlY2tib3ggPSBjaGVja2JveEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2NoZWNrYm94JywgY2xzOiAnc2VsZWN0aW9uLWNoZWNrYm94JyB9KTtcclxuXHRcdGNoZWNrYm94LmNoZWNrZWQgPSBpc1NlbGVjdGVkO1xyXG5cdFx0Y2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0b25TZWxlY3QoY2FyZC5wYXRoLCBjaGVja2JveC5jaGVja2VkKTtcclxuXHRcdH0pO1xyXG5cdFx0Ly8gQWxzbyBoYW5kbGUgY2xpY2sgb24gY2hlY2tib3ggdG8gZW5zdXJlIGl0IHdvcmtzXHJcblx0XHRjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBEcmFmdCBzdGF0dXMgYmFkZ2UgZm9yIG5vbi1jb3ZlciBmb3JtYXRzIChwb3NpdGlvbmVkIGFic29sdXRlbHksIGFsaWduZWQgd2l0aCBjaGVja2JveClcclxuXHRcdGlmIChzZXR0aW5ncy5zaG93RHJhZnRTdGF0dXMgJiYgc2V0dGluZ3MuaW1hZ2VGb3JtYXQgIT09ICdjb3ZlcicpIHtcclxuXHRcdFx0cmVuZGVyRHJhZnRTdGF0dXNCYWRnZShjYXJkRWwsIGVudHJ5LCBjYXJkLnBhdGgsIHNldHRpbmdzLCBvblByb3BlcnR5VG9nZ2xlLCB0aGlzLmFwcCwgdGhpcy5tZHhGcm9udG1hdHRlckNhY2hlKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBIYW5kbGUgY2FyZCBjbGljayB0byBvcGVuIGZpbGUgKGJ1dCBub3Qgd2hlbiBjbGlja2luZyBjaGVja2JveCBvciBwcm9wZXJ0eSBjaGVja2JveGVzKVxyXG5cdFx0Y2FyZEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdC8vIENoZWNrIGlmIGNsaWNrIGlzIG9uIHF1aWNrIGVkaXQgaWNvbiBvciBhbnkgb2YgaXRzIGNoaWxkcmVuIChsaWtlIFNWRylcclxuXHRcdFx0Y29uc3QgcXVpY2tFZGl0SWNvbiA9IHRhcmdldC5jbG9zZXN0KCcuYmFzZXMtY21zLXF1aWNrLWVkaXQtaWNvbicpO1xyXG5cdFx0XHRpZiAocXVpY2tFZGl0SWNvbikge1xyXG5cdFx0XHRcdC8vIEV4cGxpY2l0bHkgcHJldmVudCBjYXJkIGNsaWNrIHdoZW4gaWNvbiBpcyBjbGlja2VkXHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKFxyXG5cdFx0XHRcdGNoZWNrYm94RWwuY29udGFpbnModGFyZ2V0KSB8fFxyXG5cdFx0XHRcdHRhcmdldC50YWdOYW1lID09PSAnSU5QVVQnIHx8XHJcblx0XHRcdFx0dGFyZ2V0LmNsb3Nlc3QoJ2lucHV0JykgfHxcclxuXHRcdFx0XHR0YXJnZXQuY2xvc2VzdCgnLmJhc2VzLWNtcy1wcm9wZXJ0eScpIHx8XHJcblx0XHRcdFx0dGFyZ2V0LmNsb3Nlc3QoJy5jYXJkLXN0YXR1cy1iYWRnZScpXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb25zdCBuZXdMZWFmID0gZS5tZXRhS2V5IHx8IGUuY3RybEtleTtcclxuXHRcdFx0dm9pZCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGNhcmQucGF0aCwgJycsIG5ld0xlYWYpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gSGFuZGxlIHJpZ2h0LWNsaWNrIHRvIHNob3cgY29udGV4dCBtZW51XHJcblx0XHQvLyBVc2UgT2JzaWRpYW4ncyBzdGFuZGFyZCBmaWxlLW1lbnUgZXZlbnQgc3Vic2NyaXB0aW9uIHBhdHRlcm5cclxuXHRcdGNhcmRFbC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XHJcblx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHQvLyBEb24ndCBzaG93IGNvbnRleHQgbWVudSBmb3IgY2hlY2tib3hlcywgcHJvcGVydHkgY2hlY2tib3hlcywgc3RhdHVzIGJhZGdlcywgb3IgcXVpY2sgZWRpdCBpY29uXHJcblx0XHRcdGlmIChcclxuXHRcdFx0XHRjaGVja2JveEVsLmNvbnRhaW5zKHRhcmdldCkgfHxcclxuXHRcdFx0XHR0YXJnZXQudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fFxyXG5cdFx0XHRcdHRhcmdldC5jbG9zZXN0KCdpbnB1dCcpIHx8XHJcblx0XHRcdFx0dGFyZ2V0LmNsb3Nlc3QoJy5iYXNlcy1jbXMtcHJvcGVydHknKSB8fFxyXG5cdFx0XHRcdHRhcmdldC5jbG9zZXN0KCcuY2FyZC1zdGF0dXMtYmFkZ2UnKSB8fFxyXG5cdFx0XHRcdHRhcmdldC5jbG9zZXN0KCcuYmFzZXMtY21zLXF1aWNrLWVkaXQtaWNvbicpXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gR2V0IHRoZSBmaWxlXHJcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY2FyZC5wYXRoKTtcclxuXHRcdFx0aWYgKGZpbGUgJiYgZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcblx0XHRcdFx0Ly8gUHJldmVudCB0aGUgY2FyZCBjbGljayBoYW5kbGVyIGZyb20gZmlyaW5nXHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHQvLyBEb24ndCBwcmV2ZW50IGRlZmF1bHQgLSBPYnNpZGlhbidzIG1lbnUgc3lzdGVtIG5lZWRzIGRlZmF1bHQgYmVoYXZpb3JcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBDaGVjayBjdXJyZW50IHNlbGVjdGlvbiBzdGF0ZSBkeW5hbWljYWxseSBieSBjaGVja2luZyB0aGUgY2hlY2tib3hcclxuXHRcdFx0XHRjb25zdCBjdXJyZW50bHlTZWxlY3RlZCA9IGNoZWNrYm94LmNoZWNrZWQ7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQWRkIFNlbGVjdC9VbnNlbGVjdCBpdGVtXHJcblx0XHRcdFx0aWYgKGN1cnJlbnRseVNlbGVjdGVkKSB7XHJcblx0XHRcdFx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnVW5zZWxlY3QnKTtcclxuXHRcdFx0XHRcdFx0aXRlbS5zZXRJY29uKCdzcXVhcmUnKTtcclxuXHRcdFx0XHRcdFx0aXRlbS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRvblNlbGVjdChjYXJkLnBhdGgsIGZhbHNlKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XHJcblx0XHRcdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ1NlbGVjdCcpO1xyXG5cdFx0XHRcdFx0XHRpdGVtLnNldEljb24oJ2NvcHktY2hlY2snKTtcclxuXHRcdFx0XHRcdFx0aXRlbS5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRvblNlbGVjdChjYXJkLnBhdGgsIHRydWUpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRtZW51LmFkZFNlcGFyYXRvcigpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFRyaWdnZXIgZmlsZS1tZW51IGV2ZW50IC0gdGhpcyBhbGxvd3Mgb3RoZXIgcGx1Z2lucyB0byBhZGQgdGhlaXIgaXRlbXNcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignZmlsZS1tZW51JywgbWVudSwgZmlsZSwgJ2Jhc2VzJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQWRkIERlbGV0ZSBhdCB0aGUgYm90dG9tIChhZnRlciBhbGwgZmlsZS1tZW51IHN1YnNjcmlwdGlvbnMgaGF2ZSBydW4pXHJcblx0XHRcdFx0Ly8gQWx3YXlzIHNob3cgRGVsZXRlIG9wdGlvbiAtIHRvb2xiYXJBY3Rpb25zIHNob3VsZCBhbHdheXMgYmUgcHJvdmlkZWRcclxuXHRcdFx0XHRtZW51LmFkZFNlcGFyYXRvcigpO1xyXG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG5cdFx0XHRcdFx0aXRlbS5zZXRUaXRsZSgnRGVsZXRlJyk7XHJcblx0XHRcdFx0XHRpdGVtLnNldEljb24oJ3RyYXNoLTInKTtcclxuXHRcdFx0XHRcdGl0ZW0ub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdC8vIERlbGV0ZSBkaXJlY3RseSB3aXRob3V0IHNlbGVjdGluZ1xyXG5cdFx0XHRcdFx0XHRpZiAodG9vbGJhckFjdGlvbnMpIHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0b29sYmFyQWN0aW9ucy5oYW5kbGVEZWxldGUoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0bWVudS5zaG93QXRNb3VzZUV2ZW50KGUpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFN0eWxlIERlbGV0ZSBtZW51IGl0ZW0gYXMgZGVzdHJ1Y3RpdmUgKHJlZC93YXJuaW5nIGNvbG9yKVxyXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgbWVudUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUnKTtcclxuXHRcdFx0XHRcdGlmICghbWVudUVsKSByZXR1cm47XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnN0IG1lbnVJdGVtcyA9IEFycmF5LmZyb20obWVudUVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW0nKSk7XHJcblx0XHRcdFx0XHRjb25zdCBkZWxldGVJdGVtID0gbWVudUl0ZW1zLmZpbmQoaXRlbSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHRpdGxlID0gaXRlbS50ZXh0Q29udGVudD8udHJpbSgpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdGl0bGUgPT09ICdEZWxldGUnO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChkZWxldGVJdGVtKSB7XHJcblx0XHRcdFx0XHRcdGRlbGV0ZUl0ZW0uYWRkQ2xhc3MoJ2lzLWRhbmdlcicpO1xyXG5cdFx0XHRcdFx0XHQvLyBTdHlsZSB0aGUgaWNvbiBhbmQgdGV4dCB3aXRoIGVycm9yIGNvbG9yXHJcblx0XHRcdFx0XHRcdGNvbnN0IGljb24gPSBkZWxldGVJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpO1xyXG5cdFx0XHRcdFx0XHRpZiAoaWNvbikge1xyXG5cdFx0XHRcdFx0XHRcdHNldENzc1Byb3BzKGljb24sIHtcclxuXHRcdFx0XHRcdFx0XHRcdGNvbG9yOiAndmFyKC0tdGV4dC1lcnJvciknLFxyXG5cdFx0XHRcdFx0XHRcdFx0c3Ryb2tlOiAndmFyKC0tdGV4dC1lcnJvciknXHJcblx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0Y29uc3QgdGl0bGUgPSBkZWxldGVJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5tZW51LWl0ZW0tdGl0bGUnKTtcclxuXHRcdFx0XHRcdGlmICh0aXRsZSkge1xyXG5cdFx0XHRcdFx0XHRzZXRDc3NQcm9wcyh0aXRsZSBhcyBIVE1MRWxlbWVudCwge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29sb3I6ICd2YXIoLS10ZXh0LWVycm9yKSdcclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sIDApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUaXRsZSAtIGFsd2F5cyByZW5kZXIgKGRlZmF1bHRzIHRvIGZpbGUgbmFtZSBpZiBubyB0aXRsZSBwcm9wZXJ0eSBpcyBzZXQpXHJcblx0XHRjb25zdCB0aXRsZUVsID0gY2FyZEVsLmNyZWF0ZURpdignY2FyZC10aXRsZScpO1xyXG5cdFx0dGl0bGVFbC5hcHBlbmRUZXh0KGNhcmQudGl0bGUpO1xyXG5cdFx0XHRcclxuXHRcdC8vIFF1aWNrIGVkaXQgaWNvbiAtIGF0dGFjaCB0byB0aXRsZUVsXHJcblx0XHRzZXR1cFF1aWNrRWRpdEljb24odGhpcy5hcHAsIHRoaXMucGx1Z2luLCB0aXRsZUVsLCBjYXJkRWwsIGNhcmQucGF0aCwgc2V0dGluZ3MpO1xyXG5cclxuXHRcdC8vIERhdGUgKGJlbG93IHRpdGxlKVxyXG5cdFx0aWYgKHNldHRpbmdzLnNob3dEYXRlICYmIHNldHRpbmdzLmRhdGVQcm9wZXJ0eSkge1xyXG5cdFx0XHQvLyBUcnkgc3luY2hyb25vdXMgQmFzZXMgQVBJIGZpcnN0ICh3b3JrcyBmb3IgLm1kIGZpbGVzKVxyXG5cdFx0XHRsZXQgZGF0ZVZhbHVlID0gZW50cnkuZ2V0VmFsdWUoc2V0dGluZ3MuZGF0ZVByb3BlcnR5IGFzIGBub3RlLiR7c3RyaW5nfWAgfCBgZm9ybXVsYS4ke3N0cmluZ31gIHwgYGZpbGUuJHtzdHJpbmd9YCkgYXMgeyBkYXRlPzogRGF0ZTsgZGF0YT86IHVua25vd247IGljb24/OiBzdHJpbmcgfSB8IG51bGw7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayBpZiB3ZSBhY3R1YWxseSBoYXZlIGEgdmFsaWQgZGF0ZSB2YWx1ZVxyXG5cdFx0XHQvLyBGb3IgTURYIGZpbGVzLCBCYXNlcyBBUEkgbWlnaHQgcmV0dXJuIHtpY29uOiAnbHVjaWRlLWZpbGUtcXVlc3Rpb24nfSB3aGljaCBpcyB0cnV0aHkgYnV0IGhhcyBubyBkYXRlXHJcblx0XHRcdGNvbnN0IGhhc1ZhbGlkRGF0ZSA9IGRhdGVWYWx1ZSAmJiAoXHJcblx0XHRcdFx0KCdkYXRlJyBpbiBkYXRlVmFsdWUgJiYgZGF0ZVZhbHVlLmRhdGUgaW5zdGFuY2VvZiBEYXRlKSB8fFxyXG5cdFx0XHRcdCgnZGF0YScgaW4gZGF0ZVZhbHVlICYmIGRhdGVWYWx1ZS5kYXRhICE9IG51bGwpXHJcblx0XHRcdCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBGb3IgTURYIGZpbGVzLCBmYWxsYmFjayB0byBtYW51YWwgZnJvbnRtYXR0ZXIgcGFyc2luZyBpZiBubyB2YWxpZCBkYXRlXHJcblx0XHRcdGlmICghaGFzVmFsaWREYXRlKSB7XHJcblx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChlbnRyeS5maWxlLnBhdGgpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdFx0XHQvLyBMb2FkIGRhdGUgYXN5bmNocm9ub3VzbHkgZm9yIE1EWCBmaWxlc1xyXG5cdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcih0aGlzLmFwcCwgZmlsZSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBTdHJpcCBcIm5vdGUuXCIgcHJlZml4IGlmIHByZXNlbnRcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjbGVhblByb3AgPSBzZXR0aW5ncy5kYXRlUHJvcGVydHkuc3RhcnRzV2l0aCgnbm90ZS4nKSBcclxuXHRcdFx0XHRcdFx0XHRcdD8gc2V0dGluZ3MuZGF0ZVByb3BlcnR5LnN1YnN0cmluZyg1KSBcclxuXHRcdFx0XHRcdFx0XHRcdDogc2V0dGluZ3MuZGF0ZVByb3BlcnR5O1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyVmFsdWUgPSBmcm9udG1hdHRlcltjbGVhblByb3BdO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmIChmcm9udG1hdHRlclZhbHVlICE9IG51bGwpIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFBhcnNlIGRhdGUgZnJvbSBmcm9udG1hdHRlciB2YWx1ZVxyXG5cdFx0XHRcdFx0XHRcdFx0bGV0IGRhdGU6IERhdGUgfCBudWxsID0gbnVsbDtcclxuXHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIERhdGUgb2JqZWN0cyAoaW5jbHVkaW5nIHRob3NlIGZyb20gWUFNTCBwYXJzaW5nKVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGZyb250bWF0dGVyVmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGUgPSBmcm9udG1hdHRlclZhbHVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0fSBcclxuXHRcdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBkYXRlLWxpa2Ugb2JqZWN0cyAoWUFNTCBwYXJzZXJzIHNvbWV0aW1lcyByZXR1cm4gY3VzdG9tIERhdGUgb2JqZWN0cylcclxuXHRcdFx0XHRcdFx0XHRcdGVsc2UgaWYgKGZyb250bWF0dGVyVmFsdWUgJiYgdHlwZW9mIGZyb250bWF0dGVyVmFsdWUgPT09ICdvYmplY3QnICYmICdnZXRUaW1lJyBpbiBmcm9udG1hdHRlclZhbHVlKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGRhdGVMaWtlID0gZnJvbnRtYXR0ZXJWYWx1ZSBhcyB7IGdldFRpbWU6ICgpID0+IG51bWJlciB9O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRpbWVzdGFtcCA9IGRhdGVMaWtlLmdldFRpbWUoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZW9mIHRpbWVzdGFtcCA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHRpbWVzdGFtcCkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmFsbCB0aHJvdWdoIHRvIHN0cmluZy9udW1iZXIgaGFuZGxpbmdcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIHN0cmluZ3MgLSBlc3BlY2lhbGx5IElTTyBkYXRlIHN0cmluZ3MgbGlrZSBcIjIwMjUtMTItMjlcIlxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFkYXRlICYmIHR5cGVvZiBmcm9udG1hdHRlclZhbHVlID09PSAnc3RyaW5nJykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBkYXRlU3RyID0gZnJvbnRtYXR0ZXJWYWx1ZS50cmltKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFRyeSBwYXJzaW5nIGFzIElTTyBkYXRlIChZWVlZLU1NLUREKSAtIHRoaXMgaXMgd2hhdCBPYnNpZGlhbiB1c2VzXHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCB0aW1lIGNvbXBvbmVudCB0byBhdm9pZCB0aW1lem9uZSBpc3N1ZXM6IFwiMjAyNS0xMi0yOVwiIC0+IFwiMjAyNS0xMi0yOVQwMDowMDowMFwiXHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGlzb0RhdGVTdHIgPSBkYXRlU3RyLmluY2x1ZGVzKCdUJykgPyBkYXRlU3RyIDogYCR7ZGF0ZVN0cn1UMDA6MDA6MDBgO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYXJzZWREYXRlID0gbmV3IERhdGUoaXNvRGF0ZVN0cik7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICghaXNOYU4ocGFyc2VkRGF0ZS5nZXRUaW1lKCkpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0ZSA9IHBhcnNlZERhdGU7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gZGlyZWN0IERhdGUgY29uc3RydWN0b3JcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBmYWxsYmFja0RhdGUgPSBuZXcgRGF0ZShkYXRlU3RyKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWlzTmFOKGZhbGxiYWNrRGF0ZS5nZXRUaW1lKCkpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRlID0gZmFsbGJhY2tEYXRlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIG51bWJlcnMgKHRpbWVzdGFtcHMpXHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIWRhdGUgJiYgdHlwZW9mIGZyb250bWF0dGVyVmFsdWUgPT09ICdudW1iZXInKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZERhdGUgPSBuZXcgRGF0ZShmcm9udG1hdHRlclZhbHVlKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCFpc05hTihwYXJzZWREYXRlLmdldFRpbWUoKSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRlID0gcGFyc2VkRGF0ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBBbHdheXMgdHJ5IHRvIHJlbmRlciB0aGUgZGF0ZSwgZXZlbiBpZiBjYXJkRWwgbWlnaHQgbm90IGJlIGNvbm5lY3RlZCB5ZXRcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFRoZSBkYXRlIGVsZW1lbnQgd2lsbCBiZSBjcmVhdGVkL3VwZGF0ZWQgd2hlbiB0aGUgY2FyZCBpcyByZW5kZXJlZFxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGRhdGUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXNlIHJlcXVlc3RBbmltYXRpb25GcmFtZSB0byBlbnN1cmUgRE9NIGlzIHJlYWR5XHJcblx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNhcmRFbC5pc0Nvbm5lY3RlZCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRm9ybWF0IGRhdGUgYmFzZWQgb24gc2V0dGluZ3NcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGxldCBkYXRlU3RyaW5nOiBzdHJpbmc7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuZGF0ZUluY2x1ZGVUaW1lKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZvcm1hdCBkYXRlIGFuZCB0aW1lIHNlcGFyYXRlbHksIHRoZW4gY29tYmluZSAocmVzcGVjdHMgdXNlcidzIHN5c3RlbSBsb2NhbGUpXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFVzZSBvcHRpb25zIHRvIGV4Y2x1ZGUgc2Vjb25kcyBhbmQgbWF0Y2ggdXNlcidzIGV4cGVjdGVkIGZvcm1hdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBkYXRlUGFydCA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRpbWVQYXJ0ID0gZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcodW5kZWZpbmVkLCB7IFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhvdXI6ICdudW1lcmljJywgXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWludXRlOiAnMi1kaWdpdCcsIFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhvdXIxMjogdHJ1ZSBcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGVTdHJpbmcgPSBgJHtkYXRlUGFydH0sICR7dGltZVBhcnR9YDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFdoZW4gdGltZSBpcyBub3QgaW5jbHVkZWQsIHVzZSBkYXRlLW9ubHkgZm9ybWF0IChyZXNwZWN0cyB1c2VyJ3Mgc3lzdGVtIGxvY2FsZSlcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0ZVN0cmluZyA9IGRhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIEZpbmQgb3IgY3JlYXRlIGRhdGUgZWxlbWVudFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bGV0IGRhdGVFbCA9IGNhcmRFbC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1kYXRlJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIWRhdGVFbCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGaW5kIHRoZSB0aXRsZSBlbGVtZW50IHRvIGluc2VydCBkYXRlIGFmdGVyIGl0XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRpdGxlRWwgPSBjYXJkRWwucXVlcnlTZWxlY3RvcignLmNhcmQtdGl0bGUnKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRpdGxlRWwgJiYgdGl0bGVFbC5wYXJlbnRFbGVtZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0ZUVsID0gdGl0bGVFbC5wYXJlbnRFbGVtZW50LmNyZWF0ZURpdignY2FyZC1kYXRlJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gSW5zZXJ0IGFmdGVyIHRpdGxlXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGl0bGVFbC5wYXJlbnRFbGVtZW50Lmluc2VydEJlZm9yZShkYXRlRWwsIHRpdGxlRWwubmV4dFNpYmxpbmcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGVFbCA9IGNhcmRFbC5jcmVhdGVEaXYoJ2NhcmQtZGF0ZScpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRlRWwuc2V0VGV4dChkYXRlU3RyaW5nKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGlmIChoYXNWYWxpZERhdGUgJiYgZGF0ZVZhbHVlKSB7XHJcblx0XHRcdFx0Y29uc3QgZGF0ZU9iaiA9IGRhdGVWYWx1ZSBhcyB7IGRhdGU/OiBEYXRlOyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHRcdFx0XHRsZXQgZGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChkYXRlT2JqICYmICdkYXRlJyBpbiBkYXRlT2JqICYmIGRhdGVPYmouZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuXHRcdFx0XHRcdGRhdGUgPSBkYXRlT2JqLmRhdGU7XHJcblx0XHRcdFx0fSBlbHNlIGlmIChkYXRlT2JqICYmICdkYXRhJyBpbiBkYXRlT2JqICYmIGRhdGVPYmouZGF0YSkge1xyXG5cdFx0XHRcdFx0Y29uc3QgZGF0YSA9IGRhdGVPYmouZGF0YTtcclxuXHRcdFx0XHRcdGlmIChkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xyXG5cdFx0XHRcdFx0XHRkYXRlID0gZGF0YTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBkYXRhID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBwYXJzZWREYXRlID0gbmV3IERhdGUoZGF0YSk7XHJcblx0XHRcdFx0XHRcdGlmICghaXNOYU4ocGFyc2VkRGF0ZS5nZXRUaW1lKCkpKSB7XHJcblx0XHRcdFx0XHRcdFx0ZGF0ZSA9IHBhcnNlZERhdGU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGRhdGUpIHtcclxuXHRcdFx0XHRcdC8vIEZvcm1hdCBkYXRlIGJhc2VkIG9uIHNldHRpbmdzXHJcblx0XHRcdFx0XHRsZXQgZGF0ZVN0cmluZzogc3RyaW5nO1xyXG5cdFx0XHRcdFx0aWYgKHNldHRpbmdzLmRhdGVJbmNsdWRlVGltZSkge1xyXG5cdFx0XHRcdFx0XHQvLyBGb3JtYXQgZGF0ZSBhbmQgdGltZSBzZXBhcmF0ZWx5LCB0aGVuIGNvbWJpbmUgKHJlc3BlY3RzIHVzZXIncyBzeXN0ZW0gbG9jYWxlKVxyXG5cdFx0XHRcdFx0XHQvLyBVc2Ugb3B0aW9ucyB0byBleGNsdWRlIHNlY29uZHMgYW5kIG1hdGNoIHVzZXIncyBleHBlY3RlZCBmb3JtYXRcclxuXHRcdFx0XHRcdFx0Y29uc3QgZGF0ZVBhcnQgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG5cdFx0XHRcdFx0XHRjb25zdCB0aW1lUGFydCA9IGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKHVuZGVmaW5lZCwgeyBcclxuXHRcdFx0XHRcdFx0XHRob3VyOiAnbnVtZXJpYycsIFxyXG5cdFx0XHRcdFx0XHRcdG1pbnV0ZTogJzItZGlnaXQnLCBcclxuXHRcdFx0XHRcdFx0XHRob3VyMTI6IHRydWUgXHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRkYXRlU3RyaW5nID0gYCR7ZGF0ZVBhcnR9LCAke3RpbWVQYXJ0fWA7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBXaGVuIHRpbWUgaXMgbm90IGluY2x1ZGVkLCB1c2UgZGF0ZS1vbmx5IGZvcm1hdCAocmVzcGVjdHMgdXNlcidzIHN5c3RlbSBsb2NhbGUpXHJcblx0XHRcdFx0XHRcdGRhdGVTdHJpbmcgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zdCBkYXRlRWwgPSBjYXJkRWwuY3JlYXRlRGl2KCdjYXJkLWRhdGUnKTtcclxuXHRcdFx0XHRcdGRhdGVFbC5hcHBlbmRUZXh0KGRhdGVTdHJpbmcpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFRvcCBwcm9wZXJ0eSBncm91cHMgKHJlbmRlcmVkIGJlZm9yZSBjb250ZW50KVxyXG5cdFx0dGhpcy5wcm9wZXJ0eVJlbmRlcmVyLnJlbmRlclByb3BlcnRpZXMoY2FyZEVsLCBjYXJkLCBlbnRyeSwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUsICd0b3AnKTtcclxuXHJcblx0XHQvLyBDb250ZW50IGNvbnRhaW5lciAtIGFsd2F5cyBjcmVhdGUgaWYgc2hvd1RleHRQcmV2aWV3IGlzIGVuYWJsZWQsIG9yIGlmIHRoZXJlIGFyZSBvdGhlciBjb250ZW50IGVsZW1lbnRzXHJcblx0XHQvLyBGb3IgdGh1bWJuYWlsIGFuZCBjb3ZlciBmb3JtYXRzLCBhbHdheXMgY3JlYXRlIGNvbnRhaW5lclxyXG5cdFx0aWYgKHNldHRpbmdzLnNob3dUZXh0UHJldmlldyB8fFxyXG5cdFx0XHQoc2V0dGluZ3Muc2hvd1RhZ3MgJiYgY2FyZC5kaXNwbGF5VGFncyAmJiBjYXJkLmRpc3BsYXlUYWdzLmxlbmd0aCA+IDApIHx8XHJcblx0XHRcdChzZXR0aW5ncy5pbWFnZUZvcm1hdCA9PT0gJ3RodW1ibmFpbCcpIHx8XHJcblx0XHRcdChzZXR0aW5ncy5pbWFnZUZvcm1hdCA9PT0gJ2NvdmVyJykgfHxcclxuXHRcdFx0KHNldHRpbmdzLmltYWdlRm9ybWF0ICE9PSAnbm9uZScgJiYgKGNhcmQuaW1hZ2VVcmwgfHwgY2FyZC5oYXNJbWFnZUF2YWlsYWJsZSkpKSB7XHJcblx0XHRcdGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBjYXJkRWwuY3JlYXRlRGl2KCdjYXJkLWNvbnRlbnQnKTtcclxuXHJcblx0XHRcdC8vIEZvciB0aHVtYm5haWwgZm9ybWF0LCBjcmVhdGUgdGh1bWJuYWlsIEZJUlNUIChiZWZvcmUgdGV4dC13cmFwcGVyKSBmb3IgcHJvcGVyIHBvc2l0aW9uaW5nXHJcblx0XHRcdGlmIChzZXR0aW5ncy5pbWFnZUZvcm1hdCA9PT0gJ3RodW1ibmFpbCcgJiYgY2FyZC5pbWFnZVVybCkge1xyXG5cdFx0XHRcdGNvbnN0IHJhd1VybHMgPSBBcnJheS5pc0FycmF5KGNhcmQuaW1hZ2VVcmwpID8gY2FyZC5pbWFnZVVybCA6IFtjYXJkLmltYWdlVXJsXTtcclxuXHRcdFx0XHRjb25zdCBpbWFnZVVybHMgPSByYXdVcmxzLmZpbHRlcih1cmwgPT4gdXJsICYmIHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnICYmIHVybC50cmltKCkubGVuZ3RoID4gMCk7XHJcblxyXG5cdFx0XHRcdGlmIChpbWFnZVVybHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgaW1hZ2VFbCA9IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdjYXJkLXRodW1ibmFpbCcpO1xyXG5cdFx0XHRcdFx0Y29uc3QgaW1hZ2VFbWJlZENvbnRhaW5lciA9IGltYWdlRWwuY3JlYXRlRGl2KCdpbWFnZS1lbWJlZCcpO1xyXG5cdFx0XHRcdFx0Y29uc3Qgb3JpZ2luYWxVcmwgPSBpbWFnZVVybHNbMF07XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENvbnZlcnQgR0lGIHRvIHN0YXRpYyBpZiBzZXR0aW5nIGlzIGVuYWJsZWRcclxuXHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZmluYWxVcmwgPSBhd2FpdCBjb252ZXJ0R2lmVG9TdGF0aWMob3JpZ2luYWxVcmwsIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvcmNlU3RhdGljR2lmSW1hZ2VzKTtcclxuXHRcdFx0XHRcdFx0aW1hZ2VFbWJlZENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtmaW5hbFVybH1cIilgO1xyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFNldCBpbml0aWFsIGJhY2tncm91bmQgaW1hZ2UgKHdpbGwgYmUgdXBkYXRlZCBpZiBHSUYgY29udmVyc2lvbiBpcyBuZWVkZWQpXHJcblx0XHRcdFx0aW1hZ2VFbWJlZENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtvcmlnaW5hbFVybH1cIilgO1xyXG5cdFx0XHRcdHNldENzc1Byb3BzKGltYWdlRW1iZWRDb250YWluZXIsIHtcclxuXHRcdFx0XHRcdGJhY2tncm91bmRTaXplOiAnY292ZXInLFxyXG5cdFx0XHRcdFx0YmFja2dyb3VuZFBvc2l0aW9uOiAnY2VudGVyIGNlbnRlcicsXHJcblx0XHRcdFx0XHRiYWNrZ3JvdW5kUmVwZWF0OiAnbm8tcmVwZWF0J1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRm9yIHRodW1ibmFpbCBmb3JtYXQsIGhhbmRsZSBwb3NpdGlvbmluZ1xyXG5cdFx0XHRpZiAoc2V0dGluZ3MuaW1hZ2VGb3JtYXQgPT09ICd0aHVtYm5haWwnKSB7XHJcblx0XHRcdFx0Ly8gQ3JlYXRlIHRleHQgd3JhcHBlclxyXG5cdFx0XHRcdGNvbnN0IHRleHRXcmFwcGVyID0gY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtdGV4dC13cmFwcGVyJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gVGV4dCBwcmV2aWV3IC0gYWx3YXlzIGNyZWF0ZSBpZiBzaG93VGV4dFByZXZpZXcgaXMgZW5hYmxlZCwgZXZlbiBpZiBzbmlwcGV0IGlzbid0IGxvYWRlZCB5ZXRcclxuXHRcdFx0XHRpZiAoc2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3KSB7XHJcblx0XHRcdFx0XHRjb25zdCB0ZXh0UHJldmlld0VsID0gdGV4dFdyYXBwZXIuY3JlYXRlRGl2KCdjYXJkLXRleHQtcHJldmlldycpO1xyXG5cdFx0XHRcdFx0aWYgKGNhcmQuc25pcHBldCkge1xyXG5cdFx0XHRcdFx0XHR0ZXh0UHJldmlld0VsLnNldFRleHQoY2FyZC5zbmlwcGV0KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFN0b3JlIHJlZmVyZW5jZSB0byB1cGRhdGUgbGF0ZXIgd2hlbiBzbmlwcGV0IGxvYWRzXHJcblx0XHRcdFx0XHQoY2FyZEVsIGFzIHsgX190ZXh0UHJldmlld0VsPzogSFRNTEVsZW1lbnQ7IF9fY2FyZFBhdGg/OiBzdHJpbmcgfSkuX190ZXh0UHJldmlld0VsID0gdGV4dFByZXZpZXdFbDtcclxuXHRcdFx0XHRcdChjYXJkRWwgYXMgeyBfX3RleHRQcmV2aWV3RWw/OiBIVE1MRWxlbWVudDsgX19jYXJkUGF0aD86IHN0cmluZyB9KS5fX2NhcmRQYXRoID0gY2FyZC5wYXRoO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gVGFncyBhcyBwaWxscyAodW5kZXIgdGV4dCBwcmV2aWV3KVxyXG5cdFx0XHRcdGlmIChzZXR0aW5ncy5zaG93VGFncyAmJiBjYXJkLmRpc3BsYXlUYWdzICYmIGNhcmQuZGlzcGxheVRhZ3MubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgdGFnc0NvbnRhaW5lciA9IHRleHRXcmFwcGVyLmNyZWF0ZURpdignY2FyZC10YWdzJyk7XHJcblx0XHRcdFx0XHRjb25zdCB0YWdTdHlsZSA9IGdldFRhZ1N0eWxlKCk7XHJcblx0XHRcdFx0XHRpZiAodGFnU3R5bGUgIT09ICdwbGFpbicpIHtcclxuXHRcdFx0XHRcdFx0dGFnc0NvbnRhaW5lci5hZGRDbGFzcyhgdGFnLXN0eWxlLSR7dGFnU3R5bGV9YCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGNvbnN0IG1heFRhZ3MgPSBzZXR0aW5ncy5tYXhUYWdzVG9TaG93O1xyXG5cdFx0XHRcdFx0Y29uc3QgdGFnc1RvU2hvdyA9IGNhcmQuZGlzcGxheVRhZ3Muc2xpY2UoMCwgbWF4VGFncyk7XHJcblx0XHRcdFx0XHRjb25zdCByZW1haW5pbmdDb3VudCA9IGNhcmQuZGlzcGxheVRhZ3MubGVuZ3RoIC0gbWF4VGFncztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0dGFnc1RvU2hvdy5mb3JFYWNoKHRhZyA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHRhZ0VsID0gdGFnc0NvbnRhaW5lci5jcmVhdGVTcGFuKCdjYXJkLXRhZycpO1xyXG5cdFx0XHRcdFx0XHR0YWdFbC5hcHBlbmRUZXh0KHNob3dUYWdIYXNoUHJlZml4KCkgPyBgIyR7dGFnfWAgOiB0YWcpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGlmIChyZW1haW5pbmdDb3VudCA+IDApIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbW9yZUVsID0gdGFnc0NvbnRhaW5lci5jcmVhdGVTcGFuKCdjYXJkLXRhZy1tb3JlJyk7XHJcblx0XHRcdFx0XHRcdG1vcmVFbC5hcHBlbmRUZXh0KGArJHtyZW1haW5pbmdDb3VudH0gbW9yZWApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBGb3IgY292ZXIvbm8taW1hZ2UgZm9ybWF0LCBzdGFjayB2ZXJ0aWNhbGx5XHJcblx0XHRcdFx0Ly8gVGV4dCBwcmV2aWV3IC0gYWx3YXlzIGNyZWF0ZSBpZiBzaG93VGV4dFByZXZpZXcgaXMgZW5hYmxlZCwgZXZlbiBpZiBzbmlwcGV0IGlzbid0IGxvYWRlZCB5ZXRcclxuXHRcdFx0XHRpZiAoc2V0dGluZ3Muc2hvd1RleHRQcmV2aWV3KSB7XHJcblx0XHRcdFx0XHRjb25zdCB0ZXh0UHJldmlld0VsID0gY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtdGV4dC1wcmV2aWV3Jyk7XHJcblx0XHRcdFx0XHRpZiAoY2FyZC5zbmlwcGV0KSB7XHJcblx0XHRcdFx0XHRcdHRleHRQcmV2aWV3RWwuc2V0VGV4dChjYXJkLnNuaXBwZXQpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIHRvIHVwZGF0ZSBsYXRlciB3aGVuIHNuaXBwZXQgbG9hZHNcclxuXHRcdFx0XHRcdChjYXJkRWwgYXMgeyBfX3RleHRQcmV2aWV3RWw/OiBIVE1MRWxlbWVudDsgX19jYXJkUGF0aD86IHN0cmluZyB9KS5fX3RleHRQcmV2aWV3RWwgPSB0ZXh0UHJldmlld0VsO1xyXG5cdFx0XHRcdFx0KGNhcmRFbCBhcyB7IF9fdGV4dFByZXZpZXdFbD86IEhUTUxFbGVtZW50OyBfX2NhcmRQYXRoPzogc3RyaW5nIH0pLl9fY2FyZFBhdGggPSBjYXJkLnBhdGg7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBUYWdzIGFzIHBpbGxzICh1bmRlciB0ZXh0IHByZXZpZXcpXHJcblx0XHRcdFx0aWYgKHNldHRpbmdzLnNob3dUYWdzICYmIGNhcmQuZGlzcGxheVRhZ3MgJiYgY2FyZC5kaXNwbGF5VGFncy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRjb25zdCB0YWdzQ29udGFpbmVyID0gY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtdGFncycpO1xyXG5cdFx0XHRcdFx0Y29uc3QgdGFnU3R5bGUgPSBnZXRUYWdTdHlsZSgpO1xyXG5cdFx0XHRcdFx0aWYgKHRhZ1N0eWxlICE9PSAncGxhaW4nKSB7XHJcblx0XHRcdFx0XHRcdHRhZ3NDb250YWluZXIuYWRkQ2xhc3MoYHRhZy1zdHlsZS0ke3RhZ1N0eWxlfWApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zdCBtYXhUYWdzID0gc2V0dGluZ3MubWF4VGFnc1RvU2hvdztcclxuXHRcdFx0XHRcdGNvbnN0IHRhZ3NUb1Nob3cgPSBjYXJkLmRpc3BsYXlUYWdzLnNsaWNlKDAsIG1heFRhZ3MpO1xyXG5cdFx0XHRcdFx0Y29uc3QgcmVtYWluaW5nQ291bnQgPSBjYXJkLmRpc3BsYXlUYWdzLmxlbmd0aCAtIG1heFRhZ3M7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdHRhZ3NUb1Nob3cuZm9yRWFjaCh0YWcgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCB0YWdFbCA9IHRhZ3NDb250YWluZXIuY3JlYXRlU3BhbignY2FyZC10YWcnKTtcclxuXHRcdFx0XHRcdFx0dGFnRWwuYXBwZW5kVGV4dChzaG93VGFnSGFzaFByZWZpeCgpID8gYCMke3RhZ31gIDogdGFnKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZiAocmVtYWluaW5nQ291bnQgPiAwKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG1vcmVFbCA9IHRhZ3NDb250YWluZXIuY3JlYXRlU3BhbignY2FyZC10YWctbW9yZScpO1xyXG5cdFx0XHRcdFx0XHRtb3JlRWwuYXBwZW5kVGV4dChgKyR7cmVtYWluaW5nQ291bnR9IG1vcmVgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENvdmVyIGltYWdlXHJcblx0XHRcdGlmIChzZXR0aW5ncy5pbWFnZUZvcm1hdCA9PT0gJ2NvdmVyJykge1xyXG5cdFx0XHRcdGlmIChjYXJkLmltYWdlVXJsKSB7XHJcblx0XHRcdFx0Y29uc3QgcmF3VXJscyA9IEFycmF5LmlzQXJyYXkoY2FyZC5pbWFnZVVybCkgPyBjYXJkLmltYWdlVXJsIDogW2NhcmQuaW1hZ2VVcmxdO1xyXG5cdFx0XHRcdGNvbnN0IGltYWdlVXJscyA9IHJhd1VybHMuZmlsdGVyKHVybCA9PiB1cmwgJiYgdHlwZW9mIHVybCA9PT0gJ3N0cmluZycgJiYgdXJsLnRyaW0oKS5sZW5ndGggPiAwKTtcclxuXHJcblx0XHRcdFx0aWYgKGltYWdlVXJscy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGltYWdlRWwgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignY2FyZC1jb3ZlcicpO1xyXG5cdFx0XHRcdFx0Y29uc3QgaW1hZ2VFbWJlZENvbnRhaW5lciA9IGltYWdlRWwuY3JlYXRlRGl2KCdpbWFnZS1lbWJlZCcpO1xyXG5cdFx0XHRcdFx0Y29uc3Qgb3JpZ2luYWxVcmwgPSBpbWFnZVVybHNbMF07XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIENvbnZlcnQgR0lGIHRvIHN0YXRpYyBpZiBzZXR0aW5nIGlzIGVuYWJsZWRcclxuXHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZmluYWxVcmwgPSBhd2FpdCBjb252ZXJ0R2lmVG9TdGF0aWMob3JpZ2luYWxVcmwsIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvcmNlU3RhdGljR2lmSW1hZ2VzKTtcclxuXHRcdFx0XHRcdFx0aW1hZ2VFbWJlZENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKFwiJHtmaW5hbFVybH1cIilgO1xyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gU2V0IGluaXRpYWwgYmFja2dyb3VuZCBpbWFnZSAod2lsbCBiZSB1cGRhdGVkIGlmIEdJRiBjb252ZXJzaW9uIGlzIG5lZWRlZClcclxuXHRcdFx0XHRpbWFnZUVtYmVkQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoXCIke29yaWdpbmFsVXJsfVwiKWA7XHJcblx0XHRcdFx0c2V0Q3NzUHJvcHMoaW1hZ2VFbWJlZENvbnRhaW5lciwge1xyXG5cdFx0XHRcdFx0YmFja2dyb3VuZFNpemU6ICdjb3ZlcicsXHJcblx0XHRcdFx0XHRiYWNrZ3JvdW5kUG9zaXRpb246ICdjZW50ZXIgY2VudGVyJyxcclxuXHRcdFx0XHRcdGJhY2tncm91bmRSZXBlYXQ6ICduby1yZXBlYXQnXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRHJhZnQgc3RhdHVzIGJhZGdlICh0b3AtbGVmdCwgY2xpY2thYmxlIHRvIHRvZ2dsZSlcclxuXHRcdFx0XHRcdFx0aWYgKHNldHRpbmdzLnNob3dEcmFmdFN0YXR1cykge1xyXG5cdFx0XHRcdFx0XHRyZW5kZXJEcmFmdFN0YXR1c0JhZGdlKGltYWdlRWwsIGVudHJ5LCBjYXJkLnBhdGgsIHNldHRpbmdzLCBvblByb3BlcnR5VG9nZ2xlLCB0aGlzLmFwcCwgdGhpcy5tZHhGcm9udG1hdHRlckNhY2hlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQm90dG9tIHByb3BlcnRpZXMgLSBNVVNUIGJlIGNhbGxlZCBiZWZvcmUgcmV0dXJuaW5nIChmb3IgaW1hZ2VzKVxyXG5cdFx0XHRcdFx0dGhpcy5wcm9wZXJ0eVJlbmRlcmVyLnJlbmRlclByb3BlcnRpZXMoY2FyZEVsLCBjYXJkLCBlbnRyeSwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUsICdib3R0b20nKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gSW1hZ2VzIGFyZSBzZXQgdmlhIGJhY2tncm91bmQtaW1hZ2UsIG5vIHJldHVybiB2YWx1ZSBuZWVkZWRcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEZvciBjb3ZlciBmb3JtYXQsIHJlbmRlciBwbGFjZWhvbGRlciBpZiBpbWFnZSBpcyBleHBlY3RlZCBidXQgbm90IGxvYWRlZCB5ZXQsIG9yIGFsd2F5c1xyXG5cdFx0XHRcdGlmIChjYXJkLmhhc0ltYWdlQXZhaWxhYmxlICYmICFjYXJkLmltYWdlVXJsKSB7XHJcblx0XHRcdFx0XHRjb25zdCBwbGFjZWhvbGRlckVsID0gY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtY292ZXItcGxhY2Vob2xkZXInKTtcclxuXHRcdFx0XHQvLyBEcmFmdCBzdGF0dXMgYmFkZ2Ugb24gcGxhY2Vob2xkZXIgKHRvcC1sZWZ0LCBjbGlja2FibGUgdG8gdG9nZ2xlKVxyXG5cdFx0XHRcdHJlbmRlckRyYWZ0U3RhdHVzQmFkZ2UocGxhY2Vob2xkZXJFbCwgZW50cnksIGNhcmQucGF0aCwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUsIHRoaXMuYXBwLCB0aGlzLm1keEZyb250bWF0dGVyQ2FjaGUpO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIWNhcmQuaW1hZ2VVcmwpIHtcclxuXHRcdFx0XHRcdC8vIE5vIGltYWdlIGFuZCBub3QgZXhwZWN0ZWQgLSBjcmVhdGUgcGxhY2Vob2xkZXIgYW55d2F5IGZvciBjb3ZlciBmb3JtYXRcclxuXHRcdFx0XHRcdGNvbnN0IHBsYWNlaG9sZGVyRWwgPSBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignY2FyZC1jb3Zlci1wbGFjZWhvbGRlcicpO1xyXG5cdFx0XHRcdFx0cmVuZGVyRHJhZnRTdGF0dXNCYWRnZShwbGFjZWhvbGRlckVsLCBlbnRyeSwgY2FyZC5wYXRoLCBzZXR0aW5ncywgb25Qcm9wZXJ0eVRvZ2dsZSwgdGhpcy5hcHAsIHRoaXMubWR4RnJvbnRtYXR0ZXJDYWNoZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdC8vIEJvdHRvbSBwcm9wZXJ0aWVzIChmb3IgY2FyZHMgd2l0aG91dCBpbWFnZXMpXHJcblx0XHR0aGlzLnByb3BlcnR5UmVuZGVyZXIucmVuZGVyUHJvcGVydGllcyhjYXJkRWwsIGNhcmQsIGVudHJ5LCBzZXR0aW5ncywgb25Qcm9wZXJ0eVRvZ2dsZSwgJ2JvdHRvbScpO1xyXG5cdFx0XHJcblx0XHRyZXR1cm47IC8vIE5vIGltYWdlIGZvciB0aGlzIGNhcmRcclxuXHR9XHJcbn1cclxuXHJcbiIsICJpbXBvcnQgeyBBcHAsIEJhc2VzRW50cnksIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgdHlwZSB7IENNU1NldHRpbmdzIH0gZnJvbSAnLi4vc2hhcmVkL2RhdGEtdHJhbnNmb3JtJztcclxuaW1wb3J0IHsgZ2V0RmlsZUZyb250bWF0dGVyIH0gZnJvbSAnLi9mcm9udG1hdHRlci1oZWxwZXInO1xyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBkcmFmdCBzdGF0dXMgZnJvbSBlbnRyeSBhbmQgc2V0dGluZ3NcclxuICogU3VwcG9ydHMgYm90aCAubWQgZmlsZXMgKHZpYSBCYXNlcyBBUEkpIGFuZCAubWR4IGZpbGVzICh2aWEgbWFudWFsIGZyb250bWF0dGVyIHBhcnNpbmcpXHJcbiAqIFVzZXMgY2FjaGVkIGZyb250bWF0dGVyIHdoZW4gYXZhaWxhYmxlIHRvIGF2b2lkIGFzeW5jIGxvYWRpbmdcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYWxjdWxhdGVEcmFmdFN0YXR1c0FzeW5jKFxyXG5cdGVudHJ5OiBCYXNlc0VudHJ5LFxyXG5cdHNldHRpbmdzOiBDTVNTZXR0aW5ncyxcclxuXHRhcHA6IEFwcCxcclxuXHRtZHhGcm9udG1hdHRlckNhY2hlPzogUmVjb3JkPHN0cmluZywgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsPlxyXG4pOiBQcm9taXNlPHsgYm9vbGVhblZhbHVlOiBib29sZWFuIHwgbnVsbDsgaXNEcmFmdDogYm9vbGVhbiB9PiB7XHJcblx0bGV0IGJvb2xlYW5WYWx1ZTogYm9vbGVhbiB8IG51bGwgPSBudWxsO1xyXG5cdGxldCBpc0RyYWZ0ID0gZmFsc2U7XHJcblx0XHJcblx0Ly8gQ2hlY2sgaWYgdXNpbmcgZmlsZW5hbWUgcHJlZml4IG1vZGUgLSB0aGlzIGFsd2F5cyBwcm92aWRlcyBhIHZhbHVlXHJcblx0aWYgKHNldHRpbmdzLmRyYWZ0U3RhdHVzVXNlRmlsZW5hbWVQcmVmaXggJiYgZW50cnkuZmlsZSAmJiBlbnRyeS5maWxlLm5hbWUpIHtcclxuXHRcdGNvbnN0IGZpbGVOYW1lID0gZW50cnkuZmlsZS5uYW1lO1xyXG5cdFx0Y29uc3Qgc3RhcnRzV2l0aFVuZGVyc2NvcmUgPSBmaWxlTmFtZS5zdGFydHNXaXRoKCdfJyk7XHJcblx0XHRib29sZWFuVmFsdWUgPSBzdGFydHNXaXRoVW5kZXJzY29yZTtcclxuXHRcdGlzRHJhZnQgPSBzZXR0aW5ncy5kcmFmdFN0YXR1c1JldmVyc2UgPyAhYm9vbGVhblZhbHVlIDogYm9vbGVhblZhbHVlO1xyXG5cdH0gZWxzZSBpZiAoc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eSkge1xyXG5cdFx0Ly8gVHJ5IHN5bmNocm9ub3VzIEJhc2VzIEFQSSBmaXJzdCAod29ya3MgZm9yIC5tZCBmaWxlcylcclxuXHRcdGNvbnN0IGRyYWZ0VmFsdWUgPSBlbnRyeS5nZXRWYWx1ZShzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5IGFzIGBub3RlLiR7c3RyaW5nfWAgfCBgZm9ybXVsYS4ke3N0cmluZ31gIHwgYGZpbGUuJHtzdHJpbmd9YCkgYXMgeyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHRcdGlmIChkcmFmdFZhbHVlICYmICdkYXRhJyBpbiBkcmFmdFZhbHVlICYmIHR5cGVvZiBkcmFmdFZhbHVlLmRhdGEgPT09ICdib29sZWFuJykge1xyXG5cdFx0XHRib29sZWFuVmFsdWUgPSBkcmFmdFZhbHVlLmRhdGE7XHJcblx0XHRcdGlzRHJhZnQgPSBzZXR0aW5ncy5kcmFmdFN0YXR1c1JldmVyc2UgPyAhYm9vbGVhblZhbHVlIDogYm9vbGVhblZhbHVlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gRm9yIE1EWCBmaWxlcywgdXNlIGNhY2hlZCBmcm9udG1hdHRlciBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBmYWxsYmFjayB0byBhc3luYyBsb2FkaW5nXHJcblx0XHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgY2FjaGUgZmlyc3RcclxuXHRcdFx0XHRsZXQgZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdFx0aWYgKG1keEZyb250bWF0dGVyQ2FjaGUpIHtcclxuXHRcdFx0XHRcdGZyb250bWF0dGVyID0gbWR4RnJvbnRtYXR0ZXJDYWNoZVtlbnRyeS5maWxlLnBhdGhdID8/IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIElmIG5vdCBpbiBjYWNoZSwgbG9hZCBhc3luY2hyb25vdXNseVxyXG5cdFx0XHRcdGlmIChmcm9udG1hdHRlciA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcihhcHAsIGZpbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0XHRcdC8vIFN0cmlwIFwibm90ZS5cIiBwcmVmaXggaWYgcHJlc2VudFxyXG5cdFx0XHRcdFx0Y29uc3QgY2xlYW5Qcm9wID0gc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS5zdGFydHNXaXRoKCdub3RlLicpIFxyXG5cdFx0XHRcdFx0XHQ/IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkuc3Vic3RyaW5nKDUpIFxyXG5cdFx0XHRcdFx0XHQ6IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHk7XHJcblx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlclZhbHVlID0gZnJvbnRtYXR0ZXJbY2xlYW5Qcm9wXTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gSGFuZGxlIGJvb2xlYW4gdmFsdWVzIChZQU1MIHBhcnNlciByZXR1cm5zIGJvb2xlYW5zIGRpcmVjdGx5KVxyXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBmcm9udG1hdHRlclZhbHVlID09PSAnYm9vbGVhbicpIHtcclxuXHRcdFx0XHRcdFx0Ym9vbGVhblZhbHVlID0gZnJvbnRtYXR0ZXJWYWx1ZTtcclxuXHRcdFx0XHRcdFx0aXNEcmFmdCA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUmV2ZXJzZSA/ICFib29sZWFuVmFsdWUgOiBib29sZWFuVmFsdWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiB7IGJvb2xlYW5WYWx1ZSwgaXNEcmFmdCB9O1xyXG59XHJcblxyXG4vKipcclxuICogQ2FsY3VsYXRlIGRyYWZ0IHN0YXR1cyBmcm9tIGVudHJ5IGFuZCBzZXR0aW5ncyAoc3luY2hyb25vdXMgdmVyc2lvbiBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkpXHJcbiAqIE5vdGU6IFRoaXMgb25seSB3b3JrcyBmb3IgLm1kIGZpbGVzLiBGb3IgTURYIGZpbGVzLCB1c2UgY2FsY3VsYXRlRHJhZnRTdGF0dXNBc3luYyBpbnN0ZWFkLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZURyYWZ0U3RhdHVzKFxyXG5cdGVudHJ5OiBCYXNlc0VudHJ5LFxyXG5cdHNldHRpbmdzOiBDTVNTZXR0aW5nc1xyXG4pOiB7IGJvb2xlYW5WYWx1ZTogYm9vbGVhbiB8IG51bGw7IGlzRHJhZnQ6IGJvb2xlYW4gfSB7XHJcblx0bGV0IGJvb2xlYW5WYWx1ZTogYm9vbGVhbiB8IG51bGwgPSBudWxsO1xyXG5cdGxldCBpc0RyYWZ0ID0gZmFsc2U7XHJcblx0XHJcblx0Ly8gQ2hlY2sgaWYgdXNpbmcgZmlsZW5hbWUgcHJlZml4IG1vZGUgLSB0aGlzIGFsd2F5cyBwcm92aWRlcyBhIHZhbHVlXHJcblx0aWYgKHNldHRpbmdzLmRyYWZ0U3RhdHVzVXNlRmlsZW5hbWVQcmVmaXggJiYgZW50cnkuZmlsZSAmJiBlbnRyeS5maWxlLm5hbWUpIHtcclxuXHRcdGNvbnN0IGZpbGVOYW1lID0gZW50cnkuZmlsZS5uYW1lO1xyXG5cdFx0Y29uc3Qgc3RhcnRzV2l0aFVuZGVyc2NvcmUgPSBmaWxlTmFtZS5zdGFydHNXaXRoKCdfJyk7XHJcblx0XHRib29sZWFuVmFsdWUgPSBzdGFydHNXaXRoVW5kZXJzY29yZTtcclxuXHRcdGlzRHJhZnQgPSBzZXR0aW5ncy5kcmFmdFN0YXR1c1JldmVyc2UgPyAhYm9vbGVhblZhbHVlIDogYm9vbGVhblZhbHVlO1xyXG5cdH0gZWxzZSBpZiAoc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eSkge1xyXG5cdFx0Ly8gVXNlIHByb3BlcnR5LWJhc2VkIGRldGVjdGlvbiAoc3luY2hyb25vdXMgQmFzZXMgQVBJIC0gd29ya3MgZm9yIC5tZCBmaWxlcyBvbmx5KVxyXG5cdFx0Y29uc3QgZHJhZnRWYWx1ZSA9IGVudHJ5LmdldFZhbHVlKHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkgYXMgYG5vdGUuJHtzdHJpbmd9YCB8IGBmb3JtdWxhLiR7c3RyaW5nfWAgfCBgZmlsZS4ke3N0cmluZ31gKSBhcyB7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsO1xyXG5cdFx0aWYgKGRyYWZ0VmFsdWUgJiYgJ2RhdGEnIGluIGRyYWZ0VmFsdWUgJiYgdHlwZW9mIGRyYWZ0VmFsdWUuZGF0YSA9PT0gJ2Jvb2xlYW4nKSB7XHJcblx0XHRcdGJvb2xlYW5WYWx1ZSA9IGRyYWZ0VmFsdWUuZGF0YTtcclxuXHRcdFx0aXNEcmFmdCA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUmV2ZXJzZSA/ICFib29sZWFuVmFsdWUgOiBib29sZWFuVmFsdWU7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiB7IGJvb2xlYW5WYWx1ZSwgaXNEcmFmdCB9O1xyXG59XHJcblxyXG4vKipcclxuICogUmVuZGVyIGRyYWZ0IHN0YXR1cyBiYWRnZSBvbiBhIGNvbnRhaW5lciBlbGVtZW50XHJcbiAqIFN1cHBvcnRzIGJvdGggLm1kIGZpbGVzIChzeW5jaHJvbm91cykgYW5kIC5tZHggZmlsZXMgKHVzZXMgY2FjaGUgd2hlbiBhdmFpbGFibGUpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyRHJhZnRTdGF0dXNCYWRnZShcclxuXHRjb250YWluZXI6IEhUTUxFbGVtZW50LFxyXG5cdGVudHJ5OiBCYXNlc0VudHJ5LFxyXG5cdGNhcmRQYXRoOiBzdHJpbmcsXHJcblx0c2V0dGluZ3M6IENNU1NldHRpbmdzLFxyXG5cdG9uUHJvcGVydHlUb2dnbGU/OiAocGF0aDogc3RyaW5nLCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bikgPT4gdm9pZCB8IFByb21pc2U8dm9pZD4sXHJcblx0YXBwPzogQXBwLFxyXG5cdG1keEZyb250bWF0dGVyQ2FjaGU/OiBSZWNvcmQ8c3RyaW5nLCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw+XHJcbik6IHZvaWQge1xyXG5cdGlmICghc2V0dGluZ3Muc2hvd0RyYWZ0U3RhdHVzKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdFxyXG5cdC8vIFRyeSBzeW5jaHJvbm91cyBmaXJzdCAod29ya3MgZm9yIC5tZCBmaWxlcylcclxuXHRjb25zdCB7IGJvb2xlYW5WYWx1ZTogc3luY1ZhbHVlLCBpc0RyYWZ0OiBzeW5jSXNEcmFmdCB9ID0gY2FsY3VsYXRlRHJhZnRTdGF0dXMoZW50cnksIHNldHRpbmdzKTtcclxuXHRcclxuXHRpZiAoc3luY1ZhbHVlICE9PSBudWxsKSB7XHJcblx0XHQvLyBTeW5jaHJvbm91cyByZXN1bHQgYXZhaWxhYmxlIChmcm9tIEJhc2VzIEFQSSBvciBmaWxlbmFtZSBwcmVmaXgpXHJcblx0XHRyZW5kZXJCYWRnZShjb250YWluZXIsIHN5bmNWYWx1ZSwgc3luY0lzRHJhZnQsIG9uUHJvcGVydHlUb2dnbGUsIGNhcmRQYXRoKTtcclxuXHR9IGVsc2UgaWYgKGFwcCkge1xyXG5cdFx0Ly8gRm9yIE1EWCBmaWxlcywgY2hlY2sgY2FjaGUgZmlyc3QgdG8gcmVuZGVyIHN5bmNocm9ub3VzbHlcclxuXHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGVudHJ5LmZpbGUucGF0aCk7XHJcblx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWR4JyAmJiBtZHhGcm9udG1hdHRlckNhY2hlKSB7XHJcblx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gbWR4RnJvbnRtYXR0ZXJDYWNoZVtlbnRyeS5maWxlLnBhdGhdO1xyXG5cdFx0XHRpZiAoZnJvbnRtYXR0ZXIgJiYgc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eSkge1xyXG5cdFx0XHRcdC8vIFN0cmlwIFwibm90ZS5cIiBwcmVmaXggaWYgcHJlc2VudFxyXG5cdFx0XHRcdGNvbnN0IGNsZWFuUHJvcCA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkuc3RhcnRzV2l0aCgnbm90ZS4nKSBcclxuXHRcdFx0XHRcdD8gc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS5zdWJzdHJpbmcoNSkgXHJcblx0XHRcdFx0XHQ6IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHk7XHJcblx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJWYWx1ZSA9IGZyb250bWF0dGVyW2NsZWFuUHJvcF07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSGFuZGxlIGJvb2xlYW4gdmFsdWVzIHN5bmNocm9ub3VzbHlcclxuXHRcdFx0XHRpZiAodHlwZW9mIGZyb250bWF0dGVyVmFsdWUgPT09ICdib29sZWFuJykge1xyXG5cdFx0XHRcdFx0Y29uc3QgYm9vbGVhblZhbHVlID0gZnJvbnRtYXR0ZXJWYWx1ZTtcclxuXHRcdFx0XHRcdGNvbnN0IGlzRHJhZnQgPSBzZXR0aW5ncy5kcmFmdFN0YXR1c1JldmVyc2UgPyAhYm9vbGVhblZhbHVlIDogYm9vbGVhblZhbHVlO1xyXG5cdFx0XHRcdFx0cmVuZGVyQmFkZ2UoY29udGFpbmVyLCBib29sZWFuVmFsdWUsIGlzRHJhZnQsIG9uUHJvcGVydHlUb2dnbGUsIGNhcmRQYXRoKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gTm8gc3luY2hyb25vdXMgcmVzdWx0IC0gdHJ5IGFzeW5jIGZvciBNRFggZmlsZXMgKGZhbGxiYWNrIGlmIGNhY2hlIG1pc3MpXHJcblx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHsgYm9vbGVhblZhbHVlLCBpc0RyYWZ0IH0gPSBhd2FpdCBjYWxjdWxhdGVEcmFmdFN0YXR1c0FzeW5jKGVudHJ5LCBzZXR0aW5ncywgYXBwLCBtZHhGcm9udG1hdHRlckNhY2hlKTtcclxuXHRcdFx0aWYgKGJvb2xlYW5WYWx1ZSAhPT0gbnVsbCAmJiBjb250YWluZXIuaXNDb25uZWN0ZWQpIHtcclxuXHRcdFx0XHRyZW5kZXJCYWRnZShjb250YWluZXIsIGJvb2xlYW5WYWx1ZSwgaXNEcmFmdCwgb25Qcm9wZXJ0eVRvZ2dsZSwgY2FyZFBhdGgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KSgpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEhlbHBlciBmdW5jdGlvbiB0byByZW5kZXIgdGhlIGJhZGdlIGVsZW1lbnRcclxuICovXHJcbmZ1bmN0aW9uIHJlbmRlckJhZGdlKFxyXG5cdGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0Ym9vbGVhblZhbHVlOiBib29sZWFuLFxyXG5cdGlzRHJhZnQ6IGJvb2xlYW4sXHJcblx0b25Qcm9wZXJ0eVRvZ2dsZTogKChwYXRoOiBzdHJpbmcsIHByb3BlcnR5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKSA9PiB2b2lkIHwgUHJvbWlzZTx2b2lkPikgfCB1bmRlZmluZWQsXHJcblx0Y2FyZFBhdGg6IHN0cmluZ1xyXG4pOiB2b2lkIHtcclxuXHQvLyBDaGVjayBpZiBiYWRnZSBhbHJlYWR5IGV4aXN0cyB0byBhdm9pZCBkdXBsaWNhdGVzXHJcblx0aWYgKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY2FyZC1zdGF0dXMtYmFkZ2UnKSkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRcclxuXHRjb25zdCBzdGF0dXNCYWRnZSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2NhcmQtc3RhdHVzLWJhZGdlJyk7XHJcblx0aWYgKGlzRHJhZnQpIHtcclxuXHRcdHN0YXR1c0JhZGdlLmFkZENsYXNzKCdzdGF0dXMtZHJhZnQnKTtcclxuXHRcdHN0YXR1c0JhZGdlLmFwcGVuZFRleHQoJ0RyYWZ0Jyk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHN0YXR1c0JhZGdlLmFkZENsYXNzKCdzdGF0dXMtcHVibGlzaGVkJyk7XHJcblx0XHRzdGF0dXNCYWRnZS5hcHBlbmRUZXh0KCdQdWJsaXNoZWQnKTtcclxuXHR9XHJcblx0XHJcblx0aWYgKG9uUHJvcGVydHlUb2dnbGUpIHtcclxuXHRcdHN0YXR1c0JhZGdlLmFkZENsYXNzKCdiYXNlcy1jbXMtY3Vyc29yLXBvaW50ZXInKTtcclxuXHRcdHN0YXR1c0JhZGdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0Y29uc3QgbmV3VmFsdWUgPSAhYm9vbGVhblZhbHVlO1xyXG5cdFx0XHR2b2lkIG9uUHJvcGVydHlUb2dnbGUoY2FyZFBhdGgsICdkcmFmdCcsIG5ld1ZhbHVlKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlLCBzZXRJY29uLCBNb2RhbCwgVGV4dENvbXBvbmVudCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBzZXRDc3NQcm9wcyB9IGZyb20gJy4vY3NzLXByb3BzJztcclxuaW1wb3J0IHR5cGUgQmFzZXNDTVNQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB0eXBlIHsgQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvZGF0YS10cmFuc2Zvcm0nO1xyXG5cclxuLyoqXHJcbiAqIFNob3cgcmVuYW1lIGRpYWxvZyBmb3IgYSBmaWxlIHdpdGhvdXQgb3BlbmluZyBpdFxyXG4gKiBTaW1pbGFyIHRvIGhvdyBBc3RybyBDb21wb3NlcidzIHJlbmFtZUNvbnRlbnRCeVBhdGggd29ya3NcclxuICovXHJcbmZ1bmN0aW9uIHNob3dSZW5hbWVEaWFsb2coYXBwOiBBcHAsIGZpbGU6IFRGaWxlKTogdm9pZCB7XHJcblx0Y29uc3QgbW9kYWwgPSBuZXcgTW9kYWwoYXBwKTtcclxuXHRtb2RhbC50aXRsZUVsLnNldFRleHQoJ1JlbmFtZSBmaWxlJyk7XHJcblx0XHJcblx0Y29uc3QgaW5wdXRDb250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcblx0Ly8gTWFrZSBpbnB1dCBjb250YWluZXIgZnVsbCB3aWR0aFxyXG5cdHNldENzc1Byb3BzKGlucHV0Q29udGFpbmVyLCB7XHJcblx0XHR3aWR0aDogJzEwMCUnXHJcblx0fSk7XHJcblx0Y29uc3QgaW5wdXQgPSBuZXcgVGV4dENvbXBvbmVudChpbnB1dENvbnRhaW5lcik7XHJcblx0aW5wdXQuc2V0VmFsdWUoZmlsZS5iYXNlbmFtZSk7XHJcblx0Ly8gTWFrZSBpbnB1dCBmaWVsZCBmdWxsIHdpZHRoIHRvIG1hdGNoIE9ic2lkaWFuJ3MgbmF0aXZlIGRpYWxvZ1xyXG5cdHNldENzc1Byb3BzKGlucHV0LmlucHV0RWwsIHtcclxuXHRcdHdpZHRoOiAnMTAwJScsXHJcblx0XHRib3hTaXppbmc6ICdib3JkZXItYm94J1xyXG5cdH0pO1xyXG5cdGlucHV0LmlucHV0RWwuZm9jdXMoKTtcclxuXHRpbnB1dC5pbnB1dEVsLnNlbGVjdCgpO1xyXG5cdFxyXG5cdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcclxuXHRjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XHJcblx0Y2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gbW9kYWwuY2xvc2UoKSk7XHJcblx0XHJcblx0Y29uc3QgcmVuYW1lQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG5cdFx0dGV4dDogJ1JlbmFtZScsXHJcblx0XHRjbHM6ICdtb2QtY3RhJ1xyXG5cdH0pO1xyXG5cdFxyXG5cdGNvbnN0IGhhbmRsZVJlbmFtZSA9IGFzeW5jICgpID0+IHtcclxuXHRcdGNvbnN0IG5ld05hbWUgPSBpbnB1dC5nZXRWYWx1ZSgpLnRyaW0oKTtcclxuXHRcdGlmICghbmV3TmFtZSB8fCBuZXdOYW1lID09PSBmaWxlLmJhc2VuYW1lKSB7XHJcblx0XHRcdG1vZGFsLmNsb3NlKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gQ29uc3RydWN0IG5ldyBwYXRoIHdpdGggZXh0ZW5zaW9uXHJcblx0XHRjb25zdCBwYXRoUGFydHMgPSBmaWxlLnBhdGguc3BsaXQoJy8nKTtcclxuXHRcdHBhdGhQYXJ0c1twYXRoUGFydHMubGVuZ3RoIC0gMV0gPSBuZXdOYW1lICsgKGZpbGUuZXh0ZW5zaW9uID8gYC4ke2ZpbGUuZXh0ZW5zaW9ufWAgOiAnJyk7XHJcblx0XHRjb25zdCBuZXdQYXRoID0gcGF0aFBhcnRzLmpvaW4oJy8nKTtcclxuXHRcdFxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0YXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZmlsZSwgbmV3UGF0aCk7XHJcblx0XHRcdG1vZGFsLmNsb3NlKCk7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHQvLyBFcnJvciBoYW5kbGluZyAtIHRoZSByZW5hbWUgbWlnaHQgZmFpbCBpZiBmaWxlIGFscmVhZHkgZXhpc3RzLCBldGMuXHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1tCYXNlcyBDTVNdIEVycm9yIHJlbmFtaW5nIGZpbGU6JywgZXJyb3IpO1xyXG5cdFx0XHRtb2RhbC5jbG9zZSgpO1xyXG5cdFx0fVxyXG5cdH07XHJcblx0XHJcblx0cmVuYW1lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0dm9pZCBoYW5kbGVSZW5hbWUoKTtcclxuXHR9KTtcclxuXHRcclxuXHRpbnB1dC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xyXG5cdFx0aWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0dm9pZCBoYW5kbGVSZW5hbWUoKTtcclxuXHRcdH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0bW9kYWwuY2xvc2UoKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRcclxuXHRtb2RhbC5vcGVuKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGNvbW1hbmQgaXMgT2JzaWRpYW4ncyBkZWZhdWx0IFwiUmVuYW1lIGZpbGVcIiBjb21tYW5kXHJcbiAqL1xyXG5mdW5jdGlvbiBpc09ic2lkaWFuUmVuYW1lQ29tbWFuZChjb21tYW5kSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdC8vIE9ic2lkaWFuJ3MgcmVuYW1lIGZpbGUgY29tbWFuZCBJRHMgKG1heSB2YXJ5IGJ5IHZlcnNpb24pXHJcblx0Y29uc3QgbG93ZXJJZCA9IGNvbW1hbmRJZC50b0xvd2VyQ2FzZSgpO1xyXG5cdHJldHVybiBjb21tYW5kSWQgPT09ICdmaWxlLWV4cGxvcmVyOnJlbmFtZS1maWxlJyB8fCBcclxuXHRcdCAgIGNvbW1hbmRJZCA9PT0gJ3JlbmFtZS1maWxlJyB8fFxyXG5cdFx0ICAgY29tbWFuZElkID09PSAnZmlsZTpyZW5hbWUtZmlsZScgfHxcclxuXHRcdCAgIChsb3dlcklkLmluY2x1ZGVzKCdyZW5hbWUnKSAmJiBsb3dlcklkLmluY2x1ZGVzKCdmaWxlJykgJiYgIWxvd2VySWQuaW5jbHVkZXMoJzonKSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGNvbW1hbmQgaXMga25vd24gdG8gbm90IHdvcmsgd2VsbCB3aXRob3V0IHRoZSBmaWxlIGJlaW5nIHByb3Blcmx5IG9wZW5lZFxyXG4gKiBUaGVzZSBjb21tYW5kcyB0eXBpY2FsbHkgbmVlZCBlZGl0b3IgY29udGV4dCBvciBzcGVjaWZpYyBVSSBzdGF0ZSB0aGF0IGNhbid0IGJlIGZha2VkXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1Byb2JsZW1hdGljQ29tbWFuZChjb21tYW5kSWQ6IHN0cmluZywgY29tbWFuZE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IGxvd2VySWQgPSBjb21tYW5kSWQudG9Mb3dlckNhc2UoKTtcclxuXHRjb25zdCBsb3dlck5hbWUgPSBjb21tYW5kTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cdFxyXG5cdC8vIENvbW1hbmRzIHRoYXQgbmVlZCBlZGl0b3IgY29udGV4dCBhbmQgdHlwaWNhbGx5IGRvbid0IHdvcmsgd2VsbCBwcm9ncmFtbWF0aWNhbGx5XHJcblx0Y29uc3QgcHJvYmxlbWF0aWNQYXR0ZXJucyA9IFtcclxuXHRcdCdhZGQgdGFnJyxcclxuXHRcdCdhZGQtdGFnJyxcclxuXHRcdCdpbnNlcnQtdGVtcGxhdGUnLFxyXG5cdFx0J2luc2VydC10ZW1wbGF0ZScsXHJcblx0XHQnZWRpdG9yOicsXHJcblx0XHQnbWFya2Rvd246JyxcclxuXHRdO1xyXG5cdFxyXG5cdHJldHVybiBwcm9ibGVtYXRpY1BhdHRlcm5zLnNvbWUocGF0dGVybiA9PiBcclxuXHRcdGxvd2VySWQuaW5jbHVkZXMocGF0dGVybikgfHwgbG93ZXJOYW1lLmluY2x1ZGVzKHBhdHRlcm4pXHJcblx0KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldHVwIHF1aWNrIGVkaXQgaWNvbiBvbiB0aXRsZSBlbGVtZW50IChvciBjYXJkIGlmIHRpdGxlIGlzIGhpZGRlbilcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFF1aWNrRWRpdEljb24oXHJcblx0YXBwOiBBcHAsXHJcblx0cGx1Z2luOiBCYXNlc0NNU1BsdWdpbixcclxuXHR0aXRsZUVsOiBIVE1MRWxlbWVudCxcclxuXHRjYXJkRWw6IEhUTUxFbGVtZW50LFxyXG5cdGNhcmRQYXRoOiBzdHJpbmcsXHJcblx0c2V0dGluZ3M6IENNU1NldHRpbmdzXHJcbik6IHZvaWQge1xyXG5cdC8vIFF1aWNrIGVkaXQgaWNvbiAob25seSBpZiBlbmFibGVkLCBjb21tYW5kIGlzIHNldCwgYW5kIG5vdCBoaWRkZW4gaW4gdGhpcyB2aWV3KVxyXG5cdGlmICghcGx1Z2luLnNldHRpbmdzLmVuYWJsZVF1aWNrRWRpdCB8fCBcclxuXHRcdCFwbHVnaW4uc2V0dGluZ3MucXVpY2tFZGl0Q29tbWFuZCB8fCBcclxuXHRcdHBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRDb21tYW5kID09PSAnJyB8fFxyXG5cdFx0c2V0dGluZ3MuaGlkZVF1aWNrRWRpdEljb24pIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0XHJcblx0Ly8gQXR0YWNoIHRvIHRpdGxlRWwgKHRpdGxlIGlzIGFsd2F5cyBzaG93biBub3cpXHJcblx0Y29uc3QgcXVpY2tFZGl0SWNvbiA9IHRpdGxlRWwuY3JlYXRlU3BhbignYmFzZXMtY21zLXF1aWNrLWVkaXQtaWNvbicpO1xyXG5cdHF1aWNrRWRpdEljb24uYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1jdXJzb3ItZGVmYXVsdCcpO1xyXG5cdHNldEljb24ocXVpY2tFZGl0SWNvbiwgcGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdEljb24gfHwgJ3BlbmNpbC1saW5lJyk7XHJcblx0XHJcblx0Ly8gUHJldmVudCB0aXRsZSBmcm9tIGJlaW5nIGNsaWNrYWJsZSB3aGVuIGNsaWNraW5nIGljb25cclxuXHR0aXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdGlmIChxdWlja0VkaXRJY29uLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpKSB7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHR9XHJcblx0fSwgdHJ1ZSk7XHJcblx0XHJcblx0Ly8gRXhlY3V0ZSBjb21tYW5kIHdoZW4gaWNvbiBpcyBjbGlja2VkXHJcblx0Ly8gUmVnaXN0ZXIgd2l0aCBjYXB0dXJlIHBoYXNlIEJFRk9SRSBjYXJkIGNsaWNrIGhhbmRsZXIgY2FuIHNlZSBpdFxyXG5cdGNhcmRFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRpZiAoIXF1aWNrRWRpdEljb24uY29udGFpbnModGFyZ2V0KSAmJiAhdGFyZ2V0LmNsb3Nlc3QoJy5iYXNlcy1jbXMtcXVpY2stZWRpdC1pY29uJykpIHtcclxuXHRcdFx0XHRyZXR1cm47IC8vIE5vdCBjbGlja2luZyBvbiBpY29uXHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFRyeSB0byBleGVjdXRlIGNvbW1hbmQgd2l0aG91dCBvcGVuaW5nIGZpbGUgZmlyc3RcclxuXHRcdFx0Ly8gRm9yIGNvbW1hbmRzIHRoYXQgbmVlZCBmaWxlIGNvbnRleHQsIHRyeSB0byBjYWxsIGhlbHBlciBmdW5jdGlvbnMgZGlyZWN0bHkgaWYgYXZhaWxhYmxlXHJcblx0XHRcdGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGNhcmRQYXRoKTtcclxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRJZCA9IHBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRDb21tYW5kO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEZJUlNUOiBDaGVjayBpZiB0aGlzIGlzIE9ic2lkaWFuJ3MgXCJSZW5hbWUgZmlsZVwiIGNvbW1hbmRcclxuXHRcdFx0XHQvLyBTaG93IHJlbmFtZSBkaWFsb2cgd2l0aG91dCBvcGVuaW5nIHRoZSBmaWxlLCBzaW1pbGFyIHRvIEFzdHJvIENvbXBvc2VyXHJcblx0XHRcdFx0Y29uc3QgY29tbWFuZFJlZ2lzdHJ5ID0gKGFwcCBhcyB7IGNvbW1hbmRzPzogeyBjb21tYW5kcz86IFJlY29yZDxzdHJpbmcsIHsgbmFtZT86IHN0cmluZyB9PiB9IH0pLmNvbW1hbmRzO1xyXG5cdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kUmVnaXN0cnk/LmNvbW1hbmRzPy5bY29tbWFuZElkXTtcclxuXHRcdFx0XHRjb25zdCBjb21tYW5kTmFtZSA9IGNvbW1hbmQ/Lm5hbWUgfHwgJyc7XHJcblx0XHRcdFx0Y29uc3QgbG93ZXJDb21tYW5kTmFtZSA9IGNvbW1hbmROYW1lLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBhIHJlbmFtZSBmaWxlIGNvbW1hbmQgYnkgSUQgb3IgbmFtZVxyXG5cdFx0XHRcdGlmIChpc09ic2lkaWFuUmVuYW1lQ29tbWFuZChjb21tYW5kSWQpIHx8IFxyXG5cdFx0XHRcdFx0KGxvd2VyQ29tbWFuZE5hbWUuaW5jbHVkZXMoJ3JlbmFtZScpICYmIGxvd2VyQ29tbWFuZE5hbWUuaW5jbHVkZXMoJ2ZpbGUnKSkpIHtcclxuXHRcdFx0XHRcdHNob3dSZW5hbWVEaWFsb2coYXBwLCBmaWxlKTtcclxuXHRcdFx0XHRcdHJldHVybjsgLy8gU3VjY2VzcywgZXhpdCBlYXJseSAtIGRvIE5PVCBvcGVuIHRoZSBmaWxlXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYSBrbm93biBwcm9ibGVtYXRpYyBjb21tYW5kIHRoYXQgd29uJ3Qgd29yayB3ZWxsXHJcblx0XHRcdFx0aWYgKGlzUHJvYmxlbWF0aWNDb21tYW5kKGNvbW1hbmRJZCwgY29tbWFuZE5hbWUpKSB7XHJcblx0XHRcdFx0XHRpZiAocGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdE9wZW5GaWxlKSB7XHJcblx0XHRcdFx0XHRcdC8vIFVzZXIgaGFzIGVuYWJsZWQgdGhlIHNldHRpbmcsIHNvIHRyeSB0byBvcGVuIGFuZCBleGVjdXRlIGFueXdheVxyXG5cdFx0XHRcdFx0XHQvLyBGYWxsIHRocm91Z2ggdG8gdGhlIGZpbGUgb3BlbmluZyBsb2dpYyBiZWxvd1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgVGhlIFwiJHtjb21tYW5kTmFtZX1cIiBjb21tYW5kIHJlcXVpcmVzIHRoZSBmaWxlIHRvIGJlIG9wZW4gaW4gYW4gZWRpdG9yLiBFbmFibGUgXCJBdHRlbXB0IHRvIG9wZW4gZmlsZSBhbmQgZXhlY3V0ZSBxdWljayBlZGl0IGNvbW1hbmRcIiBpbiBzZXR0aW5ncyB0byB0cnkgYW55d2F5LmAsIDUwMDApO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47IC8vIERvbid0IHRyeSB0byBleGVjdXRlIC0gaXQgd29uJ3Qgd29yayBwcm9wZXJseVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBUcnkgdG8gZmluZCBhbmQgY2FsbCBhIGhlbHBlciBmdW5jdGlvbiBmcm9tIHRoZSBwbHVnaW4gdGhhdCByZWdpc3RlcmVkIHRoaXMgY29tbWFuZFxyXG5cdFx0XHRcdC8vIFBhdHRlcm46IExvb2sgZm9yIFtjb21tYW5kSWRdQnlQYXRoIG1ldGhvZCBvbiB0aGUgc291cmNlIHBsdWdpblxyXG5cdFx0XHRcdGxldCBoZWxwZXJDYWxsZWQgPSBmYWxzZTtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Ly8gRXh0cmFjdCBwbHVnaW4gSUQgZnJvbSBjb21tYW5kIElEIGlmIGl0IGhhcyB0aGUgZm9ybWF0IFwicGx1Z2luLWlkOmNvbW1hbmQtaWRcIlxyXG5cdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB0cnkgdG8gZ2V0IGl0IGZyb20gdGhlIGNvbW1hbmQgcmVnaXN0cnlcclxuXHRcdFx0XHRcdGxldCBwbHVnaW5JZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdFx0XHRsZXQgYmFzZUNvbW1hbmRJZCA9IGNvbW1hbmRJZDtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKGNvbW1hbmRJZC5pbmNsdWRlcygnOicpKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHBhcnRzID0gY29tbWFuZElkLnNwbGl0KCc6Jyk7XHJcblx0XHRcdFx0XHRcdHBsdWdpbklkID0gcGFydHNbMF07XHJcblx0XHRcdFx0XHRcdGJhc2VDb21tYW5kSWQgPSBwYXJ0cy5zbGljZSgxKS5qb2luKCc6Jyk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBUcnkgdG8gZ2V0IHBsdWdpbiBmcm9tIGNvbW1hbmQgcmVnaXN0cnlcclxuXHRcdFx0XHRcdFx0Y29uc3QgYXBwV2l0aENvbW1hbmRzID0gYXBwIGFzIHsgY29tbWFuZHM/OiB7IGNvbW1hbmRzPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfSB9O1xyXG5cdFx0XHRcdFx0XHRjb25zdCBjb21tYW5kUmVnaXN0cnkgPSBhcHBXaXRoQ29tbWFuZHMuY29tbWFuZHM7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kUmVnaXN0cnk/LmNvbW1hbmRzPy5bY29tbWFuZElkXSBhcyB7IHBsdWdpbj86IHsgbWFuaWZlc3Q/OiB7IGlkPzogc3RyaW5nIH07IHBsdWdpbklkPzogc3RyaW5nIH07IHNvdXJjZVBsdWdpbj86IHsgbWFuaWZlc3Q/OiB7IGlkPzogc3RyaW5nIH07IHBsdWdpbklkPzogc3RyaW5nIH0gfSB8IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRcdFx0aWYgKGNvbW1hbmQpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBUcnkgbXVsdGlwbGUgd2F5cyB0byBnZXQgdGhlIHBsdWdpblxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNvdXJjZVBsdWdpbiA9IGNvbW1hbmQucGx1Z2luIHx8IGNvbW1hbmQuc291cmNlUGx1Z2luO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChzb3VyY2VQbHVnaW4pIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFRyeSB0byBnZXQgcGx1Z2luIElEIGZyb20gcGx1Z2luIGluc3RhbmNlXHJcblx0XHRcdFx0XHRcdFx0XHRwbHVnaW5JZCA9IHNvdXJjZVBsdWdpbi5tYW5pZmVzdD8uaWQgfHwgc291cmNlUGx1Z2luLnBsdWdpbklkIHx8IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIElmIHdlIGhhdmUgYSBwbHVnaW4gSUQsIHRyeSB0byBnZXQgdGhlIHBsdWdpbiBpbnN0YW5jZVxyXG5cdFx0XHRcdFx0aWYgKHBsdWdpbklkKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHBsdWdpbnMgPSAoYXBwIGFzIHsgcGx1Z2lucz86IHsgcGx1Z2lucz86IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIHVua25vd24+PiB9IH0pLnBsdWdpbnM7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHNvdXJjZVBsdWdpbiA9IHBsdWdpbnM/LnBsdWdpbnM/LltwbHVnaW5JZF07XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZiAoc291cmNlUGx1Z2luKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gQ29udmVydCBjb21tYW5kIElEIHRvIGNhbWVsQ2FzZSBtZXRob2QgbmFtZVxyXG5cdFx0XHRcdFx0XHRcdC8vIGUuZy4sIFwicmVuYW1lLWNvbnRlbnRcIiAtPiBcInJlbmFtZUNvbnRlbnRCeVBhdGhcIlxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG1ldGhvZE5hbWUgPSBiYXNlQ29tbWFuZElkXHJcblx0XHRcdFx0XHRcdFx0XHQuc3BsaXQoJy0nKVxyXG5cdFx0XHRcdFx0XHRcdFx0Lm1hcCgocGFydCwgaW5kZXgpID0+IFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpbmRleCA9PT0gMCA/IHBhcnQgOiBwYXJ0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydC5zbGljZSgxKVxyXG5cdFx0XHRcdFx0XHRcdFx0KVxyXG5cdFx0XHRcdFx0XHRcdFx0LmpvaW4oJycpICsgJ0J5UGF0aCc7XHJcblx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIHBsdWdpbiBleHBvc2VzIHRoaXMgaGVscGVyIGZ1bmN0aW9uXHJcblx0XHRcdFx0XHRcdFx0aWYgKHNvdXJjZVBsdWdpbiAmJiB0eXBlb2Ygc291cmNlUGx1Z2luW21ldGhvZE5hbWVdID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBDYWxsIHRoZSBoZWxwZXIgZnVuY3Rpb24gZGlyZWN0bHkgLSBubyBuZWVkIHRvIG9wZW4gZmlsZSFcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IChzb3VyY2VQbHVnaW5bbWV0aG9kTmFtZV0gYXMgKHBhdGg6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPikoY2FyZFBhdGgpO1xyXG5cdFx0XHRcdFx0XHRcdFx0aGVscGVyQ2FsbGVkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdHJldHVybjsgLy8gU3VjY2VzcywgZXhpdCBlYXJseVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0Ly8gRmFsbCB0aHJvdWdoIHRvIHRyeSByZWd1bGFyIGNvbW1hbmQgZXhlY3V0aW9uXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEZvciBvdGhlciBjb21tYW5kcyBvciBpZiBoZWxwZXIgbm90IGF2YWlsYWJsZSwgY2hlY2sgaWYgdXNlciB3YW50cyB0byB0cnkgb3BlbmluZyB0aGUgZmlsZVxyXG5cdFx0XHRcdGlmICghaGVscGVyQ2FsbGVkKSB7XHJcblx0XHRcdFx0XHQvLyBPbmx5IGF0dGVtcHQgdG8gb3BlbiBmaWxlIGFuZCBleGVjdXRlIGlmIHRoZSBzZXR0aW5nIGlzIGVuYWJsZWRcclxuXHRcdFx0XHRcdGlmICghcGx1Z2luLnNldHRpbmdzLnF1aWNrRWRpdE9wZW5GaWxlKSB7XHJcblx0XHRcdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBBbHJlYWR5IGluIHNlbnRlbmNlIGNhc2U7IHF1b3RlZCB0ZXh0IGlzIGEgc2V0dGluZyBuYW1lIHJlZmVyZW5jZVxyXG5cdFx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoYFRoaXMgY29tbWFuZCBkb2Vzbid0IGhhdmUgc3BlY2lhbCBoYW5kbGluZy4gRW5hYmxlIFwiQXR0ZW1wdCB0byBvcGVuIGZpbGUgYW5kIGV4ZWN1dGUgcXVpY2sgZWRpdCBjb21tYW5kXCIgaW4gc2V0dGluZ3MgdG8gdHJ5IGV4ZWN1dGluZyBpdC5gLCA1MDAwKTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuOyAvLyBEb24ndCB0cnkgdG8gZXhlY3V0ZVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBVc2VyIGhhcyBlbmFibGVkIHRoZSBzZXR0aW5nLCBzbyB0cnkgdG8gb3BlbiB0aGUgZmlsZSBmaXJzdFxyXG5cdFx0XHRcdFx0Ly8gYW5kIG1ha2UgaXQgYWN0aXZlIHNvIGNvbW1hbmRzIGxpa2UgXCJSZW5hbWUgZmlsZVwiIHRhcmdldCB0aGUgY29ycmVjdCBmaWxlXHJcblx0XHRcdFx0XHQvLyBBbHdheXMgb3BlbiB0aGUgZmlsZSBmaXJzdCBhbmQgbWFrZSBpdCBhY3RpdmUgYmVmb3JlIGV4ZWN1dGluZyB0aGUgY29tbWFuZFxyXG5cdFx0XHRcdFx0Ly8gVGhpcyBlbnN1cmVzIGNvbW1hbmRzIHRoYXQgdXNlIGdldEFjdGl2ZUZpbGUoKSB0YXJnZXQgdGhlIGNvcnJlY3QgZmlsZVxyXG5cdFx0XHRcdFx0Y29uc3QgbGVhZiA9IGFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XHJcblx0XHRcdFx0XHRhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBDUklUSUNBTDogU2V0IHRoaXMgbGVhZiBhcyBhY3RpdmUgc28gY29tbWFuZHMgdGFyZ2V0IHRoZSBjb3JyZWN0IGZpbGVcclxuXHRcdFx0XHRcdC8vIENvbW1hbmRzIGxpa2UgXCJSZW5hbWUgZmlsZVwiIHVzZSBnZXRBY3RpdmVGaWxlKCkgdG8gZGV0ZXJtaW5lIHdoaWNoIGZpbGUgdG8gb3BlcmF0ZSBvblxyXG5cdFx0XHRcdFx0YXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGxlYWYsIHsgZm9jdXM6IHRydWUgfSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFdhaXQgZm9yIHRoZSBlZGl0b3IgdG8gYmUgcmVhZHkgYW5kIHRoZSBmaWxlIHRvIGJlIGFjdGl2ZVxyXG5cdFx0XHRcdFx0Ly8gVXNlIG11bHRpcGxlIGNoZWNrcyB0byBlbnN1cmUgdGhlIHdvcmtzcGFjZSBzdGF0ZSBoYXMgZnVsbHkgdXBkYXRlZFxyXG5cdFx0XHRcdFx0bGV0IGF0dGVtcHRzID0gMDtcclxuXHRcdFx0XHRcdGNvbnN0IG1heEF0dGVtcHRzID0gMzA7IC8vIE1heGltdW0gMS41IHNlY29uZHMgb2Ygd2FpdGluZyAoMzAgKiA1MG1zKVxyXG5cdFx0XHRcdFx0Y29uc3QgZXhlY3V0ZUNvbW1hbmQgPSAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdC8vIEZpbmFsIGNoZWNrIHJpZ2h0IGJlZm9yZSBleGVjdXRpbmdcclxuXHRcdFx0XHRcdFx0Y29uc3QgZmluYWxBY3RpdmVGaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0XHRcdGlmIChmaW5hbEFjdGl2ZUZpbGUgPT09IGZpbGUpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBGaWxlIGlzIGNvbmZpcm1lZCBhY3RpdmUsIGV4ZWN1dGUgdGhlIGNvbW1hbmRcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCAoYXBwIGFzIHsgY29tbWFuZHM/OiB7IGV4ZWN1dGVDb21tYW5kQnlJZD86IChpZDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+IH0gfSkuY29tbWFuZHM/LmV4ZWN1dGVDb21tYW5kQnlJZD8uKHBsdWdpbi5zZXR0aW5ncy5xdWlja0VkaXRDb21tYW5kKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBDb21tYW5kIGV4ZWN1dGlvbiBmYWlsZWRcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KSgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zdCBjaGVja0VkaXRvclJlYWR5ID0gKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xyXG5cdFx0XHRcdFx0XHRjb25zdCB2aWV3V2l0aEVkaXRvciA9IHZpZXcgYXMgeyBlZGl0b3I/OiB1bmtub3duIH07XHJcblx0XHRcdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIENoZWNrIHRoYXQgYm90aCB0aGUgZWRpdG9yIGlzIHJlYWR5IEFORCB0aGUgZmlsZSBpcyBhY3RpdmVcclxuXHRcdFx0XHRcdFx0aWYgKHZpZXcgJiYgJ2VkaXRvcicgaW4gdmlldyAmJiB2aWV3V2l0aEVkaXRvci5lZGl0b3IgJiYgYWN0aXZlRmlsZSA9PT0gZmlsZSkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIEVkaXRvciBpcyByZWFkeSBhbmQgZmlsZSBpcyBhY3RpdmVcclxuXHRcdFx0XHRcdFx0XHQvLyBXYWl0IGEgYml0IG1vcmUgdG8gZW5zdXJlIHdvcmtzcGFjZSBzdGF0ZSBpcyBmdWxseSBwcm9wYWdhdGVkXHJcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIG11bHRpcGxlIGFuaW1hdGlvbiBmcmFtZXMgYW5kIHRpbWVvdXRzIHRvIGVuc3VyZSBldmVyeXRoaW5nIGlzIHNldHRsZWRcclxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXhlY3V0ZUNvbW1hbmQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fSwgMjAwKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGF0dGVtcHRzIDwgbWF4QXR0ZW1wdHMpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBFZGl0b3Igbm90IHJlYWR5IHlldCBvciBmaWxlIG5vdCBhY3RpdmUsIGNoZWNrIGFnYWluXHJcblx0XHRcdFx0XHRcdFx0YXR0ZW1wdHMrKztcclxuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGNoZWNrRWRpdG9yUmVhZHksIDUwKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gU3RhcnQgY2hlY2tpbmcgZm9yIGVkaXRvciByZWFkaW5lc3NcclxuXHRcdFx0XHRcdGNoZWNrRWRpdG9yUmVhZHkoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pKCk7XHJcblx0fSwgdHJ1ZSk7IC8vIENhcHR1cmUgcGhhc2UgLSBydW5zIEJFRk9SRSB0aGUgcmVndWxhciBjYXJkIGNsaWNrIGhhbmRsZXJcclxuXHRcclxuXHQvLyBBbHNvIGFkZCBhIG1vdXNlZG93biBoYW5kbGVyIHRvIGNhdGNoIGl0IGV2ZW4gZWFybGllclxyXG5cdHF1aWNrRWRpdEljb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcclxuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdH0sIHRydWUpO1xyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIFByb3BlcnR5IFJlbmRlcmVyXHJcbiAqIEhhbmRsZXMgcmVuZGVyaW5nIHByb3BlcnR5IGZpZWxkcyBhbmQgY29udGVudCBmb3IgY2FyZHNcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIEJhc2VzRW50cnksIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgdHlwZSB7IENhcmREYXRhLCBDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9kYXRhLXRyYW5zZm9ybSc7XHJcbmltcG9ydCB7IGdldFByb3BlcnR5TGFiZWwgfSBmcm9tICcuL3Byb3BlcnR5JztcclxuaW1wb3J0IHsgXHJcblx0c2hvdWxkSGlkZU1pc3NpbmdQcm9wZXJ0aWVzLCBcclxuXHRzaG91bGRIaWRlRW1wdHlQcm9wZXJ0aWVzLFxyXG5cdGdldEVtcHR5VmFsdWVNYXJrZXIsXHJcblx0Z2V0VGFnU3R5bGUsXHJcblx0c2hvd1RhZ0hhc2hQcmVmaXhcclxufSBmcm9tICcuL3N0eWxlLXNldHRpbmdzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eVJlbmRlcmVyIHtcclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByaXZhdGUgYXBwOiBBcHAsXHJcblx0XHRwcml2YXRlIGdldEJhc2VzQ29uZmlnPzogKCkgPT4geyBnZXQ/OiAoa2V5OiBzdHJpbmcpID0+IHVua25vd24gfSB8IHVuZGVmaW5lZCxcclxuXHRcdHByaXZhdGUgZ2V0QmFzZXNDb250cm9sbGVyPzogKCkgPT4geyBnZXRQcm9wZXJ0eURpc3BsYXlOYW1lPzogKG5hbWU6IHN0cmluZykgPT4gc3RyaW5nIH0gfCB1bmRlZmluZWRcclxuXHQpIHt9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbmRlcnMgcHJvcGVydHkgZmllbGRzIGZvciBhIGNhcmRcclxuXHQgKiBAcGFyYW0gcG9zaXRpb24gLSAndG9wJyB0byByZW5kZXIgb25seSB0b3AtcG9zaXRpb25lZCBncm91cHMsICdib3R0b20nIHRvIHJlbmRlciBvbmx5IGJvdHRvbS1wb3NpdGlvbmVkIGdyb3VwcywgdW5kZWZpbmVkIHRvIHJlbmRlciBhbGxcclxuXHQgKi9cclxuXHRyZW5kZXJQcm9wZXJ0aWVzKFxyXG5cdFx0Y2FyZEVsOiBIVE1MRWxlbWVudCxcclxuXHRcdGNhcmQ6IENhcmREYXRhLFxyXG5cdFx0ZW50cnk6IEJhc2VzRW50cnksXHJcblx0XHRzZXR0aW5nczogQ01TU2V0dGluZ3MsXHJcblx0XHRvblByb3BlcnR5VG9nZ2xlPzogKHBhdGg6IHN0cmluZywgcHJvcGVydHk6IHN0cmluZywgdmFsdWU6IHVua25vd24pID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+LFxyXG5cdFx0cG9zaXRpb24/OiAndG9wJyB8ICdib3R0b20nXHJcblx0KTogdm9pZCB7XHJcblx0XHRjb25zdCBwcm9wcyA9IFtcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MSxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MixcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MyxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NCxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NSxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NixcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5NyxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OCxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5OSxcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTAsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTExLFxyXG5cdFx0XHRzZXR0aW5ncy5wcm9wZXJ0eURpc3BsYXkxMixcclxuXHRcdFx0c2V0dGluZ3MucHJvcGVydHlEaXNwbGF5MTMsXHJcblx0XHRcdHNldHRpbmdzLnByb3BlcnR5RGlzcGxheTE0XHJcblx0XHRdO1xyXG5cclxuXHRcdC8vIERldGVjdCBkdXBsaWNhdGVzXHJcblx0XHRjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblx0XHRjb25zdCBlZmZlY3RpdmVQcm9wcyA9IHByb3BzLm1hcChwcm9wID0+IHtcclxuXHRcdFx0aWYgKCFwcm9wIHx8IHByb3AgPT09ICcnKSByZXR1cm4gJyc7XHJcblx0XHRcdGlmIChzZWVuLmhhcyhwcm9wKSkgcmV0dXJuICcnO1xyXG5cdFx0XHRzZWVuLmFkZChwcm9wKTtcclxuXHRcdFx0cmV0dXJuIHByb3A7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBSZXNvbHZlIHByb3BlcnR5IHZhbHVlc1xyXG5cdFx0Ly8gVXNlIGNhcmREYXRhIHByb3BlcnRpZXMgdGhhdCB3ZXJlIGFscmVhZHkgcmVzb2x2ZWQgZHVyaW5nIHRyYW5zZm9ybWF0aW9uXHJcblx0XHQvLyBGb3IgTURYIGZpbGVzLCBwcm9wZXJ0aWVzIGFyZSByZXNvbHZlZCBhc3luYyBkdXJpbmcgdHJhbnNmb3JtQmFzZXNFbnRyaWVzXHJcblx0XHRjb25zdCB2YWx1ZXMgPSBlZmZlY3RpdmVQcm9wcy5tYXAoKHByb3AsIGluZGV4KSA9PiB7XHJcblx0XHRcdGlmICghcHJvcCkgcmV0dXJuIG51bGw7XHJcblx0XHRcdC8vIFVzZSBwcmUtcmVzb2x2ZWQgcHJvcGVydGllcyBmcm9tIGNhcmREYXRhIChwcm9wZXJ0eTEsIHByb3BlcnR5MiwgZXRjLilcclxuXHRcdFx0Y29uc3QgY2FyZFByb3BlcnR5ID0gYHByb3BlcnR5JHtpbmRleCArIDF9YCBhcyBrZXlvZiBDYXJkRGF0YTtcclxuXHRcdFx0Y29uc3QgY2FyZFZhbHVlID0gY2FyZFtjYXJkUHJvcGVydHldO1xyXG5cdFx0XHRpZiAoY2FyZFZhbHVlICE9PSB1bmRlZmluZWQgJiYgY2FyZFZhbHVlICE9PSBudWxsKSB7XHJcblx0XHRcdFx0cmV0dXJuIGNhcmRWYWx1ZSBhcyBzdHJpbmcgfCBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIEZhbGxiYWNrOiBGb3IgLm1kIGZpbGVzLCB0cnkgc3luY2hyb25vdXMgcmVzb2x1dGlvbiB2aWEgQmFzZXMgQVBJXHJcblx0XHRcdC8vIEZvciBNRFggZmlsZXMsIHByb3BlcnRpZXMgc2hvdWxkIGFscmVhZHkgYmUgaW4gY2FyZERhdGEgZnJvbSBhc3luYyB0cmFuc2Zvcm1hdGlvblxyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IHZhbHVlID0gZW50cnkuZ2V0VmFsdWUocHJvcCBhcyBgbm90ZS4ke3N0cmluZ31gIHwgYGZvcm11bGEuJHtzdHJpbmd9YCB8IGBmaWxlLiR7c3RyaW5nfWApIGFzIHsgZGF0YT86IHVua25vd247IGRhdGU/OiBEYXRlIH0gfCBudWxsO1xyXG5cdFx0XHRcdGlmICghdmFsdWUpIHJldHVybiBudWxsO1xyXG5cdFx0XHRcdGlmICgnZGF0ZScgaW4gdmFsdWUgJiYgdmFsdWUuZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZS5kYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoJ2RhdGEnIGluIHZhbHVlICYmIHZhbHVlLmRhdGEgIT0gbnVsbCkge1xyXG5cdFx0XHRcdFx0Y29uc3QgZGF0YSA9IHZhbHVlLmRhdGE7XHJcblx0XHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZGF0YS5tYXAoaXRlbSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmIGl0ZW0gIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoaXRlbSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShpdGVtKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyhpdGVtKTtcclxuXHRcdFx0XHRcdFx0fSkuam9pbignLCAnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmIChkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBkYXRhICE9PSBudWxsICYmICFBcnJheS5pc0FycmF5KGRhdGEpKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGRhdGEgPT09ICdudW1iZXInIHx8IHR5cGVvZiBkYXRhID09PSAnYm9vbGVhbicpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIFN0cmluZyhkYXRhKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIEZhbGxiYWNrIGZvciBvdGhlciB0eXBlc1xyXG5cdFx0XHRcdFx0cmV0dXJuIGRhdGEgPyBKU09OLnN0cmluZ2lmeShkYXRhKSA6ICcnO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0Ly8gSWdub3JlIGVycm9ycyAtIHByb3BlcnR5IGRvZXNuJ3QgZXhpc3Qgb3IgY2FuJ3QgYmUgcmVzb2x2ZWRcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIERlZmluZSBwcm9wZXJ0eSBncm91cHNcclxuXHRcdGNvbnN0IHByb3BlcnR5R3JvdXBzID0gW1xyXG5cdFx0XHR7XHJcblx0XHRcdFx0cHJvcHM6IFtlZmZlY3RpdmVQcm9wc1swXSwgZWZmZWN0aXZlUHJvcHNbMV1dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1swXSwgdmFsdWVzWzFdXSxcclxuXHRcdFx0XHRzaWRlQnlTaWRlOiBzZXR0aW5ncy5wcm9wZXJ0eUxheW91dDEyU2lkZUJ5U2lkZSxcclxuXHRcdFx0XHRwb3NpdGlvbjogc2V0dGluZ3MucHJvcGVydHlHcm91cDFQb3NpdGlvblxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cHJvcHM6IFtlZmZlY3RpdmVQcm9wc1syXSwgZWZmZWN0aXZlUHJvcHNbM11dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1syXSwgdmFsdWVzWzNdXSxcclxuXHRcdFx0XHRzaWRlQnlTaWRlOiBzZXR0aW5ncy5wcm9wZXJ0eUxheW91dDM0U2lkZUJ5U2lkZSxcclxuXHRcdFx0XHRwb3NpdGlvbjogc2V0dGluZ3MucHJvcGVydHlHcm91cDJQb3NpdGlvblxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cHJvcHM6IFtlZmZlY3RpdmVQcm9wc1s0XSwgZWZmZWN0aXZlUHJvcHNbNV1dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1s0XSwgdmFsdWVzWzVdXSxcclxuXHRcdFx0XHRzaWRlQnlTaWRlOiBzZXR0aW5ncy5wcm9wZXJ0eUxheW91dDU2U2lkZUJ5U2lkZSxcclxuXHRcdFx0XHRwb3NpdGlvbjogc2V0dGluZ3MucHJvcGVydHlHcm91cDNQb3NpdGlvblxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cHJvcHM6IFtlZmZlY3RpdmVQcm9wc1s2XSwgZWZmZWN0aXZlUHJvcHNbN11dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1s2XSwgdmFsdWVzWzddXSxcclxuXHRcdFx0XHRzaWRlQnlTaWRlOiBzZXR0aW5ncy5wcm9wZXJ0eUxheW91dDc4U2lkZUJ5U2lkZSxcclxuXHRcdFx0XHRwb3NpdGlvbjogc2V0dGluZ3MucHJvcGVydHlHcm91cDRQb3NpdGlvblxyXG5cdFx0XHR9LFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cHJvcHM6IFtlZmZlY3RpdmVQcm9wc1s4XSwgZWZmZWN0aXZlUHJvcHNbOV1dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1s4XSwgdmFsdWVzWzldXSxcclxuXHRcdFx0XHRzaWRlQnlTaWRlOiBzZXR0aW5ncy5wcm9wZXJ0eUxheW91dDkxMFNpZGVCeVNpZGUsXHJcblx0XHRcdFx0cG9zaXRpb246IHNldHRpbmdzLnByb3BlcnR5R3JvdXA1UG9zaXRpb25cclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHByb3BzOiBbZWZmZWN0aXZlUHJvcHNbMTBdLCBlZmZlY3RpdmVQcm9wc1sxMV1dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1sxMF0sIHZhbHVlc1sxMV1dLFxyXG5cdFx0XHRcdHNpZGVCeVNpZGU6IHNldHRpbmdzLnByb3BlcnR5TGF5b3V0MTExMlNpZGVCeVNpZGUsXHJcblx0XHRcdFx0cG9zaXRpb246IHNldHRpbmdzLnByb3BlcnR5R3JvdXA2UG9zaXRpb25cclxuXHRcdFx0fSxcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHByb3BzOiBbZWZmZWN0aXZlUHJvcHNbMTJdLCBlZmZlY3RpdmVQcm9wc1sxM11dLFxyXG5cdFx0XHRcdHZhbHVlczogW3ZhbHVlc1sxMl0sIHZhbHVlc1sxM11dLFxyXG5cdFx0XHRcdHNpZGVCeVNpZGU6IHNldHRpbmdzLnByb3BlcnR5TGF5b3V0MTMxNFNpZGVCeVNpZGUsXHJcblx0XHRcdFx0cG9zaXRpb246IHNldHRpbmdzLnByb3BlcnR5R3JvdXA3UG9zaXRpb25cclxuXHRcdFx0fVxyXG5cdFx0XTtcclxuXHJcblx0XHQvLyBTZXBhcmF0ZSBncm91cHMgYnkgcG9zaXRpb25cclxuXHRcdGNvbnN0IHRvcEdyb3VwczogdHlwZW9mIHByb3BlcnR5R3JvdXBzID0gW107XHJcblx0XHRjb25zdCBib3R0b21Hcm91cHM6IHR5cGVvZiBwcm9wZXJ0eUdyb3VwcyA9IFtdO1xyXG5cclxuXHRcdHByb3BlcnR5R3JvdXBzLmZvckVhY2goKGdyb3VwLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRjb25zdCBoYXNDb250ZW50ID0gZ3JvdXAucHJvcHNbMF0gIT09ICcnIHx8IGdyb3VwLnByb3BzWzFdICE9PSAnJztcclxuXHRcdFx0aWYgKGhhc0NvbnRlbnQpIHtcclxuXHRcdFx0XHRpZiAoZ3JvdXAucG9zaXRpb24gPT09ICd0b3AnKSB7XHJcblx0XHRcdFx0XHR0b3BHcm91cHMucHVzaChncm91cCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGJvdHRvbUdyb3Vwcy5wdXNoKGdyb3VwKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEhlbHBlciBmdW5jdGlvbiB0byBjaGVjayBpZiBwcm9wZXJ0eSBzaG91bGQgYmUgaGlkZGVuXHJcblx0XHRjb25zdCBzaG91bGRIaWRlUHJvcGVydHkgPSAocHJvcE5hbWU6IHN0cmluZywgcHJvcFZhbHVlOiBzdHJpbmcgfCBudWxsKTogYm9vbGVhbiA9PiB7XHJcblx0XHRcdGlmICghcHJvcE5hbWUgfHwgcHJvcE5hbWUgPT09ICcnKSByZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IGlzRW1wdHlWYWx1ZSA9IHByb3BWYWx1ZSA9PT0gbnVsbCB8fCBcclxuXHRcdFx0XHRwcm9wVmFsdWUgPT09ICcnIHx8IFxyXG5cdFx0XHRcdCh0eXBlb2YgcHJvcFZhbHVlID09PSAnc3RyaW5nJyAmJiBwcm9wVmFsdWUudHJpbSgpID09PSAnJyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayBpZiBwcm9wZXJ0eSBleGlzdHMgaW4gZnJvbnRtYXR0ZXJcclxuXHRcdFx0bGV0IHByb3BlcnR5RXhpc3RzID0gZmFsc2U7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Ly8gR2V0IGZpbGUgZnJvbSB2YXVsdCB0byBlbnN1cmUgaXQncyBhIHByb3BlciBURmlsZSAobGlrZSBvdGhlciBwYXJ0cyBvZiB0aGUgY29kZWJhc2UpXHJcblx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSBlbnRyeT8uZmlsZT8ucGF0aDtcclxuXHRcdFx0XHRpZiAoZmlsZVBhdGggJiYgdGhpcy5hcHA/LnZhdWx0ICYmIHRoaXMuYXBwPy5tZXRhZGF0YUNhY2hlKSB7XHJcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuXHRcdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHRcdFx0Ly8gRm9yIE1EWCBmaWxlcywgbWV0YWRhdGEgY2FjaGUgd29uJ3Qgd29yaywgc28gc2tpcCB0aGlzIGNoZWNrXHJcblx0XHRcdFx0XHRcdC8vIFRoZSBCYXNlcyBBUEkgc2hvdWxkIGhhbmRsZSBwcm9wZXJ0eSBleGlzdGVuY2UgZm9yIE1EWCBmaWxlc1xyXG5cdFx0XHRcdFx0XHRpZiAoZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gRm9yIE1EWCwgYXNzdW1lIHByb3BlcnR5IGV4aXN0cyBpZiBCYXNlcyBBUEkgcmV0dXJuZWQgYSB2YWx1ZVxyXG5cdFx0XHRcdFx0XHRcdHByb3BlcnR5RXhpc3RzID0gIWlzRW1wdHlWYWx1ZTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xyXG5cdFx0XHRcdFx0XHRcdGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YS5mcm9udG1hdHRlcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcHJvcGVydHlOYW1lcyA9IHByb3BOYW1lLnNwbGl0KCcsJykubWFwKHAgPT4gcC50cmltKCkpLmZpbHRlcihwID0+IHApO1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBwcm9wIG9mIHByb3BlcnR5TmFtZXMpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgcHJvcEtleSA9IHByb3AucmVwbGFjZSgvXihub3RlfGZvcm11bGF8ZmlsZSlcXC4vLCAnJyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChwcm9wS2V5IGluIG1ldGFkYXRhLmZyb250bWF0dGVyKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0cHJvcGVydHlFeGlzdHMgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBTaWxlbnRseSBpZ25vcmUgZXJyb3JzIHdoZW4gY2hlY2tpbmcgcHJvcGVydHkgZXhpc3RlbmNlXHJcblx0XHRcdFx0Ly8gVGhpcyBjYW4gaGFwcGVuIGlmIG1ldGFkYXRhQ2FjaGUgaXNuJ3QgcmVhZHkgeWV0XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIEhpZGUgbWlzc2luZyBwcm9wZXJ0aWVzXHJcblx0XHRcdGlmIChzaG91bGRIaWRlTWlzc2luZ1Byb3BlcnRpZXMoKSAmJiAhcHJvcGVydHlFeGlzdHMpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSGlkZSBlbXB0eSBwcm9wZXJ0aWVzXHJcblx0XHRcdGlmIChzaG91bGRIaWRlRW1wdHlQcm9wZXJ0aWVzKCkgJiYgcHJvcGVydHlFeGlzdHMgJiYgaXNFbXB0eVZhbHVlKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIEFsc28gaGlkZSBpZiBlbXB0eSBhbmQgaGlkZSBlbXB0eSBpcyBlbmFibGVkIChmYWxsYmFjayBmb3IgZm9ybXVsYSBwcm9wZXJ0aWVzKVxyXG5cdFx0XHRpZiAoc2hvdWxkSGlkZUVtcHR5UHJvcGVydGllcygpICYmIGlzRW1wdHlWYWx1ZSkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFJlbmRlciB0b3AgZ3JvdXBzIChvbmx5IGlmIHBvc2l0aW9uIGlzICd0b3AnIG9yIHVuZGVmaW5lZClcclxuXHRcdGlmICgocG9zaXRpb24gPT09ICd0b3AnIHx8IHBvc2l0aW9uID09PSB1bmRlZmluZWQpICYmIHRvcEdyb3Vwcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdGNvbnN0IHRvcE1ldGFFbCA9IGNhcmRFbC5jcmVhdGVEaXYoJ2NhcmQtcHJvcGVydGllcyBwcm9wZXJ0aWVzLXRvcCcpO1xyXG5cdFx0XHR0b3BHcm91cHMuZm9yRWFjaCgoZ3JvdXAsIGdyb3VwSW5kZXgpID0+IHtcclxuXHRcdFx0XHQvLyBDaGVjayBpZiBlaXRoZXIgcHJvcGVydHkgc2hvdWxkIGJlIHJlbmRlcmVkXHJcblx0XHRcdFx0Y29uc3QgcHJvcDFTaG91bGRSZW5kZXIgPSBncm91cC5wcm9wc1swXSAmJiAhc2hvdWxkSGlkZVByb3BlcnR5KGdyb3VwLnByb3BzWzBdLCBncm91cC52YWx1ZXNbMF0pO1xyXG5cdFx0XHRcdGNvbnN0IHByb3AyU2hvdWxkUmVuZGVyID0gZ3JvdXAucHJvcHNbMV0gJiYgIXNob3VsZEhpZGVQcm9wZXJ0eShncm91cC5wcm9wc1sxXSwgZ3JvdXAudmFsdWVzWzFdKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoIXByb3AxU2hvdWxkUmVuZGVyICYmICFwcm9wMlNob3VsZFJlbmRlcikge1xyXG5cdFx0XHRcdFx0cmV0dXJuOyAvLyBTa2lwIHRoaXMgZ3JvdXAgZW50aXJlbHkgaWYgYm90aCBwcm9wZXJ0aWVzIGFyZSBoaWRkZW5cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc3Qgcm93RWwgPSB0b3BNZXRhRWwuY3JlYXRlRGl2KGBwcm9wZXJ0eS1yb3cgcHJvcGVydHktcm93LWdyb3VwLSR7Z3JvdXBJbmRleCArIDF9YCk7XHJcblx0XHRcdFx0aWYgKGdyb3VwLnNpZGVCeVNpZGUpIHtcclxuXHRcdFx0XHRcdHJvd0VsLmFkZENsYXNzKCdwcm9wZXJ0eS1yb3ctc2lkZS1ieS1zaWRlJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNvbnN0IGZpZWxkMUVsID0gcm93RWwuY3JlYXRlRGl2KCdwcm9wZXJ0eS1maWVsZCBwcm9wZXJ0eS1maWVsZC0xJyk7XHJcblx0XHRcdFx0aWYgKHByb3AxU2hvdWxkUmVuZGVyKSB7XHJcblx0XHRcdFx0XHR0aGlzLnJlbmRlclByb3BlcnR5Q29udGVudChmaWVsZDFFbCwgZ3JvdXAucHJvcHNbMF0sIGdyb3VwLnZhbHVlc1swXSwgY2FyZCwgZW50cnksIHNldHRpbmdzLCBvblByb3BlcnR5VG9nZ2xlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y29uc3QgZmllbGQyRWwgPSByb3dFbC5jcmVhdGVEaXYoJ3Byb3BlcnR5LWZpZWxkIHByb3BlcnR5LWZpZWxkLTInKTtcclxuXHRcdFx0XHRpZiAocHJvcDJTaG91bGRSZW5kZXIpIHtcclxuXHRcdFx0XHRcdHRoaXMucmVuZGVyUHJvcGVydHlDb250ZW50KGZpZWxkMkVsLCBncm91cC5wcm9wc1sxXSwgZ3JvdXAudmFsdWVzWzFdLCBjYXJkLCBlbnRyeSwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVuZGVyIGJvdHRvbSBncm91cHMgKG9ubHkgaWYgcG9zaXRpb24gaXMgJ2JvdHRvbScgb3IgdW5kZWZpbmVkKVxyXG5cdFx0aWYgKChwb3NpdGlvbiA9PT0gJ2JvdHRvbScgfHwgcG9zaXRpb24gPT09IHVuZGVmaW5lZCkgJiYgYm90dG9tR3JvdXBzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Y29uc3QgYm90dG9tTWV0YUVsID0gY2FyZEVsLmNyZWF0ZURpdignY2FyZC1wcm9wZXJ0aWVzIHByb3BlcnRpZXMtYm90dG9tJyk7XHJcblx0XHRcdGJvdHRvbUdyb3Vwcy5mb3JFYWNoKChncm91cCwgZ3JvdXBJbmRleCkgPT4ge1xyXG5cdFx0XHRcdC8vIENoZWNrIGlmIGVpdGhlciBwcm9wZXJ0eSBzaG91bGQgYmUgcmVuZGVyZWRcclxuXHRcdFx0XHRjb25zdCBwcm9wMVNob3VsZFJlbmRlciA9IGdyb3VwLnByb3BzWzBdICYmICFzaG91bGRIaWRlUHJvcGVydHkoZ3JvdXAucHJvcHNbMF0sIGdyb3VwLnZhbHVlc1swXSk7XHJcblx0XHRcdFx0Y29uc3QgcHJvcDJTaG91bGRSZW5kZXIgPSBncm91cC5wcm9wc1sxXSAmJiAhc2hvdWxkSGlkZVByb3BlcnR5KGdyb3VwLnByb3BzWzFdLCBncm91cC52YWx1ZXNbMV0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICghcHJvcDFTaG91bGRSZW5kZXIgJiYgIXByb3AyU2hvdWxkUmVuZGVyKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47IC8vIFNraXAgdGhpcyBncm91cCBlbnRpcmVseSBpZiBib3RoIHByb3BlcnRpZXMgYXJlIGhpZGRlblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zdCByb3dFbCA9IGJvdHRvbU1ldGFFbC5jcmVhdGVEaXYoYHByb3BlcnR5LXJvdyBwcm9wZXJ0eS1yb3ctZ3JvdXAtJHtncm91cEluZGV4ICsgMX1gKTtcclxuXHRcdFx0XHRpZiAoZ3JvdXAuc2lkZUJ5U2lkZSkge1xyXG5cdFx0XHRcdFx0cm93RWwuYWRkQ2xhc3MoJ3Byb3BlcnR5LXJvdy1zaWRlLWJ5LXNpZGUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y29uc3QgZmllbGQxRWwgPSByb3dFbC5jcmVhdGVEaXYoJ3Byb3BlcnR5LWZpZWxkIHByb3BlcnR5LWZpZWxkLTEnKTtcclxuXHRcdFx0XHRpZiAocHJvcDFTaG91bGRSZW5kZXIpIHtcclxuXHRcdFx0XHRcdHRoaXMucmVuZGVyUHJvcGVydHlDb250ZW50KGZpZWxkMUVsLCBncm91cC5wcm9wc1swXSwgZ3JvdXAudmFsdWVzWzBdLCBjYXJkLCBlbnRyeSwgc2V0dGluZ3MsIG9uUHJvcGVydHlUb2dnbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjb25zdCBmaWVsZDJFbCA9IHJvd0VsLmNyZWF0ZURpdigncHJvcGVydHktZmllbGQgcHJvcGVydHktZmllbGQtMicpO1xyXG5cdFx0XHRcdGlmIChwcm9wMlNob3VsZFJlbmRlcikge1xyXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJQcm9wZXJ0eUNvbnRlbnQoZmllbGQyRWwsIGdyb3VwLnByb3BzWzFdLCBncm91cC52YWx1ZXNbMV0sIGNhcmQsIGVudHJ5LCBzZXR0aW5ncywgb25Qcm9wZXJ0eVRvZ2dsZSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbmRlcnMgaW5kaXZpZHVhbCBwcm9wZXJ0eSBjb250ZW50XHJcblx0ICovXHJcblx0cHJpdmF0ZSByZW5kZXJQcm9wZXJ0eUNvbnRlbnQoXHJcblx0XHRjb250YWluZXI6IEhUTUxFbGVtZW50LFxyXG5cdFx0cHJvcGVydHlOYW1lOiBzdHJpbmcsXHJcblx0XHRyZXNvbHZlZFZhbHVlOiBzdHJpbmcgfCBudWxsLFxyXG5cdFx0Y2FyZDogQ2FyZERhdGEsXHJcblx0XHRlbnRyeTogQmFzZXNFbnRyeSxcclxuXHRcdHNldHRpbmdzOiBDTVNTZXR0aW5ncyxcclxuXHRcdG9uUHJvcGVydHlUb2dnbGU/OiAocGF0aDogc3RyaW5nLCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bikgPT4gdm9pZCB8IFByb21pc2U8dm9pZD5cclxuXHQpOiB2b2lkIHtcclxuXHRcdGlmIChwcm9wZXJ0eU5hbWUgPT09ICcnKSByZXR1cm47XHJcblxyXG5cdFx0Ly8gTWF0Y2ggRHluYW1pYyBWaWV3cyBiZWhhdmlvcjpcclxuXHRcdC8vIC0gcmVzb2x2ZWRWYWx1ZSA9PT0gbnVsbCBtZWFucyBwcm9wZXJ0eSBkb2Vzbid0IGV4aXN0IChtaXNzaW5nKVxyXG5cdFx0Ly8gLSByZXNvbHZlZFZhbHVlID09PSBcIlwiIG1lYW5zIHByb3BlcnR5IGV4aXN0cyBidXQgaXMgZW1wdHlcclxuXHRcdC8vIFRoaXMgbWF0Y2hlcyBob3cgcmVzb2x2ZUJhc2VzUHJvcGVydHkgd29ya3NcclxuXHRcdFxyXG5cdFx0Ly8gSGlkZSBtaXNzaW5nIHByb3BlcnRpZXMgaWYgdG9nZ2xlIGVuYWJsZWQgKHJlc29sdmVkVmFsdWUgaXMgbnVsbCBmb3IgbWlzc2luZyBwcm9wZXJ0aWVzKVxyXG5cdFx0aWYgKHJlc29sdmVkVmFsdWUgPT09IG51bGwgJiYgc2hvdWxkSGlkZU1pc3NpbmdQcm9wZXJ0aWVzKCkpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBIaWRlIGVtcHR5IHByb3BlcnRpZXMgaWYgdG9nZ2xlIGVuYWJsZWQgKHJlc29sdmVkVmFsdWUgaXMgJycgZm9yIGVtcHR5IHByb3BlcnRpZXMpXHJcblx0XHRpZiAocmVzb2x2ZWRWYWx1ZSA9PT0gXCJcIiAmJiBzaG91bGRIaWRlRW1wdHlQcm9wZXJ0aWVzKCkpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIG5vIHZhbHVlIGFuZCBsYWJlbHMgYXJlIGhpZGRlbiwgcmVuZGVyIG5vdGhpbmdcclxuXHRcdGlmICghcmVzb2x2ZWRWYWx1ZSAmJiBzZXR0aW5ncy5wcm9wZXJ0eUxhYmVscyA9PT0gJ2hpZGUnKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBFYXJseSByZXR1cm4gZm9yIGVtcHR5IHNwZWNpYWwgcHJvcGVydGllcyB3aGVuIGxhYmVscyBhcmUgaGlkZGVuXHJcblx0XHRpZiAoc2V0dGluZ3MucHJvcGVydHlMYWJlbHMgPT09ICdoaWRlJykge1xyXG5cdFx0XHRpZiAoKHByb3BlcnR5TmFtZSA9PT0gJ3RhZ3MnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ25vdGUudGFncycpICYmIGNhcmQueWFtbFRhZ3MubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICgocHJvcGVydHlOYW1lID09PSAnZmlsZS50YWdzJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdmaWxlIHRhZ3MnKSAmJiBjYXJkLnRhZ3MubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gR2V0IHByb3BlcnR5IGxhYmVsIGZyb20gQmFzZXMgaWYgYXZhaWxhYmxlXHJcblx0XHRjb25zdCBiYXNlc0NvbmZpZyA9IHRoaXMuZ2V0QmFzZXNDb25maWcgPyB0aGlzLmdldEJhc2VzQ29uZmlnKCkgOiB1bmRlZmluZWQ7XHJcblx0XHRjb25zdCBiYXNlc0NvbnRyb2xsZXIgPSB0aGlzLmdldEJhc2VzQ29udHJvbGxlciA/IHRoaXMuZ2V0QmFzZXNDb250cm9sbGVyKCkgOiB1bmRlZmluZWQ7XHJcblx0XHRjb25zdCBwcm9wZXJ0eUxhYmVsID0gZ2V0UHJvcGVydHlMYWJlbChwcm9wZXJ0eU5hbWUsIHRoaXMuYXBwLCBiYXNlc0NvbmZpZywgYmFzZXNDb250cm9sbGVyKTtcclxuXHRcdC8vIENoZWNrIGlmIHdlIGdvdCBhIGN1c3RvbSBkaXNwbGF5IG5hbWUgKGRpZmZlcmVudCBmcm9tIHByb3BlcnR5IG5hbWUpXHJcblx0XHRjb25zdCBpc0N1c3RvbUxhYmVsID0gcHJvcGVydHlMYWJlbC50b0xvd2VyQ2FzZSgpICE9PSBwcm9wZXJ0eU5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcblx0XHQvLyBSZW5kZXIgbGFiZWwgaWYgcHJvcGVydHkgbGFiZWxzIGFyZSBlbmFibGVkXHJcblx0XHRpZiAoc2V0dGluZ3MucHJvcGVydHlMYWJlbHMgPT09ICdhYm92ZScpIHtcclxuXHRcdFx0Y29uc3QgbGFiZWxFbCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3Byb3BlcnR5LWxhYmVsJyk7XHJcblx0XHRcdGlmIChpc0N1c3RvbUxhYmVsKSB7XHJcblx0XHRcdFx0bGFiZWxFbC5hZGRDbGFzcygncHJvcGVydHktbGFiZWwtY3VzdG9tJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0bGFiZWxFbC50ZXh0Q29udGVudCA9IHByb3BlcnR5TGFiZWw7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVW5pdmVyc2FsIHdyYXBwZXIgZm9yIGFsbCBjb250ZW50IHR5cGVzXHJcblx0XHRjb25zdCBtZXRhQ29udGVudCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3Byb3BlcnR5LWNvbnRlbnQnKTtcclxuXHRcdFxyXG5cdFx0Ly8gQWRkIGNsYXNzIGZvciBpbmxpbmUgbGFiZWxzIHRvIGVuYWJsZSBwcm9wZXIgQ1NTIHN0eWxpbmdcclxuXHRcdGlmIChzZXR0aW5ncy5wcm9wZXJ0eUxhYmVscyA9PT0gJ2lubGluZScpIHtcclxuXHRcdFx0bWV0YUNvbnRlbnQuYWRkQ2xhc3MoJ3Byb3BlcnR5LWNvbnRlbnQtaW5saW5lJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQWRkIGlubGluZSBsYWJlbCBpZiBlbmFibGVkIChpbnNpZGUgbWV0YUNvbnRlbnQpXHJcblx0XHRpZiAoc2V0dGluZ3MucHJvcGVydHlMYWJlbHMgPT09ICdpbmxpbmUnKSB7XHJcblx0XHRcdGNvbnN0IGxhYmVsU3BhbiA9IG1ldGFDb250ZW50LmNyZWF0ZVNwYW4oJ3Byb3BlcnR5LWxhYmVsLWlubGluZScpO1xyXG5cdFx0XHRsYWJlbFNwYW4udGV4dENvbnRlbnQgPSBwcm9wZXJ0eUxhYmVsICsgJzogJztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiBubyB2YWx1ZSBidXQgbGFiZWxzIGFyZSBlbmFibGVkLCBzaG93IHBsYWNlaG9sZGVyXHJcblx0XHRpZiAoIXJlc29sdmVkVmFsdWUpIHtcclxuXHRcdFx0Y29uc3QgZW1wdHlNYXJrZXIgPSBtZXRhQ29udGVudC5jcmVhdGVTcGFuKCdwcm9wZXJ0eS1lbXB0eS1tYXJrZXInKTtcclxuXHRcdFx0ZW1wdHlNYXJrZXIudGV4dENvbnRlbnQgPSBnZXRFbXB0eVZhbHVlTWFya2VyKCk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBIYW5kbGUgdGltZXN0YW1wIHByb3BlcnRpZXMgLSByZW5kZXIgYXMtaXMgd2l0aG91dCBTdHlsZSBTZXR0aW5ncyBsb2dpY1xyXG5cdFx0Y29uc3QgaXNLbm93blRpbWVzdGFtcFByb3BlcnR5ID0gcHJvcGVydHlOYW1lID09PSAnZmlsZS5tdGltZScgfHwgcHJvcGVydHlOYW1lID09PSAnZmlsZS5jdGltZScgfHxcclxuXHRcdFx0cHJvcGVydHlOYW1lID09PSAnbW9kaWZpZWQgdGltZScgfHwgcHJvcGVydHlOYW1lID09PSAnY3JlYXRlZCB0aW1lJztcclxuXHJcblx0XHRpZiAoaXNLbm93blRpbWVzdGFtcFByb3BlcnR5KSB7XHJcblx0XHRcdGNvbnN0IHRpbWVzdGFtcFdyYXBwZXIgPSBtZXRhQ29udGVudC5jcmVhdGVTcGFuKCk7XHJcblx0XHRcdHRpbWVzdGFtcFdyYXBwZXIuYXBwZW5kVGV4dChyZXNvbHZlZFZhbHVlKTtcclxuXHRcdH0gZWxzZSBpZiAoKHByb3BlcnR5TmFtZSA9PT0gJ3RhZ3MnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ25vdGUudGFncycpICYmIGNhcmQueWFtbFRhZ3MubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBZQU1MIHRhZ3Mgb25seVxyXG5cdFx0XHRjb25zdCB0YWdzV3JhcHBlciA9IG1ldGFDb250ZW50LmNyZWF0ZURpdigndGFncy13cmFwcGVyJyk7XHJcblx0XHRcdGNvbnN0IHRhZ1N0eWxlID0gZ2V0VGFnU3R5bGUoKTtcclxuXHRcdFx0aWYgKHRhZ1N0eWxlICE9PSAncGxhaW4nKSB7XHJcblx0XHRcdFx0dGFnc1dyYXBwZXIuYWRkQ2xhc3MoYHRhZy1zdHlsZS0ke3RhZ1N0eWxlfWApO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRjYXJkLnlhbWxUYWdzLmZvckVhY2godGFnID0+IHtcclxuXHRcdFx0XHRjb25zdCB0YWdFbCA9IHRhZ3NXcmFwcGVyLmNyZWF0ZUVsKCdhJywge1xyXG5cdFx0XHRcdFx0Y2xzOiAndGFnJyxcclxuXHRcdFx0XHRcdHRleHQ6IHNob3dUYWdIYXNoUHJlZml4KCkgPyBgIyR7dGFnfWAgOiB0YWcsXHJcblx0XHRcdFx0XHRocmVmOiAnIydcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHR0YWdFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRjb25zdCBzZWFyY2hQbHVnaW4gPSAodGhpcy5hcHAgYXMgeyBpbnRlcm5hbFBsdWdpbnM/OiB7IHBsdWdpbnM/OiBSZWNvcmQ8c3RyaW5nLCB7IGluc3RhbmNlPzogeyBvcGVuR2xvYmFsU2VhcmNoPzogKHF1ZXJ5OiBzdHJpbmcpID0+IHZvaWQgfSB9PiB9IH0pLmludGVybmFsUGx1Z2lucz8ucGx1Z2lucz8uW1wiZ2xvYmFsLXNlYXJjaFwiXTtcclxuXHRcdFx0XHRcdGlmIChzZWFyY2hQbHVnaW4/Lmluc3RhbmNlPy5vcGVuR2xvYmFsU2VhcmNoKSB7XHJcblx0XHRcdFx0XHRcdHNlYXJjaFBsdWdpbi5pbnN0YW5jZS5vcGVuR2xvYmFsU2VhcmNoKFwidGFnOlwiICsgdGFnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2UgaWYgKChwcm9wZXJ0eU5hbWUgPT09ICdmaWxlLnRhZ3MnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ2ZpbGUgdGFncycpICYmIGNhcmQudGFncy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdC8vIHRhZ3MgaW4gWUFNTCArIG5vdGUgYm9keVxyXG5cdFx0XHRjb25zdCB0YWdzV3JhcHBlciA9IG1ldGFDb250ZW50LmNyZWF0ZURpdigndGFncy13cmFwcGVyJyk7XHJcblx0XHRcdGNvbnN0IHRhZ1N0eWxlID0gZ2V0VGFnU3R5bGUoKTtcclxuXHRcdFx0aWYgKHRhZ1N0eWxlICE9PSAncGxhaW4nKSB7XHJcblx0XHRcdFx0dGFnc1dyYXBwZXIuYWRkQ2xhc3MoYHRhZy1zdHlsZS0ke3RhZ1N0eWxlfWApO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRjYXJkLnRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHRhZ0VsID0gdGFnc1dyYXBwZXIuY3JlYXRlRWwoJ2EnLCB7XHJcblx0XHRcdFx0XHRjbHM6ICd0YWcnLFxyXG5cdFx0XHRcdFx0dGV4dDogc2hvd1RhZ0hhc2hQcmVmaXgoKSA/IGAjJHt0YWd9YCA6IHRhZyxcclxuXHRcdFx0XHRcdGhyZWY6ICcjJ1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdHRhZ0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGNvbnN0IHNlYXJjaFBsdWdpbiA9ICh0aGlzLmFwcCBhcyB7IGludGVybmFsUGx1Z2lucz86IHsgcGx1Z2lucz86IFJlY29yZDxzdHJpbmcsIHsgaW5zdGFuY2U/OiB7IG9wZW5HbG9iYWxTZWFyY2g/OiAocXVlcnk6IHN0cmluZykgPT4gdm9pZCB9IH0+IH0gfSkuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy5bXCJnbG9iYWwtc2VhcmNoXCJdO1xyXG5cdFx0XHRcdFx0aWYgKHNlYXJjaFBsdWdpbj8uaW5zdGFuY2U/Lm9wZW5HbG9iYWxTZWFyY2gpIHtcclxuXHRcdFx0XHRcdFx0c2VhcmNoUGx1Z2luLmluc3RhbmNlLm9wZW5HbG9iYWxTZWFyY2goXCJ0YWc6XCIgKyB0YWcpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYSBjaGVja2JveCBwcm9wZXJ0eVxyXG5cdFx0XHQvLyBHdWFyZDogZW5zdXJlIGFwcCBhbmQgbWV0YWRhdGFDYWNoZSBleGlzdFxyXG5cdFx0XHRpZiAoIXRoaXMuYXBwIHx8ICF0aGlzLmFwcC5tZXRhZGF0YUNhY2hlKSB7XHJcblx0XHRcdFx0Ly8gRmFsbGJhY2sgdG8gcmVndWxhciBwcm9wZXJ0eSByZW5kZXJpbmdcclxuXHRcdFx0XHRjb25zdCB0ZXh0V3JhcHBlciA9IG1ldGFDb250ZW50LmNyZWF0ZURpdigndGV4dC13cmFwcGVyJyk7XHJcblx0XHRcdFx0dGhpcy5yZW5kZXJQcm9wZXJ0eVZhbHVlV2l0aExpbmtzKHRleHRXcmFwcGVyLCByZXNvbHZlZFZhbHVlLCBjYXJkLnBhdGgsIHByb3BlcnR5TmFtZSk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBUcnkgdG8gZ2V0IHByb3BlcnR5IGluZm8gLSB3cmFwIGluIHRyeS1jYXRjaCBhcyBnZXRBbGxQcm9wZXJ0eUluZm9zIG1pZ2h0IGZhaWxcclxuXHRcdFx0Ly8gVGhpcyBpcyBvcHRpb25hbCAtIHdlIGNhbiBkZXRlY3QgY2hlY2tib3hlcyBmcm9tIGVudHJ5IHZhbHVlIGFsb25lXHJcblx0XHRcdGxldCBwcm9wSW5mbzogeyB3aWRnZXQ/OiBzdHJpbmcgfSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBtZXRhZGF0YUNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZSBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG5cdFx0XHRcdGNvbnN0IGdldEFsbFByb3BlcnR5SW5mb3MgPSBtZXRhZGF0YUNhY2hlLmdldEFsbFByb3BlcnR5SW5mb3MgYXMgKCgpID0+IFJlY29yZDxzdHJpbmcsIHsgd2lkZ2V0Pzogc3RyaW5nIH0+KSB8IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRpZiAodHlwZW9mIGdldEFsbFByb3BlcnR5SW5mb3MgPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHByb3BlcnR5SW5mb3MgPSBnZXRBbGxQcm9wZXJ0eUluZm9zKCkgYXMgUmVjb3JkPHN0cmluZywgeyB3aWRnZXQ/OiBzdHJpbmcgfT47XHJcblx0XHRcdFx0XHRwcm9wSW5mbyA9IHByb3BlcnR5SW5mb3NbcHJvcGVydHlOYW1lLnRvTG93ZXJDYXNlKCldO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0Ly8gU2lsZW50bHkgZmFpbCAtIGdldEFsbFByb3BlcnR5SW5mb3MgbWF5IG5vdCBiZSBhdmFpbGFibGUgb3IgbWF5IGZhaWxcclxuXHRcdFx0XHQvLyBXZSBjYW4gc3RpbGwgZGV0ZWN0IGNoZWNrYm94ZXMgZnJvbSBlbnRyeSB2YWx1ZVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBUcnkgdG8gZ2V0IHZhbHVlIGZyb20gZW50cnkgdG8gY2hlY2sgaWYgaXQncyBib29sZWFuXHJcblx0XHRcdC8vIEd1YXJkOiBlbnN1cmUgZW50cnkgZXhpc3RzIGFuZCBoYXMgZ2V0VmFsdWUgbWV0aG9kXHJcblx0XHRcdGxldCBlbnRyeVZhbHVlOiB7IGRhdGE/OiB1bmtub3duIH0gfCBudWxsID0gbnVsbDtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRpZiAoZW50cnkgJiYgdHlwZW9mIGVudHJ5LmdldFZhbHVlID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRlbnRyeVZhbHVlID0gZW50cnkuZ2V0VmFsdWUocHJvcGVydHlOYW1lIGFzIGBub3RlLiR7c3RyaW5nfWAgfCBgZm9ybXVsYS4ke3N0cmluZ31gIHwgYGZpbGUuJHtzdHJpbmd9YCkgYXMgeyBkYXRhPzogdW5rbm93biB9IHwgbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdC8vIFNpbGVudGx5IGZhaWwgLSBlbnRyeSBtaWdodCBub3QgaGF2ZSB0aGlzIHByb3BlcnR5XHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc3QgaXNDaGVja2JveCA9IHByb3BJbmZvPy53aWRnZXQgPT09ICdjaGVja2JveCcgfHwgXHJcblx0XHRcdFx0KGVudHJ5VmFsdWUgJiYgJ2RhdGEnIGluIGVudHJ5VmFsdWUgJiYgdHlwZW9mIGVudHJ5VmFsdWUuZGF0YSA9PT0gJ2Jvb2xlYW4nKTtcclxuXHJcblx0XHRcdGlmIChpc0NoZWNrYm94ICYmIG9uUHJvcGVydHlUb2dnbGUpIHtcclxuXHRcdFx0XHQvLyBSZW5kZXIgYXMgbmF0aXZlIE9ic2lkaWFuIGNoZWNrYm94IC0gc2ltcGxlIGlucHV0IGNoZWNrYm94XHJcblx0XHRcdFx0Y29uc3QgY2hlY2tib3ggPSBtZXRhQ29udGVudC5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdjaGVja2JveCcgfSk7XHJcblx0XHRcdFx0Y2hlY2tib3guY2hlY2tlZCA9IGVudHJ5VmFsdWUgJiYgJ2RhdGEnIGluIGVudHJ5VmFsdWUgPyBCb29sZWFuKGVudHJ5VmFsdWUuZGF0YSkgOiBmYWxzZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBVc2UgdGhlIHByb3BlcnR5IGxhYmVsICh3aGljaCB1c2VzIGdldERpc3BsYXlOYW1lKSBpbnN0ZWFkIG9mIHJhdyBwcm9wZXJ0eSBuYW1lXHJcblx0XHRcdFx0bWV0YUNvbnRlbnQuY3JlYXRlU3Bhbih7IHRleHQ6IHByb3BlcnR5TGFiZWwgfSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRjb25zdCBjaGVja2VkID0gY2hlY2tib3guY2hlY2tlZDtcclxuXHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHQvLyBTdHJpcCBcIm5vdGUuXCIgcHJlZml4IGJlZm9yZSB0b2dnbGluZ1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNsZWFuUHJvcGVydHkgPSBwcm9wZXJ0eU5hbWUuc3RhcnRzV2l0aCgnbm90ZS4nKSA/IHByb3BlcnR5TmFtZS5zdWJzdHJpbmcoNSkgOiBwcm9wZXJ0eU5hbWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgb25Qcm9wZXJ0eVRvZ2dsZShjYXJkLnBhdGgsIGNsZWFuUHJvcGVydHksIGNoZWNrZWQpO1xyXG5cdFx0XHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBSZXZlcnQgY2hlY2tib3ggb24gZXJyb3JcclxuXHRcdFx0XHRcdFx0XHRjaGVja2JveC5jaGVja2VkID0gIWNoZWNrZWQ7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Y2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBHZW5lcmljIHByb3BlcnR5IC0gcGFyc2UgYW5kIHJlbmRlciBsaW5rc1xyXG5cdFx0XHRcdGNvbnN0IHRleHRXcmFwcGVyID0gbWV0YUNvbnRlbnQuY3JlYXRlRGl2KCd0ZXh0LXdyYXBwZXInKTtcclxuXHRcdFx0XHR0aGlzLnJlbmRlclByb3BlcnR5VmFsdWVXaXRoTGlua3ModGV4dFdyYXBwZXIsIHJlc29sdmVkVmFsdWUsIGNhcmQucGF0aCwgcHJvcGVydHlOYW1lKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlbW92ZSBtZXRhQ29udGVudCB3cmFwcGVyIGlmIGl0IGVuZGVkIHVwIGVtcHR5XHJcblx0XHRpZiAoIW1ldGFDb250ZW50LnRleHRDb250ZW50IHx8IG1ldGFDb250ZW50LnRleHRDb250ZW50LnRyaW0oKS5sZW5ndGggPT09IDApIHtcclxuXHRcdFx0bWV0YUNvbnRlbnQucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZW5kZXJzIHByb3BlcnR5IHZhbHVlIHdpdGggY2xpY2thYmxlIGxpbmtzXHJcblx0ICogRGV0ZWN0cyB3aWtpbGlua3MgW1suLi5dXSwgbWFya2Rvd24gbGlua3MgWy4uLl0oLi4uKSwgYW5kIFVSTHNcclxuXHQgKiBGb3IgaW1hZ2UgcHJvcGVydGllcywgYWxzbyBtYWtlcyBmaWxlIHBhdGhzIGNsaWNrYWJsZSAobGlrZSBPYnNpZGlhbiBkb2VzKVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgcmVuZGVyUHJvcGVydHlWYWx1ZVdpdGhMaW5rcyhjb250YWluZXI6IEhUTUxFbGVtZW50LCB2YWx1ZTogc3RyaW5nIHwgbnVsbCwgc291cmNlUGF0aDogc3RyaW5nLCBwcm9wZXJ0eU5hbWU/OiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdGlmICghdmFsdWUpIHtcclxuXHRcdFx0Y29udGFpbmVyLmFwcGVuZFRleHQoZ2V0RW1wdHlWYWx1ZU1hcmtlcigpKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHRyaW1tZWRWYWx1ZSA9IHZhbHVlLnRyaW0oKTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgaWYgZW50aXJlIHZhbHVlIGlzIGEgVVJMIChodHRwL2h0dHBzKSAtIG1ha2UgaXQgY2xpY2thYmxlXHJcblx0XHRpZiAoKHRyaW1tZWRWYWx1ZS5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgdHJpbW1lZFZhbHVlLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpICYmICF0cmltbWVkVmFsdWUuaW5jbHVkZXMoJyAnKSkge1xyXG5cdFx0XHRjb25zdCBsaW5rRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2EnLCB7XHJcblx0XHRcdFx0Y2xzOiAnZXh0ZXJuYWwtbGluaycsXHJcblx0XHRcdFx0aHJlZjogdHJpbW1lZFZhbHVlXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRsaW5rRWwudGV4dENvbnRlbnQgPSB0cmltbWVkVmFsdWU7XHJcblx0XHRcdGxpbmtFbC5zZXRBdHRyKCd0YXJnZXQnLCAnX2JsYW5rJyk7XHJcblx0XHRcdGxpbmtFbC5zZXRBdHRyKCdyZWwnLCAnbm9vcGVuZXInKTtcclxuXHRcdFx0bGlua0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBGb3IgaW1hZ2UgcHJvcGVydGllcywgbWFrZSBmaWxlIHBhdGhzIGNsaWNrYWJsZSAobGlrZSBPYnNpZGlhbiBkb2VzIGluIHByb3BlcnR5IGVkaXRvcilcclxuXHRcdGNvbnN0IGlzSW1hZ2VQcm9wZXJ0eSA9IHByb3BlcnR5TmFtZSAmJiAoXHJcblx0XHRcdHByb3BlcnR5TmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdpbWFnZScpIHx8IFxyXG5cdFx0XHRwcm9wZXJ0eU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2NvdmVyJyB8fFxyXG5cdFx0XHRwcm9wZXJ0eU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RodW1ibmFpbCdcclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdGlmIChpc0ltYWdlUHJvcGVydHkgJiYgIXRyaW1tZWRWYWx1ZS5pbmNsdWRlcygnICcpICYmIFxyXG5cdFx0XHQhdHJpbW1lZFZhbHVlLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSAmJiBcclxuXHRcdFx0IXRyaW1tZWRWYWx1ZS5zdGFydHNXaXRoKCdodHRwczovLycpICYmXHJcblx0XHRcdCh0cmltbWVkVmFsdWUuaW5jbHVkZXMoJy8nKSB8fCB0cmltbWVkVmFsdWUuaW5jbHVkZXMoJ1xcXFwnKSB8fCBcclxuXHRcdFx0IHRyaW1tZWRWYWx1ZS5tYXRjaCgvXFwuKHBuZ3xqcGd8anBlZ3xnaWZ8c3ZnfHdlYnB8bXA0fG1vdnxhdmkpJC9pKSkpIHtcclxuXHRcdFx0Ly8gTWFrZSBpdCBjbGlja2FibGUgYXMgYW4gaW50ZXJuYWwgbGluayAobGlrZSBPYnNpZGlhbiBkb2VzIGZvciBpbWFnZSBwcm9wZXJ0aWVzKVxyXG5cdFx0XHRjb25zdCBsaW5rRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2EnLCB7XHJcblx0XHRcdFx0Y2xzOiAnaW50ZXJuYWwtbGluaycsXHJcblx0XHRcdFx0aHJlZjogdHJpbW1lZFZhbHVlXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRsaW5rRWwudGV4dENvbnRlbnQgPSB0cmltbWVkVmFsdWU7XHJcblx0XHRcdGxpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0Y29uc3QgbmV3TGVhZiA9IGUubWV0YUtleSB8fCBlLmN0cmxLZXk7XHJcblx0XHRcdFx0dm9pZCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHRyaW1tZWRWYWx1ZSwgc291cmNlUGF0aCwgbmV3TGVhZik7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFBhcnNlIGZvciB3aWtpbGlua3MgW1suLi5dXSBhbmQgbWFya2Rvd24gbGlua3MgWy4uLl0oLi4uKVxyXG5cdFx0Y29uc3Qgd2lraWxpbmtSZWdleCA9IC9cXFtcXFsoW15cXF1dKylcXF1cXF0vZztcclxuXHRcdGNvbnN0IG1hcmtkb3duTGlua1JlZ2V4ID0gL1xcWyhbXlxcXV0rKVxcXVxcKChbXildKylcXCkvZztcclxuXHRcdFxyXG5cdFx0Y29uc3QgbWF0Y2hlczogQXJyYXk8eyBpbmRleDogbnVtYmVyOyB0eXBlOiAnd2lraWxpbmsnIHwgJ21hcmtkb3duJzsgbWF0Y2g6IFJlZ0V4cE1hdGNoQXJyYXkgfT4gPSBbXTtcclxuXHRcdFxyXG5cdFx0Ly8gRmluZCB3aWtpbGlua3NcclxuXHRcdGZvciAoY29uc3QgbSBvZiB2YWx1ZS5tYXRjaEFsbCh3aWtpbGlua1JlZ2V4KSkge1xyXG5cdFx0XHRpZiAobS5pbmRleCAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0bWF0Y2hlcy5wdXNoKHsgaW5kZXg6IG0uaW5kZXgsIHR5cGU6ICd3aWtpbGluaycsIG1hdGNoOiBtIH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEZpbmQgbWFya2Rvd24gbGlua3NcclxuXHRcdGZvciAoY29uc3QgbSBvZiB2YWx1ZS5tYXRjaEFsbChtYXJrZG93bkxpbmtSZWdleCkpIHtcclxuXHRcdFx0aWYgKG0uaW5kZXggIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdG1hdGNoZXMucHVzaCh7IGluZGV4OiBtLmluZGV4LCB0eXBlOiAnbWFya2Rvd24nLCBtYXRjaDogbSB9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBTb3J0IGJ5IGluZGV4XHJcblx0XHRtYXRjaGVzLnNvcnQoKGEsIGIpID0+IGEuaW5kZXggLSBiLmluZGV4KTtcclxuXHRcdFxyXG5cdFx0bGV0IGxhc3RJbmRleCA9IDA7XHJcblx0XHRcclxuXHRcdC8vIFJlbmRlciB0ZXh0IGFuZCBsaW5rc1xyXG5cdFx0Zm9yIChjb25zdCB7IGluZGV4LCB0eXBlLCBtYXRjaCB9IG9mIG1hdGNoZXMpIHtcclxuXHRcdFx0Ly8gQWRkIHRleHQgYmVmb3JlIHRoZSBsaW5rXHJcblx0XHRcdGlmIChpbmRleCA+IGxhc3RJbmRleCkge1xyXG5cdFx0XHRcdGNvbnRhaW5lci5hcHBlbmRUZXh0KHZhbHVlLnN1YnN0cmluZyhsYXN0SW5kZXgsIGluZGV4KSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGlmICh0eXBlID09PSAnd2lraWxpbmsnKSB7XHJcblx0XHRcdFx0Y29uc3QgbGlua0NvbnRlbnQgPSBtYXRjaFsxXTtcclxuXHRcdFx0XHRjb25zdCBwYXJ0cyA9IGxpbmtDb250ZW50LnNwbGl0KCd8Jyk7XHJcblx0XHRcdFx0Y29uc3QgbGlua1BhdGggPSBwYXJ0c1swXS50cmltKCk7XHJcblx0XHRcdFx0Y29uc3QgZGlzcGxheVRleHQgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHNbMV0udHJpbSgpIDogbGlua1BhdGg7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Y29uc3QgbGlua0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdhJywge1xyXG5cdFx0XHRcdFx0Y2xzOiAnaW50ZXJuYWwtbGluaycsXHJcblx0XHRcdFx0XHRocmVmOiBsaW5rUGF0aFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGxpbmtFbC50ZXh0Q29udGVudCA9IGRpc3BsYXlUZXh0O1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGxpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0Y29uc3QgbmV3TGVhZiA9IGUubWV0YUtleSB8fCBlLmN0cmxLZXk7XHJcblx0XHRcdFx0XHR2b2lkIHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQobGlua1BhdGgsIHNvdXJjZVBhdGgsIG5ld0xlYWYpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09ICdtYXJrZG93bicpIHtcclxuXHRcdFx0XHRjb25zdCBsaW5rVGV4dCA9IG1hdGNoWzFdO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmtVcmwgPSBtYXRjaFsyXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAobGlua1VybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgbGlua1VybC5zdGFydHNXaXRoKCdodHRwczovLycpKSB7XHJcblx0XHRcdFx0XHQvLyBFeHRlcm5hbCBsaW5rXHJcblx0XHRcdFx0XHRjb25zdCBsaW5rRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2EnLCB7XHJcblx0XHRcdFx0XHRcdGNsczogJ2V4dGVybmFsLWxpbmsnLFxyXG5cdFx0XHRcdFx0XHRocmVmOiBsaW5rVXJsXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdGxpbmtFbC50ZXh0Q29udGVudCA9IGxpbmtUZXh0O1xyXG5cdFx0XHRcdFx0bGlua0VsLnNldEF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKTtcclxuXHRcdFx0XHRcdGxpbmtFbC5zZXRBdHRyKCdyZWwnLCAnbm9vcGVuZXInKTtcclxuXHRcdFx0XHRcdGxpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gSW50ZXJuYWwgbGluayAoZmlsZSBwYXRoIG9yIHdpa2lsaW5rIGluIG1hcmtkb3duIGZvcm1hdClcclxuXHRcdFx0XHRcdGNvbnN0IGxpbmtFbCA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYScsIHtcclxuXHRcdFx0XHRcdFx0Y2xzOiAnaW50ZXJuYWwtbGluaycsXHJcblx0XHRcdFx0XHRcdGhyZWY6IGxpbmtVcmxcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0bGlua0VsLnRleHRDb250ZW50ID0gbGlua1RleHQ7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGxpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbmV3TGVhZiA9IGUubWV0YUtleSB8fCBlLmN0cmxLZXk7XHJcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChsaW5rVXJsLCBzb3VyY2VQYXRoLCBuZXdMZWFmKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0bGFzdEluZGV4ID0gaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEFkZCByZW1haW5pbmcgdGV4dFxyXG5cdFx0aWYgKGxhc3RJbmRleCA8IHZhbHVlLmxlbmd0aCkge1xyXG5cdFx0XHRjb250YWluZXIuYXBwZW5kVGV4dCh2YWx1ZS5zdWJzdHJpbmcobGFzdEluZGV4KSk7XHJcblx0XHR9IGVsc2UgaWYgKG1hdGNoZXMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdC8vIE5vIGxpbmtzIGZvdW5kLCBqdXN0IGFkZCB0aGUgdGV4dCBhcyBwbGFpbiB0ZXh0XHJcblx0XHRcdGNvbnRhaW5lci5hcHBlbmRUZXh0KHZhbHVlKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXHJcbiAqIEJ1bGsgT3BlcmF0aW9ucyBUb29sYmFyXHJcbiAqIFRvb2xiYXIgdGhhdCBhcHBlYXJzIHdoZW4gaXRlbXMgYXJlIHNlbGVjdGVkXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgdHlwZSBCYXNlc0NNU1BsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHR5cGUgeyBDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9kYXRhLXRyYW5zZm9ybSc7XHJcbmltcG9ydCB7IFRvb2xiYXJBY3Rpb25zIH0gZnJvbSAnLi4vdXRpbHMvdG9vbGJhci1hY3Rpb25zJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCdWxrVG9vbGJhciB7XHJcblx0cHJpdmF0ZSB0b29sYmFyRWw6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBjb3VudEVsOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgc2VsZWN0QWxsQ2FsbGJhY2s/OiAoKSA9PiB2b2lkO1xyXG5cdHByaXZhdGUgcmVzaXplT2JzZXJ2ZXI6IFJlc2l6ZU9ic2VydmVyIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBzZXR0aW5ncz86IENNU1NldHRpbmdzO1xyXG5cdHByaXZhdGUgYWN0aW9uczogVG9vbGJhckFjdGlvbnM7XHJcblx0cHJpdmF0ZSB0aW1lb3V0SWRzOiBudW1iZXJbXSA9IFtdO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByaXZhdGUgYXBwOiBBcHAsXHJcblx0XHRwcml2YXRlIHBsdWdpbjogQmFzZXNDTVNQbHVnaW4sXHJcblx0XHRwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0XHRwcml2YXRlIGdldFNlbGVjdGVkRmlsZXM6ICgpID0+IHN0cmluZ1tdLFxyXG5cdFx0cHJpdmF0ZSBjbGVhclNlbGVjdGlvbjogKCkgPT4gdm9pZCxcclxuXHRcdHByaXZhdGUgcmVmcmVzaFZpZXc6ICgpID0+IHZvaWQsXHJcblx0XHRzZWxlY3RBbGxDYWxsYmFjaz86ICgpID0+IHZvaWQsXHJcblx0XHRzZXR0aW5ncz86IENNU1NldHRpbmdzXHJcblx0KSB7XHJcblx0XHR0aGlzLnNlbGVjdEFsbENhbGxiYWNrID0gc2VsZWN0QWxsQ2FsbGJhY2s7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcblx0XHR0aGlzLmFjdGlvbnMgPSBuZXcgVG9vbGJhckFjdGlvbnMoXHJcblx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHR0aGlzLnBsdWdpbixcclxuXHRcdFx0dGhpcy5nZXRTZWxlY3RlZEZpbGVzLFxyXG5cdFx0XHR0aGlzLmNsZWFyU2VsZWN0aW9uLFxyXG5cdFx0XHR0aGlzLnJlZnJlc2hWaWV3LFxyXG5cdFx0XHQoKSA9PiB0aGlzLnNob3coKVxyXG5cdFx0KTtcclxuXHRcdHRoaXMuY3JlYXRlVG9vbGJhcigpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIHNldHRpbmdzIChjYWxsZWQgd2hlbiB2aWV3IHNldHRpbmdzIGNoYW5nZSlcclxuXHQgKi9cclxuXHR1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogQ01TU2V0dGluZ3MpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCB0b29sYmFyIGFjdGlvbnMgKGZvciB1c2UgaW4gY29udGV4dCBtZW51cylcclxuXHQgKi9cclxuXHRnZXRBY3Rpb25zKCk6IFRvb2xiYXJBY3Rpb25zIHtcclxuXHRcdHJldHVybiB0aGlzLmFjdGlvbnM7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGNyZWF0ZVRvb2xiYXIoKTogdm9pZCB7XHJcblx0XHQvLyBDcmVhdGUgdG9vbGJhciBlbGVtZW50IG1hdGNoaW5nIEJhc2VzIHN0cnVjdHVyZVxyXG5cdFx0dGhpcy50b29sYmFyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRoaXMudG9vbGJhckVsLmNsYXNzTmFtZSA9ICdiYXNlcy10b29sYmFyIGJhc2VzLWNtcy1idWxrLXRvb2xiYXIgYmFzZXMtY21zLWJ1bGstdG9vbGJhci1oaWRkZW4nO1xyXG5cdFx0Ly8gU3RvcmUgcmVmZXJlbmNlIHRvIHRoaXMgaW5zdGFuY2Ugb24gdGhlIGVsZW1lbnQgZm9yIGNsZWFudXAgY2hlY2tzXHJcblx0XHQodGhpcy50b29sYmFyRWwgYXMgdW5rbm93biBhcyB7IF9fYnVsa1Rvb2xiYXJJbnN0YW5jZT86IEJ1bGtUb29sYmFyIH0pLl9fYnVsa1Rvb2xiYXJJbnN0YW5jZSA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIHRoZSB0b29sYmFyIGNvbnRlbnRcclxuXHRcdHRoaXMuY3JlYXRlVG9vbGJhckNvbnRlbnQoKTtcclxuXHJcblx0XHQvLyBUcnkgdG8gZmluZCBhbmQgcG9zaXRpb24gdGhlIHRvb2xiYXIgLSB1c2UgYSBzbWFsbCBkZWxheSB0byBlbnN1cmUgRE9NIGlzIHJlYWR5XHJcblx0XHR0aGlzLnBvc2l0aW9uVG9vbGJhcigpO1xyXG5cdFx0XHJcblx0XHQvLyBBbHNvIHRyeSBwb3NpdGlvbmluZyBhZnRlciBhIHNob3J0IGRlbGF5IGluIGNhc2UgRE9NIGlzbid0IHJlYWR5IHlldFxyXG5cdFx0Y29uc3QgdGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5wb3NpdGlvblRvb2xiYXIoKSwgMTAwKTtcclxuXHRcdHRoaXMudGltZW91dElkcy5wdXNoKHRpbWVvdXRJZCk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHBvc2l0aW9uVG9vbGJhcigpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy50b29sYmFyRWwpIHJldHVybjtcclxuXHJcblx0XHQvLyBGaW5kIHRoZSBiYXNlcy1oZWFkZXIgLSBpdCBzaG91bGQgYmUgYSBzaWJsaW5nIG9mIG91ciBjb250YWluZXJcclxuXHRcdC8vIFRoZSBzdHJ1Y3R1cmUgc2hvdWxkIGJlOiBiYXNlcy1oZWFkZXIsIHRoZW4gYnVsayB0b29sYmFyLCB0aGVuIGJhc2VzLXZpZXcgYmFzZXMtY21zIGJhc2VzLWNtcy1jb250YWluZXJcclxuXHRcdGxldCBiYXNlc0hlYWRlciA9IHRoaXMuY29udGFpbmVyLmNsb3Nlc3QoJy5iYXNlcy1oZWFkZXInKTtcclxuXHRcdGlmICghYmFzZXNIZWFkZXIpIHtcclxuXHRcdFx0Ly8gVHJ5IGZpbmRpbmcgaXQgaW4gdGhlIHBhcmVudCBoaWVyYXJjaHlcclxuXHRcdFx0bGV0IHBhcmVudCA9IHRoaXMuY29udGFpbmVyLnBhcmVudEVsZW1lbnQ7XHJcblx0XHRcdHdoaWxlIChwYXJlbnQgJiYgIWJhc2VzSGVhZGVyKSB7XHJcblx0XHRcdFx0aWYgKHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2Jhc2VzLWhlYWRlcicpKSB7XHJcblx0XHRcdFx0XHRiYXNlc0hlYWRlciA9IHBhcmVudDtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYgKCFiYXNlc0hlYWRlcikge1xyXG5cdFx0XHQvLyBUcnkgcXVlcnlpbmcgZnJvbSBkb2N1bWVudCAtIGxvb2sgZm9yIG9uZSB0aGF0IGNvbnRhaW5zIG91ciBjb250YWluZXJcclxuXHRcdFx0Y29uc3QgYWxsSGVhZGVycyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhc2VzLWhlYWRlcicpKTtcclxuXHRcdFx0Zm9yIChjb25zdCBoZWFkZXIgb2YgYWxsSGVhZGVycykge1xyXG5cdFx0XHRcdGlmIChoZWFkZXIuY29udGFpbnModGhpcy5jb250YWluZXIpKSB7XHJcblx0XHRcdFx0XHRiYXNlc0hlYWRlciA9IGhlYWRlcjtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBGaW5kIHRoZSB2aWV3LWNvbnRlbnQgY29udGFpbmVyIHRoYXQgc2hvdWxkIGNvbnRhaW4gYm90aCBiYXNlcy1oZWFkZXIgYW5kIG91ciBjb250YWluZXJcclxuXHRcdC8vIFRoZSBzdHJ1Y3R1cmUgc2hvdWxkIGJlOiB2aWV3LWNvbnRlbnQgPiBiYXNlcy1oZWFkZXIgPiBiYXNlcy10b29sYmFyLCB0aGVuIG91ciBidWxrIHRvb2xiYXIsIHRoZW4gYmFzZXMtdmlld1xyXG5cdFx0Y29uc3Qgdmlld0NvbnRlbnQgPSB0aGlzLmNvbnRhaW5lci5jbG9zZXN0KCcudmlldy1jb250ZW50Jyk7XHJcblx0XHRcclxuXHRcdGlmICh2aWV3Q29udGVudCkge1xyXG5cdFx0XHQvLyBQb3NpdGlvbiB0b29sYmFyIGFzIGEgc2libGluZyBvZiBiYXNlcy1oZWFkZXIsIHJpZ2h0IGFmdGVyIGl0LCBiZWZvcmUgYmFzZXMtdmlldyBjb250YWluZXJcclxuXHRcdFx0Ly8gRmluZCB3aGVyZSB0byBpbnNlcnQgLSBzaG91bGQgYmUgYWZ0ZXIgYmFzZXMtaGVhZGVyLCBiZWZvcmUgb3VyIGNvbnRhaW5lclxyXG5cdFx0XHRpZiAodGhpcy50b29sYmFyRWwucGFyZW50RWxlbWVudCAhPT0gdmlld0NvbnRlbnQpIHtcclxuXHRcdFx0XHRpZiAodGhpcy50b29sYmFyRWwucGFyZW50RWxlbWVudCkge1xyXG5cdFx0XHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIEluc2VydCBhZnRlciBiYXNlcy1oZWFkZXIsIGJlZm9yZSB0aGUgYmFzZXMtdmlldyBjb250YWluZXJcclxuXHRcdFx0XHR2aWV3Q29udGVudC5pbnNlcnRCZWZvcmUodGhpcy50b29sYmFyRWwsIHRoaXMuY29udGFpbmVyKTtcclxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLnRvb2xiYXJFbC5uZXh0U2libGluZyAhPT0gdGhpcy5jb250YWluZXIpIHtcclxuXHRcdFx0XHQvLyBSZXBvc2l0aW9uIGlmIGl0J3Mgbm90IHJpZ2h0IGJlZm9yZSB0aGUgY29udGFpbmVyXHJcblx0XHRcdFx0aWYgKHRoaXMudG9vbGJhckVsLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0XHRcdHRoaXMudG9vbGJhckVsLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR2aWV3Q29udGVudC5pbnNlcnRCZWZvcmUodGhpcy50b29sYmFyRWwsIHRoaXMuY29udGFpbmVyKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChiYXNlc0hlYWRlciAmJiBiYXNlc0hlYWRlci5wYXJlbnRFbGVtZW50KSB7XHJcblx0XHRcdC8vIEZhbGxiYWNrOiBpbnNlcnQgYWZ0ZXIgYmFzZXMtaGVhZGVyIGluIGl0cyBwYXJlbnRcclxuXHRcdFx0aWYgKHRoaXMudG9vbGJhckVsLnBhcmVudEVsZW1lbnQgIT09IGJhc2VzSGVhZGVyLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0XHRpZiAodGhpcy50b29sYmFyRWwucGFyZW50RWxlbWVudCkge1xyXG5cdFx0XHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJhc2VzSGVhZGVyLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMudG9vbGJhckVsLCBiYXNlc0hlYWRlci5uZXh0U2libGluZyk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIExhc3QgcmVzb3J0OiBpbnNlcnQgYmVmb3JlIGNvbnRhaW5lclxyXG5cdFx0XHRjb25zdCBwYXJlbnQgPSB0aGlzLmNvbnRhaW5lci5wYXJlbnRFbGVtZW50O1xyXG5cdFx0XHRpZiAocGFyZW50KSB7XHJcblx0XHRcdFx0aWYgKHRoaXMudG9vbGJhckVsLnBhcmVudEVsZW1lbnQgIT09IHBhcmVudCB8fCB0aGlzLnRvb2xiYXJFbC5uZXh0U2libGluZyAhPT0gdGhpcy5jb250YWluZXIpIHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnRvb2xiYXJFbC5wYXJlbnRFbGVtZW50KSB7XHJcblx0XHRcdFx0XHRcdHRoaXMudG9vbGJhckVsLnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0cGFyZW50Lmluc2VydEJlZm9yZSh0aGlzLnRvb2xiYXJFbCwgdGhpcy5jb250YWluZXIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjcmVhdGVUb29sYmFyQ29udGVudCgpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy50b29sYmFyRWwpIHJldHVybjtcclxuXHRcdFxyXG5cdFx0Ly8gTGVmdCBzaWRlIGNvbnRhaW5lciAoU2VsZWN0IGFsbCwgQ2xlYXIgc2VsZWN0aW9uLCBDb3VudClcclxuXHRcdGNvbnN0IGxlZnRDb250YWluZXIgPSB0aGlzLnRvb2xiYXJFbC5jcmVhdGVEaXYoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItbGVmdCcpO1xyXG5cdFx0XHJcblx0XHQvLyBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIEJhc2VzLXN0eWxlIGljb24rdGV4dCBidXR0b25cclxuXHRcdGNvbnN0IGNyZWF0ZUJhc2VzQnV0dG9uID0gKGljb25OYW1lOiBzdHJpbmcsIHRleHQ6IHN0cmluZywgb25DbGljazogKCkgPT4gdm9pZCwgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgaXNEZXN0cnVjdGl2ZSA9IGZhbHNlKTogSFRNTEVsZW1lbnQgPT4ge1xyXG5cdFx0XHRjb25zdCB0b29sYmFySXRlbSA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ2Jhc2VzLXRvb2xiYXItaXRlbScpO1xyXG5cdFx0XHRjb25zdCBidXR0b24gPSB0b29sYmFySXRlbS5jcmVhdGVEaXYoJ3RleHQtaWNvbi1idXR0b24nKTtcclxuXHRcdFx0aWYgKGlzRGVzdHJ1Y3RpdmUpIHtcclxuXHRcdFx0XHRidXR0b24uYWRkQ2xhc3MoJ2Rlc3RydWN0aXZlJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0YnV0dG9uLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3QgaWNvbkVsID0gYnV0dG9uLmNyZWF0ZVNwYW4oJ3RleHQtYnV0dG9uLWljb24nKTtcclxuXHRcdFx0c2V0SWNvbihpY29uRWwsIGljb25OYW1lKTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IHRleHRFbCA9IGJ1dHRvbi5jcmVhdGVTcGFuKCd0ZXh0LWJ1dHRvbi1sYWJlbCcpO1xyXG5cdFx0XHR0ZXh0RWwuc2V0VGV4dCh0ZXh0KTtcclxuXHRcdFx0XHJcblx0XHRcdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2spO1xyXG5cdFx0XHRyZXR1cm4gYnV0dG9uO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBMZWZ0IHNpZGU6IFNlbGVjdCBhbGxcclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93VG9vbGJhclNlbGVjdEFsbCkge1xyXG5cdFx0XHRjcmVhdGVCYXNlc0J1dHRvbignY29weS1jaGVjaycsICdTZWxlY3QgYWxsJywgKCkgPT4gdGhpcy5oYW5kbGVTZWxlY3RBbGwoKSwgbGVmdENvbnRhaW5lcik7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTGVmdCBzaWRlOiBDbGVhclxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyQ2xlYXIpIHtcclxuXHRcdFx0Y3JlYXRlQmFzZXNCdXR0b24oJ3NxdWFyZS14JywgJ0NsZWFyJywgKCkgPT4gdGhpcy5jbGVhclNlbGVjdGlvbigpLCBsZWZ0Q29udGFpbmVyKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBMZWZ0IHNpZGU6IFNlbGVjdGVkIGNvdW50IChub3QgYSBidXR0b24sIGp1c3QgdGV4dClcclxuXHRcdGNvbnN0IGNvdW50SXRlbSA9IGxlZnRDb250YWluZXIuY3JlYXRlRGl2KCdiYXNlcy10b29sYmFyLWl0ZW0gYmFzZXMtY21zLXNlbGVjdGVkLWNvdW50Jyk7XHJcblx0XHR0aGlzLmNvdW50RWwgPSBjb3VudEl0ZW0uY3JlYXRlU3BhbigndGV4dC1idXR0b24tbGFiZWwnKTtcclxuXHRcdHRoaXMuY291bnRFbC5zZXRUZXh0KCcwIHNlbGVjdGVkJyk7XHJcblxyXG5cdFx0Ly8gUmlnaHQgc2lkZSBjb250YWluZXIgKGFsbCBhY3Rpb24gYnV0dG9ucylcclxuXHRcdGNvbnN0IHJpZ2h0Q29udGFpbmVyID0gdGhpcy50b29sYmFyRWwuY3JlYXRlRGl2KCdiYXNlcy1jbXMtYnVsay10b29sYmFyLXJpZ2h0Jyk7XHJcblxyXG5cdFx0Ly8gUmlnaHQgc2lkZTogUHVibGlzaFxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyUHVibGlzaCkge1xyXG5cdFx0XHRjcmVhdGVCYXNlc0J1dHRvbignYm9vay1jaGVjaycsICdQdWJsaXNoJywgKCkgPT4ge1xyXG5cdFx0XHRcdHZvaWQgdGhpcy5hY3Rpb25zLmhhbmRsZVB1Ymxpc2godGhpcy5zZXR0aW5ncyk7XHJcblx0XHRcdH0sIHJpZ2h0Q29udGFpbmVyKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSaWdodCBzaWRlOiBEcmFmdFxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyRHJhZnQpIHtcclxuXHRcdFx0Y3JlYXRlQmFzZXNCdXR0b24oJ2Jvb2stZGFzaGVkJywgJ0RyYWZ0JywgKCkgPT4ge1xyXG5cdFx0XHRcdHZvaWQgdGhpcy5hY3Rpb25zLmhhbmRsZVNldERyYWZ0KHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0XHR9LCByaWdodENvbnRhaW5lcik7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmlnaHQgc2lkZTogVGFnc1xyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyVGFncykge1xyXG5cdFx0XHRjcmVhdGVCYXNlc0J1dHRvbigndGFncycsICdUYWdzJywgKCkgPT4gdGhpcy5hY3Rpb25zLmhhbmRsZU1hbmFnZVRhZ3MoKSwgcmlnaHRDb250YWluZXIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJpZ2h0IHNpZGU6IFNldFxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyU2V0KSB7XHJcblx0XHRcdGNyZWF0ZUJhc2VzQnV0dG9uKCdsaXN0LWNoZWNrJywgJ1NldCcsICgpID0+IHRoaXMuYWN0aW9ucy5oYW5kbGVTZXRQcm9wZXJ0eSgpLCByaWdodENvbnRhaW5lcik7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmlnaHQgc2lkZTogUmVtb3ZlXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1Rvb2xiYXJSZW1vdmUpIHtcclxuXHRcdFx0Y3JlYXRlQmFzZXNCdXR0b24oJ2xpc3QteCcsICdSZW1vdmUnLCAoKSA9PiB0aGlzLmFjdGlvbnMuaGFuZGxlUmVtb3ZlUHJvcGVydHkoKSwgcmlnaHRDb250YWluZXIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJpZ2h0IHNpZGU6IERlbGV0ZVxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dUb29sYmFyRGVsZXRlKSB7XHJcblx0XHRcdGNyZWF0ZUJhc2VzQnV0dG9uKCd0cmFzaC0yJywgJ0RlbGV0ZScsICgpID0+IHtcclxuXHRcdFx0XHR2b2lkIHRoaXMuYWN0aW9ucy5oYW5kbGVEZWxldGUoKTtcclxuXHRcdFx0fSwgcmlnaHRDb250YWluZXIsIHRydWUpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNldCB1cCByZXNwb25zaXZlIGJlaGF2aW9yIC0gZGV0ZWN0IGNvbGxhcHNlZCBzdGF0ZVxyXG5cdFx0dGhpcy5zZXR1cFJlc3BvbnNpdmVCZWhhdmlvcigpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzZXR1cFJlc3BvbnNpdmVCZWhhdmlvcigpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy50b29sYmFyRWwpIHJldHVybjtcclxuXHJcblx0XHQvLyBDaGVjayBpbml0aWFsIHN0YXRlIGFmdGVyIGEgc2hvcnQgZGVsYXkgdG8gZW5zdXJlIHRvb2xiYXIgaXMgcmVuZGVyZWRcclxuXHRcdGNvbnN0IHRpbWVvdXRJZDEgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdHRoaXMudXBkYXRlQ29sbGFwc2VkU3RhdGUoKTtcclxuXHRcdH0sIDEwMCk7XHJcblx0XHR0aGlzLnRpbWVvdXRJZHMucHVzaCh0aW1lb3V0SWQxKTtcclxuXHJcblx0XHQvLyBPYnNlcnZlIHRvb2xiYXIgd2lkdGggY2hhbmdlcyAobW9yZSBhY2N1cmF0ZSB0aGFuIGNvbnRhaW5lcilcclxuXHRcdGlmICh0aGlzLnRvb2xiYXJFbCkge1xyXG5cdFx0XHR0aGlzLnJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLnVwZGF0ZUNvbGxhcHNlZFN0YXRlKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLnJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy50b29sYmFyRWwpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBBbHNvIG9ic2VydmUgY29udGFpbmVyIGFzIGZhbGxiYWNrXHJcblx0XHRjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lcjtcclxuXHRcdGlmIChjb250YWluZXIpIHtcclxuXHRcdFx0Ly8gVXNlIGEgc2VwYXJhdGUgb2JzZXJ2ZXIgZm9yIGNvbnRhaW5lciB0byBjYXRjaCB3aW5kb3cgcmVzaXplXHJcblx0XHRcdGNvbnN0IGNvbnRhaW5lck9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHtcclxuXHRcdFx0XHQvLyBTbWFsbCBkZWxheSB0byBsZXQgdG9vbGJhciByZXNpemUgZmlyc3RcclxuXHRcdFx0XHRjb25zdCB0aW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUNvbGxhcHNlZFN0YXRlKCk7XHJcblx0XHRcdFx0fSwgMTApO1xyXG5cdFx0XHRcdHRoaXMudGltZW91dElkcy5wdXNoKHRpbWVvdXRJZCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRjb250YWluZXJPYnNlcnZlci5vYnNlcnZlKGNvbnRhaW5lcik7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBTdG9yZSBmb3IgY2xlYW51cFxyXG5cdFx0XHQodGhpcyBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyT2JzZXJ2ZXI/OiBSZXNpemVPYnNlcnZlciB9KS5jb250YWluZXJPYnNlcnZlciA9IGNvbnRhaW5lck9ic2VydmVyO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSB1cGRhdGVDb2xsYXBzZWRTdGF0ZSgpOiB2b2lkIHtcclxuXHRcdGlmICghdGhpcy50b29sYmFyRWwpIHJldHVybjtcclxuXHJcblx0XHQvLyBDaGVjayBpZiB0b29sYmFyIGl0c2VsZiBpcyBuYXJyb3cgKGNvbGxhcHNlZClcclxuXHRcdC8vIFVzZSB0aGUgdG9vbGJhcidzIGFjdHVhbCB3aWR0aCwgbm90IHRoZSBjb250YWluZXJcclxuXHRcdGNvbnN0IHRvb2xiYXJXaWR0aCA9IHRoaXMudG9vbGJhckVsLm9mZnNldFdpZHRoO1xyXG5cdFx0Y29uc3QgaXNDb2xsYXBzZWQgPSB0b29sYmFyV2lkdGggPCA2ODA7IC8vIFRocmVzaG9sZCBmb3IgY29sbGFwc2luZ1xyXG5cclxuXHRcdGlmIChpc0NvbGxhcHNlZCkge1xyXG5cdFx0XHR0aGlzLnRvb2xiYXJFbC5hZGRDbGFzcygnY29sbGFwc2VkJyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnRvb2xiYXJFbC5yZW1vdmVDbGFzcygnY29sbGFwc2VkJyk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHR1cGRhdGVDb3VudChjb3VudDogbnVtYmVyKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5jb3VudEVsKSB7XHJcblx0XHRcdHRoaXMuY291bnRFbC5zZXRUZXh0KGAke2NvdW50fSBzZWxlY3RlZGApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBoYW5kbGVTZWxlY3RBbGwoKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy5zZWxlY3RBbGxDYWxsYmFjaykge1xyXG5cdFx0XHR0aGlzLnNlbGVjdEFsbENhbGxiYWNrKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzaG93KCk6IHZvaWQge1xyXG5cdFx0aWYgKCF0aGlzLnRvb2xiYXJFbCkge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1tCYXNlcyBDTVNdIFRvb2xiYXIgZWxlbWVudCBub3QgZm91bmQsIHJlY3JlYXRpbmcuLi4nKTtcclxuXHRcdFx0dGhpcy5jcmVhdGVUb29sYmFyKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICh0aGlzLnRvb2xiYXJFbCkge1xyXG5cdFx0XHQvLyBNYWtlIHN1cmUgaXQncyBwb3NpdGlvbmVkIGNvcnJlY3RseSBmaXJzdFxyXG5cdFx0XHR0aGlzLnBvc2l0aW9uVG9vbGJhcigpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRW5zdXJlIGl0J3MgaW4gdGhlIERPTVxyXG5cdFx0XHRpZiAoIXRoaXMudG9vbGJhckVsLnBhcmVudEVsZW1lbnQpIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ1tCYXNlcyBDTVNdIFRvb2xiYXIgbm90IGluIERPTSwgcmVwb3NpdGlvbmluZy4uLicpO1xyXG5cdFx0XHRcdHRoaXMucG9zaXRpb25Ub29sYmFyKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFNob3cgaXQgd2l0aCBmbGV4IGRpc3BsYXlcclxuXHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItaGlkZGVuJyk7XHJcblx0XHRcdHRoaXMudG9vbGJhckVsLmFkZENsYXNzKCdiYXNlcy1jbXMtYnVsay10b29sYmFyLXZpc2libGUnKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEZvcmNlIHJlZmxvdyB0byBlbnN1cmUgdHJhbnNpdGlvbiB3b3Jrc1xyXG5cdFx0XHR2b2lkIHRoaXMudG9vbGJhckVsLm9mZnNldEhlaWdodDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEFuaW1hdGUgaW4gLSB1c2Ugc2V0VGltZW91dCBpbnN0ZWFkIG9mIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmb3IgbW9yZSByZWxpYWJpbGl0eVxyXG5cdFx0XHRjb25zdCB0aW1lb3V0SWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0aWYgKHRoaXMudG9vbGJhckVsKSB7XHJcblx0XHRcdFx0XHR0aGlzLnRvb2xiYXJFbC5yZW1vdmVDbGFzcygnYmFzZXMtY21zLWJ1bGstdG9vbGJhci1hbmltYXRpbmctb3V0Jyk7XHJcblx0XHRcdFx0XHR0aGlzLnRvb2xiYXJFbC5hZGRDbGFzcygnYmFzZXMtY21zLWJ1bGstdG9vbGJhci1hbmltYXRpbmctaW4nKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIDEwKTtcclxuXHRcdFx0dGhpcy50aW1lb3V0SWRzLnB1c2godGltZW91dElkKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ1tCYXNlcyBDTVNdIEZhaWxlZCB0byBzaG93IHRvb2xiYXIgLSBlbGVtZW50IGlzIG51bGwnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGhpZGUoKTogdm9pZCB7XHJcblx0XHRpZiAodGhpcy50b29sYmFyRWwpIHtcclxuXHRcdFx0Ly8gQW5pbWF0ZSBvdXRcclxuXHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItYW5pbWF0aW5nLWluJyk7XHJcblx0XHRcdHRoaXMudG9vbGJhckVsLmFkZENsYXNzKCdiYXNlcy1jbXMtYnVsay10b29sYmFyLWFuaW1hdGluZy1vdXQnKTtcclxuXHRcdFx0Ly8gV2FpdCBmb3IgdHJhbnNpdGlvbiB0byBjb21wbGV0ZSBiZWZvcmUgaGlkaW5nXHJcblx0XHRcdGNvbnN0IHRpbWVvdXRJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRpZiAodGhpcy50b29sYmFyRWwpIHtcclxuXHRcdFx0XHRcdHRoaXMudG9vbGJhckVsLnJlbW92ZUNsYXNzKCdiYXNlcy1jbXMtYnVsay10b29sYmFyLXZpc2libGUnKTtcclxuXHRcdFx0XHRcdHRoaXMudG9vbGJhckVsLmFkZENsYXNzKCdiYXNlcy1jbXMtYnVsay10b29sYmFyLWhpZGRlbicpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgMjAwKTtcclxuXHRcdFx0dGhpcy50aW1lb3V0SWRzLnB1c2godGltZW91dElkKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cclxuXHQvKipcclxuXHQgKiBSZWNyZWF0ZSB0aGUgdG9vbGJhciB3aXRoIHVwZGF0ZWQgc2V0dGluZ3NcclxuXHQgKiBQcmVzZXJ2ZXMgdmlzaWJpbGl0eSBzdGF0ZSBhbmQgY291bnRcclxuXHQgKi9cclxuXHRyZWNyZWF0ZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHdhc1Zpc2libGUgPSB0aGlzLnRvb2xiYXJFbCAmJiAhdGhpcy50b29sYmFyRWwuaGFzQ2xhc3MoJ2Jhc2VzLWNtcy1idWxrLXRvb2xiYXItaGlkZGVuJyk7XHJcblx0XHRsZXQgY3VycmVudENvdW50ID0gMDtcclxuXHRcdFxyXG5cdFx0Ly8gR2V0IGN1cnJlbnQgY291bnQgYmVmb3JlIGRlc3Ryb3lpbmdcclxuXHRcdGlmICh0aGlzLmNvdW50RWwgJiYgdGhpcy5jb3VudEVsLnRleHRDb250ZW50KSB7XHJcblx0XHRcdGNvbnN0IG1hdGNoID0gdGhpcy5jb3VudEVsLnRleHRDb250ZW50Lm1hdGNoKC9cXGQrLyk7XHJcblx0XHRcdGlmIChtYXRjaCkge1xyXG5cdFx0XHRcdGN1cnJlbnRDb3VudCA9IHBhcnNlSW50KG1hdGNoWzBdLCAxMCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gRGVzdHJveSBleGlzdGluZyB0b29sYmFyXHJcblx0XHR0aGlzLmRlc3Ryb3koKTtcclxuXHRcdFxyXG5cdFx0Ly8gUmVjcmVhdGUgdG9vbGJhclxyXG5cdFx0dGhpcy5jcmVhdGVUb29sYmFyKCk7XHJcblx0XHRcclxuXHRcdC8vIFJlc3RvcmUgdmlzaWJpbGl0eSBhbmQgY291bnQgaWYgaXQgd2FzIHZpc2libGVcclxuXHRcdGlmICh3YXNWaXNpYmxlICYmIHRoaXMudG9vbGJhckVsICYmIGN1cnJlbnRDb3VudCA+IDApIHtcclxuXHRcdFx0dGhpcy51cGRhdGVDb3VudChjdXJyZW50Q291bnQpO1xyXG5cdFx0XHR0aGlzLnNob3coKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGRlc3Ryb3koKTogdm9pZCB7XHJcblx0XHQvLyBDbGVhciBhbGwgdGltZW91dHNcclxuXHRcdHRoaXMudGltZW91dElkcy5mb3JFYWNoKGlkID0+IHdpbmRvdy5jbGVhclRpbWVvdXQoaWQpKTtcclxuXHRcdHRoaXMudGltZW91dElkcyA9IFtdO1xyXG5cdFx0XHJcblx0XHRpZiAodGhpcy5yZXNpemVPYnNlcnZlcikge1xyXG5cdFx0XHR0aGlzLnJlc2l6ZU9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdFx0dGhpcy5yZXNpemVPYnNlcnZlciA9IG51bGw7XHJcblx0XHR9XHJcblx0XHQvLyBDbGVhbiB1cCBjb250YWluZXIgb2JzZXJ2ZXIgaWYgaXQgZXhpc3RzXHJcblx0XHRjb25zdCBjb250YWluZXJPYnNlcnZlciA9ICh0aGlzIGFzIHVua25vd24gYXMgeyBjb250YWluZXJPYnNlcnZlcj86IFJlc2l6ZU9ic2VydmVyIH0pLmNvbnRhaW5lck9ic2VydmVyO1xyXG5cdFx0aWYgKGNvbnRhaW5lck9ic2VydmVyKSB7XHJcblx0XHRcdGNvbnRhaW5lck9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdFx0KHRoaXMgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lck9ic2VydmVyPzogUmVzaXplT2JzZXJ2ZXIgfSkuY29udGFpbmVyT2JzZXJ2ZXIgPSB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy50b29sYmFyRWwpIHtcclxuXHRcdFx0dGhpcy50b29sYmFyRWwucmVtb3ZlKCk7XHJcblx0XHRcdHRoaXMudG9vbGJhckVsID0gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbiIsICIvKipcclxuICogQnVsayBvcGVyYXRpb24gaGFuZGxlcnNcclxuICogVXBkYXRlZCB0byBzdXBwb3J0IE1EWCBmaWxlcyB2aWEgdW5pZmllZCBmcm9udG1hdHRlciBoZWxwZXJcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IGFkZFByb3BlcnRpZXMsIHJlbW92ZVByb3BlcnRpZXMgfSBmcm9tICcuL2Zyb250bWF0dGVyJztcclxuaW1wb3J0IHsgTmV3UHJvcERhdGEgfSBmcm9tICcuL2Zyb250bWF0dGVyJztcclxuaW1wb3J0IHR5cGUgeyBDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9kYXRhLXRyYW5zZm9ybSc7XHJcbmltcG9ydCB7IGdldEZpbGVGcm9udG1hdHRlciwgcHJvY2Vzc0ZpbGVGcm9udE1hdHRlciB9IGZyb20gJy4vZnJvbnRtYXR0ZXItaGVscGVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBCdWxrT3BlcmF0aW9ucyB7XHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCkge31cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IGRyYWZ0IHN0YXR1cyBmb3IgbXVsdGlwbGUgZmlsZXNcclxuXHQgKiBSZXNwZWN0cyBmaWxlbmFtZSBwcmVmaXggbW9kZSBhbmQgcmV2ZXJzZSBsb2dpYyBzZXR0aW5nc1xyXG5cdCAqL1xyXG5cdGFzeW5jIHNldERyYWZ0KGZpbGVzOiBzdHJpbmdbXSwgZHJhZnQ6IGJvb2xlYW4sIHNldHRpbmdzPzogQ01TU2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGF3YWl0IHRoaXMuYmF0Y2hQcm9jZXNzRmlsZXMoZmlsZXMsIGFzeW5jIChmaWxlKSA9PiB7XHJcblx0XHRcdC8vIElmIHNldHRpbmdzIHByb3ZpZGVkLCB1c2UgdGhlIHNhbWUgbG9naWMgYXMgaGFuZGxlUHJvcGVydHlUb2dnbGVcclxuXHRcdFx0aWYgKHNldHRpbmdzKSB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdXNpbmcgZmlsZW5hbWUgcHJlZml4IG1vZGVcclxuXHRcdFx0XHRpZiAoc2V0dGluZ3MuZHJhZnRTdGF0dXNVc2VGaWxlbmFtZVByZWZpeCkge1xyXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHVzZSBmaWxlbmFtZS1iYXNlZCBkZXRlY3Rpb24gd2hlbiB0aGlzIHNldHRpbmcgaXMgZW5hYmxlZFxyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBmaWxlLmJhc2VuYW1lOyAvLyBiYXNlbmFtZSBleGNsdWRlcyBleHRlbnNpb25cclxuXHRcdFx0XHRcdGNvbnN0IHN0YXJ0c1dpdGhVbmRlcnNjb3JlID0gZmlsZU5hbWUuc3RhcnRzV2l0aCgnXycpO1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFBhdGggPSBmaWxlLnBhdGg7XHJcblx0XHRcdFx0XHRjb25zdCBwYXRoUGFydHMgPSBjdXJyZW50UGF0aC5zcGxpdCgnLycpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBBcHBseSByZXZlcnNlIGxvZ2ljIGlmIGVuYWJsZWRcclxuXHRcdFx0XHRcdGxldCB0YXJnZXRWYWx1ZSA9IGRyYWZ0O1xyXG5cdFx0XHRcdFx0aWYgKHNldHRpbmdzLmRyYWZ0U3RhdHVzUmV2ZXJzZSkge1xyXG5cdFx0XHRcdFx0XHR0YXJnZXRWYWx1ZSA9ICFkcmFmdDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gVG9nZ2xlIGJhc2VkIG9uIGRlc2lyZWQgc3RhdGU6IGlmIHRhcmdldFZhbHVlIGlzIHRydWUgKGRyYWZ0KSwgZW5zdXJlIHVuZGVyc2NvcmU7IGlmIGZhbHNlIChwdWJsaXNoZWQpLCByZW1vdmUgaXRcclxuXHRcdFx0XHRcdGlmICh0YXJnZXRWYWx1ZSA9PT0gdHJ1ZSkge1xyXG5cdFx0XHRcdFx0XHQvLyBTZXR0aW5nIHRvIGRyYWZ0IC0gYWRkIHVuZGVyc2NvcmUgaWYgbm90IHByZXNlbnRcclxuXHRcdFx0XHRcdFx0aWYgKCFzdGFydHNXaXRoVW5kZXJzY29yZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld05hbWUgPSBgXyR7ZmlsZU5hbWV9JHtmaWxlLmV4dGVuc2lvbiA/IGAuJHtmaWxlLmV4dGVuc2lvbn1gIDogJyd9YDtcclxuXHRcdFx0XHRcdFx0XHRwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdID0gbmV3TmFtZTtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXdQYXRoID0gcGF0aFBhcnRzLmpvaW4oJy8nKTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBTZXR0aW5nIHRvIHB1Ymxpc2hlZCAtIHJlbW92ZSB1bmRlcnNjb3JlIGlmIHByZXNlbnRcclxuXHRcdFx0XHRcdFx0aWYgKHN0YXJ0c1dpdGhVbmRlcnNjb3JlKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3TmFtZSA9IGZpbGVOYW1lLnN1YnN0cmluZygxKSArIChmaWxlLmV4dGVuc2lvbiA/IGAuJHtmaWxlLmV4dGVuc2lvbn1gIDogJycpO1xyXG5cdFx0XHRcdFx0XHRcdHBhdGhQYXJ0c1twYXRoUGFydHMubGVuZ3RoIC0gMV0gPSBuZXdOYW1lO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld1BhdGggPSBwYXRoUGFydHMuam9pbignLycpO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZmlsZSwgbmV3UGF0aCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gVXNlIHByb3BlcnR5LWJhc2VkIGRldGVjdGlvbiAoZnJvbnRtYXR0ZXIpXHJcblx0XHRcdFx0XHRjb25zdCBjbGVhbkNvbmZpZ1Byb3BlcnR5ID0gc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eSAmJiBzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5LnRyaW0oKVxyXG5cdFx0XHRcdFx0XHQ/IChzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5LnN0YXJ0c1dpdGgoJ25vdGUuJykgXHJcblx0XHRcdFx0XHRcdFx0PyBzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5LnN1YnN0cmluZyg1KSBcclxuXHRcdFx0XHRcdFx0XHQ6IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkpXHJcblx0XHRcdFx0XHRcdDogJ2RyYWZ0JztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gQXBwbHkgcmV2ZXJzZSBsb2dpYyBpZiBlbmFibGVkXHJcblx0XHRcdFx0XHRsZXQgdGFyZ2V0VmFsdWUgPSBkcmFmdDtcclxuXHRcdFx0XHRcdGlmIChzZXR0aW5ncy5kcmFmdFN0YXR1c1JldmVyc2UpIHtcclxuXHRcdFx0XHRcdFx0dGFyZ2V0VmFsdWUgPSAhZHJhZnQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIodGhpcy5hcHAsIGZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xyXG5cdFx0XHRcdFx0XHRmcm9udG1hdHRlcltjbGVhbkNvbmZpZ1Byb3BlcnR5XSA9IHRhcmdldFZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIEZhbGxiYWNrOiB1c2UgZGVmYXVsdCBiZWhhdmlvciAoc2V0IGRyYWZ0IHByb3BlcnR5KVxyXG5cdFx0XHRcdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIodGhpcy5hcHAsIGZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xyXG5cdFx0XHRcdFx0ZnJvbnRtYXR0ZXIuZHJhZnQgPSBkcmFmdDtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IE5vdGljZShgU2V0ICR7ZmlsZXMubGVuZ3RofSBmaWxlJHtmaWxlcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ30gdG8gJHtkcmFmdCA/ICdkcmFmdCcgOiAncHVibGlzaGVkJ31gKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEFkZCB0YWdzIHRvIG11bHRpcGxlIGZpbGVzXHJcblx0ICovXHJcblx0YXN5bmMgYWRkVGFncyhmaWxlczogc3RyaW5nW10sIHRhZ3M6IHN0cmluZ1tdKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBwcm9wcyA9IG5ldyBNYXA8c3RyaW5nLCBOZXdQcm9wRGF0YT4oKTtcclxuXHRcdHByb3BzLnNldCgndGFncycsIHtcclxuXHRcdFx0dHlwZTogJ3RhZ3MnLFxyXG5cdFx0XHRkYXRhOiB0YWdzLFxyXG5cdFx0XHRvdmVyd3JpdGU6IGZhbHNlLFxyXG5cdFx0XHRkZWxpbWl0ZXI6ICcsJyxcclxuXHRcdH0pO1xyXG5cclxuXHRcdGF3YWl0IHRoaXMuYmF0Y2hQcm9jZXNzRmlsZXMoZmlsZXMsIGFzeW5jIChmaWxlKSA9PiB7XHJcblx0XHRcdGF3YWl0IGFkZFByb3BlcnRpZXModGhpcy5hcHAsIGZpbGUsIHByb3BzLCBmYWxzZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgTm90aWNlKGBBZGRlZCB0YWdzIHRvICR7ZmlsZXMubGVuZ3RofSBmaWxlJHtmaWxlcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ31gKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZSB0YWdzIGZyb20gbXVsdGlwbGUgZmlsZXNcclxuXHQgKi9cclxuXHRhc3luYyByZW1vdmVUYWdzKGZpbGVzOiBzdHJpbmdbXSwgdGFnc1RvUmVtb3ZlOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0YXdhaXQgdGhpcy5iYXRjaFByb2Nlc3NGaWxlcyhmaWxlcywgYXN5bmMgKGZpbGUpID0+IHtcclxuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBhd2FpdCBnZXRGaWxlRnJvbnRtYXR0ZXIodGhpcy5hcHAsIGZpbGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGZyb250bWF0dGVyPy50YWdzKSB7XHJcblx0XHRcdFx0Y29uc3QgZm1UYWdzID0gZnJvbnRtYXR0ZXIudGFncyBhcyBzdHJpbmcgfCBzdHJpbmdbXTtcclxuXHRcdFx0XHRjb25zdCBjdXJyZW50VGFncyA9IEFycmF5LmlzQXJyYXkoZm1UYWdzKSBcclxuXHRcdFx0XHRcdD8gZm1UYWdzIFxyXG5cdFx0XHRcdFx0OiBbZm1UYWdzXTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRjb25zdCB1cGRhdGVkVGFncyA9IGN1cnJlbnRUYWdzLmZpbHRlcigodGFnOiBzdHJpbmcpID0+IFxyXG5cdFx0XHRcdFx0IXRhZ3NUb1JlbW92ZS5pbmNsdWRlcyh0YWcpXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0YXdhaXQgcHJvY2Vzc0ZpbGVGcm9udE1hdHRlcih0aGlzLmFwcCwgZmlsZSwgKGZtKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodXBkYXRlZFRhZ3MubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdFx0XHRmbS50YWdzID0gdXBkYXRlZFRhZ3M7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRmbS50YWdzID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgTm90aWNlKGBSZW1vdmVkIHRhZ3MgZnJvbSAke2ZpbGVzLmxlbmd0aH0gZmlsZSR7ZmlsZXMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9YCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXQgYSBwcm9wZXJ0eSB2YWx1ZSBmb3IgbXVsdGlwbGUgZmlsZXNcclxuXHQgKi9cclxuXHRhc3luYyBzZXRQcm9wZXJ0eShmaWxlczogc3RyaW5nW10sIHByb3BlcnR5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duLCBwcm9wZXJ0eVR5cGU6IHN0cmluZyA9ICd0ZXh0Jyk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Ly8gU3RyaXAgXCJub3RlLlwiIHByZWZpeCBpZiBwcmVzZW50IChCYXNlcyB1c2VzIFwibm90ZS5wcm9wZXJ0eVwiIGJ1dCBmcm9udG1hdHRlciB1c2VzIGp1c3QgXCJwcm9wZXJ0eVwiKVxyXG5cdFx0Y29uc3QgY2xlYW5Qcm9wZXJ0eSA9IHByb3BlcnR5LnN0YXJ0c1dpdGgoJ25vdGUuJykgPyBwcm9wZXJ0eS5zdWJzdHJpbmcoNSkgOiBwcm9wZXJ0eTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgcHJvcHMgPSBuZXcgTWFwPHN0cmluZywgTmV3UHJvcERhdGE+KCk7XHJcblx0XHRwcm9wcy5zZXQoY2xlYW5Qcm9wZXJ0eSwge1xyXG5cdFx0XHR0eXBlOiBwcm9wZXJ0eVR5cGUsXHJcblx0XHRcdGRhdGE6IHZhbHVlIGFzIHN0cmluZyB8IHN0cmluZ1tdIHwgbnVsbCxcclxuXHRcdFx0b3ZlcndyaXRlOiB0cnVlLFxyXG5cdFx0XHRkZWxpbWl0ZXI6ICcsJyxcclxuXHRcdH0pO1xyXG5cclxuXHRcdGF3YWl0IHRoaXMuYmF0Y2hQcm9jZXNzRmlsZXMoZmlsZXMsIGFzeW5jIChmaWxlKSA9PiB7XHJcblx0XHRcdGF3YWl0IGFkZFByb3BlcnRpZXModGhpcy5hcHAsIGZpbGUsIHByb3BzLCB0cnVlKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBOb3RpY2UoYFNldCAke2NsZWFuUHJvcGVydHl9IG9uICR7ZmlsZXMubGVuZ3RofSBmaWxlJHtmaWxlcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ31gKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJlbW92ZSBhIHByb3BlcnR5IGZyb20gbXVsdGlwbGUgZmlsZXNcclxuXHQgKi9cclxuXHRhc3luYyByZW1vdmVQcm9wZXJ0eShmaWxlczogc3RyaW5nW10sIHByb3BlcnR5OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdC8vIFN0cmlwIFwibm90ZS5cIiBwcmVmaXggaWYgcHJlc2VudFxyXG5cdFx0Y29uc3QgY2xlYW5Qcm9wZXJ0eSA9IHByb3BlcnR5LnN0YXJ0c1dpdGgoJ25vdGUuJykgPyBwcm9wZXJ0eS5zdWJzdHJpbmcoNSkgOiBwcm9wZXJ0eTtcclxuXHRcdFxyXG5cdFx0YXdhaXQgdGhpcy5iYXRjaFByb2Nlc3NGaWxlcyhmaWxlcywgYXN5bmMgKGZpbGUpID0+IHtcclxuXHRcdFx0YXdhaXQgcmVtb3ZlUHJvcGVydGllcyh0aGlzLmFwcCwgZmlsZSwgW2NsZWFuUHJvcGVydHldKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG5ldyBOb3RpY2UoYFJlbW92ZWQgJHtjbGVhblByb3BlcnR5fSBmcm9tICR7ZmlsZXMubGVuZ3RofSBmaWxlJHtmaWxlcy5sZW5ndGggIT09IDEgPyAncycgOiAnJ31gKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEJhdGNoIHByb2Nlc3MgZmlsZXMgd2l0aCBwcm9ncmVzcyBpbmRpY2F0aW9uXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBiYXRjaFByb2Nlc3NGaWxlcyhcclxuXHRcdGZpbGVzOiBzdHJpbmdbXSxcclxuXHRcdHByb2Nlc3NvcjogKGZpbGU6IFRGaWxlKSA9PiBQcm9taXNlPHZvaWQ+XHJcblx0KTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRsZXQgcHJvY2Vzc2VkID0gMDtcclxuXHRcdGNvbnN0IHRvdGFsID0gZmlsZXMubGVuZ3RoO1xyXG5cclxuXHRcdGZvciAoY29uc3QgZmlsZVBhdGggb2YgZmlsZXMpIHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0YXdhaXQgcHJvY2Vzc29yKGZpbGUpO1xyXG5cdFx0XHRcdFx0cHJvY2Vzc2VkKys7XHJcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIHByb2Nlc3NpbmcgJHtmaWxlUGF0aH06YCwgZXJyb3IpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChwcm9jZXNzZWQgPCB0b3RhbCkge1xyXG5cdFx0XHRuZXcgTm90aWNlKGBQcm9jZXNzZWQgJHtwcm9jZXNzZWR9IG9mICR7dG90YWx9IGZpbGVzYCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBGcm9udG1hdHRlciBtYW5pcHVsYXRpb24gdXRpbGl0aWVzXHJcbiAqIFBvcnRlZCBmcm9tIE11bHRpLVByb3BlcnRpZXMgcGx1Z2luXHJcbiAqIFVwZGF0ZWQgdG8gc3VwcG9ydCBNRFggZmlsZXMgdmlhIHVuaWZpZWQgZnJvbnRtYXR0ZXIgaGVscGVyXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgcHJvY2Vzc0ZpbGVGcm9udE1hdHRlciB9IGZyb20gJy4vZnJvbnRtYXR0ZXItaGVscGVyJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTmV3UHJvcERhdGEge1xyXG5cdHR5cGU6IHN0cmluZztcclxuXHRkYXRhOiBzdHJpbmcgfCBzdHJpbmdbXSB8IG51bGw7XHJcblx0b3ZlcndyaXRlOiBib29sZWFuO1xyXG5cdGRlbGltaXRlcjogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogQWRkIHByb3BlcnRpZXMgZnJvbSBhIE1hcCB0byBhIG5vdGUuXHJcbiAqIFdvcmtzIGZvciBib3RoIC5tZCBhbmQgLm1keCBmaWxlcy5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRQcm9wZXJ0aWVzKFxyXG5cdGFwcDogQXBwLFxyXG5cdGZpbGU6IFRGaWxlLFxyXG5cdHByb3BzOiBNYXA8c3RyaW5nLCBOZXdQcm9wRGF0YT4sXHJcblx0b3ZlcndyaXRlOiBib29sZWFuXHJcbik6IFByb21pc2U8dm9pZD4ge1xyXG5cdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIoYXBwLCBmaWxlLCAoZnJvbnRtYXR0ZXIpID0+IHtcclxuXHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHByb3BzKSB7XHJcblx0XHRcdC8vIFRhZ3Mgc2hvdWxkIGFsd2F5cyBiZSBhIExpc3QsIGV2ZW4gaWYgdGhlcmUgaXMganVzdCBvbmUgdGFnLlxyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0a2V5ID09PSAndGFncycgJiZcclxuXHRcdFx0XHQhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGZyb250bWF0dGVyLCAndGFncycpICYmXHJcblx0XHRcdFx0IUFycmF5LmlzQXJyYXkodmFsdWUuZGF0YSlcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0ZnJvbnRtYXR0ZXJba2V5XSA9IFt2YWx1ZS5kYXRhXTtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCFmcm9udG1hdHRlcltrZXldIHx8IG92ZXJ3cml0ZSkge1xyXG5cdFx0XHRcdGZyb250bWF0dGVyW2tleV0gPSB2YWx1ZS5kYXRhO1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDb21wYXJlIHR5cGVzIHRvIHNlZSBpZiB0aGV5IGNhbiBiZSBhcHBlbmRlZC5cclxuXHRcdFx0Y29uc3QgdHlwZTEgPSB2YWx1ZS50eXBlO1xyXG5cdFx0XHRjb25zdCBleGlzdGluZ1ZhbHVlID0gZnJvbnRtYXR0ZXJba2V5XTtcclxuXHRcdFx0Y29uc3QgdHlwZTIgPSBBcnJheS5pc0FycmF5KGV4aXN0aW5nVmFsdWUpID8gJ2xpc3QnIDogdHlwZW9mIGV4aXN0aW5nVmFsdWUgPT09ICdudW1iZXInID8gJ251bWJlcicgOiB0eXBlb2YgZXhpc3RpbmdWYWx1ZSA9PT0gJ2Jvb2xlYW4nID8gJ2NoZWNrYm94JyA6ICd0ZXh0JztcclxuXHJcblx0XHRcdGlmIChjYW5CZUFwcGVuZGVkKHR5cGUxLCB0eXBlMikpIHtcclxuXHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXJba2V5XSA9PT0gdmFsdWUuZGF0YSkgY29udGludWU7IC8vIExlYXZlIGlkZW50aWNhbCB2YWx1ZXMgYWxvbmUuXHJcblx0XHRcdFx0aWYgKCF2YWx1ZS5kYXRhKSBjb250aW51ZTsgLy8gRG8gbm90IG1lcmdlIGVtcHR5IHZhbHVlcy5cclxuXHJcblx0XHRcdFx0Y29uc3QgYXJyID0gbWVyZ2VJbnRvQXJyYXlzKGZyb250bWF0dGVyW2tleV0gYXMgc3RyaW5nIHwgc3RyaW5nW10sIHZhbHVlLmRhdGEpO1xyXG5cdFx0XHRcdGZyb250bWF0dGVyW2tleV0gPSBhcnI7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZnJvbnRtYXR0ZXJba2V5XSA9IHZhbHVlLmRhdGE7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbW92ZSBwcm9wZXJ0aWVzIGZyb20gYSBub3RlLlxyXG4gKiBXb3JrcyBmb3IgYm90aCAubWQgYW5kIC5tZHggZmlsZXMuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVtb3ZlUHJvcGVydGllcyhhcHA6IEFwcCwgZmlsZTogVEZpbGUsIHByb3BzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIoYXBwLCBmaWxlLCAoZnJvbnRtYXR0ZXIpID0+IHtcclxuXHRcdGZvciAoY29uc3QgcHJvcCBvZiBwcm9wcykge1xyXG5cdFx0XHRmcm9udG1hdHRlcltwcm9wXSA9IHVuZGVmaW5lZDsgLy8gXCJIYWNreVwiIHdvcmthcm91bmQsIGNvbW1lbnRlZCBjb2RlIHdpbGwgd29yayBpbiBsYXRlciB2ZXJzaW9uLlwiXHJcblx0XHR9XHJcblx0fSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB0d28gdHlwZXMgY2FuIGJlIGFwcGVuZGVkIHRvIGVhY2ggb3RoZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYW5CZUFwcGVuZGVkKHN0cjE6IHN0cmluZywgc3RyMjogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0Y29uc3QgYXJyID0gWydudW1iZXInLCAnZGF0ZScsICdkYXRldGltZScsICdjaGVja2JveCddOyAvLyBUaGVzZSB2YWx1ZXMgc2hvdWxkIG5vdCBiZSBhcHBlbmRlZC5cclxuXHRpZiAoYXJyLmluY2x1ZGVzKHN0cjEpIHx8IGFyci5pbmNsdWRlcyhzdHIyKSkgcmV0dXJuIGZhbHNlO1xyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogQ29udmVydCBzdHJpbmdzIGFuZCBhcnJheXMgaW50byBzaW5nbGUgYXJyYXkuXHJcbiAqL1xyXG5mdW5jdGlvbiBtZXJnZUludG9BcnJheXMoLi4uYXJnczogKHN0cmluZyB8IHN0cmluZ1tdKVtdKTogc3RyaW5nW10ge1xyXG5cdGNvbnN0IGFycmF5cyA9IGFyZ3MubWFwKChhcmcpID0+IChBcnJheS5pc0FycmF5KGFyZykgPyBhcmcgOiBbYXJnXSkpO1xyXG5cclxuXHQvLyBGbGF0dGVuIHRoZSBhcnJheVxyXG5cdGNvbnN0IGZsYXR0ZW5lZCA9IGFycmF5cy5mbGF0KCk7XHJcblxyXG5cdC8vIFJlbW92ZSBkdXBsaWNhdGVzIHVzaW5nIFNldCBhbmQgc3ByZWFkIGl0IGludG8gYW4gYXJyYXlcclxuXHRjb25zdCB1bmlxdWUgPSBbLi4ubmV3IFNldChmbGF0dGVuZWQpXTtcclxuXHJcblx0cmV0dXJuIHVuaXF1ZTtcclxufVxyXG5cclxuXHJcbiIsICIvKipcclxuICogTWFuYWdlIFRhZ3MgTW9kYWxcclxuICogTW9kYWwgZm9yIGFkZGluZy9yZW1vdmluZyB0YWdzIGZyb20gc2VsZWN0ZWQgZmlsZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBNb2RhbCwgQXBwLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQnVsa09wZXJhdGlvbnMgfSBmcm9tICcuLi91dGlscy9idWxrLW9wZXJhdGlvbnMnO1xyXG5pbXBvcnQgeyBnZXRGaWxlRnJvbnRtYXR0ZXIgfSBmcm9tICcuLi91dGlscy9mcm9udG1hdHRlci1oZWxwZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1hbmFnZVRhZ3NNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRwcml2YXRlIGZpbGVzOiBzdHJpbmdbXTtcclxuXHRwcml2YXRlIHRhZ3NUb0FkZDogc3RyaW5nID0gJyc7XHJcblx0cHJpdmF0ZSB0YWdzVG9SZW1vdmU6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xyXG5cdHByaXZhdGUgYnVsa09wczogQnVsa09wZXJhdGlvbnM7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlczogc3RyaW5nW10pIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLmZpbGVzID0gZmlsZXM7XHJcblx0XHR0aGlzLmJ1bGtPcHMgPSBuZXcgQnVsa09wZXJhdGlvbnMoYXBwKTtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKS5zZXROYW1lKCdNYW5hZ2UgdGFncycpLnNldEhlYWRpbmcoKTtcclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYE1hbmFnaW5nIHRhZ3MgZm9yICR7dGhpcy5maWxlcy5sZW5ndGh9IGZpbGUke3RoaXMuZmlsZXMubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9YCB9KTtcclxuXHJcblx0XHQvLyBBZGQgdGFncyBpbnB1dFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnQWRkIHRhZ3MnKVxyXG5cdFx0XHQuc2V0RGVzYygnRW50ZXIgdGFncyB0byBhZGQgKGNvbW1hLXNlcGFyYXRlZCkuJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFBsYWNlaG9sZGVyIHRleHQgd2l0aCBjb2RlIGV4YW1wbGVzLCBub3QgVUkgdGV4dFxyXG5cdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCd0YWcxLCB0YWcyLCB0YWczJylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMudGFnc1RvQWRkID0gdmFsdWU7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gUmVtb3ZlIHRhZ3Mgc2VjdGlvblxyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1JlbW92ZSB0YWdzJyB9KTsgLy8gS2VlcCBoMyBmb3Igc2VjdGlvbiBoZWFkaW5nXHJcblx0XHRjb25zdCByZW1vdmVDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcblxyXG5cdFx0Ly8gR2V0IGFsbCB1bmlxdWUgdGFncyBmcm9tIHNlbGVjdGVkIGZpbGVzXHJcblx0XHRjb25zdCBhbGxUYWdzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblx0XHRmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIHRoaXMuZmlsZXMpIHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdFx0XHQvLyBGb3IgTURYIGZpbGVzLCB3ZSdsbCBsb2FkIHRhZ3MgYXN5bmNocm9ub3VzbHlcclxuXHRcdFx0XHRpZiAoZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGZyb250bWF0dGVyID0gYXdhaXQgZ2V0RmlsZUZyb250bWF0dGVyKHRoaXMuYXBwLCBmaWxlKTtcclxuXHRcdFx0XHRcdFx0aWYgKGZyb250bWF0dGVyPy50YWdzKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgdGFncyA9IEFycmF5LmlzQXJyYXkoZnJvbnRtYXR0ZXIudGFncykgXHJcblx0XHRcdFx0XHRcdFx0XHQ/IChmcm9udG1hdHRlci50YWdzIGFzIHN0cmluZ1tdKVxyXG5cdFx0XHRcdFx0XHRcdFx0OiBbZnJvbnRtYXR0ZXIudGFncyBhcyBzdHJpbmddO1xyXG5cdFx0XHRcdFx0XHRcdHRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFhbGxUYWdzLmhhcyh0YWcpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGFsbFRhZ3MuYWRkKHRhZyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFkZCBjaGVja2JveCBmb3IgdGhpcyB0YWcgaWYgbW9kYWwgaXMgc3RpbGwgb3BlblxyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5jb250ZW50RWwgJiYgdGhpcy5jb250ZW50RWwuaXNDb25uZWN0ZWQgJiYgcmVtb3ZlQ29udGFpbmVyLmlzQ29ubmVjdGVkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5hZGRUYWdDaGVja2JveChyZW1vdmVDb250YWluZXIsIHRhZyk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gRm9yIC5tZCBmaWxlcywgdXNlIG1ldGFkYXRhIGNhY2hlIChzeW5jaHJvbm91cylcclxuXHRcdFx0XHRcdGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcblx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcjtcclxuXHRcdFx0XHRcdGlmIChmcm9udG1hdHRlcj8udGFncykge1xyXG5cdFx0XHRcdFx0XHRjb25zdCB0YWdzID0gQXJyYXkuaXNBcnJheShmcm9udG1hdHRlci50YWdzKSBcclxuXHRcdFx0XHRcdFx0XHQ/IChmcm9udG1hdHRlci50YWdzIGFzIHN0cmluZ1tdKVxyXG5cdFx0XHRcdFx0XHRcdDogW2Zyb250bWF0dGVyLnRhZ3MgYXMgc3RyaW5nXTtcclxuXHRcdFx0XHRcdFx0dGFncy5mb3JFYWNoKHRhZyA9PiBhbGxUYWdzLmFkZCh0YWcpKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBDcmVhdGUgY2hlY2tib3hlcyBmb3IgZWFjaCB0YWdcclxuXHRcdGZvciAoY29uc3QgdGFnIG9mIEFycmF5LmZyb20oYWxsVGFncykuc29ydCgpKSB7XHJcblx0XHRcdG5ldyBTZXR0aW5nKHJlbW92ZUNvbnRhaW5lcilcclxuXHRcdFx0XHQuc2V0TmFtZSh0YWcpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xyXG5cdFx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnRhZ3NUb1JlbW92ZS5oYXModGFnKSlcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuXHRcdFx0XHRcdFx0XHRpZiAodmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMudGFnc1RvUmVtb3ZlLmFkZCh0YWcpO1xyXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnRhZ3NUb1JlbW92ZS5kZWxldGUodGFnKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEJ1dHRvbnNcclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuXHRcdGJ1dHRvbkNvbnRhaW5lci5hZGRDbGFzcygnYmFzZXMtY21zLW1vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcclxuXHJcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG5cdFx0Y2FuY2VsQnRuLnNldFRleHQoJ0NhbmNlbCcpO1xyXG5cdFx0Y2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcblx0XHRjb25zdCBhcHBseUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRhcHBseUJ0bi5zZXRUZXh0KCdBcHBseScpO1xyXG5cdFx0YXBwbHlCdG4uYWRkQ2xhc3MoJ21vZC1jdGEnKTtcclxuXHRcdGFwcGx5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5hcHBseUNoYW5nZXMoKTtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH0pKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYWRkVGFnQ2hlY2tib3goY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdGFnOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcclxuXHRcdFx0LnNldE5hbWUodGFnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy50YWdzVG9SZW1vdmUuaGFzKHRhZykpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAodmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnRhZ3NUb1JlbW92ZS5hZGQodGFnKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnRhZ3NUb1JlbW92ZS5kZWxldGUodGFnKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBhc3luYyBhcHBseUNoYW5nZXMoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHQvLyBBZGQgdGFnc1xyXG5cdFx0aWYgKHRoaXMudGFnc1RvQWRkLnRyaW0oKSkge1xyXG5cdFx0XHRjb25zdCB0YWdzVG9BZGQgPSB0aGlzLnRhZ3NUb0FkZFxyXG5cdFx0XHRcdC5zcGxpdCgnLCcpXHJcblx0XHRcdFx0Lm1hcCh0ID0+IHQudHJpbSgpKVxyXG5cdFx0XHRcdC5maWx0ZXIodCA9PiB0Lmxlbmd0aCA+IDApO1xyXG5cdFx0XHRpZiAodGFnc1RvQWRkLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLmJ1bGtPcHMuYWRkVGFncyh0aGlzLmZpbGVzLCB0YWdzVG9BZGQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVtb3ZlIHRhZ3NcclxuXHRcdGlmICh0aGlzLnRhZ3NUb1JlbW92ZS5zaXplID4gMCkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmJ1bGtPcHMucmVtb3ZlVGFncyh0aGlzLmZpbGVzLCBBcnJheS5mcm9tKHRoaXMudGFnc1RvUmVtb3ZlKSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXHJcbiAqIFNldCBQcm9wZXJ0eSBNb2RhbFxyXG4gKiBNb2RhbCBmb3Igc2V0dGluZyBhIHByb3BlcnR5IHZhbHVlIG9uIHNlbGVjdGVkIGZpbGVzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTW9kYWwsIEFwcCwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgQnVsa09wZXJhdGlvbnMgfSBmcm9tICcuLi91dGlscy9idWxrLW9wZXJhdGlvbnMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNldFByb3BlcnR5TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cHJpdmF0ZSBmaWxlczogc3RyaW5nW107XHJcblx0cHJpdmF0ZSBwcm9wZXJ0eU5hbWU6IHN0cmluZyA9ICcnO1xyXG5cdHByaXZhdGUgcHJvcGVydHlWYWx1ZTogc3RyaW5nID0gJyc7XHJcblx0cHJpdmF0ZSBwcm9wZXJ0eVR5cGU6IHN0cmluZyA9ICd0ZXh0JztcclxuXHRwcml2YXRlIGJ1bGtPcHM6IEJ1bGtPcGVyYXRpb25zO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZmlsZXM6IHN0cmluZ1tdKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5maWxlcyA9IGZpbGVzO1xyXG5cdFx0dGhpcy5idWxrT3BzID0gbmV3IEJ1bGtPcGVyYXRpb25zKGFwcCk7XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZSgnU2V0IHByb3BlcnR5Jykuc2V0SGVhZGluZygpO1xyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgU2V0dGluZyBwcm9wZXJ0eSBvbiAke3RoaXMuZmlsZXMubGVuZ3RofSBmaWxlJHt0aGlzLmZpbGVzLmxlbmd0aCAhPT0gMSA/ICdzJyA6ICcnfWAgfSk7XHJcblxyXG5cdFx0Ly8gUHJvcGVydHkgbmFtZVxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUHJvcGVydHkgbmFtZScpXHJcblx0XHRcdC5zZXREZXNjKCdFbnRlciB0aGUgcHJvcGVydHkgbmFtZSB0byBzZXQuJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0dGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBuYW1lJylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucHJvcGVydHlOYW1lID0gdmFsdWU7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gUHJvcGVydHkgdHlwZVxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUHJvcGVydHkgdHlwZScpXHJcblx0XHRcdC5zZXREZXNjKCdTZWxlY3QgdGhlIHByb3BlcnR5IHR5cGUuJylcclxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuXHRcdFx0XHRkcm9wZG93blxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbigndGV4dCcsICdUZXh0JylcclxuXHRcdFx0XHRcdC5hZGRPcHRpb24oJ251bWJlcicsICdOdW1iZXInKVxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbignY2hlY2tib3gnLCAnQ2hlY2tib3gnKVxyXG5cdFx0XHRcdFx0LmFkZE9wdGlvbignZGF0ZScsICdEYXRlJylcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnByb3BlcnR5VHlwZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucHJvcGVydHlUeXBlID0gdmFsdWU7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gUHJvcGVydHkgdmFsdWVcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0LnNldE5hbWUoJ1Byb3BlcnR5IHZhbHVlJylcclxuXHRcdFx0LnNldERlc2MoJ0VudGVyIHRoZSBwcm9wZXJ0eSB2YWx1ZS4nKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHtcclxuXHRcdFx0XHR0ZXh0XHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHZhbHVlJylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucHJvcGVydHlWYWx1ZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIEJ1dHRvbnNcclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcclxuXHRcdGJ1dHRvbkNvbnRhaW5lci5hZGRDbGFzcygnYmFzZXMtY21zLW1vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcclxuXHJcblx0XHRjb25zdCBjYW5jZWxCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicpO1xyXG5cdFx0Y2FuY2VsQnRuLnNldFRleHQoJ0NhbmNlbCcpO1xyXG5cdFx0Y2FuY2VsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuXHJcblx0XHRjb25zdCBhcHBseUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRhcHBseUJ0bi5zZXRUZXh0KCdBcHBseScpO1xyXG5cdFx0YXBwbHlCdG4uYWRkQ2xhc3MoJ21vZC1jdGEnKTtcclxuXHRcdGFwcGx5QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0aWYgKHRoaXMucHJvcGVydHlOYW1lICYmIHRoaXMucHJvcGVydHlWYWx1ZSkge1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5hcHBseUNoYW5nZXMoKTtcclxuXHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgYXBwbHlDaGFuZ2VzKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0bGV0IHZhbHVlOiB1bmtub3duID0gdGhpcy5wcm9wZXJ0eVZhbHVlO1xyXG5cclxuXHRcdC8vIENvbnZlcnQgdmFsdWUgYmFzZWQgb24gdHlwZVxyXG5cdFx0aWYgKHRoaXMucHJvcGVydHlUeXBlID09PSAnbnVtYmVyJykge1xyXG5cdFx0XHR2YWx1ZSA9IE51bWJlcih0aGlzLnByb3BlcnR5VmFsdWUpO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLnByb3BlcnR5VHlwZSA9PT0gJ2NoZWNrYm94Jykge1xyXG5cdFx0XHR2YWx1ZSA9IHRoaXMucHJvcGVydHlWYWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScgfHwgdGhpcy5wcm9wZXJ0eVZhbHVlID09PSAnMSc7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMucHJvcGVydHlUeXBlID09PSAnZGF0ZScpIHtcclxuXHRcdFx0dmFsdWUgPSB0aGlzLnByb3BlcnR5VmFsdWU7IC8vIEtlZXAgYXMgc3RyaW5nIGZvciBkYXRlXHJcblx0XHR9XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5idWxrT3BzLnNldFByb3BlcnR5KHRoaXMuZmlsZXMsIHRoaXMucHJvcGVydHlOYW1lLCB2YWx1ZSwgdGhpcy5wcm9wZXJ0eVR5cGUpO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBSZW1vdmUgUHJvcGVydHkgTW9kYWxcclxuICogTW9kYWwgZm9yIHJlbW92aW5nIHByb3BlcnRpZXMgZnJvbSBzZWxlY3RlZCBmaWxlc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBCdWxrT3BlcmF0aW9ucyB9IGZyb20gJy4uL3V0aWxzL2J1bGstb3BlcmF0aW9ucyc7XHJcbmltcG9ydCB7IGdldEZpbGVGcm9udG1hdHRlciB9IGZyb20gJy4uL3V0aWxzL2Zyb250bWF0dGVyLWhlbHBlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVtb3ZlUHJvcGVydHlNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRwcml2YXRlIGZpbGVzOiBzdHJpbmdbXTtcclxuXHRwcml2YXRlIHByb3BlcnRpZXNUb1JlbW92ZTogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XHJcblx0cHJpdmF0ZSBidWxrT3BzOiBCdWxrT3BlcmF0aW9ucztcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGZpbGVzOiBzdHJpbmdbXSkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMuZmlsZXMgPSBmaWxlcztcclxuXHRcdHRoaXMuYnVsa09wcyA9IG5ldyBCdWxrT3BlcmF0aW9ucyhhcHApO1xyXG5cdH1cclxuXHJcblx0b25PcGVuKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblxyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoJ1JlbW92ZSBwcm9wZXJ0eScpLnNldEhlYWRpbmcoKTtcclxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFJlbW92aW5nIHByb3BlcnRpZXMgZnJvbSAke3RoaXMuZmlsZXMubGVuZ3RofSBmaWxlJHt0aGlzLmZpbGVzLmxlbmd0aCAhPT0gMSA/ICdzJyA6ICcnfWAgfSk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGNoZWNrYm94ZXMgY29udGFpbmVyIGZpcnN0XHJcblx0XHRjb25zdCBwcm9wZXJ0aWVzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xyXG5cdFx0XHJcblx0XHQvLyBHZXQgYWxsIHVuaXF1ZSBwcm9wZXJ0aWVzIGZyb20gc2VsZWN0ZWQgZmlsZXNcclxuXHRcdGNvbnN0IGFsbFByb3BlcnRpZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcclxuXHRcdFxyXG5cdFx0Ly8gTG9hZCBwcm9wZXJ0aWVzIHN5bmNocm9ub3VzbHkgZm9yIC5tZCBmaWxlcyBmaXJzdFxyXG5cdFx0Zm9yIChjb25zdCBmaWxlUGF0aCBvZiB0aGlzLmZpbGVzKSB7XHJcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG5cdFx0XHRpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUuZXh0ZW5zaW9uICE9PSAnbWR4Jykge1xyXG5cdFx0XHRcdGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XHJcblx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI7XHJcblx0XHRcdFx0aWYgKGZyb250bWF0dGVyKSB7XHJcblx0XHRcdFx0XHRmb3IgKGNvbnN0IGtleSBpbiBmcm9udG1hdHRlcikge1xyXG5cdFx0XHRcdFx0XHRpZiAoa2V5ICE9PSAndGFncycgJiYga2V5ICE9PSAndGl0bGUnKSB7XHJcblx0XHRcdFx0XHRcdFx0YWxsUHJvcGVydGllcy5hZGQoa2V5KTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBSZW5kZXIgY2hlY2tib3hlcyBmb3IgLm1kIGZpbGUgcHJvcGVydGllc1xyXG5cdFx0Zm9yIChjb25zdCBwcm9wIG9mIEFycmF5LmZyb20oYWxsUHJvcGVydGllcykuc29ydCgpKSB7XHJcblx0XHRcdHRoaXMuYWRkUHJvcGVydHlDaGVja2JveChwcm9wZXJ0aWVzQ29udGFpbmVyLCBwcm9wKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gTG9hZCBNRFggZmlsZSBwcm9wZXJ0aWVzIGFzeW5jaHJvbm91c2x5XHJcblx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdGZvciAoY29uc3QgZmlsZVBhdGggb2YgdGhpcy5maWxlcykge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG5cdFx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZHgnKSB7XHJcblx0XHRcdFx0XHRjb25zdCBmcm9udG1hdHRlciA9IGF3YWl0IGdldEZpbGVGcm9udG1hdHRlcih0aGlzLmFwcCwgZmlsZSk7XHJcblx0XHRcdFx0XHRpZiAoZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBrZXkgaW4gZnJvbnRtYXR0ZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoa2V5ICE9PSAndGFncycgJiYga2V5ICE9PSAndGl0bGUnKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAoIWFsbFByb3BlcnRpZXMuaGFzKGtleSkpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0YWxsUHJvcGVydGllcy5hZGQoa2V5KTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIGNoZWNrYm94IGZvciB0aGlzIHByb3BlcnR5IGR5bmFtaWNhbGx5XHJcblx0XHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLmNvbnRlbnRFbCAmJiB0aGlzLmNvbnRlbnRFbC5pc0Nvbm5lY3RlZCAmJiBwcm9wZXJ0aWVzQ29udGFpbmVyLmlzQ29ubmVjdGVkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5hZGRQcm9wZXJ0eUNoZWNrYm94KHByb3BlcnRpZXNDb250YWluZXIsIGtleSk7XHJcblx0XHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pKCk7XHJcblxyXG5cdFx0aWYgKGFsbFByb3BlcnRpZXMuc2l6ZSA9PT0gMCkge1xyXG5cdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdObyBwcm9wZXJ0aWVzIGZvdW5kIGluIHNlbGVjdGVkIGZpbGVzLicgfSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQnV0dG9uc1xyXG5cdFx0Y29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xyXG5cdFx0YnV0dG9uQ29udGFpbmVyLmFkZENsYXNzKCdiYXNlcy1jbXMtbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicpO1xyXG5cclxuXHRcdGNvbnN0IGNhbmNlbEJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRjYW5jZWxCdG4uc2V0VGV4dCgnQ2FuY2VsJyk7XHJcblx0XHRjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG5cclxuXHRcdGNvbnN0IGFwcGx5QnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuXHRcdGFwcGx5QnRuLnNldFRleHQoJ0FwcGx5Jyk7XHJcblx0XHRhcHBseUJ0bi5hZGRDbGFzcygnbW9kLWN0YScpO1xyXG5cdFx0YXBwbHlCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRpZiAodGhpcy5wcm9wZXJ0aWVzVG9SZW1vdmUuc2l6ZSA+IDApIHtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwbHlDaGFuZ2VzKCk7XHJcblx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KSgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFkZFByb3BlcnR5Q2hlY2tib3goY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcHJvcDogc3RyaW5nKTogdm9pZCB7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXIpXHJcblx0XHRcdC5zZXROYW1lKHByb3ApXHJcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnByb3BlcnRpZXNUb1JlbW92ZS5oYXMocHJvcCkpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAodmFsdWUpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnByb3BlcnRpZXNUb1JlbW92ZS5hZGQocHJvcCk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wcm9wZXJ0aWVzVG9SZW1vdmUuZGVsZXRlKHByb3ApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIGFwcGx5Q2hhbmdlcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGZvciAoY29uc3QgcHJvcCBvZiB0aGlzLnByb3BlcnRpZXNUb1JlbW92ZSkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmJ1bGtPcHMucmVtb3ZlUHJvcGVydHkodGhpcy5maWxlcywgcHJvcCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRvbkNsb3NlKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG4iLCAiLyoqXHJcbiAqIFRvb2xiYXIgQWN0aW9uc1xyXG4gKiBIYW5kbGVzIGFsbCBidWxrIG9wZXJhdGlvbiBhY3Rpb25zIGZyb20gdGhlIHRvb2xiYXJcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB0eXBlIEJhc2VzQ01TUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBCdWxrT3BlcmF0aW9ucyB9IGZyb20gJy4vYnVsay1vcGVyYXRpb25zJztcclxuaW1wb3J0IHsgTWFuYWdlVGFnc01vZGFsIH0gZnJvbSAnLi4vY29tcG9uZW50cy9tYW5hZ2UtdGFncy1tb2RhbCc7XHJcbmltcG9ydCB7IFNldFByb3BlcnR5TW9kYWwgfSBmcm9tICcuLi9jb21wb25lbnRzL3NldC1wcm9wZXJ0eS1tb2RhbCc7XHJcbmltcG9ydCB7IFJlbW92ZVByb3BlcnR5TW9kYWwgfSBmcm9tICcuLi9jb21wb25lbnRzL3JlbW92ZS1wcm9wZXJ0eS1tb2RhbCc7XHJcbmltcG9ydCB7IERlbGV0aW9uUHJldmlld01vZGFsIH0gZnJvbSAnLi4vY29tcG9uZW50cy9kZWxldGlvbi1wcmV2aWV3JztcclxuaW1wb3J0IHsgQnVsa09wZXJhdGlvbkNvbmZpcm1Nb2RhbCB9IGZyb20gJy4uL2NvbXBvbmVudHMvYnVsay1vcGVyYXRpb24tY29uZmlybSc7XHJcbmltcG9ydCB7IHByZXBhcmVEZWxldGlvblByZXZpZXcsIGV4ZWN1dGVTbWFydERlbGV0aW9uIH0gZnJvbSAnLi9zbWFydC1kZWxldGlvbic7XHJcbmltcG9ydCB0eXBlIHsgQ01TU2V0dGluZ3MgfSBmcm9tICcuLi9zaGFyZWQvZGF0YS10cmFuc2Zvcm0nO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRvb2xiYXJBY3Rpb25zIHtcclxuXHRwcml2YXRlIGJ1bGtPcHM6IEJ1bGtPcGVyYXRpb25zO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHByaXZhdGUgYXBwOiBBcHAsXHJcblx0XHRwcml2YXRlIHBsdWdpbjogQmFzZXNDTVNQbHVnaW4sXHJcblx0XHRwcml2YXRlIGdldFNlbGVjdGVkRmlsZXM6ICgpID0+IHN0cmluZ1tdLFxyXG5cdFx0cHJpdmF0ZSBjbGVhclNlbGVjdGlvbjogKCkgPT4gdm9pZCxcclxuXHRcdHByaXZhdGUgcmVmcmVzaFZpZXc6ICgpID0+IHZvaWQsXHJcblx0XHRwcml2YXRlIHNob3dUb29sYmFyOiAoKSA9PiB2b2lkXHJcblx0KSB7XHJcblx0XHR0aGlzLmJ1bGtPcHMgPSBuZXcgQnVsa09wZXJhdGlvbnMoYXBwKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGhhbmRsZVNldERyYWZ0KHNldHRpbmdzPzogQ01TU2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5nZXRTZWxlY3RlZEZpbGVzKCk7XHJcblx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1CdWxrT3BlcmF0aW9ucykge1xyXG5cdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBCdWxrT3BlcmF0aW9uQ29uZmlybU1vZGFsKFxyXG5cdFx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRcdGZpbGVzLFxyXG5cdFx0XHRcdCdkcmFmdCcsXHJcblx0XHRcdFx0KCkgPT4ge1xyXG5cdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmJ1bGtPcHMuc2V0RHJhZnQoZmlsZXMsIHRydWUsIHNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGF3YWl0IHRoaXMuYnVsa09wcy5zZXREcmFmdChmaWxlcywgdHJ1ZSwgc2V0dGluZ3MpO1xyXG5cdFx0XHR0aGlzLnJlZnJlc2hWaWV3KCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBoYW5kbGVQdWJsaXNoKHNldHRpbmdzPzogQ01TU2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5nZXRTZWxlY3RlZEZpbGVzKCk7XHJcblx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1CdWxrT3BlcmF0aW9ucykge1xyXG5cdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBCdWxrT3BlcmF0aW9uQ29uZmlybU1vZGFsKFxyXG5cdFx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRcdGZpbGVzLFxyXG5cdFx0XHRcdCdwdWJsaXNoJyxcclxuXHRcdFx0XHQoKSA9PiB7XHJcblx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYnVsa09wcy5zZXREcmFmdChmaWxlcywgZmFsc2UsIHNldHRpbmdzKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xyXG5cdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblx0XHRcdG1vZGFsLm9wZW4oKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGF3YWl0IHRoaXMuYnVsa09wcy5zZXREcmFmdChmaWxlcywgZmFsc2UsIHNldHRpbmdzKTtcclxuXHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aGFuZGxlTWFuYWdlVGFncygpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5nZXRTZWxlY3RlZEZpbGVzKCk7XHJcblx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgTWFuYWdlVGFnc01vZGFsKHRoaXMuYXBwLCBmaWxlcyk7XHJcblx0XHRtb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xyXG5cdFx0XHQvLyBLZWVwIHRvb2xiYXIgdmlzaWJsZSAtIGRvbid0IGxldCBpdCBjbG9zZVxyXG5cdFx0XHR0aGlzLnNob3dUb29sYmFyKCk7XHJcblx0XHRcdC8vIFJlZnJlc2ggdmlldyAtIHRoZSByZWZyZXNoVmlldyBjYWxsYmFjayB3aWxsIHByZXNlcnZlIHNlbGVjdGlvblxyXG5cdFx0XHR0aGlzLnJlZnJlc2hWaWV3KCk7XHJcblx0XHR9O1xyXG5cdFx0bW9kYWwub3BlbigpO1xyXG5cdH1cclxuXHJcblx0aGFuZGxlU2V0UHJvcGVydHkoKTogdm9pZCB7XHJcblx0XHRjb25zdCBmaWxlcyA9IHRoaXMuZ2V0U2VsZWN0ZWRGaWxlcygpO1xyXG5cdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuXHRcdGNvbnN0IG1vZGFsID0gbmV3IFNldFByb3BlcnR5TW9kYWwodGhpcy5hcHAsIGZpbGVzKTtcclxuXHRcdG1vZGFsLm9uQ2xvc2UgPSAoKSA9PiB7XHJcblx0XHRcdC8vIEtlZXAgdG9vbGJhciB2aXNpYmxlIC0gZG9uJ3QgbGV0IGl0IGNsb3NlXHJcblx0XHRcdHRoaXMuc2hvd1Rvb2xiYXIoKTtcclxuXHRcdFx0Ly8gUmVmcmVzaCB2aWV3IC0gdGhlIHJlZnJlc2hWaWV3IGNhbGxiYWNrIHdpbGwgcHJlc2VydmUgc2VsZWN0aW9uXHJcblx0XHRcdHRoaXMucmVmcmVzaFZpZXcoKTtcclxuXHRcdH07XHJcblx0XHRtb2RhbC5vcGVuKCk7XHJcblx0fVxyXG5cclxuXHRoYW5kbGVSZW1vdmVQcm9wZXJ0eSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5nZXRTZWxlY3RlZEZpbGVzKCk7XHJcblx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG5cdFx0Y29uc3QgbW9kYWwgPSBuZXcgUmVtb3ZlUHJvcGVydHlNb2RhbCh0aGlzLmFwcCwgZmlsZXMpO1xyXG5cdFx0bW9kYWwub25DbG9zZSA9ICgpID0+IHtcclxuXHRcdFx0Ly8gS2VlcCB0b29sYmFyIHZpc2libGUgLSBkb24ndCBsZXQgaXQgY2xvc2VcclxuXHRcdFx0dGhpcy5zaG93VG9vbGJhcigpO1xyXG5cdFx0XHQvLyBSZWZyZXNoIHZpZXcgLSB0aGUgcmVmcmVzaFZpZXcgY2FsbGJhY2sgd2lsbCBwcmVzZXJ2ZSBzZWxlY3Rpb25cclxuXHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xyXG5cdFx0fTtcclxuXHRcdG1vZGFsLm9wZW4oKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGhhbmRsZURlbGV0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5nZXRTZWxlY3RlZEZpbGVzKCk7XHJcblx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbmZpcm1EZWxldGlvbnMpIHtcclxuXHRcdFx0Y29uc3QgcHJldmlldyA9IGF3YWl0IHByZXBhcmVEZWxldGlvblByZXZpZXcoXHJcblx0XHRcdFx0dGhpcy5hcHAsXHJcblx0XHRcdFx0ZmlsZXMsXHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3NcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IERlbGV0aW9uUHJldmlld01vZGFsKFxyXG5cdFx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRcdHByZXZpZXcsXHJcblx0XHRcdFx0KCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5jbGVhclNlbGVjdGlvbigpO1xyXG5cdFx0XHRcdFx0dGhpcy5yZWZyZXNoVmlldygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdFx0bW9kYWwub3BlbigpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gRGlyZWN0IGRlbGV0aW9uIHdpdGhvdXQgY29uZmlybWF0aW9uXHJcblx0XHRcdGNvbnN0IHByZXZpZXcgPSBhd2FpdCBwcmVwYXJlRGVsZXRpb25QcmV2aWV3KFxyXG5cdFx0XHRcdHRoaXMuYXBwLFxyXG5cdFx0XHRcdGZpbGVzLFxyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzXHJcblx0XHRcdCk7XHJcblx0XHRcdGF3YWl0IGV4ZWN1dGVTbWFydERlbGV0aW9uKHRoaXMuYXBwLCBwcmV2aWV3KTtcclxuXHRcdFx0dGhpcy5jbGVhclNlbGVjdGlvbigpO1xyXG5cdFx0XHR0aGlzLnJlZnJlc2hWaWV3KCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG4iLCAiLyoqXHJcbiAqIEJ1bGsgT3BlcmF0aW9uIENvbmZpcm1hdGlvbiBNb2RhbFxyXG4gKiBTaG93cyBjb25maXJtYXRpb24gZGlhbG9nIGJlZm9yZSBwZXJmb3JtaW5nIGJ1bGsgb3BlcmF0aW9uc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IE1vZGFsLCBBcHAsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY2xhc3MgQnVsa09wZXJhdGlvbkNvbmZpcm1Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuXHRwcml2YXRlIGZpbGVzOiBzdHJpbmdbXTtcclxuXHRwcml2YXRlIG9wZXJhdGlvbjogJ2RyYWZ0JyB8ICdwdWJsaXNoJztcclxuXHRwcml2YXRlIG9uQ29uZmlybTogKCkgPT4gdm9pZDtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRhcHA6IEFwcCxcclxuXHRcdGZpbGVzOiBzdHJpbmdbXSxcclxuXHRcdG9wZXJhdGlvbjogJ2RyYWZ0JyB8ICdwdWJsaXNoJyxcclxuXHRcdG9uQ29uZmlybTogKCkgPT4gdm9pZFxyXG5cdCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMuZmlsZXMgPSBmaWxlcztcclxuXHRcdHRoaXMub3BlcmF0aW9uID0gb3BlcmF0aW9uO1xyXG5cdFx0dGhpcy5vbkNvbmZpcm0gPSBvbkNvbmZpcm07XHJcblx0fVxyXG5cclxuXHRvbk9wZW4oKTogdm9pZCB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHJcblx0XHRjb25zdCBvcGVyYXRpb25OYW1lID0gdGhpcy5vcGVyYXRpb24gPT09ICdkcmFmdCcgPyAnbWFyayBhcyBkcmFmdCcgOiAnbWFyayBhcyBwdWJsaXNoZWQnO1xyXG5cdFx0Y29uc3QgaGVhZGluZ1RleHQgPSBvcGVyYXRpb25OYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgb3BlcmF0aW9uTmFtZS5zbGljZSgxKTtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZShgQ29uZmlybSAke2hlYWRpbmdUZXh0fWApLnNldEhlYWRpbmcoKTtcclxuXHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7XHJcblx0XHRcdHRleHQ6IGBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gJHtvcGVyYXRpb25OYW1lfSAke3RoaXMuZmlsZXMubGVuZ3RofSBmaWxlJHt0aGlzLmZpbGVzLmxlbmd0aCAhPT0gMSA/ICdzJyA6ICcnfT9gXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBTaG93IGZpbGUgbGlzdCAobGltaXRlZCB0byAyMClcclxuXHRcdGlmICh0aGlzLmZpbGVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Y29uc3QgZmlsZXNMaXN0ID0gY29udGVudEVsLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnYmFzZXMtY21zLWRlbGV0aW9uLWxpc3QnIH0pO1xyXG5cdFx0XHRmb3IgKGNvbnN0IGZpbGVQYXRoIG9mIHRoaXMuZmlsZXMuc2xpY2UoMCwgMjApKSB7XHJcblx0XHRcdFx0Y29uc3QgbGkgPSBmaWxlc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XHJcblx0XHRcdFx0bGkuc2V0VGV4dChmaWxlUGF0aCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRoaXMuZmlsZXMubGVuZ3RoID4gMjApIHtcclxuXHRcdFx0XHRmaWxlc0xpc3QuY3JlYXRlRWwoJ2xpJywge1xyXG5cdFx0XHRcdFx0dGV4dDogYC4uLiBhbmQgJHt0aGlzLmZpbGVzLmxlbmd0aCAtIDIwfSBtb3JlIGZpbGUke3RoaXMuZmlsZXMubGVuZ3RoIC0gMjAgIT09IDEgPyAncycgOiAnJ31gXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBCdXR0b25zXHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcblx0XHRidXR0b25Db250YWluZXIuYWRkQ2xhc3MoJ2Jhc2VzLWNtcy1tb2RhbC1idXR0b24tY29udGFpbmVyJyk7XHJcblxyXG5cdFx0Y29uc3QgY2FuY2VsQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nKTtcclxuXHRcdGNhbmNlbEJ0bi5zZXRUZXh0KCdDYW5jZWwnKTtcclxuXHRcdGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblxyXG5cdFx0Y29uc3QgY29uZmlybUJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJyk7XHJcblx0XHRjb25maXJtQnRuLnNldFRleHQoJ0NvbmZpcm0nKTtcclxuXHRcdGNvbmZpcm1CdG4uYWRkQ2xhc3MoJ21vZC1jdGEnKTtcclxuXHRcdGNvbmZpcm1CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMub25Db25maXJtKCk7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgcmVhZENNU1NldHRpbmdzIH0gZnJvbSAnLi4vc2hhcmVkL3NldHRpbmdzLXNjaGVtYSc7XHJcbmltcG9ydCB0eXBlIHsgQmFzZXNDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbi8vIEJhc2VzIGNvbmZpZyBvYmplY3QgaW50ZXJmYWNlXHJcbmludGVyZmFjZSBCYXNlc0NvbmZpZyB7XHJcblx0Z2V0KGtleTogc3RyaW5nKTogdW5rbm93bjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNldHVwIGludGVyY2VwdG9yIGZvciBuZXcgbm90ZSBidXR0b24gY2xpY2tzXHJcbiAqIEhhbmRsZXMgY3VzdG9tIG5ldyBub3RlIGxvY2F0aW9uIHNldHRpbmdzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBOZXdOb3RlSW50ZXJjZXB0b3IoXHJcblx0YXBwOiBBcHAsXHJcblx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG5cdGNvbmZpZzogQmFzZXNDb25maWcsXHJcblx0cGx1Z2luU2V0dGluZ3M6IEJhc2VzQ01TU2V0dGluZ3MsXHJcblx0cmVnaXN0ZXJDbGVhbnVwOiAoY2xlYW51cDogKCkgPT4gdm9pZCkgPT4gdm9pZFxyXG4pOiB2b2lkIHtcclxuXHQvLyBJbnRlcmNlcHQgY2xpY2tzIG9uIHRoZSBuZXcgYnV0dG9uIC0gdXNlIGNhcHR1cmUgcGhhc2UgdG8gY2F0Y2ggYmVmb3JlIEJhc2VzXHJcblx0Y29uc3QgaW50ZXJjZXB0TmV3QnV0dG9uID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHJcblx0XHQvLyBUcnkgbXVsdGlwbGUgc2VsZWN0b3JzIGZvciB0aGUgbmV3IGJ1dHRvbiAtIEJhc2VzIG1pZ2h0IHVzZSBkaWZmZXJlbnQgc3RydWN0dXJlc1xyXG5cdFx0Y29uc3QgYnV0dG9uRWwgPSB0YXJnZXQuY2xvc2VzdCgnLmJhc2VzLXRvb2xiYXItbmV3LWl0ZW0tbWVudSwgLmJhc2VzLXRvb2xiYXItbmV3LWl0ZW0tbWVudSAudGV4dC1pY29uLWJ1dHRvbiwgW2RhdGEtYWN0aW9uPVwibmV3LWl0ZW1cIl0sIGJ1dHRvblthcmlhLWxhYmVsKj1cIm5ld1wiXSwgYnV0dG9uW2FyaWEtbGFiZWwqPVwiTmV3XCJdLCAuYmFzZXMtdG9vbGJhciBidXR0b24nKTtcclxuXHRcdFxyXG5cdFx0aWYgKCFidXR0b25FbCkge1xyXG5cdFx0XHRyZXR1cm47IC8vIE5vdCB0aGUgbmV3IGJ1dHRvblxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBEb24ndCBpbnRlcmZlcmUgd2l0aCBjbGlja3MgaW5zaWRlIHRoZSBidWxrIHRvb2xiYXIgb3Igb3RoZXIgQ01TIGVsZW1lbnRzXHJcblx0XHRpZiAodGFyZ2V0LmNsb3Nlc3QoJy5iYXNlcy1jbXMtYnVsay10b29sYmFyLCAuYmFzZXMtY21zLWNvbnRhaW5lciAuY2FyZCcpKSB7XHJcblx0XHRcdHJldHVybjsgLy8gTGV0IHRoZXNlIGNsaWNrcyB3b3JrIG5vcm1hbGx5XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIENoZWNrIGlmIHRoaXMgY2xpY2sgaXMgZm9yIE9VUiBzcGVjaWZpYyB2aWV3IGluc3RhbmNlXHJcblx0XHQvLyBHZXQgdGhlIGFjdGl2ZSB2aWV3IHRvIHNlZSB3aGljaCBvbmUgaXMgYWN0dWFsbHkgYWN0aXZlXHJcblx0XHRjb25zdCBhY3RpdmVMZWFmID0gKGFwcC53b3Jrc3BhY2UgYXMgdW5rbm93biBhcyB7IGFjdGl2ZUxlYWY/OiB7IHZpZXc/OiB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQ7IHJlYWRvbmx5IHR5cGU/OiBzdHJpbmcgfSB9IH0pLmFjdGl2ZUxlYWY7XHJcblx0XHRjb25zdCBhY3RpdmVWaWV3ID0gYWN0aXZlTGVhZj8udmlldztcclxuXHRcdGNvbnN0IGFjdGl2ZVZpZXdDb250YWluZXIgPSBhY3RpdmVWaWV3Py5jb250YWluZXJFbDtcclxuXHRcdFxyXG5cdFx0Ly8gRklSU1Q6IE9ubHkgaW50ZXJjZXB0IGlmIHRoZSBhY3RpdmUgdmlldyBpcyBhIENNUyB2aWV3ICh0eXBlID09PSAnYmFzZXMtY21zJylcclxuXHRcdC8vIFRoaXMgcHJldmVudHMgaW50ZXJjZXB0aW5nIHdoZW4gdXNlciBzd2l0Y2hlcyB0byB0YWJsZS9jYXJkcyB2aWV3XHJcblx0XHQvLyBDaGVjayB0aGUgY29udGFpbmVyIGZvciB0aGUgQ01TIGNsYXNzIGFzIGEgZmFsbGJhY2sgaWYgdHlwZSBpc24ndCBhdmFpbGFibGVcclxuXHRcdGNvbnN0IGlzQ01TVmlldyA9IGFjdGl2ZVZpZXc/LnR5cGUgPT09ICdiYXNlcy1jbXMnIHx8IFxyXG5cdFx0XHQoYWN0aXZlVmlld0NvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignLmJhc2VzLWNtcy1jb250YWluZXInKSAhPT0gbnVsbCk7XHJcblx0XHRcclxuXHRcdGlmICghaXNDTVNWaWV3KSB7XHJcblx0XHRcdHJldHVybjsgLy8gTm90IGEgQ01TIHZpZXcsIGxldCBCYXNlcyBoYW5kbGUgaXQgbm9ybWFsbHkgKGRvbid0IHByZXZlbnQgZGVmYXVsdClcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gU0VDT05EOiBDaGVjayBpZiBvdXIgY29udGFpbmVyIGlzIHdpdGhpbiB0aGUgYWN0aXZlIHZpZXcncyBjb250YWluZXIsIG9yIGlmIHRoZXkncmUgdGhlIHNhbWVcclxuXHRcdC8vIFRoZSBhY3RpdmUgdmlldydzIGNvbnRhaW5lckVsIGlzIHVzdWFsbHkgd29ya3NwYWNlLWxlYWYtY29udGVudCwgYW5kIG91ciBjb250YWluZXIgaXMgaW5zaWRlIGl0XHJcblx0XHRjb25zdCBpc091clZpZXcgPSBhY3RpdmVWaWV3Q29udGFpbmVyICYmIChcclxuXHRcdFx0YWN0aXZlVmlld0NvbnRhaW5lciA9PT0gY29udGFpbmVyRWwgfHwgXHJcblx0XHRcdGFjdGl2ZVZpZXdDb250YWluZXIuY29udGFpbnMoY29udGFpbmVyRWwpIHx8XHJcblx0XHRcdGNvbnRhaW5lckVsLmNvbnRhaW5zKGFjdGl2ZVZpZXdDb250YWluZXIpXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHRpZiAoIWlzT3VyVmlldykge1xyXG5cdFx0XHRyZXR1cm47IC8vIE5vdCBvdXIgdmlld1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBHZXQgdGhlIGNvbmZpZyBmcm9tIHRoZSB2aWV3IGluc3RhbmNlIHN0b3JlZCBvbiB0aGUgY29udGFpbmVyIC0gdGhpcyBlbnN1cmVzIHdlIGdldCB0aGUgY3VycmVudCBjb25maWdcclxuXHRcdGNvbnN0IGNvbnRhaW5lcldpdGhWaWV3ID0gY29udGFpbmVyRWwgYXMgdW5rbm93biBhcyB7IFxyXG5cdFx0XHRfX2Ntc0NvbmZpZz86IEJhc2VzQ29uZmlnO1xyXG5cdFx0XHRfX2Ntc1ZpZXc/OiB7IGNvbmZpZz86IEJhc2VzQ29uZmlnIH07XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQvLyBUcnkgdG8gZ2V0IGNvbmZpZyBmcm9tIHRoZSB2aWV3IGluc3RhbmNlIGZpcnN0IChtb3N0IHJlbGlhYmxlKVxyXG5cdFx0Y29uc3Qgdmlld0luc3RhbmNlID0gY29udGFpbmVyV2l0aFZpZXcuX19jbXNWaWV3O1xyXG5cdFx0Y29uc3Qgdmlld0NvbmZpZyA9IHZpZXdJbnN0YW5jZT8uY29uZmlnIHx8IGNvbnRhaW5lcldpdGhWaWV3Ll9fY21zQ29uZmlnIHx8IGNvbmZpZztcclxuXHRcdFxyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3Modmlld0NvbmZpZywgcGx1Z2luU2V0dGluZ3MpO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gaW50ZXJjZXB0OiBlaXRoZXIgXCJPcGVuIG5ldyBub3RlcyBkaXJlY3RseVwiIGlzIGVuYWJsZWQsIG9yIGEgbG9jYXRpb24gaXMgc3BlY2lmaWVkXHJcblx0XHRjb25zdCBoYXNDdXN0b21Mb2NhdGlvbiA9IHNldHRpbmdzLm5ld05vdGVMb2NhdGlvbiAmJiBzZXR0aW5ncy5uZXdOb3RlTG9jYXRpb24udHJpbSgpICE9PSAnJztcclxuXHRcdFxyXG5cdFx0aWYgKHNldHRpbmdzLmN1c3RvbWl6ZU5ld0J1dHRvbiB8fCBoYXNDdXN0b21Mb2NhdGlvbikge1xyXG5cdFx0XHQvLyBQcmV2ZW50IGRlZmF1bHQgdG8gaGFuZGxlIG5vdGUgY3JlYXRpb24gb3Vyc2VsdmVzXHJcblx0XHRcdC8vIChXZSBtdXN0IGludGVyY2VwdCBpZiBsb2NhdGlvbiBpcyBzZXQsIGV2ZW4gaWYgXCJPcGVuIG5ldyBub3RlcyBkaXJlY3RseVwiIGlzIG9mZixcclxuXHRcdFx0Ly8gYmVjYXVzZSBCYXNlcyBtb2RhbCBkb2Vzbid0IHN1cHBvcnQgY3VzdG9tIGxvY2F0aW9ucylcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gSGFuZGxlIHRoZSBub3RlIGNyZWF0aW9uIGFzeW5jaHJvbm91c2x5XHJcblx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBsb2NhdGlvbklucHV0ID0gc2V0dGluZ3MubmV3Tm90ZUxvY2F0aW9uPy50cmltKCkgfHwgJyc7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSWYgbG9jYXRpb24gaXMgZW1wdHkgYW5kIFwiT3BlbiBuZXcgbm90ZXMgZGlyZWN0bHlcIiBpcyBvZmYsIHVzZSBPYnNpZGlhbidzIGRlZmF1bHRcclxuXHRcdFx0XHQvLyAoVGhpcyBjYXNlIHNob3VsZCBiZSByYXJlIHNpbmNlIHdlIG9ubHkgaW50ZXJjZXB0IGlmIGxvY2F0aW9uIGlzIHNldCBvciBvcHRpb24gaXMgb24pXHJcblx0XHRcdFx0aWYgKGxvY2F0aW9uSW5wdXQgPT09ICcnICYmICFzZXR0aW5ncy5jdXN0b21pemVOZXdCdXR0b24pIHtcclxuXHRcdFx0XHRcdC8vIFVzZSBPYnNpZGlhbidzIGRlZmF1bHQgbmV3IG5vdGUgbG9jYXRpb25cclxuXHRcdFx0XHRcdGNvbnN0IHZhdWx0Q29uZmlnID0gKGFwcC52YXVsdCBhcyB7IGNvbmZpZz86IHsgbmV3RmlsZUxvY2F0aW9uPzogc3RyaW5nOyBuZXdGaWxlRm9sZGVyUGF0aD86IHN0cmluZyB9IH0pLmNvbmZpZztcclxuXHRcdFx0XHRcdGNvbnN0IG5ld0ZpbGVMb2NhdGlvbiA9IHZhdWx0Q29uZmlnPy5uZXdGaWxlTG9jYXRpb24gfHwgJ2ZvbGRlcic7XHJcblx0XHRcdFx0XHRjb25zdCBuZXdGaWxlRm9sZGVyUGF0aCA9IHZhdWx0Q29uZmlnPy5uZXdGaWxlRm9sZGVyUGF0aCB8fCAnJztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0bGV0IGZpbGVQYXRoID0gJ1VudGl0bGVkLm1kJztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKG5ld0ZpbGVMb2NhdGlvbiA9PT0gJ2ZvbGRlcicgJiYgbmV3RmlsZUZvbGRlclBhdGgpIHtcclxuXHRcdFx0XHRcdFx0ZmlsZVBhdGggPSBgJHtuZXdGaWxlRm9sZGVyUGF0aH0vVW50aXRsZWQubWRgO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChuZXdGaWxlTG9jYXRpb24gPT09ICdjdXJyZW50Jykge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBhY3RpdmVGaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0XHRcdGlmIChhY3RpdmVGaWxlICYmIGFjdGl2ZUZpbGUucGFyZW50KSB7XHJcblx0XHRcdFx0XHRcdFx0ZmlsZVBhdGggPSBgJHthY3RpdmVGaWxlLnBhcmVudC5wYXRofS9VbnRpdGxlZC5tZGA7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAobmV3RmlsZUxvY2F0aW9uID09PSAncm9vdCcpIHtcclxuXHRcdFx0XHRcdFx0ZmlsZVBhdGggPSAnVW50aXRsZWQubWQnO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRjb25zdCBmaWxlID0gYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgJycpO1xyXG5cdFx0XHRcdFx0Ly8gT25seSBvcGVuIGRpcmVjdGx5IGlmIFwiT3BlbiBuZXcgbm90ZXMgZGlyZWN0bHlcIiBpcyBlbmFibGVkXHJcblx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuY3VzdG9taXplTmV3QnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGUucGF0aCwgJycsIGZhbHNlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSWYgbG9jYXRpb24gaXMgXCIvXCIgb3IganVzdCBzbGFzaGVzLCB1c2UgdmF1bHQgcm9vdFxyXG5cdFx0XHRcdGlmIChsb2NhdGlvbklucHV0ID09PSAnLycgfHwgbG9jYXRpb25JbnB1dC5yZXBsYWNlKC9cXC8vZywgJycpID09PSAnJykge1xyXG5cdFx0XHRcdFx0Y29uc3QgbmV3RmlsZSA9IGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoJ1VudGl0bGVkLm1kJywgJycpO1xyXG5cdFx0XHRcdFx0Ly8gT25seSBvcGVuIGRpcmVjdGx5IGlmIFwiT3BlbiBuZXcgbm90ZXMgZGlyZWN0bHlcIiBpcyBlbmFibGVkXHJcblx0XHRcdFx0XHRpZiAoc2V0dGluZ3MuY3VzdG9taXplTmV3QnV0dG9uKSB7XHJcblx0XHRcdFx0XHRcdGF3YWl0IGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KG5ld0ZpbGUucGF0aCwgJycsIGZhbHNlKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB1c2UgdGhlIHNwZWNpZmllZCBmb2xkZXJcclxuXHRcdFx0XHRjb25zdCBmb2xkZXJQYXRoID0gbG9jYXRpb25JbnB1dC5yZXBsYWNlKC9eXFwvK3xcXC8rJC9nLCAnJyk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0bGV0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCFmb2xkZXIgfHwgISgnY2hpbGRyZW4nIGluIGZvbGRlcikpIHtcclxuXHRcdFx0XHRcdGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XHJcblx0XHRcdFx0XHRmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZm9sZGVyICYmICdjaGlsZHJlbicgaW4gZm9sZGVyKSB7XHJcblx0XHRcdFx0XHRjb25zdCBuZXdGaWxlID0gYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShgJHtmb2xkZXJQYXRofS9VbnRpdGxlZC5tZGAsICcnKTtcclxuXHRcdFx0XHRcdC8vIE9ubHkgb3BlbiBkaXJlY3RseSBpZiBcIk9wZW4gbmV3IG5vdGVzIGRpcmVjdGx5XCIgaXMgZW5hYmxlZFxyXG5cdFx0XHRcdFx0aWYgKHNldHRpbmdzLmN1c3RvbWl6ZU5ld0J1dHRvbikge1xyXG5cdFx0XHRcdFx0XHRhd2FpdCBhcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChuZXdGaWxlLnBhdGgsICcnLCBmYWxzZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KSgpLmNhdGNoKChlcnJvcikgPT4ge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1tDTVNdIEVycm9yIGNyZWF0aW5nIG5ldyBub3RlOicsIGVycm9yKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gQWRkIGV2ZW50IGxpc3RlbmVyIHRvIGRvY3VtZW50IHdpdGggY2FwdHVyZSBwaGFzZSB0byBpbnRlcmNlcHQgYmVmb3JlIEJhc2VzXHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnRlcmNlcHROZXdCdXR0b24gYXMgRXZlbnRMaXN0ZW5lciwgdHJ1ZSk7XHJcblx0XHJcblx0Ly8gQWxzbyB0cnkgdG8gaW50ZXJjZXB0IG9uIHRoZSBidXR0b24gZGlyZWN0bHkgd2hlbiBpdCBhcHBlYXJzXHJcblx0Y29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XHJcblx0XHRjb25zdCBidXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhc2VzLXRvb2xiYXItbmV3LWl0ZW0tbWVudSwgLmJhc2VzLXRvb2xiYXItbmV3LWl0ZW0tbWVudSAudGV4dC1pY29uLWJ1dHRvbiwgW2RhdGEtYWN0aW9uPVwibmV3LWl0ZW1cIl0nKTtcclxuXHRcdGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uRWwpID0+IHtcclxuXHRcdFx0Y29uc3QgYnV0dG9uV2l0aEZsYWcgPSBidXR0b25FbCBhcyB1bmtub3duIGFzIHsgX19jbXNJbnRlcmNlcHRlZD86IGJvb2xlYW4gfTtcclxuXHRcdFx0aWYgKCFidXR0b25XaXRoRmxhZy5fX2Ntc0ludGVyY2VwdGVkKSB7XHJcblx0XHRcdFx0YnV0dG9uV2l0aEZsYWcuX19jbXNJbnRlcmNlcHRlZCA9IHRydWU7XHJcblx0XHRcdFx0YnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnRlcmNlcHROZXdCdXR0b24gYXMgRXZlbnRMaXN0ZW5lciwgdHJ1ZSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0pO1xyXG5cclxuXHRvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xyXG5cdFxyXG5cdC8vIENoZWNrIGltbWVkaWF0ZWx5XHJcblx0Y29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXNlcy10b29sYmFyLW5ldy1pdGVtLW1lbnUsIC5iYXNlcy10b29sYmFyLW5ldy1pdGVtLW1lbnUgLnRleHQtaWNvbi1idXR0b24sIFtkYXRhLWFjdGlvbj1cIm5ldy1pdGVtXCJdJyk7XHJcblx0YnV0dG9ucy5mb3JFYWNoKChidXR0b25FbCkgPT4ge1xyXG5cdFx0Y29uc3QgYnV0dG9uV2l0aEZsYWcgPSBidXR0b25FbCBhcyB1bmtub3duIGFzIHsgX19jbXNJbnRlcmNlcHRlZD86IGJvb2xlYW4gfTtcclxuXHRcdGlmICghYnV0dG9uV2l0aEZsYWcuX19jbXNJbnRlcmNlcHRlZCkge1xyXG5cdFx0XHRidXR0b25XaXRoRmxhZy5fX2Ntc0ludGVyY2VwdGVkID0gdHJ1ZTtcclxuXHRcdFx0YnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbnRlcmNlcHROZXdCdXR0b24gYXMgRXZlbnRMaXN0ZW5lciwgdHJ1ZSk7XHJcblx0XHR9XHJcblx0fSk7XHJcblx0XHJcblx0Ly8gUmVnaXN0ZXIgY2xlYW51cFxyXG5cdHJlZ2lzdGVyQ2xlYW51cCgoKSA9PiB7XHJcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGludGVyY2VwdE5ld0J1dHRvbiBhcyBFdmVudExpc3RlbmVyLCB0cnVlKTtcclxuXHRcdG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHR9KTtcclxufVxyXG5cclxuXHJcbiIsICIvKipcclxuICogUHJvcGVydHkgVG9nZ2xlIEhhbmRsZXJcclxuICogSGFuZGxlcyB0b2dnbGluZyBwcm9wZXJ0aWVzIG9uIGZpbGVzIChpbmNsdWRpbmcgZHJhZnQgc3RhdHVzKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IHJlYWRDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3NoYXJlZC9zZXR0aW5ncy1zY2hlbWEnO1xyXG5pbXBvcnQgdHlwZSB7IEJhc2VzQ01TU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIgfSBmcm9tICcuL2Zyb250bWF0dGVyLWhlbHBlcic7XHJcblxyXG5pbnRlcmZhY2UgQmFzZXNDb25maWcge1xyXG5cdGdldChrZXk6IHN0cmluZyk6IHVua25vd247XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eVRvZ2dsZUhhbmRsZXIge1xyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0cHJpdmF0ZSBhcHA6IEFwcCxcclxuXHRcdHByaXZhdGUgY29uZmlnOiBCYXNlc0NvbmZpZyxcclxuXHRcdHByaXZhdGUgcGx1Z2luU2V0dGluZ3M6IEJhc2VzQ01TU2V0dGluZ3MsXHJcblx0XHRwcml2YXRlIG9uUmVmcmVzaDogKCkgPT4gdm9pZFxyXG5cdCkge31cclxuXHJcblx0YXN5bmMgaGFuZGxlUHJvcGVydHlUb2dnbGUocGF0aDogc3RyaW5nLCBwcm9wZXJ0eTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bik6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcclxuXHRcdFx0aWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0Ly8gU3RyaXAgXCJub3RlLlwiIHByZWZpeCBpZiBwcmVzZW50IChCYXNlcyB1c2VzIFwibm90ZS5wcm9wZXJ0eVwiIGJ1dCBmcm9udG1hdHRlciB1c2VzIGp1c3QgXCJwcm9wZXJ0eVwiKVxyXG5cdFx0XHRjb25zdCBjbGVhblByb3BlcnR5ID0gcHJvcGVydHkuc3RhcnRzV2l0aCgnbm90ZS4nKSA/IHByb3BlcnR5LnN1YnN0cmluZyg1KSA6IHByb3BlcnR5O1xyXG5cclxuXHRcdFx0Ly8gUmVhZCBzZXR0aW5ncyB0byBjaGVjayBpZiB0aGlzIGlzIHRoZSBkcmFmdCBwcm9wZXJ0eVxyXG5cdFx0XHRjb25zdCBzZXR0aW5ncyA9IHJlYWRDTVNTZXR0aW5ncyhcclxuXHRcdFx0XHR0aGlzLmNvbmZpZyxcclxuXHRcdFx0XHR0aGlzLnBsdWdpblNldHRpbmdzXHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIHRoZSBkcmFmdCBzdGF0dXMgcHJvcGVydHlcclxuXHRcdFx0Y29uc3QgaXNEcmFmdFByb3BlcnR5ID0gc2V0dGluZ3Muc2hvd0RyYWZ0U3RhdHVzICYmIGNsZWFuUHJvcGVydHkgPT09ICdkcmFmdCc7XHJcblx0XHRcdGxldCBzaG91bGRSZWZyZXNoID0gZmFsc2U7XHJcblxyXG5cdFx0XHRpZiAoaXNEcmFmdFByb3BlcnR5KSB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdXNpbmcgZmlsZW5hbWUgcHJlZml4IG1vZGVcclxuXHRcdFx0XHRpZiAoc2V0dGluZ3MuZHJhZnRTdGF0dXNVc2VGaWxlbmFtZVByZWZpeCkge1xyXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHVzZSBmaWxlbmFtZS1iYXNlZCBkZXRlY3Rpb24gd2hlbiB0aGlzIHNldHRpbmcgaXMgZW5hYmxlZFxyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBmaWxlLmJhc2VuYW1lOyAvLyBiYXNlbmFtZSBleGNsdWRlcyBleHRlbnNpb25cclxuXHRcdFx0XHRcdGNvbnN0IHN0YXJ0c1dpdGhVbmRlcnNjb3JlID0gZmlsZU5hbWUuc3RhcnRzV2l0aCgnXycpO1xyXG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFBhdGggPSBmaWxlLnBhdGg7XHJcblx0XHRcdFx0XHRjb25zdCBwYXRoUGFydHMgPSBjdXJyZW50UGF0aC5zcGxpdCgnLycpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBUb2dnbGUgYmFzZWQgb24gZGVzaXJlZCBzdGF0ZTogaWYgdmFsdWUgaXMgdHJ1ZSAoZHJhZnQpLCBlbnN1cmUgdW5kZXJzY29yZTsgaWYgZmFsc2UgKHB1Ymxpc2hlZCksIHJlbW92ZSBpdFxyXG5cdFx0XHRcdFx0aWYgKHZhbHVlID09PSB0cnVlKSB7XHJcblx0XHRcdFx0XHRcdC8vIFRvZ2dsaW5nIHRvIGRyYWZ0IC0gYWRkIHVuZGVyc2NvcmUgaWYgbm90IHByZXNlbnRcclxuXHRcdFx0XHRcdFx0aWYgKCFzdGFydHNXaXRoVW5kZXJzY29yZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld05hbWUgPSBgXyR7ZmlsZU5hbWV9JHtmaWxlLmV4dGVuc2lvbiA/IGAuJHtmaWxlLmV4dGVuc2lvbn1gIDogJyd9YDtcclxuXHRcdFx0XHRcdFx0XHRwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdID0gbmV3TmFtZTtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXdQYXRoID0gcGF0aFBhcnRzLmpvaW4oJy8nKTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xyXG5cdFx0XHRcdFx0XHRcdHNob3VsZFJlZnJlc2ggPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHQvLyBUb2dnbGluZyB0byBwdWJsaXNoZWQgLSByZW1vdmUgdW5kZXJzY29yZSBpZiBwcmVzZW50XHJcblx0XHRcdFx0XHRcdGlmIChzdGFydHNXaXRoVW5kZXJzY29yZSkge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG5ld05hbWUgPSBmaWxlTmFtZS5zdWJzdHJpbmcoMSkgKyAoZmlsZS5leHRlbnNpb24gPyBgLiR7ZmlsZS5leHRlbnNpb259YCA6ICcnKTtcclxuXHRcdFx0XHRcdFx0XHRwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdID0gbmV3TmFtZTtcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBuZXdQYXRoID0gcGF0aFBhcnRzLmpvaW4oJy8nKTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIG5ld1BhdGgpO1xyXG5cdFx0XHRcdFx0XHRcdHNob3VsZFJlZnJlc2ggPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFVzZSBwcm9wZXJ0eS1iYXNlZCBkZXRlY3Rpb24gKGZyb250bWF0dGVyKVxyXG5cdFx0XHRcdFx0Y29uc3QgY2xlYW5Db25maWdQcm9wZXJ0eSA9IHNldHRpbmdzLmRyYWZ0U3RhdHVzUHJvcGVydHkgJiYgc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS50cmltKClcclxuXHRcdFx0XHRcdFx0PyAoc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS5zdGFydHNXaXRoKCdub3RlLicpIFxyXG5cdFx0XHRcdFx0XHRcdD8gc2V0dGluZ3MuZHJhZnRTdGF0dXNQcm9wZXJ0eS5zdWJzdHJpbmcoNSkgXHJcblx0XHRcdFx0XHRcdFx0OiBzZXR0aW5ncy5kcmFmdFN0YXR1c1Byb3BlcnR5KVxyXG5cdFx0XHRcdFx0XHQ6ICdkcmFmdCc7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIodGhpcy5hcHAsIGZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xyXG5cdFx0XHRcdFx0XHRmcm9udG1hdHRlcltjbGVhbkNvbmZpZ1Byb3BlcnR5XSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRzaG91bGRSZWZyZXNoID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gTm9ybWFsIHByb3BlcnR5IHRvZ2dsZSAtIHVwZGF0ZSBmcm9udG1hdHRlclxyXG5cdFx0XHRcdGF3YWl0IHByb2Nlc3NGaWxlRnJvbnRNYXR0ZXIodGhpcy5hcHAsIGZpbGUsIChmcm9udG1hdHRlcikgPT4ge1xyXG5cdFx0XHRcdFx0ZnJvbnRtYXR0ZXJbY2xlYW5Qcm9wZXJ0eV0gPSB2YWx1ZTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRzaG91bGRSZWZyZXNoID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gT25seSByZWZyZXNoIGlmIHdlIGFjdHVhbGx5IG1hZGUgYSBjaGFuZ2VcclxuXHRcdFx0aWYgKHNob3VsZFJlZnJlc2gpIHtcclxuXHRcdFx0XHQvLyBXYWl0IGZvciBtZXRhZGF0YSBjYWNoZSB0byB1cGRhdGUsIHRoZW4gcmVmcmVzaCB2aWV3XHJcblx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuXHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLm9uUmVmcmVzaCgpO1xyXG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlZnJlc2hpbmcgdmlldyBhZnRlciBwcm9wZXJ0eSB0b2dnbGU6JywgZXJyb3IpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9LCAxMDApO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciB0b2dnbGluZyBwcm9wZXJ0eTonLCBlcnJvcik7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5cclxuIiwgIi8qKlxyXG4gKiBTY3JvbGwgYW5kIExheW91dCBNYW5hZ2VyXHJcbiAqIEhhbmRsZXMgaW5maW5pdGUgc2Nyb2xsIGFuZCByZXNwb25zaXZlIGdyaWQgbGF5b3V0XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgdHlwZSB7IENNU1NldHRpbmdzIH0gZnJvbSAnLi4vc2hhcmVkL2RhdGEtdHJhbnNmb3JtJztcclxuaW1wb3J0IHsgcmVhZENNU1NldHRpbmdzIH0gZnJvbSAnLi4vc2hhcmVkL3NldHRpbmdzLXNjaGVtYSc7XHJcbmltcG9ydCB0eXBlIHsgQmFzZXNDTVNTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbmludGVyZmFjZSBCYXNlc0NvbmZpZyB7XHJcblx0Z2V0KGtleTogc3RyaW5nKTogdW5rbm93bjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNjcm9sbExheW91dE1hbmFnZXIge1xyXG5cdHByaXZhdGUgc2Nyb2xsTGlzdGVuZXI6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgc2Nyb2xsVGhyb3R0bGVUaW1lb3V0OiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHJlc2l6ZU9ic2VydmVyOiBSZXNpemVPYnNlcnZlciB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgd2luZG93UmVzaXplSGFuZGxlcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XHJcblx0cHJpdmF0ZSBpc0xvYWRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRwcml2YXRlIGRpc3BsYXllZENvdW50OiBudW1iZXIgPSA1MDtcclxuXHRwcml2YXRlIHRvdGFsRW50cmllczogbnVtYmVyID0gMDtcclxuXHRwcml2YXRlIGNvbmZpZzogQmFzZXNDb25maWc7XHJcblx0cHJpdmF0ZSBjb25maWdQb2xsSW50ZXJ2YWw6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgbGFzdENhcmRTaXplOiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIGxhc3RJbWFnZUFzcGVjdFJhdGlvOiBudW1iZXIgfCBudWxsID0gbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuXHRcdHByaXZhdGUgYXBwOiBBcHAsXHJcblx0XHRjb25maWc6IEJhc2VzQ29uZmlnLFxyXG5cdFx0cHJpdmF0ZSBwbHVnaW5TZXR0aW5nczogQmFzZXNDTVNTZXR0aW5ncyxcclxuXHRcdHByaXZhdGUgb25Mb2FkTW9yZTogKCkgPT4gdm9pZCxcclxuXHRcdHByaXZhdGUgcmVnaXN0ZXJDbGVhbnVwOiAoY2xlYW51cDogKCkgPT4gdm9pZCkgPT4gdm9pZFxyXG5cdCkge1xyXG5cdFx0dGhpcy5jb25maWcgPSBjb25maWc7XHJcblx0XHRjb25zdCBpc01vYmlsZSA9ICh0aGlzLmFwcCBhcyB7IGlzTW9iaWxlPzogYm9vbGVhbiB9KS5pc01vYmlsZSA/PyBmYWxzZTtcclxuXHRcdHRoaXMuZGlzcGxheWVkQ291bnQgPSBpc01vYmlsZSA/IDI1IDogNTA7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGUgdGhlIGNvbmZpZyByZWZlcmVuY2UgKHVzZWZ1bCB3aGVuIGNvbmZpZyBiZWNvbWVzIGF2YWlsYWJsZSBhZnRlciBjb25zdHJ1Y3Rpb24pXHJcblx0ICovXHJcblx0dXBkYXRlQ29uZmlnKGNvbmZpZzogQmFzZXNDb25maWcpOiB2b2lkIHtcclxuXHRcdHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG5cdH1cclxuXHJcblx0c2V0RGlzcGxheWVkQ291bnQoY291bnQ6IG51bWJlcik6IHZvaWQge1xyXG5cdFx0dGhpcy5kaXNwbGF5ZWRDb3VudCA9IGNvdW50O1xyXG5cdH1cclxuXHJcblx0Z2V0RGlzcGxheWVkQ291bnQoKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiB0aGlzLmRpc3BsYXllZENvdW50O1xyXG5cdH1cclxuXHJcblx0c2V0SXNMb2FkaW5nKGxvYWRpbmc6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdHRoaXMuaXNMb2FkaW5nID0gbG9hZGluZztcclxuXHR9XHJcblxyXG5cdHNldHVwSW5maW5pdGVTY3JvbGwodG90YWxFbnRyaWVzOiBudW1iZXIpOiB2b2lkIHtcclxuXHRcdHRoaXMudG90YWxFbnRyaWVzID0gdG90YWxFbnRyaWVzO1xyXG5cdFx0XHJcblx0XHQvLyBDbGVhbiB1cCBleGlzdGluZyBsaXN0ZW5lclxyXG5cdFx0aWYgKHRoaXMuc2Nyb2xsTGlzdGVuZXIpIHtcclxuXHRcdFx0dGhpcy5jb250YWluZXJFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnNjcm9sbExpc3RlbmVyKTtcclxuXHRcdFx0dGhpcy5zY3JvbGxMaXN0ZW5lciA9IG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2tpcCBpZiBhbGwgaXRlbXMgYWxyZWFkeSBkaXNwbGF5ZWRcclxuXHRcdGlmICh0aGlzLmRpc3BsYXllZENvdW50ID49IHRvdGFsRW50cmllcykge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIHNjcm9sbCBoYW5kbGVyIHdpdGggdGhyb3R0bGluZ1xyXG5cdFx0dGhpcy5zY3JvbGxMaXN0ZW5lciA9ICgpID0+IHtcclxuXHRcdFx0Ly8gVGhyb3R0bGU6IHNraXAgaWYgY29vbGRvd24gYWN0aXZlXHJcblx0XHRcdGlmICh0aGlzLnNjcm9sbFRocm90dGxlVGltZW91dCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU2tpcCBpZiBhbHJlYWR5IGxvYWRpbmdcclxuXHRcdFx0aWYgKHRoaXMuaXNMb2FkaW5nKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDYWxjdWxhdGUgZGlzdGFuY2UgZnJvbSBib3R0b21cclxuXHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gdGhpcy5jb250YWluZXJFbC5zY3JvbGxUb3A7XHJcblx0XHRcdGNvbnN0IHNjcm9sbEhlaWdodCA9IHRoaXMuY29udGFpbmVyRWwuc2Nyb2xsSGVpZ2h0O1xyXG5cdFx0XHRjb25zdCBjbGllbnRIZWlnaHQgPSB0aGlzLmNvbnRhaW5lckVsLmNsaWVudEhlaWdodDtcclxuXHRcdFx0Y29uc3QgZGlzdGFuY2VGcm9tQm90dG9tID0gc2Nyb2xsSGVpZ2h0IC0gKHNjcm9sbFRvcCArIGNsaWVudEhlaWdodCk7XHJcblxyXG5cdFx0XHQvLyBEeW5hbWljIHRocmVzaG9sZCBiYXNlZCBvbiB2aWV3cG9ydCBhbmQgZGV2aWNlXHJcblx0XHRcdGNvbnN0IGlzTW9iaWxlID0gKHRoaXMuYXBwIGFzIHsgaXNNb2JpbGU/OiBib29sZWFuIH0pLmlzTW9iaWxlID8/IGZhbHNlO1xyXG5cdFx0XHRjb25zdCB2aWV3cG9ydE11bHRpcGxpZXIgPSBpc01vYmlsZSA/IDEgOiAyO1xyXG5cdFx0XHRjb25zdCB0aHJlc2hvbGQgPSBjbGllbnRIZWlnaHQgKiB2aWV3cG9ydE11bHRpcGxpZXI7XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiBzaG91bGQgbG9hZCBtb3JlXHJcblx0XHRcdGlmIChkaXN0YW5jZUZyb21Cb3R0b20gPCB0aHJlc2hvbGQgJiYgdGhpcy5kaXNwbGF5ZWRDb3VudCA8IHRvdGFsRW50cmllcykge1xyXG5cdFx0XHRcdHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcclxuXHRcdFx0XHRjb25zdCBiYXRjaFNpemUgPSA1MDtcclxuXHRcdFx0XHR0aGlzLmRpc3BsYXllZENvdW50ID0gTWF0aC5taW4odGhpcy5kaXNwbGF5ZWRDb3VudCArIGJhdGNoU2l6ZSwgdG90YWxFbnRyaWVzKTtcclxuXHRcdFx0XHQvLyBDYWxsIG9uTG9hZE1vcmUgd2hpY2ggd2lsbCB0cmlnZ2VyIG9uRGF0YVVwZGF0ZWRcclxuXHRcdFx0XHQvLyBvbkRhdGFVcGRhdGVkIHdpbGwgdGhlbiBjYWxsIHNldHVwSW5maW5pdGVTY3JvbGwgYWdhaW4gd2l0aCB1cGRhdGVkIGNvdW50XHJcblx0XHRcdFx0dGhpcy5vbkxvYWRNb3JlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFN0YXJ0IHRocm90dGxlIGNvb2xkb3duXHJcblx0XHRcdHRoaXMuc2Nyb2xsVGhyb3R0bGVUaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuc2Nyb2xsVGhyb3R0bGVUaW1lb3V0ID0gbnVsbDtcclxuXHRcdFx0fSwgMTAwKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gQXR0YWNoIGxpc3RlbmVyXHJcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsTGlzdGVuZXIpO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIGNsZWFudXBcclxuXHRcdHRoaXMucmVnaXN0ZXJDbGVhbnVwKCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuc2Nyb2xsTGlzdGVuZXIpIHtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsTGlzdGVuZXIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICh0aGlzLnNjcm9sbFRocm90dGxlVGltZW91dCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zY3JvbGxUaHJvdHRsZVRpbWVvdXQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHNldHVwUmVzaXplT2JzZXJ2ZXIoKTogdm9pZCB7XHJcblx0XHQvLyBPbmx5IHNldCB1cCBvbmNlIC0gYnV0IG5vdyB3ZSBqdXN0IG5lZWQgdG8gc2V0IHRoZSBjYXJkIG1pbiB3aWR0aFxyXG5cdFx0Ly8gQ1NTIEdyaWQncyBhdXRvLWZpbGwgd2lsbCBoYW5kbGUgY29sdW1uIHNuYXBwaW5nIGF1dG9tYXRpY2FsbHlcclxuXHRcdGlmICh0aGlzLnJlc2l6ZU9ic2VydmVyKSB7XHJcblx0XHRcdHJldHVybjsgLy8gQWxyZWFkeSBzZXQgdXBcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDcmVhdGUgdGhlIHVwZGF0ZSBmdW5jdGlvbiAtIGp1c3Qgc2V0IGNhcmQgbWluIHdpZHRoLCBDU1MgR3JpZCBoYW5kbGVzIHRoZSByZXN0XHJcblx0XHRjb25zdCB1cGRhdGVHcmlkID0gKCkgPT4ge1xyXG5cdFx0XHQvLyBHdWFyZDogZW5zdXJlIGNvbmZpZyBleGlzdHMgYW5kIGhhcyBnZXQgbWV0aG9kIGJlZm9yZSB1c2luZyBpdFxyXG5cdFx0XHRpZiAoIXRoaXMuY29uZmlnIHx8IHR5cGVvZiB0aGlzLmNvbmZpZy5nZXQgIT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRyZXR1cm47IC8vIENvbmZpZyBub3QgcmVhZHkgeWV0LCBza2lwIHVwZGF0ZVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zdCBjdXJyZW50U2V0dGluZ3MgPSByZWFkQ01TU2V0dGluZ3MoXHJcblx0XHRcdFx0dGhpcy5jb25maWcsXHJcblx0XHRcdFx0dGhpcy5wbHVnaW5TZXR0aW5nc1xyXG5cdFx0XHQpO1xyXG5cdFx0XHRjb25zdCBjYXJkTWluV2lkdGggPSBjdXJyZW50U2V0dGluZ3MuY2FyZFNpemU7XHJcblx0XHRcdGNvbnN0IGltYWdlQXNwZWN0UmF0aW8gPSBjdXJyZW50U2V0dGluZ3MuaW1hZ2VBc3BlY3RSYXRpbztcclxuXHJcblx0XHRcdC8vIFNldCBDU1MgdmFyaWFibGVzIG9uIGNvbnRhaW5lciAtIENTUyBHcmlkIGF1dG8tZmlsbCBoYW5kbGVzIGNvbHVtbiBzbmFwcGluZ1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLnN0eWxlLnNldFByb3BlcnR5KCctLWNhcmQtbWluLXdpZHRoJywgYCR7Y2FyZE1pbldpZHRofXB4YCk7XHJcblx0XHRcdHRoaXMuY29udGFpbmVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tYmFzZXMtY21zLWltYWdlLWFzcGVjdC1yYXRpbycsIFN0cmluZyhpbWFnZUFzcGVjdFJhdGlvKSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBUcmFjayBsYXN0IHZhbHVlcyBmb3IgcG9sbGluZ1xyXG5cdFx0XHR0aGlzLmxhc3RDYXJkU2l6ZSA9IGNhcmRNaW5XaWR0aDtcclxuXHRcdFx0dGhpcy5sYXN0SW1hZ2VBc3BlY3RSYXRpbyA9IGltYWdlQXNwZWN0UmF0aW87XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFNldCB1cCBSZXNpemVPYnNlcnZlciB0byBjYWxsIHVwZGF0ZUdyaWQgd2hlbiBjb250YWluZXIgcmVzaXplc1xyXG5cdFx0dGhpcy5yZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcih1cGRhdGVHcmlkKTtcclxuXHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmNvbnRhaW5lckVsKTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2FsbCB1cGRhdGVHcmlkIGltbWVkaWF0ZWx5IHRvIHNldCBpbml0aWFsIHZhbHVlc1xyXG5cdFx0dXBkYXRlR3JpZCgpO1xyXG5cdFx0XHJcblx0XHQvLyBTZXQgdXAgcG9sbGluZyB0byBkZXRlY3QgY29uZmlnIGNoYW5nZXMgKGZvciByZWFsLXRpbWUgdXBkYXRlcyB3aGVuIGNhcmQgc2l6ZSBjaGFuZ2VzKVxyXG5cdFx0Ly8gUG9sbCBldmVyeSAxMDBtcyB0byBjaGVjayBpZiBjYXJkU2l6ZSBvciBpbWFnZUFzcGVjdFJhdGlvIGhhcyBjaGFuZ2VkXHJcblx0XHR0aGlzLmNvbmZpZ1BvbGxJbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB7XHJcblx0XHRcdGlmICghdGhpcy5jb25maWcgfHwgdHlwZW9mIHRoaXMuY29uZmlnLmdldCAhPT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdHJldHVybjsgLy8gQ29uZmlnIG5vdCByZWFkeSB5ZXQsIHNraXAgY2hlY2tcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgY3VycmVudFNldHRpbmdzID0gcmVhZENNU1NldHRpbmdzKFxyXG5cdFx0XHRcdHRoaXMuY29uZmlnLFxyXG5cdFx0XHRcdHRoaXMucGx1Z2luU2V0dGluZ3NcclxuXHRcdFx0KTtcclxuXHRcdFx0Y29uc3QgY3VycmVudENhcmRTaXplID0gY3VycmVudFNldHRpbmdzLmNhcmRTaXplO1xyXG5cdFx0XHRjb25zdCBjdXJyZW50SW1hZ2VBc3BlY3RSYXRpbyA9IGN1cnJlbnRTZXR0aW5ncy5pbWFnZUFzcGVjdFJhdGlvO1xyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgY2FyZFNpemUgb3IgaW1hZ2VBc3BlY3RSYXRpbyBoYXMgY2hhbmdlZFxyXG5cdFx0XHRpZiAodGhpcy5sYXN0Q2FyZFNpemUgIT09IGN1cnJlbnRDYXJkU2l6ZSB8fCB0aGlzLmxhc3RJbWFnZUFzcGVjdFJhdGlvICE9PSBjdXJyZW50SW1hZ2VBc3BlY3RSYXRpbykge1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSBncmlkIGxheW91dCBpbW1lZGlhdGVseSB3aGVuIHNldHRpbmdzIGNoYW5nZVxyXG5cdFx0XHRcdHRoaXMuY29udGFpbmVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FyZC1taW4td2lkdGgnLCBgJHtjdXJyZW50Q2FyZFNpemV9cHhgKTtcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lckVsLnN0eWxlLnNldFByb3BlcnR5KCctLWJhc2VzLWNtcy1pbWFnZS1hc3BlY3QtcmF0aW8nLCBTdHJpbmcoY3VycmVudEltYWdlQXNwZWN0UmF0aW8pKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBVcGRhdGUgdHJhY2tlZCB2YWx1ZXNcclxuXHRcdFx0XHR0aGlzLmxhc3RDYXJkU2l6ZSA9IGN1cnJlbnRDYXJkU2l6ZTtcclxuXHRcdFx0XHR0aGlzLmxhc3RJbWFnZUFzcGVjdFJhdGlvID0gY3VycmVudEltYWdlQXNwZWN0UmF0aW87XHJcblx0XHRcdH1cclxuXHRcdH0sIDEwMCk7XHJcblx0XHRcclxuXHRcdC8vIFJlZ2lzdGVyIGNsZWFudXAgZm9yIHBvbGxpbmcgaW50ZXJ2YWxcclxuXHRcdHRoaXMucmVnaXN0ZXJDbGVhbnVwKCgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuY29uZmlnUG9sbEludGVydmFsICE9PSBudWxsKSB7XHJcblx0XHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5jb25maWdQb2xsSW50ZXJ2YWwpO1xyXG5cdFx0XHRcdHRoaXMuY29uZmlnUG9sbEludGVydmFsID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVHcmlkTGF5b3V0KHNldHRpbmdzOiBDTVNTZXR0aW5ncyk6IHZvaWQge1xyXG5cdFx0Ly8gSnVzdCBzZXQgdGhlIGNhcmQgbWluIHdpZHRoIC0gQ1NTIEdyaWQgYXV0by1maWxsIGhhbmRsZXMgY29sdW1uIHNuYXBwaW5nIGF1dG9tYXRpY2FsbHlcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuc3R5bGUuc2V0UHJvcGVydHkoJy0tY2FyZC1taW4td2lkdGgnLCBgJHtzZXR0aW5ncy5jYXJkU2l6ZX1weGApO1xyXG5cdFx0dGhpcy5jb250YWluZXJFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1iYXNlcy1jbXMtaW1hZ2UtYXNwZWN0LXJhdGlvJywgU3RyaW5nKHNldHRpbmdzLmltYWdlQXNwZWN0UmF0aW8pKTtcclxuXHRcdFxyXG5cdFx0Ly8gVXBkYXRlIHRyYWNrZWQgdmFsdWVzIHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgcG9sbGluZyB0cmlnZ2Vyc1xyXG5cdFx0dGhpcy5sYXN0Q2FyZFNpemUgPSBzZXR0aW5ncy5jYXJkU2l6ZTtcclxuXHRcdHRoaXMubGFzdEltYWdlQXNwZWN0UmF0aW8gPSBzZXR0aW5ncy5pbWFnZUFzcGVjdFJhdGlvO1xyXG5cdH1cclxuXHJcblx0Y2xlYW51cCgpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLnJlc2l6ZU9ic2VydmVyKSB7XHJcblx0XHRcdHRoaXMucmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0XHR0aGlzLnJlc2l6ZU9ic2VydmVyID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLndpbmRvd1Jlc2l6ZUhhbmRsZXIpIHtcclxuXHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMud2luZG93UmVzaXplSGFuZGxlcik7XHJcblx0XHRcdHRoaXMud2luZG93UmVzaXplSGFuZGxlciA9IG51bGw7XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5zY3JvbGxMaXN0ZW5lcikge1xyXG5cdFx0XHR0aGlzLmNvbnRhaW5lckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsTGlzdGVuZXIpO1xyXG5cdFx0XHR0aGlzLnNjcm9sbExpc3RlbmVyID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLnNjcm9sbFRocm90dGxlVGltZW91dCAhPT0gbnVsbCkge1xyXG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuc2Nyb2xsVGhyb3R0bGVUaW1lb3V0KTtcclxuXHRcdFx0dGhpcy5zY3JvbGxUaHJvdHRsZVRpbWVvdXQgPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuY29uZmlnUG9sbEludGVydmFsICE9PSBudWxsKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuY29uZmlnUG9sbEludGVydmFsKTtcclxuXHRcdFx0dGhpcy5jb25maWdQb2xsSW50ZXJ2YWwgPSBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuXHJcbiIsICIvKipcclxuICogVmlldyBTd2l0Y2ggTGlzdGVuZXJcclxuICogRGV0ZWN0cyB3aGVuIHRoZSB2aWV3IGlzIHN3aXRjaGVkIGF3YXkgYW5kIGNsZWFycyBzZWxlY3Rpb25cclxuICovXHJcblxyXG5pbXBvcnQgdHlwZSBCYXNlc0NNU1BsdWdpbiBmcm9tICcuLi9tYWluJztcclxuXHJcbmV4cG9ydCBjbGFzcyBWaWV3U3dpdGNoTGlzdGVuZXIge1xyXG5cdHByaXZhdGUgbXV0YXRpb25PYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlciB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgYmFja3VwSW50ZXJ2YWw6IG51bWJlciB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgY3VycmVudEJhc2VJZGVudGlmaWVyOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuXHRcdHByaXZhdGUgcGx1Z2luOiBCYXNlc0NNU1BsdWdpbixcclxuXHRcdHByaXZhdGUgY29uZmlnOiB7IGdldE5hbWU/OiAoKSA9PiBzdHJpbmc7IG5hbWU/OiBzdHJpbmcgfSxcclxuXHRcdHByaXZhdGUgY29udHJvbGxlcjogeyBnZXRCYXNlTmFtZT86ICgpID0+IHN0cmluZzsgYmFzZU5hbWU/OiBzdHJpbmcgfSB8IHVuZGVmaW5lZCxcclxuXHRcdHByaXZhdGUgZGF0YTogeyBiYXNlTmFtZT86IHN0cmluZyB9IHwgdW5kZWZpbmVkLFxyXG5cdFx0cHJpdmF0ZSBzZWxlY3RlZEZpbGVzOiBTZXQ8c3RyaW5nPixcclxuXHRcdHByaXZhdGUgb25TZWxlY3Rpb25DbGVhcmVkOiAoKSA9PiB2b2lkLFxyXG5cdFx0cHJpdmF0ZSByZWdpc3RlckNsZWFudXA6IChjbGVhbnVwOiAoKSA9PiB2b2lkKSA9PiB2b2lkXHJcblx0KSB7fVxyXG5cclxuXHRzZXR1cChoYW5kbGVTZWxlY3Rpb25DaGFuZ2U6IChwYXRoOiBzdHJpbmcsIHNlbGVjdGVkOiBib29sZWFuKSA9PiB2b2lkKTogKHBhdGg6IHN0cmluZywgc2VsZWN0ZWQ6IGJvb2xlYW4pID0+IHZvaWQge1xyXG5cdFx0Y29uc3Qgc3RhcnRPYnNlcnZpbmcgPSAoKSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLm11dGF0aW9uT2JzZXJ2ZXIpIHJldHVybjsgLy8gQWxyZWFkeSBvYnNlcnZpbmdcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMubXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcclxuXHRcdFx0XHQvLyBPbmx5IGNoZWNrIGlmIHdlIGhhdmUgc2VsZWN0aW9uXHJcblx0XHRcdFx0aWYgKHRoaXMuc2VsZWN0ZWRGaWxlcy5zaXplID09PSAwKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIENoZWNrIGlmIGFueSBjYXJkcyB3ZXJlIHJlbW92ZWRcclxuXHRcdFx0XHRmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykge1xyXG5cdFx0XHRcdFx0aWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnICYmIG11dGF0aW9uLnJlbW92ZWROb2Rlcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRcdC8vIENhcmRzIHdlcmUgcmVtb3ZlZCAtIGNoZWNrIGlmIG91ciBzZWxlY3RlZCBjYXJkcyBhcmUgZ29uZVxyXG5cdFx0XHRcdFx0XHRsZXQgZm91bmRTZWxlY3RlZENhcmQgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBwYXRoIG9mIHRoaXMuc2VsZWN0ZWRGaWxlcykge1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGNhcmQgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXBhdGg9XCIke3BhdGh9XCJdYCk7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGNhcmQpIHtcclxuXHRcdFx0XHRcdFx0XHRcdGZvdW5kU2VsZWN0ZWRDYXJkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gQWxzbyBjaGVjayBpZiBjb250YWluZXIgaGFzIGFueSBjYXJkcyBhdCBhbGxcclxuXHRcdFx0XHRcdFx0Y29uc3QgYWxsQ2FyZHMgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkW2RhdGEtcGF0aF0nKTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmICghZm91bmRTZWxlY3RlZENhcmQgfHwgYWxsQ2FyZHMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmNsZWFyKCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5vblNlbGVjdGlvbkNsZWFyZWQoKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBPYnNlcnZlIHRoZSBjb250YWluZXIgZm9yIGNoaWxkIHJlbW92YWxzXHJcblx0XHRcdGlmICh0aGlzLmNvbnRhaW5lckVsKSB7XHJcblx0XHRcdFx0dGhpcy5tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy5jb250YWluZXJFbCwge1xyXG5cdFx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxyXG5cdFx0XHRcdFx0c3VidHJlZTogdHJ1ZVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHRjb25zdCBzdG9wT2JzZXJ2aW5nID0gKCkgPT4ge1xyXG5cdFx0XHRpZiAodGhpcy5tdXRhdGlvbk9ic2VydmVyKSB7XHJcblx0XHRcdFx0dGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdFx0XHR0aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSBudWxsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFdoZW4gb2JzZXJ2ZXIgc3RvcHMsIGl0IG1lYW5zIHNlbGVjdGlvbiBpcyBlbXB0eSBvciB2aWV3IHN3aXRjaGVkXHJcblx0XHRcdFx0Ly8gRm9yY2UgY2xlYXIgc2VsZWN0aW9uIGFuZCBoaWRlIHRvb2xiYXJcclxuXHRcdFx0XHRpZiAodGhpcy5zZWxlY3RlZEZpbGVzLnNpemUgPiAwKSB7XHJcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkRmlsZXMuY2xlYXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy5vblNlbGVjdGlvbkNsZWFyZWQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0Ly8gR2V0IGJhc2UgaWRlbnRpZmllciAtIHRyeSBtdWx0aXBsZSBtZXRob2RzXHJcblx0XHRjb25zdCBnZXRCYXNlSWRlbnRpZmllciA9ICgpOiBzdHJpbmcgfCBudWxsID0+IHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHQvLyBUcnkgdG8gZ2V0IGJhc2UgbmFtZSBmcm9tIGNvbmZpZ1xyXG5cdFx0XHRcdGlmICh0aGlzLmNvbmZpZz8uZ2V0TmFtZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMuY29uZmlnLmdldE5hbWUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKHRoaXMuY29uZmlnPy5uYW1lKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gU3RyaW5nKHRoaXMuY29uZmlnLm5hbWUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBUcnkgdG8gYWNjZXNzIGNvbnRyb2xsZXJcclxuXHRcdFx0XHRpZiAodGhpcy5jb250cm9sbGVyKSB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5jb250cm9sbGVyPy5nZXRCYXNlTmFtZSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5jb250cm9sbGVyLmdldEJhc2VOYW1lKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAodGhpcy5jb250cm9sbGVyPy5iYXNlTmFtZSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gU3RyaW5nKHRoaXMuY29udHJvbGxlci5iYXNlTmFtZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFRyeSB0byBnZXQgZnJvbSBkYXRhXHJcblx0XHRcdFx0aWYgKHRoaXMuZGF0YSkge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMuZGF0YS5iYXNlTmFtZSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gU3RyaW5nKHRoaXMuZGF0YS5iYXNlTmFtZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHQvLyBJZ25vcmUgZXJyb3JzXHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHQvLyBBbHNvIGNoZWNrIHBlcmlvZGljYWxseSBhcyBiYWNrdXAgKHNsb3dlciwgNTAwbXMpXHJcblx0XHRjb25zdCBiYWNrdXBDaGVjayA9ICgpID0+IHtcclxuXHRcdFx0aWYgKHRoaXMuc2VsZWN0ZWRGaWxlcy5zaXplID09PSAwKSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuYmFja3VwSW50ZXJ2YWwgIT09IG51bGwpIHtcclxuXHRcdFx0XHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuYmFja3VwSW50ZXJ2YWwpO1xyXG5cdFx0XHRcdFx0dGhpcy5iYWNrdXBJbnRlcnZhbCA9IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgYmFzZSBpZGVudGlmaWVyIGNoYW5nZWRcclxuXHRcdFx0Y29uc3QgY3VycmVudEJhc2VJZCA9IGdldEJhc2VJZGVudGlmaWVyKCk7XHJcblx0XHRcdGlmICh0aGlzLmN1cnJlbnRCYXNlSWRlbnRpZmllciAhPT0gbnVsbCAmJiBjdXJyZW50QmFzZUlkICE9PSBudWxsICYmIFxyXG5cdFx0XHRcdHRoaXMuY3VycmVudEJhc2VJZGVudGlmaWVyICE9PSBjdXJyZW50QmFzZUlkKSB7XHJcblx0XHRcdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmNsZWFyKCk7XHJcblx0XHRcdFx0dGhpcy5vblNlbGVjdGlvbkNsZWFyZWQoKTtcclxuXHRcdFx0XHRzdG9wT2JzZXJ2aW5nKCk7XHJcblx0XHRcdFx0aWYgKHRoaXMuYmFja3VwSW50ZXJ2YWwgIT09IG51bGwpIHtcclxuXHRcdFx0XHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuYmFja3VwSW50ZXJ2YWwpO1xyXG5cdFx0XHRcdFx0dGhpcy5iYWNrdXBJbnRlcnZhbCA9IG51bGw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgY29udGFpbmVyIGhhcyBjYXJkc1xyXG5cdFx0XHRjb25zdCBhbGxDYXJkcyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLmNhcmRbZGF0YS1wYXRoXScpO1xyXG5cdFx0XHRpZiAoYWxsQ2FyZHMubGVuZ3RoID09PSAwKSB7XHJcblx0XHRcdFx0dGhpcy5zZWxlY3RlZEZpbGVzLmNsZWFyKCk7XHJcblx0XHRcdFx0dGhpcy5vblNlbGVjdGlvbkNsZWFyZWQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0Ly8gU3RhcnQgb2JzZXJ2aW5nIHdoZW4gc2VsZWN0aW9uIGlzIG1hZGVcclxuXHRcdGNvbnN0IG9yaWdpbmFsSGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gaGFuZGxlU2VsZWN0aW9uQ2hhbmdlLmJpbmQodGhpcyk7XHJcblx0XHRjb25zdCB3cmFwcGVkSGFuZGxlU2VsZWN0aW9uQ2hhbmdlID0gKHBhdGg6IHN0cmluZywgc2VsZWN0ZWQ6IGJvb2xlYW4pID0+IHtcclxuXHRcdFx0b3JpZ2luYWxIYW5kbGVTZWxlY3Rpb25DaGFuZ2UocGF0aCwgc2VsZWN0ZWQpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gU3RhcnQgb2JzZXJ2aW5nIGlmIHdlIGhhdmUgc2VsZWN0aW9uLCBzdG9wIGlmIHdlIGRvbid0XHJcblx0XHRcdGlmICh0aGlzLnNlbGVjdGVkRmlsZXMuc2l6ZSA+IDApIHtcclxuXHRcdFx0XHQvLyBTdG9yZSBjdXJyZW50IGJhc2UgaWRlbnRpZmllciB3aGVuIHNlbGVjdGlvbiBzdGFydHNcclxuXHRcdFx0XHRpZiAodGhpcy5jdXJyZW50QmFzZUlkZW50aWZpZXIgPT09IG51bGwpIHtcclxuXHRcdFx0XHRcdHRoaXMuY3VycmVudEJhc2VJZGVudGlmaWVyID0gZ2V0QmFzZUlkZW50aWZpZXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0c3RhcnRPYnNlcnZpbmcoKTtcclxuXHRcdFx0XHQvLyBBbHNvIHN0YXJ0IGJhY2t1cCBpbnRlcnZhbCAtIHVzZSBwbHVnaW4ncyByZWdpc3RlckludGVydmFsIGZvciBwcm9wZXIgY2xlYW51cFxyXG5cdFx0XHRcdGlmICh0aGlzLmJhY2t1cEludGVydmFsID09PSBudWxsKSB7XHJcblx0XHRcdFx0XHR0aGlzLmJhY2t1cEludGVydmFsID0gdGhpcy5wbHVnaW4ucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwoYmFja3VwQ2hlY2ssIDUwMCkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBDbGVhciBiYXNlIGlkZW50aWZpZXIgd2hlbiBzZWxlY3Rpb24gaXMgZW1wdHlcclxuXHRcdFx0XHR0aGlzLmN1cnJlbnRCYXNlSWRlbnRpZmllciA9IG51bGw7XHJcblx0XHRcdFx0Ly8gU2VsZWN0aW9uIGJlY2FtZSBlbXB0eSAtIHN0b3Agb2JzZXJ2aW5nXHJcblx0XHRcdFx0c3RvcE9ic2VydmluZygpO1xyXG5cdFx0XHRcdGlmICh0aGlzLmJhY2t1cEludGVydmFsICE9PSBudWxsKSB7XHJcblx0XHRcdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmJhY2t1cEludGVydmFsKTtcclxuXHRcdFx0XHRcdHRoaXMuYmFja3VwSW50ZXJ2YWwgPSBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0Ly8gUmVnaXN0ZXIgY2xlYW51cFxyXG5cdFx0dGhpcy5yZWdpc3RlckNsZWFudXAoKCkgPT4ge1xyXG5cdFx0XHRzdG9wT2JzZXJ2aW5nKCk7XHJcblx0XHRcdGlmICh0aGlzLmJhY2t1cEludGVydmFsICE9PSBudWxsKSB7XHJcblx0XHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5iYWNrdXBJbnRlcnZhbCk7XHJcblx0XHRcdFx0dGhpcy5iYWNrdXBJbnRlcnZhbCA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiB3cmFwcGVkSGFuZGxlU2VsZWN0aW9uQ2hhbmdlO1xyXG5cdH1cclxuXHJcblx0Y2xlYW51cCgpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLm11dGF0aW9uT2JzZXJ2ZXIpIHtcclxuXHRcdFx0dGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdFx0dGhpcy5tdXRhdGlvbk9ic2VydmVyID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLmJhY2t1cEludGVydmFsICE9PSBudWxsKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuYmFja3VwSW50ZXJ2YWwpO1xyXG5cdFx0XHR0aGlzLmJhY2t1cEludGVydmFsID0gbnVsbDtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbiIsICJpbXBvcnQgeyBRdWVyeUNvbnRyb2xsZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB0eXBlIEJhc2VzQ01TUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQgeyBCYXNlc0NNU1ZpZXcsIENNU19WSUVXX1RZUEUgfSBmcm9tICcuLi92aWV3cy9jbXMtdmlldyc7XHJcblxyXG4vKipcclxuICogUmVnaXN0ZXIgdGhlIENNUyB2aWV3IHdpdGggdGhlIEJhc2VzIHBsdWdpblxyXG4gKiBIYW5kbGVzIGdyYWNlZnVsIGRlZ3JhZGF0aW9uIGlmIEJhc2VzIHBsdWdpbiBpcyBub3QgaW5zdGFsbGVkXHJcbiAqIEluY2x1ZGVzIHJldHJ5IGxvZ2ljIGZvciBtb2JpbGUgd2hlcmUgQmFzZXMgcGx1Z2luIG1heSBsb2FkIGxhdGVyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJCYXNlc0NNU1ZpZXcocGx1Z2luOiBCYXNlc0NNU1BsdWdpbiwgcmV0cmllcyA9IDUpOiB2b2lkIHtcclxuXHR0cnkge1xyXG5cdFx0Y29uc3QgYmFzZXNQbHVnaW4gPSBwbHVnaW4gYXMgeyByZWdpc3RlckJhc2VzVmlldz86ICh0eXBlOiBzdHJpbmcsIGNvbmZpZzogeyBuYW1lOiBzdHJpbmc7IGljb246IHN0cmluZzsgZmFjdG9yeTogKGNvbnRyb2xsZXI6IFF1ZXJ5Q29udHJvbGxlciwgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSA9PiBCYXNlc0NNU1ZpZXc7IG9wdGlvbnM6ICgpID0+IHVua25vd25bXSB9KSA9PiB2b2lkIH07XHJcblx0XHRpZiAodHlwZW9mIGJhc2VzUGx1Z2luLnJlZ2lzdGVyQmFzZXNWaWV3ID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdGJhc2VzUGx1Z2luLnJlZ2lzdGVyQmFzZXNWaWV3KENNU19WSUVXX1RZUEUsIHtcclxuXHRcdFx0XHRuYW1lOiAnQ01TJyxcclxuXHRcdFx0XHRpY29uOiBwbHVnaW4uc2V0dGluZ3MudXNlSG9tZUljb24gPyAnbHVjaWRlLWhvbWUnIDogJ2x1Y2lkZS1ibG9ja3MnLFxyXG5cdFx0XHRcdGZhY3Rvcnk6IChjb250cm9sbGVyOiBRdWVyeUNvbnRyb2xsZXIsIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgdmlldyA9IG5ldyBCYXNlc0NNU1ZpZXcoY29udHJvbGxlciwgY29udGFpbmVyRWwsIHBsdWdpbik7XHJcblx0XHRcdFx0XHQvLyBBZGQgdmlldyB0byBwbHVnaW4ncyBhY3RpdmUgdmlld3MgdHJhY2tpbmdcclxuXHRcdFx0XHRcdGNvbnN0IHBsdWdpbldpdGhWaWV3cyA9IHBsdWdpbiBhcyB7IGFjdGl2ZVZpZXdzPzogU2V0PEJhc2VzQ01TVmlldz4gfTtcclxuXHRcdFx0XHRcdGlmIChwbHVnaW5XaXRoVmlld3MuYWN0aXZlVmlld3MpIHtcclxuXHRcdFx0XHRcdFx0cGx1Z2luV2l0aFZpZXdzLmFjdGl2ZVZpZXdzLmFkZCh2aWV3KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiB2aWV3O1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0b3B0aW9uczogZ2V0Q01TVmlld09wdGlvbnMoKVxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSBpZiAocmV0cmllcyA+IDApIHtcclxuXHRcdFx0Ly8gTWV0aG9kIG5vdCBhdmFpbGFibGUgeWV0LCByZXRyeSBhZnRlciBhIHNob3J0IGRlbGF5IChjb21tb24gb24gbW9iaWxlKVxyXG5cdFx0XHQvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZW91dCBiZWZvcmUgc2V0dGluZyBhIG5ldyBvbmVcclxuXHRcdFx0Y29uc3QgcGx1Z2luV2l0aFRpbWVvdXQgPSBwbHVnaW4gYXMgeyByZWdpc3RyYXRpb25UaW1lb3V0PzogbnVtYmVyIHwgbnVsbCB9O1xyXG5cdFx0XHRjb25zdCByZWdpc3RyYXRpb25UaW1lb3V0ID0gcGx1Z2luV2l0aFRpbWVvdXQucmVnaXN0cmF0aW9uVGltZW91dDtcclxuXHRcdFx0aWYgKHJlZ2lzdHJhdGlvblRpbWVvdXQgIT09IG51bGwgJiYgcmVnaXN0cmF0aW9uVGltZW91dCAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0d2luZG93LmNsZWFyVGltZW91dChyZWdpc3RyYXRpb25UaW1lb3V0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRwbHVnaW5XaXRoVGltZW91dC5yZWdpc3RyYXRpb25UaW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHBsdWdpbldpdGhUaW1lb3V0LnJlZ2lzdHJhdGlvblRpbWVvdXQgPSBudWxsO1xyXG5cdFx0XHRcdHJlZ2lzdGVyQmFzZXNDTVNWaWV3KHBsdWdpbiwgcmV0cmllcyAtIDEpO1xyXG5cdFx0XHR9LCAyMDApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCdCYXNlcyBDTVM6IHJlZ2lzdGVyQmFzZXNWaWV3IG5vdCBhdmFpbGFibGUuIElzIEJhc2VzIHBsdWdpbiBpbnN0YWxsZWQ/Jyk7XHJcblx0XHR9XHJcblx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdGNvbnNvbGUuZXJyb3IoJ0Jhc2VzIENNUzogRXJyb3IgcmVnaXN0ZXJpbmcgdmlldzonLCBlcnJvcik7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IENNUyB2aWV3IG9wdGlvbnMgZm9yIEJhc2UgcGx1Z2luIGNvbmZpZ3VyYXRpb25cclxuICovXHJcbmZ1bmN0aW9uIGdldENNU1ZpZXdPcHRpb25zKCk6ICgpID0+IHVua25vd25bXSB7XHJcblx0Ly8gRHluYW1pYyBpbXBvcnQgdG8gYXZvaWQgY2lyY3VsYXIgZGVwZW5kZW5jeVxyXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcmVxdWlyZS1pbXBvcnRzLCBuby11bmRlZiAtLSBOZWVkIGR5bmFtaWMgaW1wb3J0IGZvciBjaXJjdWxhciBkZXBlbmRlbmN5XHJcblx0Y29uc3QgeyBnZXRDTVNWaWV3T3B0aW9ucyB9ID0gcmVxdWlyZSgnLi4vc2hhcmVkL3NldHRpbmdzLXNjaGVtYScpIGFzIHsgZ2V0Q01TVmlld09wdGlvbnM6ICgpID0+IHVua25vd25bXSB9O1xyXG5cdHJldHVybiBnZXRDTVNWaWV3T3B0aW9ucztcclxufVxyXG5cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVdPLFNBQVMsVUFBVSxNQUFzQjtBQUMvQyxTQUFPLEtBQUssY0FBYztBQUMzQjtBQU1PLFNBQVMsb0JBQ2YsU0FDZ0U7QUFDaEUsUUFBTSxtQkFBbUI7QUFDekIsUUFBTSxRQUFRLFFBQVEsTUFBTSxnQkFBZ0I7QUFFNUMsTUFBSSxDQUFDLE9BQU87QUFFWCxXQUFPO0FBQUEsTUFDTixhQUFhLENBQUM7QUFBQSxNQUNkLE1BQU07QUFBQSxJQUNQ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QUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxRQUNWO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQTtBQUFBLElBRUE7QUFBQSxNQUNDLE1BQU07QUFBQSxNQUNOLGFBQWE7QUFBQSxNQUNiLE9BQU87QUFBQSxRQUNOO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxJQUVBO0FBQUEsTUFDQyxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFDYixPQUFPO0FBQUEsUUFDTjtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLE1BQU07QUFBQSxVQUNOLFNBQVM7QUFBQSxVQUNULFVBQVU7QUFBQSxZQUNULEtBQUs7QUFBQSxZQUNMLE9BQU87QUFBQSxVQUNSO0FBQUEsUUFDRDtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxJQUVBO0FBQUEsTUFDQyxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFDYixPQUFPO0FBQUEsUUFDTjtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFlBQ1IsUUFBUTtBQUFBLFlBQ1IsVUFBVTtBQUFBLFlBQ1YsU0FBUztBQUFBLFVBQ1Y7QUFBQSxVQUNBLFNBQVM7QUFBQSxRQUNWO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQTtBQUFBLElBRUE7QUFBQSxNQUNDLE1BQU07QUFBQSxNQUNOLGFBQWE7QUFBQSxNQUNiLE9BQU87QUFBQSxRQUNOO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsWUFDUixPQUFPO0FBQUEsWUFDUCxVQUFVO0FBQUEsVUFDWDtBQUFBLFVBQ0EsU0FBUztBQUFBLFFBQ1Y7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBO0FBQUEsSUFFQTtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBLFFBQ047QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxZQUNSLE9BQU87QUFBQSxZQUNQLFVBQVU7QUFBQSxVQUNYO0FBQUEsVUFDQSxTQUFTO0FBQUEsUUFDVjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxJQUVBO0FBQUEsTUFDQyxNQUFNO0FBQUEsTUFDTixhQUFhO0FBQUEsTUFDYixPQUFPO0FBQUEsUUFDTjtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFlBQ1IsT0FBTztBQUFBLFlBQ1AsVUFBVTtBQUFBLFVBQ1g7QUFBQSxVQUNBLFNBQVM7QUFBQSxRQUNWO0FBQUEsTUFDRDtBQUFBLElBQ0Q7QUFBQTtBQUFBLElBRUE7QUFBQSxNQUNDLE1BQU07QUFBQSxNQUNOLGFBQWE7QUFBQSxNQUNiLE9BQU87QUFBQSxRQUNOO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxhQUFhO0FBQUEsVUFDYixTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsWUFDUixPQUFPO0FBQUEsWUFDUCxVQUFVO0FBQUEsVUFDWDtBQUFBLFVBQ0EsU0FBUztBQUFBLFFBQ1Y7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUFBO0FBQUEsSUFFQTtBQUFBLE1BQ0MsTUFBTTtBQUFBLE1BQ04sYUFBYTtBQUFBLE1BQ2IsT0FBTztBQUFBLFFBQ047QUFBQSxVQUNDLE1BQU07QUFBQSxVQUNOLGFBQWE7QUFBQSxVQUNiLEtBQUs7QUFBQSxVQUNMLGFBQWE7QUFBQSxVQUNiLFNBQVM7QUFBQSxRQUNWO0FBQUEsUUFDQTtBQUFBLFVBQ0MsTUFBTTtBQUFBLFVBQ04sYUFBYTtBQUFBLFVBQ2IsS0FBSztBQUFBLFVBQ0wsYUFBYTtBQUFBLFVBQ2IsU0FBUztBQUFBLFFBQ1Y7QUFBQSxRQUNBO0FBQUEsVUFDQyxNQUFNO0FBQUEsVUFDTixhQUFhO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDVjtBQUFBLFFBQ0E7QUFBQSxV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QUFlLEVBQUUsS0FBSztBQUNoRCxXQUFTLGlCQUFpQixlQUFlLEVBQUUsS0FBSztBQUNoRCxXQUFTLGlCQUFpQixlQUFlLEVBQUUsS0FBSztBQUNoRCxXQUFTLGlCQUFpQixlQUFlLEVBQUUsS0FBSztBQUloRCxXQUFTLFlBQVksZUFBZSxDQUFDLElBQUksTUFBTSwwQkFBMEIsZUFBZSxDQUFDLEdBQUcsT0FBTyxVQUFVLFVBQVUsS0FBSyxtQkFBbUIsSUFBSTtBQUNuSixXQUFTLFlBQVksZUFBZSxDQUFDLElBQUksTUFBTSwwQkFBMEIsZUFBZSxDQUFDLEdBQUcsT0FBTyxVQUFVLFVBQVUsS0FBSyxtQkFBbUIsSUFBSTtBQUNuSixXQUFTLFlBQVksZUFBZSxDQUFDLElBQUksTUFBTSwwQkFBMEIsZUFBZSxDQUFDLEdBQUcsT0FBTyxVQUFVLFVBQVUsS0FBSyxtQkFBbUIsSUFBSTtBQUNuSixXQUFTLFlBQVksZUFBZSxDQUFDLElBQUksTUFBTSwwQkFBMEIsZUFBZSxDQUFDLEdBQUcsT0FBTyxVQUFVLFVBQVUsS0FBSyxtQkFBbUIsSUFBSTtBQUNuSixXQUFTLFlBQVksZUFBZSxDQUFDLElBQUksTUFBTSwwQkFBMEIsZUFBZSxDQUFDLEdBQUcsT0FBTyxVQUFVLFVBQVUsS0FBSyxtQkFBbUIsSUFBSTtBQUNuSixXQUFTLFlBQVksZUFBZSxDQUFDLElBQUksTUFBTSwwQkFBMEIsZUFBZSxDQUFDLEdBQUcsT0FBTyxVQUFVLFVBQVUsS0FBSyxtQkFBbUIsSUFBSTtBQUNuSixXQUFTLFlBQVksZUFBZSxDQUFDLElBQUksTUFBTSwwQkFBMEIsZUFBZSxDQUFDLEdBQUcsT0FBTyxVQUFVLFVBQVUsS0FBSyxtQkFBbUIsSUFBSTtBQUNuSixXQUFTLFlBQVksZUFBZSxDQUFDLElBQUksTUFBTSwwQkFBMEIsZUFBZSxDQUFDLEdBQUcsT0FBTyxVQUFVLFVBQVUsS0FBSyxtQkFBbUIsSUFBSTtBQUNuSixXQUFTLFlBQVksZUFBZSxDQUFDLElBQUksTUFBTSwwQkFBMEIsZUFBZSxDQUFDLEdBQUcsT0FBTyxVQUFV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LFNBQUssWUFBWSxPQUFPLElBQUk7QUFBQSxFQUM3QjtBQUVEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgInVuaXF1ZUF0dGFjaG1lbnRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJjb21tYW5kUmVnaXN0cnkiLCAiY29tbWFuZCIsICJlIiwgIl9hIiwgIl9iIiwgImltcG9ydF9vYnNpZGlhbiIsICJlIiwgInRpdGxlRWwiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYnV0dG9ucyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZSIsICJwcmVwYXJlRGVsZXRpb25QcmV2aWV3IiwgImV4ZWN1dGVTbWFydERlbGV0aW9uIiwgIkRlbGV0aW9uUHJldmlld01vZGFsIiwgImdldENNU1ZpZXdPcHRpb25zIl0KfQo=
